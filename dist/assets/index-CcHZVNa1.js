(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Sm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function xm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Vd={exports:{}},lo={},Gd={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $s=Symbol.for("react.element"),km=Symbol.for("react.portal"),jm=Symbol.for("react.fragment"),Nm=Symbol.for("react.strict_mode"),Em=Symbol.for("react.profiler"),Cm=Symbol.for("react.provider"),bm=Symbol.for("react.context"),Tm=Symbol.for("react.forward_ref"),Pm=Symbol.for("react.suspense"),Am=Symbol.for("react.memo"),Om=Symbol.for("react.lazy"),rc=Symbol.iterator;function Rm(e){return e===null||typeof e!="object"?null:(e=rc&&e[rc]||e["@@iterator"],typeof e=="function"?e:null)}var Kd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qd=Object.assign,Jd={};function Pr(e,t,n){this.props=e,this.context=t,this.refs=Jd,this.updater=n||Kd}Pr.prototype.isReactComponent={};Pr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Yd(){}Yd.prototype=Pr.prototype;function Pl(e,t,n){this.props=e,this.context=t,this.refs=Jd,this.updater=n||Kd}var Al=Pl.prototype=new Yd;Al.constructor=Pl;Qd(Al,Pr.prototype);Al.isPureReactComponent=!0;var sc=Array.isArray,Xd=Object.prototype.hasOwnProperty,Ol={current:null},Zd={key:!0,ref:!0,__self:!0,__source:!0};function eh(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Xd.call(t,r)&&!Zd.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:$s,type:e,key:i,ref:o,props:s,_owner:Ol.current}}function Dm(e,t){return{$$typeof:$s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rl(e){return typeof e=="object"&&e!==null&&e.$$typeof===$s}function Im(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ic=/\/+/g;function Uo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Im(""+e.key):t.toString(36)}function wi(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case $s:case km:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Uo(o,0):r,sc(s)?(n="",e!=null&&(n=e.replace(ic,"$&/")+"/"),wi(s,t,n,"",function(c){return c})):s!=null&&(Rl(s)&&(s=Dm(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ic,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",sc(e))for(var a=0;a<e.length;a++){i=e[a];var u=r+Uo(i,a);o+=wi(i,t,n,u,s)}else if(u=Rm(e),typeof u=="function")for(e=u.call(e),a=0;!(i=e.next()).done;)i=i.value,u=r+Uo(i,a++),o+=wi(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ks(e,t,n){if(e==null)return e;var r=[],s=0;return wi(e,r,"","",function(i){return t.call(n,i,s++)}),r}function $m(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ke={current:null},_i={transition:null},Lm={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:_i,ReactCurrentOwner:Ol};function th(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Ks,forEach:function(e,t,n){Ks(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ks(e,function(){t++}),t},toArray:function(e){return Ks(e,function(t){return t})||[]},only:function(e){if(!Rl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=Pr;ee.Fragment=jm;ee.Profiler=Em;ee.PureComponent=Pl;ee.StrictMode=Nm;ee.Suspense=Pm;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lm;ee.act=th;ee.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Qd({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ol.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Xd.call(t,u)&&!Zd.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:$s,type:e.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(e){return e={$$typeof:bm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Cm,_context:e},e.Consumer=e};ee.createElement=eh;ee.createFactory=function(e){var t=eh.bind(null,e);return t.type=e,t};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:Tm,render:e}};ee.isValidElement=Rl;ee.lazy=function(e){return{$$typeof:Om,_payload:{_status:-1,_result:e},_init:$m}};ee.memo=function(e,t){return{$$typeof:Am,type:e,compare:t===void 0?null:t}};ee.startTransition=function(e){var t=_i.transition;_i.transition={};try{e()}finally{_i.transition=t}};ee.unstable_act=th;ee.useCallback=function(e,t){return Ke.current.useCallback(e,t)};ee.useContext=function(e){return Ke.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return Ke.current.useDeferredValue(e)};ee.useEffect=function(e,t){return Ke.current.useEffect(e,t)};ee.useId=function(){return Ke.current.useId()};ee.useImperativeHandle=function(e,t,n){return Ke.current.useImperativeHandle(e,t,n)};ee.useInsertionEffect=function(e,t){return Ke.current.useInsertionEffect(e,t)};ee.useLayoutEffect=function(e,t){return Ke.current.useLayoutEffect(e,t)};ee.useMemo=function(e,t){return Ke.current.useMemo(e,t)};ee.useReducer=function(e,t,n){return Ke.current.useReducer(e,t,n)};ee.useRef=function(e){return Ke.current.useRef(e)};ee.useState=function(e){return Ke.current.useState(e)};ee.useSyncExternalStore=function(e,t,n){return Ke.current.useSyncExternalStore(e,t,n)};ee.useTransition=function(){return Ke.current.useTransition()};ee.version="18.3.1";Gd.exports=ee;var b=Gd.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=b,Um=Symbol.for("react.element"),Bm=Symbol.for("react.fragment"),Fm=Object.prototype.hasOwnProperty,zm=Mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qm={key:!0,ref:!0,__self:!0,__source:!0};function nh(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Fm.call(t,r)&&!qm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Um,type:e,key:i,ref:o,props:s,_owner:zm.current}}lo.Fragment=Bm;lo.jsx=nh;lo.jsxs=nh;Vd.exports=lo;var l=Vd.exports,rh={exports:{}},lt={},sh={exports:{}},ih={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,U){var q=D.length;D.push(U);e:for(;0<q;){var Y=q-1>>>1,K=D[Y];if(0<s(K,U))D[Y]=U,D[q]=K,q=Y;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var U=D[0],q=D.pop();if(q!==U){D[0]=q;e:for(var Y=0,K=D.length,ce=K>>>1;Y<ce;){var xe=2*(Y+1)-1,$t=D[xe],qe=xe+1,We=D[qe];if(0>s($t,q))qe<K&&0>s(We,$t)?(D[Y]=We,D[qe]=q,Y=qe):(D[Y]=$t,D[xe]=q,Y=xe);else if(qe<K&&0>s(We,q))D[Y]=We,D[qe]=q,Y=qe;else break e}}return U}function s(D,U){var q=D.sortIndex-U.sortIndex;return q!==0?q:D.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,h=null,g=3,v=!1,k=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=D)r(c),U.sortIndex=U.expirationTime,t(u,U);else break;U=n(c)}}function _(D){if(x=!1,y(D),!k)if(n(u)!==null)k=!0,z(w);else{var U=n(c);U!==null&&G(_,U.startTime-D)}}function w(D,U){k=!1,x&&(x=!1,p(T),T=-1),v=!0;var q=g;try{for(y(U),h=n(u);h!==null&&(!(h.expirationTime>U)||D&&!se());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,g=h.priorityLevel;var K=Y(h.expirationTime<=U);U=e.unstable_now(),typeof K=="function"?h.callback=K:h===n(u)&&r(u),y(U)}else r(u);h=n(u)}if(h!==null)var ce=!0;else{var xe=n(c);xe!==null&&G(_,xe.startTime-U),ce=!1}return ce}finally{h=null,g=q,v=!1}}var N=!1,j=null,T=-1,F=5,H=-1;function se(){return!(e.unstable_now()-H<F)}function ie(){if(j!==null){var D=e.unstable_now();H=D;var U=!0;try{U=j(!0,D)}finally{U?Te():(N=!1,j=null)}}else N=!1}var Te;if(typeof m=="function")Te=function(){m(ie)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,R=ae.port2;ae.port1.onmessage=ie,Te=function(){R.postMessage(null)}}else Te=function(){C(ie,0)};function z(D){j=D,N||(N=!0,Te())}function G(D,U){T=C(function(){D(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){k||v||(k=!0,z(w))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(D){switch(g){case 1:case 2:case 3:var U=3;break;default:U=g}var q=g;g=U;try{return D()}finally{g=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,U){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var q=g;g=D;try{return U()}finally{g=q}},e.unstable_scheduleCallback=function(D,U,q){var Y=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Y+q:Y):q=Y,D){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=q+K,D={id:d++,callback:U,priorityLevel:D,startTime:q,expirationTime:K,sortIndex:-1},q>Y?(D.sortIndex=q,t(c,D),n(u)===null&&D===n(c)&&(x?(p(T),T=-1):x=!0,G(_,q-Y))):(D.sortIndex=K,t(u,D),k||v||(k=!0,z(w))),D},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(D){var U=g;return function(){var q=g;g=U;try{return D.apply(this,arguments)}finally{g=q}}}})(ih);sh.exports=ih;var Wm=sh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm=b,at=Wm;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oh=new Set,vs={};function Wn(e,t){xr(e,t),xr(e+"Capture",t)}function xr(e,t){for(vs[e]=t,e=0;e<t.length;e++)oh.add(t[e])}var Ht=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Na=Object.prototype.hasOwnProperty,Vm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oc={},ac={};function Gm(e){return Na.call(ac,e)?!0:Na.call(oc,e)?!1:Vm.test(e)?ac[e]=!0:(oc[e]=!0,!1)}function Km(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Qm(e,t,n,r){if(t===null||typeof t>"u"||Km(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qe(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$e[e]=new Qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$e[t]=new Qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$e[e]=new Qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$e[e]=new Qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$e[e]=new Qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$e[e]=new Qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$e[e]=new Qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$e[e]=new Qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$e[e]=new Qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Dl=/[\-:]([a-z])/g;function Il(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Dl,Il);$e[t]=new Qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Dl,Il);$e[t]=new Qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Dl,Il);$e[t]=new Qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$e[e]=new Qe(e,1,!1,e.toLowerCase(),null,!1,!1)});$e.xlinkHref=new Qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$e[e]=new Qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function $l(e,t,n,r){var s=$e.hasOwnProperty(t)?$e[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Qm(t,n,s,r)&&(n=null),r||s===null?Gm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Qt=Hm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qs=Symbol.for("react.element"),sr=Symbol.for("react.portal"),ir=Symbol.for("react.fragment"),Ll=Symbol.for("react.strict_mode"),Ea=Symbol.for("react.profiler"),ah=Symbol.for("react.provider"),lh=Symbol.for("react.context"),Ml=Symbol.for("react.forward_ref"),Ca=Symbol.for("react.suspense"),ba=Symbol.for("react.suspense_list"),Ul=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),uh=Symbol.for("react.offscreen"),lc=Symbol.iterator;function qr(e){return e===null||typeof e!="object"?null:(e=lc&&e[lc]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,Bo;function Zr(e){if(Bo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bo=t&&t[1]||""}return`
`+Bo+e}var Fo=!1;function zo(e,t){if(!e||Fo)return"";Fo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{Fo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Zr(e):""}function Jm(e){switch(e.tag){case 5:return Zr(e.type);case 16:return Zr("Lazy");case 13:return Zr("Suspense");case 19:return Zr("SuspenseList");case 0:case 2:case 15:return e=zo(e.type,!1),e;case 11:return e=zo(e.type.render,!1),e;case 1:return e=zo(e.type,!0),e;default:return""}}function Ta(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ir:return"Fragment";case sr:return"Portal";case Ea:return"Profiler";case Ll:return"StrictMode";case Ca:return"Suspense";case ba:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case lh:return(e.displayName||"Context")+".Consumer";case ah:return(e._context.displayName||"Context")+".Provider";case Ml:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ul:return t=e.displayName||null,t!==null?t:Ta(e.type)||"Memo";case tn:t=e._payload,e=e._init;try{return Ta(e(t))}catch{}}return null}function Ym(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ta(t);case 8:return t===Ll?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ch(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xm(e){var t=ch(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Js(e){e._valueTracker||(e._valueTracker=Xm(e))}function dh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ch(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ii(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pa(e,t){var n=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function uc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hh(e,t){t=t.checked,t!=null&&$l(e,"checked",t,!1)}function Aa(e,t){hh(e,t);var n=yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Oa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Oa(e,t.type,yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Oa(e,t,n){(t!=="number"||Ii(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var es=Array.isArray;function gr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ra(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(O(92));if(es(n)){if(1<n.length)throw Error(O(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yn(n)}}function fh(e,t){var n=yn(t.value),r=yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function hc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ph(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Da(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ph(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ys,mh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ys=Ys||document.createElement("div"),Ys.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ys.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ws(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zm=["Webkit","ms","Moz","O"];Object.keys(ss).forEach(function(e){Zm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ss[t]=ss[e]})});function gh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ss.hasOwnProperty(e)&&ss[e]?(""+t).trim():t+"px"}function yh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=gh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var eg=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ia(e,t){if(t){if(eg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function $a(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var La=null;function Bl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ma=null,yr=null,vr=null;function fc(e){if(e=Us(e)){if(typeof Ma!="function")throw Error(O(280));var t=e.stateNode;t&&(t=po(t),Ma(e.stateNode,e.type,t))}}function vh(e){yr?vr?vr.push(e):vr=[e]:yr=e}function wh(){if(yr){var e=yr,t=vr;if(vr=yr=null,fc(e),t)for(e=0;e<t.length;e++)fc(t[e])}}function _h(e,t){return e(t)}function Sh(){}var qo=!1;function xh(e,t,n){if(qo)return e(t,n);qo=!0;try{return _h(e,t,n)}finally{qo=!1,(yr!==null||vr!==null)&&(Sh(),wh())}}function _s(e,t){var n=e.stateNode;if(n===null)return null;var r=po(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var Ua=!1;if(Ht)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){Ua=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{Ua=!1}function tg(e,t,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var is=!1,$i=null,Li=!1,Ba=null,ng={onError:function(e){is=!0,$i=e}};function rg(e,t,n,r,s,i,o,a,u){is=!1,$i=null,tg.apply(ng,arguments)}function sg(e,t,n,r,s,i,o,a,u){if(rg.apply(this,arguments),is){if(is){var c=$i;is=!1,$i=null}else throw Error(O(198));Li||(Li=!0,Ba=c)}}function Hn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pc(e){if(Hn(e)!==e)throw Error(O(188))}function ig(e){var t=e.alternate;if(!t){if(t=Hn(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return pc(s),e;if(i===r)return pc(s),t;i=i.sibling}throw Error(O(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function jh(e){return e=ig(e),e!==null?Nh(e):null}function Nh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Nh(e);if(t!==null)return t;e=e.sibling}return null}var Eh=at.unstable_scheduleCallback,mc=at.unstable_cancelCallback,og=at.unstable_shouldYield,ag=at.unstable_requestPaint,_e=at.unstable_now,lg=at.unstable_getCurrentPriorityLevel,Fl=at.unstable_ImmediatePriority,Ch=at.unstable_UserBlockingPriority,Mi=at.unstable_NormalPriority,ug=at.unstable_LowPriority,bh=at.unstable_IdlePriority,uo=null,Rt=null;function cg(e){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(uo,e,void 0,(e.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:fg,dg=Math.log,hg=Math.LN2;function fg(e){return e>>>=0,e===0?32:31-(dg(e)/hg|0)|0}var Xs=64,Zs=4194304;function ts(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ui(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ts(a):(i&=o,i!==0&&(r=ts(i)))}else o=n&~s,o!==0?r=ts(o):i!==0&&(r=ts(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Nt(t),s=1<<n,r|=e[n],t&=~s;return r}function pg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Nt(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=pg(a,t)):u<=t&&(e.expiredLanes|=a),i&=~a}}function Fa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Th(){var e=Xs;return Xs<<=1,!(Xs&4194240)&&(Xs=64),e}function Wo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ls(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nt(t),e[t]=n}function gg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Nt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function zl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Nt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var oe=0;function Ph(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ah,ql,Oh,Rh,Dh,za=!1,ei=[],un=null,cn=null,dn=null,Ss=new Map,xs=new Map,rn=[],yg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gc(e,t){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":Ss.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(t.pointerId)}}function Hr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Us(t),t!==null&&ql(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function vg(e,t,n,r,s){switch(t){case"focusin":return un=Hr(un,e,t,n,r,s),!0;case"dragenter":return cn=Hr(cn,e,t,n,r,s),!0;case"mouseover":return dn=Hr(dn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ss.set(i,Hr(Ss.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,xs.set(i,Hr(xs.get(i)||null,e,t,n,r,s)),!0}return!1}function Ih(e){var t=Rn(e.target);if(t!==null){var n=Hn(t);if(n!==null){if(t=n.tag,t===13){if(t=kh(n),t!==null){e.blockedOn=t,Dh(e.priority,function(){Oh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Si(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=qa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);La=r,n.target.dispatchEvent(r),La=null}else return t=Us(n),t!==null&&ql(t),e.blockedOn=n,!1;t.shift()}return!0}function yc(e,t,n){Si(e)&&n.delete(t)}function wg(){za=!1,un!==null&&Si(un)&&(un=null),cn!==null&&Si(cn)&&(cn=null),dn!==null&&Si(dn)&&(dn=null),Ss.forEach(yc),xs.forEach(yc)}function Vr(e,t){e.blockedOn===t&&(e.blockedOn=null,za||(za=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,wg)))}function ks(e){function t(s){return Vr(s,e)}if(0<ei.length){Vr(ei[0],e);for(var n=1;n<ei.length;n++){var r=ei[n];r.blockedOn===e&&(r.blockedOn=null)}}for(un!==null&&Vr(un,e),cn!==null&&Vr(cn,e),dn!==null&&Vr(dn,e),Ss.forEach(t),xs.forEach(t),n=0;n<rn.length;n++)r=rn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<rn.length&&(n=rn[0],n.blockedOn===null);)Ih(n),n.blockedOn===null&&rn.shift()}var wr=Qt.ReactCurrentBatchConfig,Bi=!0;function _g(e,t,n,r){var s=oe,i=wr.transition;wr.transition=null;try{oe=1,Wl(e,t,n,r)}finally{oe=s,wr.transition=i}}function Sg(e,t,n,r){var s=oe,i=wr.transition;wr.transition=null;try{oe=4,Wl(e,t,n,r)}finally{oe=s,wr.transition=i}}function Wl(e,t,n,r){if(Bi){var s=qa(e,t,n,r);if(s===null)ea(e,t,r,Fi,n),gc(e,r);else if(vg(s,e,t,n,r))r.stopPropagation();else if(gc(e,r),t&4&&-1<yg.indexOf(e)){for(;s!==null;){var i=Us(s);if(i!==null&&Ah(i),i=qa(e,t,n,r),i===null&&ea(e,t,r,Fi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ea(e,t,r,null,n)}}var Fi=null;function qa(e,t,n,r){if(Fi=null,e=Bl(r),e=Rn(e),e!==null)if(t=Hn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fi=e,null}function $h(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lg()){case Fl:return 1;case Ch:return 4;case Mi:case ug:return 16;case bh:return 536870912;default:return 16}default:return 16}}var an=null,Hl=null,xi=null;function Lh(){if(xi)return xi;var e,t=Hl,n=t.length,r,s="value"in an?an.value:an.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return xi=s.slice(e,1<r?1-r:void 0)}function ki(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ti(){return!0}function vc(){return!1}function ut(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ti:vc,this.isPropagationStopped=vc,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),t}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vl=ut(Ar),Ms=ye({},Ar,{view:0,detail:0}),xg=ut(Ms),Ho,Vo,Gr,co=ye({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gr&&(Gr&&e.type==="mousemove"?(Ho=e.screenX-Gr.screenX,Vo=e.screenY-Gr.screenY):Vo=Ho=0,Gr=e),Ho)},movementY:function(e){return"movementY"in e?e.movementY:Vo}}),wc=ut(co),kg=ye({},co,{dataTransfer:0}),jg=ut(kg),Ng=ye({},Ms,{relatedTarget:0}),Go=ut(Ng),Eg=ye({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),Cg=ut(Eg),bg=ye({},Ar,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tg=ut(bg),Pg=ye({},Ar,{data:0}),_c=ut(Pg),Ag={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Og={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Rg[e])?!!t[e]:!1}function Gl(){return Dg}var Ig=ye({},Ms,{key:function(e){if(e.key){var t=Ag[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ki(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Og[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gl,charCode:function(e){return e.type==="keypress"?ki(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ki(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$g=ut(Ig),Lg=ye({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sc=ut(Lg),Mg=ye({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gl}),Ug=ut(Mg),Bg=ye({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fg=ut(Bg),zg=ye({},co,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qg=ut(zg),Wg=[9,13,27,32],Kl=Ht&&"CompositionEvent"in window,os=null;Ht&&"documentMode"in document&&(os=document.documentMode);var Hg=Ht&&"TextEvent"in window&&!os,Mh=Ht&&(!Kl||os&&8<os&&11>=os),xc=" ",kc=!1;function Uh(e,t){switch(e){case"keyup":return Wg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var or=!1;function Vg(e,t){switch(e){case"compositionend":return Bh(t);case"keypress":return t.which!==32?null:(kc=!0,xc);case"textInput":return e=t.data,e===xc&&kc?null:e;default:return null}}function Gg(e,t){if(or)return e==="compositionend"||!Kl&&Uh(e,t)?(e=Lh(),xi=Hl=an=null,or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mh&&t.locale!=="ko"?null:t.data;default:return null}}var Kg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Kg[e.type]:t==="textarea"}function Fh(e,t,n,r){vh(r),t=zi(t,"onChange"),0<t.length&&(n=new Vl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var as=null,js=null;function Qg(e){Xh(e,0)}function ho(e){var t=ur(e);if(dh(t))return e}function Jg(e,t){if(e==="change")return t}var zh=!1;if(Ht){var Ko;if(Ht){var Qo="oninput"in document;if(!Qo){var Nc=document.createElement("div");Nc.setAttribute("oninput","return;"),Qo=typeof Nc.oninput=="function"}Ko=Qo}else Ko=!1;zh=Ko&&(!document.documentMode||9<document.documentMode)}function Ec(){as&&(as.detachEvent("onpropertychange",qh),js=as=null)}function qh(e){if(e.propertyName==="value"&&ho(js)){var t=[];Fh(t,js,e,Bl(e)),xh(Qg,t)}}function Yg(e,t,n){e==="focusin"?(Ec(),as=t,js=n,as.attachEvent("onpropertychange",qh)):e==="focusout"&&Ec()}function Xg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ho(js)}function Zg(e,t){if(e==="click")return ho(t)}function ey(e,t){if(e==="input"||e==="change")return ho(t)}function ty(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:ty;function Ns(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Na.call(t,s)||!Ct(e[s],t[s]))return!1}return!0}function Cc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bc(e,t){var n=Cc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cc(n)}}function Wh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hh(){for(var e=window,t=Ii();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ii(e.document)}return t}function Ql(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ny(e){var t=Hh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Wh(n.ownerDocument.documentElement,n)){if(r!==null&&Ql(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=bc(n,i);var o=bc(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ry=Ht&&"documentMode"in document&&11>=document.documentMode,ar=null,Wa=null,ls=null,Ha=!1;function Tc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ha||ar==null||ar!==Ii(r)||(r=ar,"selectionStart"in r&&Ql(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ls&&Ns(ls,r)||(ls=r,r=zi(Wa,"onSelect"),0<r.length&&(t=new Vl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function ni(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var lr={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionend:ni("Transition","TransitionEnd")},Jo={},Vh={};Ht&&(Vh=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);function fo(e){if(Jo[e])return Jo[e];if(!lr[e])return e;var t=lr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Vh)return Jo[e]=t[n];return e}var Gh=fo("animationend"),Kh=fo("animationiteration"),Qh=fo("animationstart"),Jh=fo("transitionend"),Yh=new Map,Pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(e,t){Yh.set(e,t),Wn(t,[e])}for(var Yo=0;Yo<Pc.length;Yo++){var Xo=Pc[Yo],sy=Xo.toLowerCase(),iy=Xo[0].toUpperCase()+Xo.slice(1);wn(sy,"on"+iy)}wn(Gh,"onAnimationEnd");wn(Kh,"onAnimationIteration");wn(Qh,"onAnimationStart");wn("dblclick","onDoubleClick");wn("focusin","onFocus");wn("focusout","onBlur");wn(Jh,"onTransitionEnd");xr("onMouseEnter",["mouseout","mouseover"]);xr("onMouseLeave",["mouseout","mouseover"]);xr("onPointerEnter",["pointerout","pointerover"]);xr("onPointerLeave",["pointerout","pointerover"]);Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oy=new Set("cancel close invalid load scroll toggle".split(" ").concat(ns));function Ac(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,sg(r,t,void 0,e),e.currentTarget=null}function Xh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;Ac(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;Ac(s,a,c),i=u}}}if(Li)throw e=Ba,Li=!1,Ba=null,e}function de(e,t){var n=t[Ja];n===void 0&&(n=t[Ja]=new Set);var r=e+"__bubble";n.has(r)||(Zh(t,e,2,!1),n.add(r))}function Zo(e,t,n){var r=0;t&&(r|=4),Zh(n,e,r,t)}var ri="_reactListening"+Math.random().toString(36).slice(2);function Es(e){if(!e[ri]){e[ri]=!0,oh.forEach(function(n){n!=="selectionchange"&&(oy.has(n)||Zo(n,!1,e),Zo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ri]||(t[ri]=!0,Zo("selectionchange",!1,t))}}function Zh(e,t,n,r){switch($h(t)){case 1:var s=_g;break;case 4:s=Sg;break;default:s=Wl}n=s.bind(null,t,n,e),s=void 0,!Ua||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ea(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Rn(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}xh(function(){var c=i,d=Bl(n),h=[];e:{var g=Yh.get(e);if(g!==void 0){var v=Vl,k=e;switch(e){case"keypress":if(ki(n)===0)break e;case"keydown":case"keyup":v=$g;break;case"focusin":k="focus",v=Go;break;case"focusout":k="blur",v=Go;break;case"beforeblur":case"afterblur":v=Go;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=jg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Ug;break;case Gh:case Kh:case Qh:v=Cg;break;case Jh:v=Fg;break;case"scroll":v=xg;break;case"wheel":v=qg;break;case"copy":case"cut":case"paste":v=Tg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Sc}var x=(t&4)!==0,C=!x&&e==="scroll",p=x?g!==null?g+"Capture":null:g;x=[];for(var m=c,y;m!==null;){y=m;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,p!==null&&(_=_s(m,p),_!=null&&x.push(Cs(m,_,y)))),C)break;m=m.return}0<x.length&&(g=new v(g,k,null,n,d),h.push({event:g,listeners:x}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==La&&(k=n.relatedTarget||n.fromElement)&&(Rn(k)||k[Vt]))break e;if((v||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,v?(k=n.relatedTarget||n.toElement,v=c,k=k?Rn(k):null,k!==null&&(C=Hn(k),k!==C||k.tag!==5&&k.tag!==6)&&(k=null)):(v=null,k=c),v!==k)){if(x=wc,_="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(x=Sc,_="onPointerLeave",p="onPointerEnter",m="pointer"),C=v==null?g:ur(v),y=k==null?g:ur(k),g=new x(_,m+"leave",v,n,d),g.target=C,g.relatedTarget=y,_=null,Rn(d)===c&&(x=new x(p,m+"enter",k,n,d),x.target=y,x.relatedTarget=C,_=x),C=_,v&&k)t:{for(x=v,p=k,m=0,y=x;y;y=Kn(y))m++;for(y=0,_=p;_;_=Kn(_))y++;for(;0<m-y;)x=Kn(x),m--;for(;0<y-m;)p=Kn(p),y--;for(;m--;){if(x===p||p!==null&&x===p.alternate)break t;x=Kn(x),p=Kn(p)}x=null}else x=null;v!==null&&Oc(h,g,v,x,!1),k!==null&&C!==null&&Oc(h,C,k,x,!0)}}e:{if(g=c?ur(c):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var w=Jg;else if(jc(g))if(zh)w=ey;else{w=Xg;var N=Yg}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(w=Zg);if(w&&(w=w(e,c))){Fh(h,w,n,d);break e}N&&N(e,g,c),e==="focusout"&&(N=g._wrapperState)&&N.controlled&&g.type==="number"&&Oa(g,"number",g.value)}switch(N=c?ur(c):window,e){case"focusin":(jc(N)||N.contentEditable==="true")&&(ar=N,Wa=c,ls=null);break;case"focusout":ls=Wa=ar=null;break;case"mousedown":Ha=!0;break;case"contextmenu":case"mouseup":case"dragend":Ha=!1,Tc(h,n,d);break;case"selectionchange":if(ry)break;case"keydown":case"keyup":Tc(h,n,d)}var j;if(Kl)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else or?Uh(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Mh&&n.locale!=="ko"&&(or||T!=="onCompositionStart"?T==="onCompositionEnd"&&or&&(j=Lh()):(an=d,Hl="value"in an?an.value:an.textContent,or=!0)),N=zi(c,T),0<N.length&&(T=new _c(T,e,null,n,d),h.push({event:T,listeners:N}),j?T.data=j:(j=Bh(n),j!==null&&(T.data=j)))),(j=Hg?Vg(e,n):Gg(e,n))&&(c=zi(c,"onBeforeInput"),0<c.length&&(d=new _c("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=j))}Xh(h,t)})}function Cs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zi(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_s(e,n),i!=null&&r.unshift(Cs(e,i,s)),i=_s(e,t),i!=null&&r.push(Cs(e,i,s))),e=e.return}return r}function Kn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Oc(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=_s(n,i),u!=null&&o.unshift(Cs(n,u,a))):s||(u=_s(n,i),u!=null&&o.push(Cs(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var ay=/\r\n?/g,ly=/\u0000|\uFFFD/g;function Rc(e){return(typeof e=="string"?e:""+e).replace(ay,`
`).replace(ly,"")}function si(e,t,n){if(t=Rc(t),Rc(e)!==t&&n)throw Error(O(425))}function qi(){}var Va=null,Ga=null;function Ka(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qa=typeof setTimeout=="function"?setTimeout:void 0,uy=typeof clearTimeout=="function"?clearTimeout:void 0,Dc=typeof Promise=="function"?Promise:void 0,cy=typeof queueMicrotask=="function"?queueMicrotask:typeof Dc<"u"?function(e){return Dc.resolve(null).then(e).catch(dy)}:Qa;function dy(e){setTimeout(function(){throw e})}function ta(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ks(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ks(t)}function hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ic(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Or=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Or,bs="__reactProps$"+Or,Vt="__reactContainer$"+Or,Ja="__reactEvents$"+Or,hy="__reactListeners$"+Or,fy="__reactHandles$"+Or;function Rn(e){var t=e[Ot];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vt]||n[Ot]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ic(e);e!==null;){if(n=e[Ot])return n;e=Ic(e)}return t}e=n,n=e.parentNode}return null}function Us(e){return e=e[Ot]||e[Vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ur(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function po(e){return e[bs]||null}var Ya=[],cr=-1;function _n(e){return{current:e}}function he(e){0>cr||(e.current=Ya[cr],Ya[cr]=null,cr--)}function ue(e,t){cr++,Ya[cr]=e.current,e.current=t}var vn={},ze=_n(vn),et=_n(!1),Mn=vn;function kr(e,t){var n=e.type.contextTypes;if(!n)return vn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function tt(e){return e=e.childContextTypes,e!=null}function Wi(){he(et),he(ze)}function $c(e,t,n){if(ze.current!==vn)throw Error(O(168));ue(ze,t),ue(et,n)}function ef(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(O(108,Ym(e)||"Unknown",s));return ye({},n,r)}function Hi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vn,Mn=ze.current,ue(ze,e),ue(et,et.current),!0}function Lc(e,t,n){var r=e.stateNode;if(!r)throw Error(O(169));n?(e=ef(e,t,Mn),r.__reactInternalMemoizedMergedChildContext=e,he(et),he(ze),ue(ze,e)):he(et),ue(et,n)}var Ft=null,mo=!1,na=!1;function tf(e){Ft===null?Ft=[e]:Ft.push(e)}function py(e){mo=!0,tf(e)}function Sn(){if(!na&&Ft!==null){na=!0;var e=0,t=oe;try{var n=Ft;for(oe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ft=null,mo=!1}catch(s){throw Ft!==null&&(Ft=Ft.slice(e+1)),Eh(Fl,Sn),s}finally{oe=t,na=!1}}return null}var dr=[],hr=0,Vi=null,Gi=0,dt=[],ht=0,Un=null,zt=1,qt="";function Tn(e,t){dr[hr++]=Gi,dr[hr++]=Vi,Vi=e,Gi=t}function nf(e,t,n){dt[ht++]=zt,dt[ht++]=qt,dt[ht++]=Un,Un=e;var r=zt;e=qt;var s=32-Nt(r)-1;r&=~(1<<s),n+=1;var i=32-Nt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,zt=1<<32-Nt(t)+s|n<<s|r,qt=i+e}else zt=1<<i|n<<s|r,qt=e}function Jl(e){e.return!==null&&(Tn(e,1),nf(e,1,0))}function Yl(e){for(;e===Vi;)Vi=dr[--hr],dr[hr]=null,Gi=dr[--hr],dr[hr]=null;for(;e===Un;)Un=dt[--ht],dt[ht]=null,qt=dt[--ht],dt[ht]=null,zt=dt[--ht],dt[ht]=null}var ot=null,it=null,fe=!1,jt=null;function rf(e,t){var n=ft(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ot=e,it=hn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ot=e,it=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Un!==null?{id:zt,overflow:qt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ft(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ot=e,it=null,!0):!1;default:return!1}}function Xa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Za(e){if(fe){var t=it;if(t){var n=t;if(!Mc(e,t)){if(Xa(e))throw Error(O(418));t=hn(n.nextSibling);var r=ot;t&&Mc(e,t)?rf(r,n):(e.flags=e.flags&-4097|2,fe=!1,ot=e)}}else{if(Xa(e))throw Error(O(418));e.flags=e.flags&-4097|2,fe=!1,ot=e}}}function Uc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ot=e}function ii(e){if(e!==ot)return!1;if(!fe)return Uc(e),fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ka(e.type,e.memoizedProps)),t&&(t=it)){if(Xa(e))throw sf(),Error(O(418));for(;t;)rf(e,t),t=hn(t.nextSibling)}if(Uc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){it=hn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}it=null}}else it=ot?hn(e.stateNode.nextSibling):null;return!0}function sf(){for(var e=it;e;)e=hn(e.nextSibling)}function jr(){it=ot=null,fe=!1}function Xl(e){jt===null?jt=[e]:jt.push(e)}var my=Qt.ReactCurrentBatchConfig;function Kr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,e))}return e}function oi(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bc(e){var t=e._init;return t(e._payload)}function of(e){function t(p,m){if(e){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=gn(p,m),p.index=0,p.sibling=null,p}function i(p,m,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,m,y,_){return m===null||m.tag!==6?(m=ua(y,p.mode,_),m.return=p,m):(m=s(m,y),m.return=p,m)}function u(p,m,y,_){var w=y.type;return w===ir?d(p,m,y.props.children,_,y.key):m!==null&&(m.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===tn&&Bc(w)===m.type)?(_=s(m,y.props),_.ref=Kr(p,m,y),_.return=p,_):(_=Pi(y.type,y.key,y.props,null,p.mode,_),_.ref=Kr(p,m,y),_.return=p,_)}function c(p,m,y,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=ca(y,p.mode,_),m.return=p,m):(m=s(m,y.children||[]),m.return=p,m)}function d(p,m,y,_,w){return m===null||m.tag!==7?(m=Ln(y,p.mode,_,w),m.return=p,m):(m=s(m,y),m.return=p,m)}function h(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ua(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Qs:return y=Pi(m.type,m.key,m.props,null,p.mode,y),y.ref=Kr(p,null,m),y.return=p,y;case sr:return m=ca(m,p.mode,y),m.return=p,m;case tn:var _=m._init;return h(p,_(m._payload),y)}if(es(m)||qr(m))return m=Ln(m,p.mode,y,null),m.return=p,m;oi(p,m)}return null}function g(p,m,y,_){var w=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:a(p,m,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qs:return y.key===w?u(p,m,y,_):null;case sr:return y.key===w?c(p,m,y,_):null;case tn:return w=y._init,g(p,m,w(y._payload),_)}if(es(y)||qr(y))return w!==null?null:d(p,m,y,_,null);oi(p,y)}return null}function v(p,m,y,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(y)||null,a(m,p,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Qs:return p=p.get(_.key===null?y:_.key)||null,u(m,p,_,w);case sr:return p=p.get(_.key===null?y:_.key)||null,c(m,p,_,w);case tn:var N=_._init;return v(p,m,y,N(_._payload),w)}if(es(_)||qr(_))return p=p.get(y)||null,d(m,p,_,w,null);oi(m,_)}return null}function k(p,m,y,_){for(var w=null,N=null,j=m,T=m=0,F=null;j!==null&&T<y.length;T++){j.index>T?(F=j,j=null):F=j.sibling;var H=g(p,j,y[T],_);if(H===null){j===null&&(j=F);break}e&&j&&H.alternate===null&&t(p,j),m=i(H,m,T),N===null?w=H:N.sibling=H,N=H,j=F}if(T===y.length)return n(p,j),fe&&Tn(p,T),w;if(j===null){for(;T<y.length;T++)j=h(p,y[T],_),j!==null&&(m=i(j,m,T),N===null?w=j:N.sibling=j,N=j);return fe&&Tn(p,T),w}for(j=r(p,j);T<y.length;T++)F=v(j,p,T,y[T],_),F!==null&&(e&&F.alternate!==null&&j.delete(F.key===null?T:F.key),m=i(F,m,T),N===null?w=F:N.sibling=F,N=F);return e&&j.forEach(function(se){return t(p,se)}),fe&&Tn(p,T),w}function x(p,m,y,_){var w=qr(y);if(typeof w!="function")throw Error(O(150));if(y=w.call(y),y==null)throw Error(O(151));for(var N=w=null,j=m,T=m=0,F=null,H=y.next();j!==null&&!H.done;T++,H=y.next()){j.index>T?(F=j,j=null):F=j.sibling;var se=g(p,j,H.value,_);if(se===null){j===null&&(j=F);break}e&&j&&se.alternate===null&&t(p,j),m=i(se,m,T),N===null?w=se:N.sibling=se,N=se,j=F}if(H.done)return n(p,j),fe&&Tn(p,T),w;if(j===null){for(;!H.done;T++,H=y.next())H=h(p,H.value,_),H!==null&&(m=i(H,m,T),N===null?w=H:N.sibling=H,N=H);return fe&&Tn(p,T),w}for(j=r(p,j);!H.done;T++,H=y.next())H=v(j,p,T,H.value,_),H!==null&&(e&&H.alternate!==null&&j.delete(H.key===null?T:H.key),m=i(H,m,T),N===null?w=H:N.sibling=H,N=H);return e&&j.forEach(function(ie){return t(p,ie)}),fe&&Tn(p,T),w}function C(p,m,y,_){if(typeof y=="object"&&y!==null&&y.type===ir&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Qs:e:{for(var w=y.key,N=m;N!==null;){if(N.key===w){if(w=y.type,w===ir){if(N.tag===7){n(p,N.sibling),m=s(N,y.props.children),m.return=p,p=m;break e}}else if(N.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===tn&&Bc(w)===N.type){n(p,N.sibling),m=s(N,y.props),m.ref=Kr(p,N,y),m.return=p,p=m;break e}n(p,N);break}else t(p,N);N=N.sibling}y.type===ir?(m=Ln(y.props.children,p.mode,_,y.key),m.return=p,p=m):(_=Pi(y.type,y.key,y.props,null,p.mode,_),_.ref=Kr(p,m,y),_.return=p,p=_)}return o(p);case sr:e:{for(N=y.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(p,m.sibling),m=s(m,y.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=ca(y,p.mode,_),m.return=p,p=m}return o(p);case tn:return N=y._init,C(p,m,N(y._payload),_)}if(es(y))return k(p,m,y,_);if(qr(y))return x(p,m,y,_);oi(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,y),m.return=p,p=m):(n(p,m),m=ua(y,p.mode,_),m.return=p,p=m),o(p)):n(p,m)}return C}var Nr=of(!0),af=of(!1),Ki=_n(null),Qi=null,fr=null,Zl=null;function eu(){Zl=fr=Qi=null}function tu(e){var t=Ki.current;he(Ki),e._currentValue=t}function el(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _r(e,t){Qi=e,Zl=fr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ze=!0),e.firstContext=null)}function gt(e){var t=e._currentValue;if(Zl!==e)if(e={context:e,memoizedValue:t,next:null},fr===null){if(Qi===null)throw Error(O(308));fr=e,Qi.dependencies={lanes:0,firstContext:e}}else fr=fr.next=e;return t}var Dn=null;function nu(e){Dn===null?Dn=[e]:Dn.push(e)}function lf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,nu(t)):(n.next=s.next,s.next=n),t.interleaved=n,Gt(e,r)}function Gt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var nn=!1;function ru(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Gt(e,n)}return s=r.interleaved,s===null?(t.next=t,nu(r)):(t.next=s.next,s.next=t),r.interleaved=t,Gt(e,n)}function ji(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zl(e,n)}}function Fc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ji(e,t,n,r){var s=e.updateQueue;nn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;o=0,d=c=u=null,a=i;do{var g=a.lane,v=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=e,x=a;switch(g=t,v=n,x.tag){case 1:if(k=x.payload,typeof k=="function"){h=k.call(v,h,g);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=x.payload,g=typeof k=="function"?k.call(v,h,g):k,g==null)break e;h=ye({},h,g);break e;case 2:nn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=v,u=h):d=d.next=v,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Fn|=o,e.lanes=o,e.memoizedState=h}}function zc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(O(191,s));s.call(r)}}}var Bs={},Dt=_n(Bs),Ts=_n(Bs),Ps=_n(Bs);function In(e){if(e===Bs)throw Error(O(174));return e}function su(e,t){switch(ue(Ps,t),ue(Ts,e),ue(Dt,Bs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Da(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Da(t,e)}he(Dt),ue(Dt,t)}function Er(){he(Dt),he(Ts),he(Ps)}function cf(e){In(Ps.current);var t=In(Dt.current),n=Da(t,e.type);t!==n&&(ue(Ts,e),ue(Dt,n))}function iu(e){Ts.current===e&&(he(Dt),he(Ts))}var me=_n(0);function Yi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function ou(){for(var e=0;e<ra.length;e++)ra[e]._workInProgressVersionPrimary=null;ra.length=0}var Ni=Qt.ReactCurrentDispatcher,sa=Qt.ReactCurrentBatchConfig,Bn=0,ge=null,Ce=null,Oe=null,Xi=!1,us=!1,As=0,gy=0;function Ue(){throw Error(O(321))}function au(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ct(e[n],t[n]))return!1;return!0}function lu(e,t,n,r,s,i){if(Bn=i,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ni.current=e===null||e.memoizedState===null?_y:Sy,e=n(r,s),us){i=0;do{if(us=!1,As=0,25<=i)throw Error(O(301));i+=1,Oe=Ce=null,t.updateQueue=null,Ni.current=xy,e=n(r,s)}while(us)}if(Ni.current=Zi,t=Ce!==null&&Ce.next!==null,Bn=0,Oe=Ce=ge=null,Xi=!1,t)throw Error(O(300));return e}function uu(){var e=As!==0;return As=0,e}function Pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?ge.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function yt(){if(Ce===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var t=Oe===null?ge.memoizedState:Oe.next;if(t!==null)Oe=t,Ce=e;else{if(e===null)throw Error(O(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Oe===null?ge.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function Os(e,t){return typeof t=="function"?t(e):t}function ia(e){var t=yt(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=Ce,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var d=c.lane;if((Bn&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,ge.lanes|=d,Fn|=d}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,Ct(r,t.memoizedState)||(Ze=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,ge.lanes|=i,Fn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function oa(e){var t=yt(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ct(i,t.memoizedState)||(Ze=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function df(){}function hf(e,t){var n=ge,r=yt(),s=t(),i=!Ct(r.memoizedState,s);if(i&&(r.memoizedState=s,Ze=!0),r=r.queue,cu(mf.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,Rs(9,pf.bind(null,n,r,s,t),void 0,null),Re===null)throw Error(O(349));Bn&30||ff(n,t,s)}return s}function ff(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function pf(e,t,n,r){t.value=n,t.getSnapshot=r,gf(t)&&yf(e)}function mf(e,t,n){return n(function(){gf(t)&&yf(e)})}function gf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ct(e,n)}catch{return!0}}function yf(e){var t=Gt(e,1);t!==null&&Et(t,e,1,-1)}function qc(e){var t=Pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:e},t.queue=e,e=e.dispatch=wy.bind(null,ge,e),[t.memoizedState,e]}function Rs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function vf(){return yt().memoizedState}function Ei(e,t,n,r){var s=Pt();ge.flags|=e,s.memoizedState=Rs(1|t,n,void 0,r===void 0?null:r)}function go(e,t,n,r){var s=yt();r=r===void 0?null:r;var i=void 0;if(Ce!==null){var o=Ce.memoizedState;if(i=o.destroy,r!==null&&au(r,o.deps)){s.memoizedState=Rs(t,n,i,r);return}}ge.flags|=e,s.memoizedState=Rs(1|t,n,i,r)}function Wc(e,t){return Ei(8390656,8,e,t)}function cu(e,t){return go(2048,8,e,t)}function wf(e,t){return go(4,2,e,t)}function _f(e,t){return go(4,4,e,t)}function Sf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xf(e,t,n){return n=n!=null?n.concat([e]):null,go(4,4,Sf.bind(null,t,e),n)}function du(){}function kf(e,t){var n=yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&au(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function jf(e,t){var n=yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&au(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Nf(e,t,n){return Bn&21?(Ct(n,t)||(n=Th(),ge.lanes|=n,Fn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ze=!0),e.memoizedState=n)}function yy(e,t){var n=oe;oe=n!==0&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{oe=n,sa.transition=r}}function Ef(){return yt().memoizedState}function vy(e,t,n){var r=mn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Cf(e))bf(t,n);else if(n=lf(e,t,n,r),n!==null){var s=Ge();Et(n,e,r,s),Tf(n,t,r)}}function wy(e,t,n){var r=mn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cf(e))bf(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ct(a,o)){var u=t.interleaved;u===null?(s.next=s,nu(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=lf(e,t,s,r),n!==null&&(s=Ge(),Et(n,e,r,s),Tf(n,t,r))}}function Cf(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function bf(e,t){us=Xi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Tf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zl(e,n)}}var Zi={readContext:gt,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},_y={readContext:gt,useCallback:function(e,t){return Pt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:Wc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ei(4194308,4,Sf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ei(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ei(4,2,e,t)},useMemo:function(e,t){var n=Pt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Pt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=vy.bind(null,ge,e),[r.memoizedState,e]},useRef:function(e){var t=Pt();return e={current:e},t.memoizedState=e},useState:qc,useDebugValue:du,useDeferredValue:function(e){return Pt().memoizedState=e},useTransition:function(){var e=qc(!1),t=e[0];return e=yy.bind(null,e[1]),Pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ge,s=Pt();if(fe){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),Re===null)throw Error(O(349));Bn&30||ff(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Wc(mf.bind(null,r,i,e),[e]),r.flags|=2048,Rs(9,pf.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Pt(),t=Re.identifierPrefix;if(fe){var n=qt,r=zt;n=(r&~(1<<32-Nt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=As++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=gy++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Sy={readContext:gt,useCallback:kf,useContext:gt,useEffect:cu,useImperativeHandle:xf,useInsertionEffect:wf,useLayoutEffect:_f,useMemo:jf,useReducer:ia,useRef:vf,useState:function(){return ia(Os)},useDebugValue:du,useDeferredValue:function(e){var t=yt();return Nf(t,Ce.memoizedState,e)},useTransition:function(){var e=ia(Os)[0],t=yt().memoizedState;return[e,t]},useMutableSource:df,useSyncExternalStore:hf,useId:Ef,unstable_isNewReconciler:!1},xy={readContext:gt,useCallback:kf,useContext:gt,useEffect:cu,useImperativeHandle:xf,useInsertionEffect:wf,useLayoutEffect:_f,useMemo:jf,useReducer:oa,useRef:vf,useState:function(){return oa(Os)},useDebugValue:du,useDeferredValue:function(e){var t=yt();return Ce===null?t.memoizedState=e:Nf(t,Ce.memoizedState,e)},useTransition:function(){var e=oa(Os)[0],t=yt().memoizedState;return[e,t]},useMutableSource:df,useSyncExternalStore:hf,useId:Ef,unstable_isNewReconciler:!1};function St(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function tl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ye({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return(e=e._reactInternals)?Hn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ge(),s=mn(e),i=Wt(r,s);i.payload=t,n!=null&&(i.callback=n),t=fn(e,i,s),t!==null&&(Et(t,e,s,r),ji(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ge(),s=mn(e),i=Wt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=fn(e,i,s),t!==null&&(Et(t,e,s,r),ji(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ge(),r=mn(e),s=Wt(n,r);s.tag=2,t!=null&&(s.callback=t),t=fn(e,s,r),t!==null&&(Et(t,e,r,n),ji(t,e,r))}};function Hc(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ns(n,r)||!Ns(s,i):!0}function Pf(e,t,n){var r=!1,s=vn,i=t.contextType;return typeof i=="object"&&i!==null?i=gt(i):(s=tt(t)?Mn:ze.current,r=t.contextTypes,i=(r=r!=null)?kr(e,s):vn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Vc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function nl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ru(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=gt(i):(i=tt(t)?Mn:ze.current,s.context=kr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(tl(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&yo.enqueueReplaceState(s,s.state,null),Ji(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Cr(e,t){try{var n="",r=t;do n+=Jm(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function aa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function rl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ky=typeof WeakMap=="function"?WeakMap:Map;function Af(e,t,n){n=Wt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){to||(to=!0,fl=r),rl(e,t)},n}function Of(e,t,n){n=Wt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){rl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){rl(e,t),typeof r!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Gc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ky;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Ly.bind(null,e,t,n),t.then(e,e))}function Kc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Qc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Wt(-1,1),t.tag=2,fn(n,t,1))),n.lanes|=1),e)}var jy=Qt.ReactCurrentOwner,Ze=!1;function Ve(e,t,n,r){t.child=e===null?af(t,null,n,r):Nr(t,e.child,n,r)}function Jc(e,t,n,r,s){n=n.render;var i=t.ref;return _r(t,s),r=lu(e,t,n,r,i,s),n=uu(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Kt(e,t,s)):(fe&&n&&Jl(t),t.flags|=1,Ve(e,t,r,s),t.child)}function Yc(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!wu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Rf(e,t,i,r,s)):(e=Pi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ns,n(o,r)&&e.ref===t.ref)return Kt(e,t,s)}return t.flags|=1,e=gn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Rf(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ns(i,r)&&e.ref===t.ref)if(Ze=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Ze=!0);else return t.lanes=e.lanes,Kt(e,t,s)}return sl(e,t,n,r,s)}function Df(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(mr,st),st|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ue(mr,st),st|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ue(mr,st),st|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ue(mr,st),st|=r;return Ve(e,t,s,n),t.child}function If(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function sl(e,t,n,r,s){var i=tt(n)?Mn:ze.current;return i=kr(t,i),_r(t,s),n=lu(e,t,n,r,i,s),r=uu(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Kt(e,t,s)):(fe&&r&&Jl(t),t.flags|=1,Ve(e,t,n,s),t.child)}function Xc(e,t,n,r,s){if(tt(n)){var i=!0;Hi(t)}else i=!1;if(_r(t,s),t.stateNode===null)Ci(e,t),Pf(t,n,r),nl(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=gt(c):(c=tt(n)?Mn:ze.current,c=kr(t,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Vc(t,o,r,c),nn=!1;var g=t.memoizedState;o.state=g,Ji(t,r,o,s),u=t.memoizedState,a!==r||g!==u||et.current||nn?(typeof d=="function"&&(tl(t,n,d,r),u=t.memoizedState),(a=nn||Hc(t,n,a,r,g,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,uf(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:St(t.type,a),o.props=c,h=t.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=gt(u):(u=tt(n)?Mn:ze.current,u=kr(t,u));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||g!==u)&&Vc(t,o,r,u),nn=!1,g=t.memoizedState,o.state=g,Ji(t,r,o,s);var k=t.memoizedState;a!==h||g!==k||et.current||nn?(typeof v=="function"&&(tl(t,n,v,r),k=t.memoizedState),(c=nn||Hc(t,n,c,r,g,k,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),o.props=r,o.state=k,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return il(e,t,n,r,i,s)}function il(e,t,n,r,s,i){If(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Lc(t,n,!1),Kt(e,t,i);r=t.stateNode,jy.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Nr(t,e.child,null,i),t.child=Nr(t,null,a,i)):Ve(e,t,a,i),t.memoizedState=r.state,s&&Lc(t,n,!0),t.child}function $f(e){var t=e.stateNode;t.pendingContext?$c(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$c(e,t.context,!1),su(e,t.containerInfo)}function Zc(e,t,n,r,s){return jr(),Xl(s),t.flags|=256,Ve(e,t,n,r),t.child}var ol={dehydrated:null,treeContext:null,retryLane:0};function al(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lf(e,t,n){var r=t.pendingProps,s=me.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ue(me,s&1),e===null)return Za(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_o(o,r,0,null),e=Ln(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=al(n),t.memoizedState=ol,e):hu(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Ny(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=gn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=gn(a,i):(i=Ln(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?al(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ol,r}return i=e.child,e=i.sibling,r=gn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function hu(e,t){return t=_o({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ai(e,t,n,r){return r!==null&&Xl(r),Nr(t,e.child,null,n),e=hu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ny(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=aa(Error(O(422))),ai(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=_o({mode:"visible",children:r.children},s,0,null),i=Ln(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Nr(t,e.child,null,o),t.child.memoizedState=al(o),t.memoizedState=ol,i);if(!(t.mode&1))return ai(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(O(419)),r=aa(i,r,void 0),ai(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ze||a){if(r=Re,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gt(e,s),Et(r,e,s,-1))}return vu(),r=aa(Error(O(421))),ai(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=My.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,it=hn(s.nextSibling),ot=t,fe=!0,jt=null,e!==null&&(dt[ht++]=zt,dt[ht++]=qt,dt[ht++]=Un,zt=e.id,qt=e.overflow,Un=t),t=hu(t,r.children),t.flags|=4096,t)}function ed(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),el(e.return,t,n)}function la(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Mf(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ve(e,t,r.children,n),r=me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ed(e,n,t);else if(e.tag===19)ed(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ue(me,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Yi(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),la(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Yi(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}la(t,!0,n,null,i);break;case"together":la(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ci(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ey(e,t,n){switch(t.tag){case 3:$f(t),jr();break;case 5:cf(t);break;case 1:tt(t.type)&&Hi(t);break;case 4:su(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ue(Ki,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ue(me,me.current&1),t.flags|=128,null):n&t.child.childLanes?Lf(e,t,n):(ue(me,me.current&1),e=Kt(e,t,n),e!==null?e.sibling:null);ue(me,me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Mf(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ue(me,me.current),r)break;return null;case 22:case 23:return t.lanes=0,Df(e,t,n)}return Kt(e,t,n)}var Uf,ll,Bf,Ff;Uf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ll=function(){};Bf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,In(Dt.current);var i=null;switch(n){case"input":s=Pa(e,s),r=Pa(e,r),i=[];break;case"select":s=ye({},s,{value:void 0}),r=ye({},r,{value:void 0}),i=[];break;case"textarea":s=Ra(e,s),r=Ra(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=qi)}Ia(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(vs.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(vs.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&de("scroll",e),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Ff=function(e,t,n,r){n!==r&&(t.flags|=4)};function Qr(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Be(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Cy(e,t,n){var r=t.pendingProps;switch(Yl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(t),null;case 1:return tt(t.type)&&Wi(),Be(t),null;case 3:return r=t.stateNode,Er(),he(et),he(ze),ou(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ii(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,jt!==null&&(gl(jt),jt=null))),ll(e,t),Be(t),null;case 5:iu(t);var s=In(Ps.current);if(n=t.type,e!==null&&t.stateNode!=null)Bf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(O(166));return Be(t),null}if(e=In(Dt.current),ii(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Ot]=t,r[bs]=i,e=(t.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(s=0;s<ns.length;s++)de(ns[s],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":uc(r,i),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},de("invalid",r);break;case"textarea":dc(r,i),de("invalid",r)}Ia(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&si(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&si(r.textContent,a,e),s=["children",""+a]):vs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&de("scroll",r)}switch(n){case"input":Js(r),cc(r,i,!0);break;case"textarea":Js(r),hc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=qi)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ph(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ot]=t,e[bs]=r,Uf(e,t,!1,!1),t.stateNode=e;e:{switch(o=$a(n,r),n){case"dialog":de("cancel",e),de("close",e),s=r;break;case"iframe":case"object":case"embed":de("load",e),s=r;break;case"video":case"audio":for(s=0;s<ns.length;s++)de(ns[s],e);s=r;break;case"source":de("error",e),s=r;break;case"img":case"image":case"link":de("error",e),de("load",e),s=r;break;case"details":de("toggle",e),s=r;break;case"input":uc(e,r),s=Pa(e,r),de("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ye({},r,{value:void 0}),de("invalid",e);break;case"textarea":dc(e,r),s=Ra(e,r),de("invalid",e);break;default:s=r}Ia(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?yh(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&mh(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ws(e,u):typeof u=="number"&&ws(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vs.hasOwnProperty(i)?u!=null&&i==="onScroll"&&de("scroll",e):u!=null&&$l(e,i,u,o))}switch(n){case"input":Js(e),cc(e,r,!1);break;case"textarea":Js(e),hc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+yn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?gr(e,!!r.multiple,i,!1):r.defaultValue!=null&&gr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=qi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Be(t),null;case 6:if(e&&t.stateNode!=null)Ff(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(O(166));if(n=In(Ps.current),In(Dt.current),ii(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ot]=t,(i=r.nodeValue!==n)&&(e=ot,e!==null))switch(e.tag){case 3:si(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&si(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ot]=t,t.stateNode=r}return Be(t),null;case 13:if(he(me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fe&&it!==null&&t.mode&1&&!(t.flags&128))sf(),jr(),t.flags|=98560,i=!1;else if(i=ii(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(O(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[Ot]=t}else jr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Be(t),i=!1}else jt!==null&&(gl(jt),jt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?be===0&&(be=3):vu())),t.updateQueue!==null&&(t.flags|=4),Be(t),null);case 4:return Er(),ll(e,t),e===null&&Es(t.stateNode.containerInfo),Be(t),null;case 10:return tu(t.type._context),Be(t),null;case 17:return tt(t.type)&&Wi(),Be(t),null;case 19:if(he(me),i=t.memoizedState,i===null)return Be(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Qr(i,!1);else{if(be!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Yi(e),o!==null){for(t.flags|=128,Qr(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ue(me,me.current&1|2),t.child}e=e.sibling}i.tail!==null&&_e()>br&&(t.flags|=128,r=!0,Qr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Yi(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Qr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!fe)return Be(t),null}else 2*_e()-i.renderingStartTime>br&&n!==1073741824&&(t.flags|=128,r=!0,Qr(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=_e(),t.sibling=null,n=me.current,ue(me,r?n&1|2:n&1),t):(Be(t),null);case 22:case 23:return yu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?st&1073741824&&(Be(t),t.subtreeFlags&6&&(t.flags|=8192)):Be(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function by(e,t){switch(Yl(t),t.tag){case 1:return tt(t.type)&&Wi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Er(),he(et),he(ze),ou(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return iu(t),null;case 13:if(he(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));jr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return he(me),null;case 4:return Er(),null;case 10:return tu(t.type._context),null;case 22:case 23:return yu(),null;case 24:return null;default:return null}}var li=!1,Fe=!1,Ty=typeof WeakSet=="function"?WeakSet:Set,L=null;function pr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(e,t,r)}else n.current=null}function ul(e,t,n){try{n()}catch(r){ve(e,t,r)}}var td=!1;function Py(e,t){if(Va=Bi,e=Hh(),Ql(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,h=e,g=null;t:for(;;){for(var v;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)g=h,h=v;for(;;){if(h===e)break t;if(g===n&&++c===s&&(a=o),g===i&&++d===r&&(u=o),(v=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=v}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ga={focusedElem:e,selectionRange:n},Bi=!1,L=t;L!==null;)if(t=L,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,L=e;else for(;L!==null;){t=L;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var x=k.memoizedProps,C=k.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?x:St(t.type,x),C);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(_){ve(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,L=e;break}L=t.return}return k=td,td=!1,k}function cs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ul(t,n,i)}s=s.next}while(s!==r)}}function vo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zf(e){var t=e.alternate;t!==null&&(e.alternate=null,zf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ot],delete t[bs],delete t[Ja],delete t[hy],delete t[fy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qf(e){return e.tag===5||e.tag===3||e.tag===4}function nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=qi));else if(r!==4&&(e=e.child,e!==null))for(dl(e,t,n),e=e.sibling;e!==null;)dl(e,t,n),e=e.sibling}function hl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(hl(e,t,n),e=e.sibling;e!==null;)hl(e,t,n),e=e.sibling}var De=null,xt=!1;function Xt(e,t,n){for(n=n.child;n!==null;)Wf(e,t,n),n=n.sibling}function Wf(e,t,n){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(uo,n)}catch{}switch(n.tag){case 5:Fe||pr(n,t);case 6:var r=De,s=xt;De=null,Xt(e,t,n),De=r,xt=s,De!==null&&(xt?(e=De,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):De.removeChild(n.stateNode));break;case 18:De!==null&&(xt?(e=De,n=n.stateNode,e.nodeType===8?ta(e.parentNode,n):e.nodeType===1&&ta(e,n),ks(e)):ta(De,n.stateNode));break;case 4:r=De,s=xt,De=n.stateNode.containerInfo,xt=!0,Xt(e,t,n),De=r,xt=s;break;case 0:case 11:case 14:case 15:if(!Fe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ul(n,t,o),s=s.next}while(s!==r)}Xt(e,t,n);break;case 1:if(!Fe&&(pr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ve(n,t,a)}Xt(e,t,n);break;case 21:Xt(e,t,n);break;case 22:n.mode&1?(Fe=(r=Fe)||n.memoizedState!==null,Xt(e,t,n),Fe=r):Xt(e,t,n);break;default:Xt(e,t,n)}}function rd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ty),t.forEach(function(r){var s=Uy.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function wt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:De=a.stateNode,xt=!1;break e;case 3:De=a.stateNode.containerInfo,xt=!0;break e;case 4:De=a.stateNode.containerInfo,xt=!0;break e}a=a.return}if(De===null)throw Error(O(160));Wf(i,o,s),De=null,xt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){ve(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Hf(t,e),t=t.sibling}function Hf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wt(t,e),Tt(e),r&4){try{cs(3,e,e.return),vo(3,e)}catch(x){ve(e,e.return,x)}try{cs(5,e,e.return)}catch(x){ve(e,e.return,x)}}break;case 1:wt(t,e),Tt(e),r&512&&n!==null&&pr(n,n.return);break;case 5:if(wt(t,e),Tt(e),r&512&&n!==null&&pr(n,n.return),e.flags&32){var s=e.stateNode;try{ws(s,"")}catch(x){ve(e,e.return,x)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&hh(s,i),$a(a,o);var c=$a(a,i);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?yh(s,h):d==="dangerouslySetInnerHTML"?mh(s,h):d==="children"?ws(s,h):$l(s,d,h,c)}switch(a){case"input":Aa(s,i);break;case"textarea":fh(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?gr(s,!!i.multiple,v,!1):g!==!!i.multiple&&(i.defaultValue!=null?gr(s,!!i.multiple,i.defaultValue,!0):gr(s,!!i.multiple,i.multiple?[]:"",!1))}s[bs]=i}catch(x){ve(e,e.return,x)}}break;case 6:if(wt(t,e),Tt(e),r&4){if(e.stateNode===null)throw Error(O(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){ve(e,e.return,x)}}break;case 3:if(wt(t,e),Tt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ks(t.containerInfo)}catch(x){ve(e,e.return,x)}break;case 4:wt(t,e),Tt(e);break;case 13:wt(t,e),Tt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(mu=_e())),r&4&&rd(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Fe=(c=Fe)||d,wt(t,e),Fe=c):wt(t,e),Tt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(L=e,d=e.child;d!==null;){for(h=L=d;L!==null;){switch(g=L,v=g.child,g.tag){case 0:case 11:case 14:case 15:cs(4,g,g.return);break;case 1:pr(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(x){ve(r,n,x)}}break;case 5:pr(g,g.return);break;case 22:if(g.memoizedState!==null){id(h);continue}}v!==null?(v.return=g,L=v):id(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=gh("display",o))}catch(x){ve(e,e.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){ve(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wt(t,e),Tt(e),r&4&&rd(e);break;case 21:break;default:wt(t,e),Tt(e)}}function Tt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(qf(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ws(s,""),r.flags&=-33);var i=nd(e);hl(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=nd(e);dl(e,a,o);break;default:throw Error(O(161))}}catch(u){ve(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ay(e,t,n){L=e,Vf(e)}function Vf(e,t,n){for(var r=(e.mode&1)!==0;L!==null;){var s=L,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||li;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Fe;a=li;var c=Fe;if(li=o,(Fe=u)&&!c)for(L=s;L!==null;)o=L,u=o.child,o.tag===22&&o.memoizedState!==null?od(s):u!==null?(u.return=o,L=u):od(s);for(;i!==null;)L=i,Vf(i),i=i.sibling;L=s,li=a,Fe=c}sd(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,L=i):sd(e)}}function sd(e){for(;L!==null;){var t=L;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fe||vo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Fe)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:St(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&zc(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zc(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ks(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Fe||t.flags&512&&cl(t)}catch(g){ve(t,t.return,g)}}if(t===e){L=null;break}if(n=t.sibling,n!==null){n.return=t.return,L=n;break}L=t.return}}function id(e){for(;L!==null;){var t=L;if(t===e){L=null;break}var n=t.sibling;if(n!==null){n.return=t.return,L=n;break}L=t.return}}function od(e){for(;L!==null;){var t=L;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vo(4,t)}catch(u){ve(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){ve(t,s,u)}}var i=t.return;try{cl(t)}catch(u){ve(t,i,u)}break;case 5:var o=t.return;try{cl(t)}catch(u){ve(t,o,u)}}}catch(u){ve(t,t.return,u)}if(t===e){L=null;break}var a=t.sibling;if(a!==null){a.return=t.return,L=a;break}L=t.return}}var Oy=Math.ceil,eo=Qt.ReactCurrentDispatcher,fu=Qt.ReactCurrentOwner,pt=Qt.ReactCurrentBatchConfig,ne=0,Re=null,ke=null,Ie=0,st=0,mr=_n(0),be=0,Ds=null,Fn=0,wo=0,pu=0,ds=null,Ye=null,mu=0,br=1/0,Ut=null,to=!1,fl=null,pn=null,ui=!1,ln=null,no=0,hs=0,pl=null,bi=-1,Ti=0;function Ge(){return ne&6?_e():bi!==-1?bi:bi=_e()}function mn(e){return e.mode&1?ne&2&&Ie!==0?Ie&-Ie:my.transition!==null?(Ti===0&&(Ti=Th()),Ti):(e=oe,e!==0||(e=window.event,e=e===void 0?16:$h(e.type)),e):1}function Et(e,t,n,r){if(50<hs)throw hs=0,pl=null,Error(O(185));Ls(e,n,r),(!(ne&2)||e!==Re)&&(e===Re&&(!(ne&2)&&(wo|=n),be===4&&sn(e,Ie)),nt(e,r),n===1&&ne===0&&!(t.mode&1)&&(br=_e()+500,mo&&Sn()))}function nt(e,t){var n=e.callbackNode;mg(e,t);var r=Ui(e,e===Re?Ie:0);if(r===0)n!==null&&mc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&mc(n),t===1)e.tag===0?py(ad.bind(null,e)):tf(ad.bind(null,e)),cy(function(){!(ne&6)&&Sn()}),n=null;else{switch(Ph(r)){case 1:n=Fl;break;case 4:n=Ch;break;case 16:n=Mi;break;case 536870912:n=bh;break;default:n=Mi}n=ep(n,Gf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Gf(e,t){if(bi=-1,Ti=0,ne&6)throw Error(O(327));var n=e.callbackNode;if(Sr()&&e.callbackNode!==n)return null;var r=Ui(e,e===Re?Ie:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ro(e,r);else{t=r;var s=ne;ne|=2;var i=Qf();(Re!==e||Ie!==t)&&(Ut=null,br=_e()+500,$n(e,t));do try{Iy();break}catch(a){Kf(e,a)}while(!0);eu(),eo.current=i,ne=s,ke!==null?t=0:(Re=null,Ie=0,t=be)}if(t!==0){if(t===2&&(s=Fa(e),s!==0&&(r=s,t=ml(e,s))),t===1)throw n=Ds,$n(e,0),sn(e,r),nt(e,_e()),n;if(t===6)sn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Ry(s)&&(t=ro(e,r),t===2&&(i=Fa(e),i!==0&&(r=i,t=ml(e,i))),t===1))throw n=Ds,$n(e,0),sn(e,r),nt(e,_e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(O(345));case 2:Pn(e,Ye,Ut);break;case 3:if(sn(e,r),(r&130023424)===r&&(t=mu+500-_e(),10<t)){if(Ui(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ge(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Qa(Pn.bind(null,e,Ye,Ut),t);break}Pn(e,Ye,Ut);break;case 4:if(sn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Nt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=_e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Oy(r/1960))-r,10<r){e.timeoutHandle=Qa(Pn.bind(null,e,Ye,Ut),r);break}Pn(e,Ye,Ut);break;case 5:Pn(e,Ye,Ut);break;default:throw Error(O(329))}}}return nt(e,_e()),e.callbackNode===n?Gf.bind(null,e):null}function ml(e,t){var n=ds;return e.current.memoizedState.isDehydrated&&($n(e,t).flags|=256),e=ro(e,t),e!==2&&(t=Ye,Ye=n,t!==null&&gl(t)),e}function gl(e){Ye===null?Ye=e:Ye.push.apply(Ye,e)}function Ry(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ct(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sn(e,t){for(t&=~pu,t&=~wo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nt(t),r=1<<n;e[n]=-1,t&=~r}}function ad(e){if(ne&6)throw Error(O(327));Sr();var t=Ui(e,0);if(!(t&1))return nt(e,_e()),null;var n=ro(e,t);if(e.tag!==0&&n===2){var r=Fa(e);r!==0&&(t=r,n=ml(e,r))}if(n===1)throw n=Ds,$n(e,0),sn(e,t),nt(e,_e()),n;if(n===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pn(e,Ye,Ut),nt(e,_e()),null}function gu(e,t){var n=ne;ne|=1;try{return e(t)}finally{ne=n,ne===0&&(br=_e()+500,mo&&Sn())}}function zn(e){ln!==null&&ln.tag===0&&!(ne&6)&&Sr();var t=ne;ne|=1;var n=pt.transition,r=oe;try{if(pt.transition=null,oe=1,e)return e()}finally{oe=r,pt.transition=n,ne=t,!(ne&6)&&Sn()}}function yu(){st=mr.current,he(mr)}function $n(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,uy(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(Yl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wi();break;case 3:Er(),he(et),he(ze),ou();break;case 5:iu(r);break;case 4:Er();break;case 13:he(me);break;case 19:he(me);break;case 10:tu(r.type._context);break;case 22:case 23:yu()}n=n.return}if(Re=e,ke=e=gn(e.current,null),Ie=st=t,be=0,Ds=null,pu=wo=Fn=0,Ye=ds=null,Dn!==null){for(t=0;t<Dn.length;t++)if(n=Dn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Dn=null}return e}function Kf(e,t){do{var n=ke;try{if(eu(),Ni.current=Zi,Xi){for(var r=ge.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xi=!1}if(Bn=0,Oe=Ce=ge=null,us=!1,As=0,fu.current=null,n===null||n.return===null){be=1,Ds=t,ke=null;break}e:{var i=e,o=n.return,a=n,u=t;if(t=Ie,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=Kc(o);if(v!==null){v.flags&=-257,Qc(v,o,a,i,t),v.mode&1&&Gc(i,c,t),t=v,u=c;var k=t.updateQueue;if(k===null){var x=new Set;x.add(u),t.updateQueue=x}else k.add(u);break e}else{if(!(t&1)){Gc(i,c,t),vu();break e}u=Error(O(426))}}else if(fe&&a.mode&1){var C=Kc(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Qc(C,o,a,i,t),Xl(Cr(u,a));break e}}i=u=Cr(u,a),be!==4&&(be=2),ds===null?ds=[i]:ds.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=Af(i,u,t);Fc(i,p);break e;case 1:a=u;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(pn===null||!pn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=Of(i,a,t);Fc(i,_);break e}}i=i.return}while(i!==null)}Yf(n)}catch(w){t=w,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function Qf(){var e=eo.current;return eo.current=Zi,e===null?Zi:e}function vu(){(be===0||be===3||be===2)&&(be=4),Re===null||!(Fn&268435455)&&!(wo&268435455)||sn(Re,Ie)}function ro(e,t){var n=ne;ne|=2;var r=Qf();(Re!==e||Ie!==t)&&(Ut=null,$n(e,t));do try{Dy();break}catch(s){Kf(e,s)}while(!0);if(eu(),ne=n,eo.current=r,ke!==null)throw Error(O(261));return Re=null,Ie=0,be}function Dy(){for(;ke!==null;)Jf(ke)}function Iy(){for(;ke!==null&&!og();)Jf(ke)}function Jf(e){var t=Zf(e.alternate,e,st);e.memoizedProps=e.pendingProps,t===null?Yf(e):ke=t,fu.current=null}function Yf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=by(n,t),n!==null){n.flags&=32767,ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{be=6,ke=null;return}}else if(n=Cy(n,t,st),n!==null){ke=n;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);be===0&&(be=5)}function Pn(e,t,n){var r=oe,s=pt.transition;try{pt.transition=null,oe=1,$y(e,t,n,r)}finally{pt.transition=s,oe=r}return null}function $y(e,t,n,r){do Sr();while(ln!==null);if(ne&6)throw Error(O(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(gg(e,i),e===Re&&(ke=Re=null,Ie=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ui||(ui=!0,ep(Mi,function(){return Sr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=pt.transition,pt.transition=null;var o=oe;oe=1;var a=ne;ne|=4,fu.current=null,Py(e,n),Hf(n,e),ny(Ga),Bi=!!Va,Ga=Va=null,e.current=n,Ay(n),ag(),ne=a,oe=o,pt.transition=i}else e.current=n;if(ui&&(ui=!1,ln=e,no=s),i=e.pendingLanes,i===0&&(pn=null),cg(n.stateNode),nt(e,_e()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(to)throw to=!1,e=fl,fl=null,e;return no&1&&e.tag!==0&&Sr(),i=e.pendingLanes,i&1?e===pl?hs++:(hs=0,pl=e):hs=0,Sn(),null}function Sr(){if(ln!==null){var e=Ph(no),t=pt.transition,n=oe;try{if(pt.transition=null,oe=16>e?16:e,ln===null)var r=!1;else{if(e=ln,ln=null,no=0,ne&6)throw Error(O(331));var s=ne;for(ne|=4,L=e.current;L!==null;){var i=L,o=i.child;if(L.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(L=c;L!==null;){var d=L;switch(d.tag){case 0:case 11:case 15:cs(8,d,i)}var h=d.child;if(h!==null)h.return=d,L=h;else for(;L!==null;){d=L;var g=d.sibling,v=d.return;if(zf(d),d===c){L=null;break}if(g!==null){g.return=v,L=g;break}L=v}}}var k=i.alternate;if(k!==null){var x=k.child;if(x!==null){k.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}L=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,L=o;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:cs(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,L=p;break e}L=i.return}}var m=e.current;for(L=m;L!==null;){o=L;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,L=y;else e:for(o=m;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vo(9,a)}}catch(w){ve(a,a.return,w)}if(a===o){L=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,L=_;break e}L=a.return}}if(ne=s,Sn(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(uo,e)}catch{}r=!0}return r}finally{oe=n,pt.transition=t}}return!1}function ld(e,t,n){t=Cr(n,t),t=Af(e,t,1),e=fn(e,t,1),t=Ge(),e!==null&&(Ls(e,1,t),nt(e,t))}function ve(e,t,n){if(e.tag===3)ld(e,e,n);else for(;t!==null;){if(t.tag===3){ld(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pn===null||!pn.has(r))){e=Cr(n,e),e=Of(t,e,1),t=fn(t,e,1),e=Ge(),t!==null&&(Ls(t,1,e),nt(t,e));break}}t=t.return}}function Ly(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ge(),e.pingedLanes|=e.suspendedLanes&n,Re===e&&(Ie&n)===n&&(be===4||be===3&&(Ie&130023424)===Ie&&500>_e()-mu?$n(e,0):pu|=n),nt(e,t)}function Xf(e,t){t===0&&(e.mode&1?(t=Zs,Zs<<=1,!(Zs&130023424)&&(Zs=4194304)):t=1);var n=Ge();e=Gt(e,t),e!==null&&(Ls(e,t,n),nt(e,n))}function My(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Xf(e,n)}function Uy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(t),Xf(e,n)}var Zf;Zf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||et.current)Ze=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ze=!1,Ey(e,t,n);Ze=!!(e.flags&131072)}else Ze=!1,fe&&t.flags&1048576&&nf(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ci(e,t),e=t.pendingProps;var s=kr(t,ze.current);_r(t,n),s=lu(null,t,r,e,s,n);var i=uu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,tt(r)?(i=!0,Hi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ru(t),s.updater=yo,t.stateNode=s,s._reactInternals=t,nl(t,r,e,n),t=il(null,t,r,!0,i,n)):(t.tag=0,fe&&i&&Jl(t),Ve(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ci(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Fy(r),e=St(r,e),s){case 0:t=sl(null,t,r,e,n);break e;case 1:t=Xc(null,t,r,e,n);break e;case 11:t=Jc(null,t,r,e,n);break e;case 14:t=Yc(null,t,r,St(r.type,e),n);break e}throw Error(O(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),sl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),Xc(e,t,r,s,n);case 3:e:{if($f(t),e===null)throw Error(O(387));r=t.pendingProps,i=t.memoizedState,s=i.element,uf(e,t),Ji(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Cr(Error(O(423)),t),t=Zc(e,t,r,n,s);break e}else if(r!==s){s=Cr(Error(O(424)),t),t=Zc(e,t,r,n,s);break e}else for(it=hn(t.stateNode.containerInfo.firstChild),ot=t,fe=!0,jt=null,n=af(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jr(),r===s){t=Kt(e,t,n);break e}Ve(e,t,r,n)}t=t.child}return t;case 5:return cf(t),e===null&&Za(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ka(r,s)?o=null:i!==null&&Ka(r,i)&&(t.flags|=32),If(e,t),Ve(e,t,o,n),t.child;case 6:return e===null&&Za(t),null;case 13:return Lf(e,t,n);case 4:return su(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Nr(t,null,r,n):Ve(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),Jc(e,t,r,s,n);case 7:return Ve(e,t,t.pendingProps,n),t.child;case 8:return Ve(e,t,t.pendingProps.children,n),t.child;case 12:return Ve(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ue(Ki,r._currentValue),r._currentValue=o,i!==null)if(Ct(i.value,o)){if(i.children===s.children&&!et.current){t=Kt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Wt(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),el(i.return,n,t),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),el(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ve(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,_r(t,n),s=gt(s),r=r(s),t.flags|=1,Ve(e,t,r,n),t.child;case 14:return r=t.type,s=St(r,t.pendingProps),s=St(r.type,s),Yc(e,t,r,s,n);case 15:return Rf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),Ci(e,t),t.tag=1,tt(r)?(e=!0,Hi(t)):e=!1,_r(t,n),Pf(t,r,s),nl(t,r,s,n),il(null,t,r,!0,e,n);case 19:return Mf(e,t,n);case 22:return Df(e,t,n)}throw Error(O(156,t.tag))};function ep(e,t){return Eh(e,t)}function By(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(e,t,n,r){return new By(e,t,n,r)}function wu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fy(e){if(typeof e=="function")return wu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ml)return 11;if(e===Ul)return 14}return 2}function gn(e,t){var n=e.alternate;return n===null?(n=ft(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pi(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")wu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ir:return Ln(n.children,s,i,t);case Ll:o=8,s|=8;break;case Ea:return e=ft(12,n,t,s|2),e.elementType=Ea,e.lanes=i,e;case Ca:return e=ft(13,n,t,s),e.elementType=Ca,e.lanes=i,e;case ba:return e=ft(19,n,t,s),e.elementType=ba,e.lanes=i,e;case uh:return _o(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ah:o=10;break e;case lh:o=9;break e;case Ml:o=11;break e;case Ul:o=14;break e;case tn:o=16,r=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=ft(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Ln(e,t,n,r){return e=ft(7,e,r,t),e.lanes=n,e}function _o(e,t,n,r){return e=ft(22,e,r,t),e.elementType=uh,e.lanes=n,e.stateNode={isHidden:!1},e}function ua(e,t,n){return e=ft(6,e,null,t),e.lanes=n,e}function ca(e,t,n){return t=ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zy(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wo(0),this.expirationTimes=Wo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _u(e,t,n,r,s,i,o,a,u){return e=new zy(e,t,n,a,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ft(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ru(i),e}function qy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function tp(e){if(!e)return vn;e=e._reactInternals;e:{if(Hn(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var n=e.type;if(tt(n))return ef(e,n,t)}return t}function np(e,t,n,r,s,i,o,a,u){return e=_u(n,r,!0,e,s,i,o,a,u),e.context=tp(null),n=e.current,r=Ge(),s=mn(n),i=Wt(r,s),i.callback=t??null,fn(n,i,s),e.current.lanes=s,Ls(e,s,r),nt(e,r),e}function So(e,t,n,r){var s=t.current,i=Ge(),o=mn(s);return n=tp(n),t.context===null?t.context=n:t.pendingContext=n,t=Wt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=fn(s,t,o),e!==null&&(Et(e,s,o,i),ji(e,s,o)),o}function so(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ud(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Su(e,t){ud(e,t),(e=e.alternate)&&ud(e,t)}function Wy(){return null}var rp=typeof reportError=="function"?reportError:function(e){console.error(e)};function xu(e){this._internalRoot=e}xo.prototype.render=xu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));So(e,t,null,null)};xo.prototype.unmount=xu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zn(function(){So(null,e,null,null)}),t[Vt]=null}};function xo(e){this._internalRoot=e}xo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Rh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<rn.length&&t!==0&&t<rn[n].priority;n++);rn.splice(n,0,e),n===0&&Ih(e)}};function ku(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ko(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cd(){}function Hy(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=so(o);i.call(c)}}var o=np(t,r,e,0,null,!1,!1,"",cd);return e._reactRootContainer=o,e[Vt]=o.current,Es(e.nodeType===8?e.parentNode:e),zn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=so(u);a.call(c)}}var u=_u(e,0,!1,null,null,!1,!1,"",cd);return e._reactRootContainer=u,e[Vt]=u.current,Es(e.nodeType===8?e.parentNode:e),zn(function(){So(t,u,n,r)}),u}function jo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=so(o);a.call(u)}}So(t,o,e,s)}else o=Hy(n,t,e,s,r);return so(o)}Ah=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ts(t.pendingLanes);n!==0&&(zl(t,n|1),nt(t,_e()),!(ne&6)&&(br=_e()+500,Sn()))}break;case 13:zn(function(){var r=Gt(e,1);if(r!==null){var s=Ge();Et(r,e,1,s)}}),Su(e,1)}};ql=function(e){if(e.tag===13){var t=Gt(e,134217728);if(t!==null){var n=Ge();Et(t,e,134217728,n)}Su(e,134217728)}};Oh=function(e){if(e.tag===13){var t=mn(e),n=Gt(e,t);if(n!==null){var r=Ge();Et(n,e,t,r)}Su(e,t)}};Rh=function(){return oe};Dh=function(e,t){var n=oe;try{return oe=e,t()}finally{oe=n}};Ma=function(e,t,n){switch(t){case"input":if(Aa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=po(r);if(!s)throw Error(O(90));dh(r),Aa(r,s)}}}break;case"textarea":fh(e,n);break;case"select":t=n.value,t!=null&&gr(e,!!n.multiple,t,!1)}};_h=gu;Sh=zn;var Vy={usingClientEntryPoint:!1,Events:[Us,ur,po,vh,wh,gu]},Jr={findFiberByHostInstance:Rn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gy={bundleType:Jr.bundleType,version:Jr.version,rendererPackageName:Jr.rendererPackageName,rendererConfig:Jr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jh(e),e===null?null:e.stateNode},findFiberByHostInstance:Jr.findFiberByHostInstance||Wy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ci=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ci.isDisabled&&ci.supportsFiber)try{uo=ci.inject(Gy),Rt=ci}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vy;lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ku(t))throw Error(O(200));return qy(e,t,null,n)};lt.createRoot=function(e,t){if(!ku(e))throw Error(O(299));var n=!1,r="",s=rp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=_u(e,1,!1,null,null,n,!1,r,s),e[Vt]=t.current,Es(e.nodeType===8?e.parentNode:e),new xu(t)};lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=jh(t),e=e===null?null:e.stateNode,e};lt.flushSync=function(e){return zn(e)};lt.hydrate=function(e,t,n){if(!ko(t))throw Error(O(200));return jo(null,e,t,!0,n)};lt.hydrateRoot=function(e,t,n){if(!ku(e))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=rp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=np(t,null,e,1,n??null,s,!1,i,o),e[Vt]=t.current,Es(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new xo(t)};lt.render=function(e,t,n){if(!ko(t))throw Error(O(200));return jo(null,e,t,!1,n)};lt.unmountComponentAtNode=function(e){if(!ko(e))throw Error(O(40));return e._reactRootContainer?(zn(function(){jo(null,null,e,!1,function(){e._reactRootContainer=null,e[Vt]=null})}),!0):!1};lt.unstable_batchedUpdates=gu;lt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ko(n))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return jo(e,t,n,!1,r)};lt.version="18.3.1-next-f1338f8080-20240426";function sp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sp)}catch(e){console.error(e)}}sp(),rh.exports=lt;var Ky=rh.exports,ip,dd=Ky;ip=dd.createRoot,dd.hydrateRoot;var op={exports:{}},Qy="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Jy=Qy,Yy=Jy;function ap(){}function lp(){}lp.resetWarningCache=ap;var Xy=function(){function e(r,s,i,o,a,u){if(u!==Yy){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:lp,resetWarningCache:ap};return n.PropTypes=n,n};op.exports=Xy();var Zy=op.exports;const E=Sm(Zy),ev="modulepreload",tv=function(e){return"/pocket-budget/"+e},hd={},Fs=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(a=>{if(a=tv(a),a in hd)return;hd[a]=!0;const u=a.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":ev,u||(d.as="script",d.crossOrigin=""),d.href=a,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((h,g)=>{d.addEventListener("load",h),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},nv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fs(async()=>{const{default:r}=await Promise.resolve().then(()=>Rr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class ju extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class rv extends ju{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class fd extends ju{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class pd extends ju{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var yl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(yl||(yl={}));var sv=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};class iv{constructor(t,{headers:n={},customFetch:r,region:s=yl.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=nv(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return sv(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:u}=n;u||(u=this.region);const c=new URL(`${this.url}/${t}`);u&&u!=="any"&&(a["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(a["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(a["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:d}).catch(x=>{throw new rv(x)}),g=h.headers.get("x-relay-error");if(g&&g==="true")throw new fd(h);if(!h.ok)throw new pd(h);let v=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),k;return v==="application/json"?k=yield h.json():v==="application/octet-stream"?k=yield h.blob():v==="text/event-stream"?k=h:v==="multipart/form-data"?k=yield h.formData():k=yield h.text(),{data:k,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof pd||s instanceof fd?s.context:void 0}}})}}var Xe={},Nu={},No={},zs={},Eo={},Co={},ov=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")},Tr=ov();const av=Tr.fetch,up=Tr.fetch.bind(Tr),cp=Tr.Headers,lv=Tr.Request,uv=Tr.Response,Rr=Object.freeze(Object.defineProperty({__proto__:null,Headers:cp,Request:lv,Response:uv,default:up,fetch:av},Symbol.toStringTag,{value:"Module"})),cv=xm(Rr);var bo={};Object.defineProperty(bo,"__esModule",{value:!0});let dv=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};bo.default=dv;var dp=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Co,"__esModule",{value:!0});const hv=dp(cv),fv=dp(bo);let pv=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=hv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,u;let c=null,d=null,h=null,g=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=p:d=JSON.parse(p))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),C=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");x&&C&&C.length>1&&(h=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,g=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(d=[],c=null,g=200,v="OK")}catch{i.status===404&&x===""?(g=204,v="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,g=200,v="OK"),c&&this.shouldThrowOnError)throw new fv.default(c)}return{error:c,data:d,count:h,status:g,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,u;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(u=i==null?void 0:i.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Co.default=pv;var mv=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eo,"__esModule",{value:!0});const gv=mv(Co);let yv=class extends gv.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const u=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${u};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Eo.default=yv;var vv=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zs,"__esModule",{value:!0});const wv=vv(Eo);let _v=class extends wv.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};zs.default=_v;var Sv=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(No,"__esModule",{value:!0});const Yr=Sv(zs);let xv=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Yr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((a,u)=>a.concat(Object.keys(u)),[]);if(o.length>0){const a=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",a.join(","))}}return new Yr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const u=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Yr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Yr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Yr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};No.default=xv;var To={},Po={};Object.defineProperty(Po,"__esModule",{value:!0});Po.version=void 0;Po.version="0.0.0-automated";Object.defineProperty(To,"__esModule",{value:!0});To.DEFAULT_HEADERS=void 0;const kv=Po;To.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${kv.version}`};var hp=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nu,"__esModule",{value:!0});const jv=hp(No),Nv=hp(zs),Ev=To;let Cv=class fp{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Ev.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new jv.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new fp(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${t}`);let u;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{a.searchParams.append(d,h)})):(o="POST",u=n);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Nv.default({method:o,url:a,headers:c,schema:this.schemaName,body:u,fetch:this.fetch,allowEmpty:!1})}};Nu.default=Cv;var Dr=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.PostgrestError=Xe.PostgrestBuilder=Xe.PostgrestTransformBuilder=Xe.PostgrestFilterBuilder=Xe.PostgrestQueryBuilder=Xe.PostgrestClient=void 0;const pp=Dr(Nu);Xe.PostgrestClient=pp.default;const mp=Dr(No);Xe.PostgrestQueryBuilder=mp.default;const gp=Dr(zs);Xe.PostgrestFilterBuilder=gp.default;const yp=Dr(Eo);Xe.PostgrestTransformBuilder=yp.default;const vp=Dr(Co);Xe.PostgrestBuilder=vp.default;const wp=Dr(bo);Xe.PostgrestError=wp.default;var bv=Xe.default={PostgrestClient:pp.default,PostgrestQueryBuilder:mp.default,PostgrestFilterBuilder:gp.default,PostgrestTransformBuilder:yp.default,PostgrestBuilder:vp.default,PostgrestError:wp.default};const{PostgrestClient:Tv,PostgrestQueryBuilder:I_,PostgrestFilterBuilder:$_,PostgrestTransformBuilder:L_,PostgrestBuilder:M_,PostgrestError:U_}=bv;class Pv{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Av="2.15.1",Ov=`realtime-js/${Av}`,Rv="1.0.0",vl=1e4,Dv=1e3,Iv=100;var fs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(fs||(fs={}));var Ne;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ne||(Ne={}));var kt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(kt||(kt={}));var wl;(function(e){e.websocket="websocket"})(wl||(wl={}));var On;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(On||(On={}));class $v{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const u=r.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:u,payload:c}}}class _p{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var le;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(le||(le={}));const md=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=Lv(o,e,t,s),i),{})},Lv=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?Sp(i,o):_l(o)},Sp=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Fv(t,n)}switch(e){case le.bool:return Mv(t);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return Uv(t);case le.json:case le.jsonb:return Bv(t);case le.timestamp:return zv(t);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return _l(t);default:return _l(t)}},_l=e=>e,Mv=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Uv=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Bv=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Fv=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Sp(t,a))}return e},zv=e=>typeof e=="string"?e.replace(" ","T"):e,xp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class da{constructor(t,n,r={},s=vl){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var gd;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(gd||(gd={}));class ps{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ps.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=ps.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ps.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},u={};return this.map(i,(c,d)=>{o[c]||(u[c]=d)}),this.map(o,(c,d)=>{const h=i[c];if(h){const g=d.map(C=>C.presence_ref),v=h.map(C=>C.presence_ref),k=d.filter(C=>v.indexOf(C.presence_ref)<0),x=h.filter(C=>g.indexOf(C.presence_ref)<0);k.length>0&&(a[c]=k),x.length>0&&(u[c]=x)}else a[c]=d}),this.syncDiff(i,{joins:a,leaves:u},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,u)=>{var c;const d=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(u),d.length>0){const h=t[a].map(v=>v.presence_ref),g=d.filter(v=>h.indexOf(v.presence_ref)<0);t[a].unshift(...g)}r(a,d,u)}),this.map(o,(a,u)=>{let c=t[a];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),t[a]=c,s(a,c,u),c.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yd;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(yd||(yd={}));var ms;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ms||(ms={}));var Bt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Bt||(Bt={}));class Eu{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ne.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new da(this,kt.join,this.params,this.timeout),this.rejoinTimer=new _p(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ne.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ne.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ne.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ps(this),this.broadcastEndpointURL=xp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ne.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[ms.PRESENCE]&&this.bindings[ms.PRESENCE].length>0,d={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:u,private:a};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(Bt.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(Bt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){t==null||t(Bt.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,x=(v=k==null?void 0:k.length)!==null&&v!==void 0?v:0,C=[];for(let p=0;p<x;p++){const m=k[p],{filter:{event:y,schema:_,table:w,filter:N}}=m,j=g&&g[p];if(j&&j.event===y&&j.schema===_&&j.table===w&&j.filter===N)C.push(Object.assign(Object.assign({},m),{id:j.id}));else{this.unsubscribe(),this.state=Ne.errored,t==null||t(Bt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(Bt.SUBSCRIBED);return}}).receive("error",g=>{this.state=Ne.errored,t==null||t(Bt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Bt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Ne.joined&&t===ms.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,u;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ne.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new da(this,kt.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ne.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new da(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Iv){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:u,leave:c,join:d}=kt;if(r&&[a,u,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var k,x,C;return((k=v.filter)===null||k===void 0?void 0:k.event)==="*"||((C=(x=v.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===o}).map(v=>v.callback(g,r)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var k,x,C,p,m,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const _=v.id,w=(k=v.filter)===null||k===void 0?void 0:k.event;return _&&((x=n.ids)===null||x===void 0?void 0:x.includes(_))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const _=(m=(p=v==null?void 0:v.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof g=="object"&&"ids"in g){const k=g.data,{schema:x,table:C,commit_timestamp:p,type:m,errors:y}=k;g=Object.assign(Object.assign({},{schema:x,table:C,commit_timestamp:p,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(k))}v.callback(g,r)})}_isClosed(){return this.state===Ne.closed}_isJoined(){return this.state===Ne.joined}_isJoining(){return this.state===Ne.joining}_isLeaving(){return this.state===Ne.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Eu.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(kt.close,{},t)}_onError(t){this._on(kt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ne.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=md(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=md(t.columns,t.old_record)),n}}const vd=()=>{},di={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},qv=[1e3,2e3,5e3,1e4],Wv=1e4,Hv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Vv{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vl,this.transport=null,this.heartbeatIntervalMs=di.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vd,this.ref=0,this.reconnectTimer=null,this.logger=vd,this.conn=null,this.sendBuffer=[],this.serializer=new $v,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Fs(async()=>{const{default:a}=await Promise.resolve().then(()=>Rr);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${wl.websocket}`,this.httpEndpoint=xp(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Pv.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Rv}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case fs.connecting:return On.Connecting;case fs.open:return On.Open;case fs.closing:return On.Closing;default:return On.Closed}}isConnected(){return this.connectionState()===On.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Eu(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var u;(u=this.conn)===null||u===void 0||u.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Dv,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},di.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",u=i.status||"";this.log("receive",`${u} ${r} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(kt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Hv],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Ov};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(kt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new _p(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},di.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,a,u,c;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:vl,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:di.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t==null?void 0:t.reconnectAfterMs)!==null&&a!==void 0?a:d=>qv[d-1]||Wv,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(d,h)=>h(JSON.stringify(d)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Cu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ee(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Gv extends Cu{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Sl extends Cu{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var Kv=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};const kp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fs(async()=>{const{default:r}=await Promise.resolve().then(()=>Rr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Qv=()=>Kv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fs(()=>Promise.resolve().then(()=>Rr),void 0)).Response:Response}),xl=e=>{if(Array.isArray(e))return e.map(n=>xl(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=xl(r)}),t},Jv=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Vn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};const ha=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Yv=(e,t,n)=>Vn(void 0,void 0,void 0,function*(){const r=yield Qv();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new Gv(ha(s),i,o))}).catch(s=>{t(new Sl(ha(s),s))}):t(new Sl(ha(e),e))}),Xv=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(Jv(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function qs(e,t,n,r,s,i){return Vn(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,Xv(t,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>Yv(u,a,r))})})}function io(e,t,n,r){return Vn(this,void 0,void 0,function*(){return qs(e,"GET",t,n,r)})}function At(e,t,n,r,s){return Vn(this,void 0,void 0,function*(){return qs(e,"POST",t,r,s,n)})}function kl(e,t,n,r,s){return Vn(this,void 0,void 0,function*(){return qs(e,"PUT",t,r,s,n)})}function Zv(e,t,n,r){return Vn(this,void 0,void 0,function*(){return qs(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function jp(e,t,n,r,s){return Vn(this,void 0,void 0,function*(){return qs(e,"DELETE",t,r,s,n)})}var He=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};const e0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class t0{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=kp(s)}uploadOrUpdate(t,n,r,s){return He(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},wd),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,u&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),h=yield(t=="PUT"?kl:At)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Ee(i))return{data:null,error:i};throw i}})}upload(t,n,r){return He(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return He(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let u;const c=Object.assign({upsert:wd.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield kl(this.fetch,a.toString(),u,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(u){if(Ee(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,n){return He(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield At(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Cu("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}update(t,n,r){return He(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return He(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ee(s))return{data:null,error:s};throw s}})}copy(t,n,r){return He(this,void 0,void 0,function*(){try{return{data:{path:(yield At(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ee(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return He(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield At(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Ee(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return He(this,void 0,void 0,function*(){try{const s=yield At(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Ee(s))return{data:null,error:s};throw s}})}download(t,n){return He(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield io(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ee(a))return{data:null,error:a};throw a}})}info(t){return He(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield io(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:xl(r),error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}exists(t){return He(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Zv(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ee(r)&&r instanceof Sl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&s.push(u);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return He(this,void 0,void 0,function*(){try{return{data:yield jp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}list(t,n,r){return He(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},e0),n),{prefix:t||""});return{data:yield At(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Ee(s))return{data:null,error:s};throw s}})}listV2(t,n){return He(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield At(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const n0="2.11.0",r0={"X-Client-Info":`storage-js/${n0}`};var Qn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,[])).next())})};class s0{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},r0),n),this.fetch=kp(r)}listBuckets(){return Qn(this,void 0,void 0,function*(){try{return{data:yield io(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ee(t))return{data:null,error:t};throw t}})}getBucket(t){return Qn(this,void 0,void 0,function*(){try{return{data:yield io(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Qn(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Qn(this,void 0,void 0,function*(){try{return{data:yield kl(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Qn(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Qn(this,void 0,void 0,function*(){try{return{data:yield jp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}}class i0 extends s0{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new t0(this.url,this.headers,t,this.fetch)}}const o0="2.55.0";let rs="";typeof Deno<"u"?rs="deno":typeof document<"u"?rs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rs="react-native":rs="node";const a0={"X-Client-Info":`supabase-js-${rs}/${o0}`},l0={headers:a0},u0={schema:"public"},c0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},d0={};var h0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};const f0=e=>{let t;return e?t=e:typeof fetch>"u"?t=up:t=fetch,(...n)=>t(...n)},p0=()=>typeof Headers>"u"?cp:Headers,m0=(e,t,n)=>{const r=f0(n),s=p0();return(i,o)=>h0(void 0,void 0,void 0,function*(){var a;const u=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var g0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,[])).next())})};function y0(e){return e.endsWith("/")?e:e+"/"}function v0(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:u,auth:c,realtime:d,global:h}=t,g={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>g0(this,void 0,void 0,function*(){return""})};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}const Np="2.71.1",nr=30*1e3,jl=3,fa=jl*nr,w0="http://localhost:9999",_0="supabase.auth.token",S0={"X-Client-Info":`gotrue-js/${Np}`},Nl="X-Supabase-Api-Version",Ep={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},x0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,k0=10*60*1e3;class bu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Q(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class j0 extends bu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function N0(e){return Q(e)&&e.name==="AuthApiError"}class Cp extends bu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class xn extends bu{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class en extends xn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function E0(e){return Q(e)&&e.name==="AuthSessionMissingError"}class hi extends xn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fi extends xn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class pi extends xn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function C0(e){return Q(e)&&e.name==="AuthImplicitGrantRedirectError"}class _d extends xn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class El extends xn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function pa(e){return Q(e)&&e.name==="AuthRetryableFetchError"}class Sd extends xn{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Cl extends xn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xd=` 	
\r=`.split(""),b0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<xd.length;t+=1)e[xd[t].charCodeAt(0)]=-2;for(let t=0;t<oo.length;t+=1)e[oo[t].charCodeAt(0)]=t;return e})();function kd(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(oo[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(oo[r]),t.queuedBits-=6}}function bp(e,t,n){const r=b0[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function jd(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{A0(o,r,n)};for(let o=0;o<e.length;o+=1)bp(e.charCodeAt(o),s,i);return t.join("")}function T0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function P0(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}T0(r,t)}}function A0(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function O0(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)bp(e.charCodeAt(s),n,r);return new Uint8Array(t)}function R0(e){const t=[];return P0(e,n=>t.push(n)),new Uint8Array(t)}function D0(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>kd(s,n,r)),kd(null,n,r),t.join("")}function I0(e){return Math.round(Date.now()/1e3)+e}function $0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const _t=()=>typeof window<"u"&&typeof document<"u",Cn={tested:!1,writable:!1},Tp=()=>{if(!_t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Cn.tested)return Cn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Cn.tested=!0,Cn.writable=!0}catch{Cn.tested=!0,Cn.writable=!1}return Cn.writable};function L0(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Pp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fs(async()=>{const{default:r}=await Promise.resolve().then(()=>Rr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},M0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",rr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},bn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Zt=async(e,t)=>{await e.removeItem(t)};class Ao{constructor(){this.promise=new Ao.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ao.promiseConstructor=Promise;function ma(e){const t=e.split(".");if(t.length!==3)throw new Cl("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!x0.test(t[r]))throw new Cl("JWT not in base64url format");return{header:JSON.parse(jd(t[0])),payload:JSON.parse(jd(t[1])),signature:O0(t[2]),raw:{header:t[0],payload:t[1]}}}async function U0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function B0(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function F0(e){return("0"+e.toString(16)).substr(-2)}function z0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,F0).join("")}async function q0(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function W0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await q0(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jn(e,t,n=!1){const r=z0();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await rr(e,`${t}-code-verifier`,s);const i=await W0(r);return[i,r===i?"plain":"s256"]}const H0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function V0(e){const t=e.headers.get(Nl);if(!t||!t.match(H0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function G0(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function K0(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Q0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yn(e){if(!Q0.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ga(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Nd(e){return JSON.parse(JSON.stringify(e))}var J0=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const An=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Y0=[502,503,504];async function Ed(e){var t;if(!M0(e))throw new El(An(e),0);if(Y0.includes(e.status))throw new El(An(e),e.status);let n;try{n=await e.json()}catch(i){throw new Cp(An(i),i)}let r;const s=V0(e);if(s&&s.getTime()>=Ep["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Sd(An(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new en}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Sd(An(n),e.status,n.weak_password.reasons);throw new j0(An(n),e.status||500,r)}const X0=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Z(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Nl]||(i[Nl]=Ep["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await Z0(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function Z0(e,t,n,r,s,i){const o=X0(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(u){throw console.error(u),new El(An(u),0)}if(a.ok||await Ed(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(u){await Ed(u)}}function Mt(e){var t;let n=null;rw(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=I0(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Cd(e){const t=Mt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function on(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ew(e){return{data:e,error:null}}function tw(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=J0(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:a,user:u},error:null}}function nw(e){return e}function rw(e){return e.access_token&&e.refresh_token&&e.expires_in}const ya=["global","local","others"];var sw=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class iw{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Pp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=ya[0]){if(ya.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ya.join(", ")}`);try{return await Z(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Z(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:on})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=sw(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:tw,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Q(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Z(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:on})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,u;try{const c={nextPage:null,lastPage:0,total:0},d=await Z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:nw});if(d.error)throw d.error;const h=await d.json(),g=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(u=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(k=>{const x=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);c[`${C}Page`]=x}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Q(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Yn(t);try{return await Z(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:on})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Yn(t);try{return await Z(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:on})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Yn(t);try{return await Z(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:on})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Yn(t.userId);try{const{data:n,error:r}=await Z(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Yn(t.userId),Yn(t.id);try{return{data:await Z(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}}function bd(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function ow(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xn={debug:!!(globalThis&&Tp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ap extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class aw extends Ap{}async function lw(e,t,n){Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new aw(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}ow();const uw={url:w0,storageKey:_0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:S0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Td(e,t,n){return await n()}const Zn={};class Is{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Is.nextInstanceID,Is.nextInstanceID+=1,this.instanceID>0&&_t()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},uw),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new iw({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Pp(s.fetch),this.lock=s.lock||Td,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:_t()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=lw:this.lock=Td,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Tp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=bd(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=bd(this.memoryStorage)),_t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Zn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Zn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Np}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=L0(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),_t()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),C0(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Q(n)?{error:n}:{error:new Cp("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Mt}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:h,options:g}=t;let v=null,k=null;this.flowType==="pkce"&&([v,k]=await Jn(this.storage,this.storageKey)),i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:h,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:v,code_challenge_method:k},xform:Mt})}else if("phone"in t){const{phone:d,password:h,options:g}=t;i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Mt})}else throw new fi("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Cd})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Cd})}else throw new fi("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new hi}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,a,u,c,d,h,g,v;let k,x;if("message"in t)k=t.message,x=t.signature;else{const{chain:C,wallet:p,statement:m,options:y}=t;let _;if(_t())if(typeof p=="object")_=p;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=p}const w=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),m?{statement:m}:null));let j;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")j=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)j=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)k=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),x=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${w.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(k),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:C,error:p}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:D0(x)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Mt});if(p)throw p;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new hi}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:p})}catch(C){if(Q(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(t){const n=await bn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Mt});if(await Zt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new hi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Mt}),{data:u,error:c}=a;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new hi}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:u}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Jn(this.storage,this.storageKey));const{error:h}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:u}=t,{data:c,error:d}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new fi("You must provide either an email or phone number.")}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Mt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,c=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(Q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Jn(this.storage,this.storageKey)),await Z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:ew})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new en;const{error:s}=await Z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Q(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await Z(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await Z(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new fi("You must provide either an email or phone number and a type")}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await bn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<fa:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await bn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=ga()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(u,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:on}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new en}:await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:on})})}catch(n){if(Q(n))return E0(n)&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new en;const o=s.session;let a=null,u=null;this.flowType==="pkce"&&t.email!=null&&([a,u]=await Jn(this.storage,this.storageKey));const{data:c,error:d}=await Z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:u}),jwt:o.access_token,xform:on});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new en;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=ma(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Q(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new en;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!_t())throw new pi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new pi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _d("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new _d("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:u,token_type:c}=t;if(!i||!a||!o||!c)throw new pi("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let g=d+h;u&&(g=parseInt(u));const v=g-d;v*1e3<=nr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const k=g-h;d-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,g,d):d-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,g,d);const{data:x,error:C}=await this._getUser(i);if(C)throw C;const p={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:g,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(r){if(Q(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await bn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(N0(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=$0(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Jn(this.storage,this.storageKey,!0));try{return await Z(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,u,c,d;const{data:h,error:g}=i;if(g)throw g;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Z(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return _t()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Q(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Z(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await B0(async s=>(s>0&&await U0(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Mt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&pa(i)&&Date.now()+o-r<nr})}catch(r){if(this._debug(n,"error",r),Q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),_t()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await bn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await bn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await rr(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:ga()}else if(s&&!s.user&&!s.user){const o=await bn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Zt(this.storage,this.storageKey+"-user"),await rr(this.storage,this.storageKey,s)):s.user=ga()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<fa;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${fa}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),pa(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new en;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ao;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new en;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Q(i)){const o={session:null,error:i};return pa(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await rr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Nd(s);await rr(this.storage,this.storageKey,i)}else{const s=Nd(n);await rr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Zt(this.storage,this.storageKey),await Zt(this.storage,this.storageKey+"-code-verifier"),await Zt(this.storage,this.storageKey+"-user"),this.userStorage&&await Zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&_t()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),nr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/nr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${nr}ms, refresh threshold is ${jl} ticks`),s<=jl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Ap)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_t()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Jn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Z(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:u,error:c}=await Z(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await Z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(Q(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Q(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ma(s.access_token);let a=null;o.aal&&(a=o.aal);let u=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+k0>s)return r;const{data:i,error:o}=await Z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:v,error:k}=await this.getSession();if(k||!v.session)return{data:null,error:k};r=v.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:u}}=ma(r);n!=null&&n.allowExpired||G0(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:s,signature:o},error:null}}const d=K0(s.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,R0(`${a}.${u}`)))throw new Cl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}}Is.nextInstanceID=0;const cw=Is;class dw extends cw{constructor(t){super(t)}}var hw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,[])).next())})};class fw{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=y0(t),u=new URL(a);this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,d={db:u0,realtime:d0,auth:Object.assign(Object.assign({},c0),{storageKey:c}),global:l0},h=v0(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=m0(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Tv(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new i0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new iv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return hw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:u},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dw({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:u,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Vv(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const pw=(e,t,n)=>new fw(e,t,n);function mw(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}mw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var gw={VITE_SUPABASE_URL:"https://micbqxkhejumwddmwyxm.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pY2JxeGtoZWp1bXdkZG13eXhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMzQzOTMsImV4cCI6MjA3MDgxMDM5M30.w1Mc6TrXvkRwjqc6gIGA4baVaMuwVHxR76nH5kt8BJg",BASE_URL:"/pocket-budget/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const yw=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"],Pd=yw.filter(e=>!gw[e]);if(Pd.length)throw new Error(`Missing Supabase environment variables: ${Pd.join(", ")}`);const Se=pw("https://micbqxkhejumwddmwyxm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pY2JxeGtoZWp1bXdkZG13eXhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMzQzOTMsImV4cCI6MjA3MDgxMDM5M30.w1Mc6TrXvkRwjqc6gIGA4baVaMuwVHxR76nH5kt8BJg",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),gs=typeof window<"u"?window.localStorage:null,It={id:"fulltest-demo-user-id",email:"fulltest@test.com",password:"fullpass123",name:"Full Test Demo"},vw=()=>({id:It.id,email:It.email,full_name:It.name,created_at:new Date().toISOString()}),ww={income:[{name:"Salary",icon:""},{name:"Freelance",icon:""},{name:"Investment",icon:""},{name:"Business",icon:""},{name:"Gift",icon:""}],expense:[{name:"Groceries",icon:""},{name:"Rent",icon:""},{name:"Transportation",icon:""},{name:"Entertainment",icon:""},{name:"Bills",icon:""},{name:"Shopping",icon:""}]},ao=e=>({income:[...(e==null?void 0:e.income)||[]].map(t=>({...t})),expense:[...(e==null?void 0:e.expense)||[]].map(t=>({...t}))}),re={session:null,profile:vw(),categories:ao(ww),budgets:[],goals:[],contributions:[]},Op=e=>{re.session=e,gs&&(e?gs.setItem("fulltest-demo-session",JSON.stringify(e)):gs.removeItem("fulltest-demo-session"))},_w=()=>{if(re.session)return re.session;if(!gs)return null;try{const e=gs.getItem("fulltest-demo-session");if(!e)return null;const t=JSON.parse(e);return t!=null&&t.user?(re.session=t,t):null}catch(e){return console.error("Failed to hydrate demo session",e),null}},Sw={id:It.id,email:It.email,user_metadata:{full_name:It.name},created_at:new Date().toISOString()},xw=()=>({user:Sw,access_token:"fulltest-demo-token",refresh_token:"fulltest-demo-refresh",token_type:"bearer",expires_in:3600}),kn=e=>e===It.id,Tu=e=>({...e,transactions:[...e.transactions||[]],category_budgets:[...e.category_budgets||[]]}),qn=e=>({...e,budgeted_amount:e.budgeted_amount??e.budgetedAmount??null,receipt_url:e.receipt_url??e.receipt??null}),Oo=e=>({...e,milestones:e.milestones&&e.milestones.length?e.milestones:[25,50,75,100]}),Pu=e=>({...Oo(e),goal_contributions:(re.contributions||[]).filter(t=>t.goal_id===e.id).sort((t,n)=>new Date(n.contributed_at)-new Date(t.contributed_at))}),kw=async(e,t)=>e===It.email?bl(e,t):Se.auth.signUp({email:e,password:t}),bl=async(e,t)=>{if(e===It.email&&t===It.password){const n=xw();return Op(n),typeof window<"u"&&window.dispatchEvent(new CustomEvent("demo-auth-change",{detail:{session:n,event:"SIGNED_IN"}})),{data:{user:n.user,session:n},error:null}}return Se.auth.signInWithPassword({email:e,password:t})},jw=async()=>Se.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}}),Nw=async()=>(Op(null),typeof window<"u"&&window.dispatchEvent(new CustomEvent("demo-auth-change",{detail:{session:null,event:"SIGNED_OUT"}})),Se.auth.signOut()),Ew=async()=>{const e=_w();if(e!=null&&e.user)return{user:e.user,error:null};const{data:{user:t},error:n}=await Se.auth.getUser();return{user:t,error:n}},Cw=async(e,t,n)=>kn(e)?(re.profile={id:e,email:t,full_name:n,created_at:new Date().toISOString()},{data:[re.profile],error:null}):Se.from("user_profiles").insert([{id:e,email:t,full_name:n,created_at:new Date().toISOString()}]).select(),bw=async e=>kn(e)?{data:re.profile,error:null}:Se.from("user_profiles").select("*").eq("id",e).single(),Au=()=>re.budgets,Rp=e=>Au().find(t=>t.id===e),Tw=async e=>{if(kn(e))return{data:Au().map(Tu),error:null};const{data:t,error:n}=await Se.from("budgets").select("*, transactions (*)").eq("user_id",e).order("created_at",{ascending:!1});return{data:(t||[]).map(r=>({...r,transactions:(r.transactions||[]).map(qn)})),error:n}},Ad=async(e,t)=>{const n={user_id:e,name:t.name,category_budgets:t.categoryBudgets||[],created_at:new Date().toISOString(),transactions:[]};if(kn(e)){const i={...n,id:`demo-budget-${Date.now()}`};return re.budgets=[i,...re.budgets],{data:[Tu(i)],error:null}}const{data:r,error:s}=await Se.from("budgets").insert([{user_id:e,name:t.name,category_budgets:t.categoryBudgets||[]}]).select("*, transactions (*)");return{data:(r||[]).map(i=>({...i,transactions:(i.transactions||[]).map(qn)})),error:s}},Ai=async(e,t)=>{if(e.startsWith("demo-budget-")){const o=Rp(e);return o?(Object.assign(o,{name:t.name??o.name,category_budgets:t.categoryBudgets??o.category_budgets}),{data:[Tu(o)],error:null}):{data:null,error:{message:"Budget not found"}}}const n={name:t.name,category_budgets:t.categoryBudgets},r=Object.fromEntries(Object.entries(n).filter(([,o])=>o!==void 0)),{data:s,error:i}=await Se.from("budgets").update(r).eq("id",e).select("*, transactions (*)");return{data:(s||[]).map(o=>({...o,transactions:(o.transactions||[]).map(qn)})),error:i}},Pw=async e=>e.startsWith("demo-budget-")?(re.budgets=re.budgets.filter(t=>t.id!==e),re.contributions=re.contributions.filter(t=>t.linked_budget_id!==e),{error:null}):Se.from("budgets").delete().eq("id",e),Dp=async(e,t)=>{const n={budget_id:e,name:t.name,amount:t.amount,budgeted_amount:t.budgetedAmount??null,category:t.category,type:t.type,date:t.date,receipt_url:t.receipt??null,created_at:new Date().toISOString()};if(e.startsWith("demo-budget-")){const i=Rp(e);if(!i)return{data:null,error:{message:"Budget not found"}};const o={...n,id:`demo-tx-${Date.now()}`};return i.transactions=[...i.transactions||[],o],{data:[qn(o)],error:null}}const{data:r,error:s}=await Se.from("transactions").insert([n]).select();return{data:(r||[]).map(qn),error:s}},Aw=async(e,t)=>{const n={name:t.name,amount:t.amount,budgeted_amount:t.budgetedAmount??null,category:t.category,type:t.type,date:t.date,receipt_url:t.receipt??null};if(e.startsWith("demo-tx-")){const o=Au().find(u=>(u.transactions||[]).some(c=>c.id===e));if(!o)return{data:null,error:{message:"Transaction not found"}};o.transactions=(o.transactions||[]).map(u=>u.id===e?{...u,...n}:u);const a=o.transactions.find(u=>u.id===e);return{data:[qn(a)],error:null}}const r=Object.fromEntries(Object.entries(n).filter(([,o])=>o!==void 0)),{data:s,error:i}=await Se.from("transactions").update(r).eq("id",e).select();return{data:(s||[]).map(qn),error:i}},Ow=async e=>kn(e)?{data:{categories:ao(re.categories)},error:null}:Se.from("user_categories").select("*").eq("user_id",e).single(),Rw=async(e,t)=>kn(e)?(re.categories=ao(t),{data:[{categories:ao(re.categories)}],error:null}):Se.from("user_categories").upsert([{user_id:e,categories:t}]).select(),Dw=async e=>{if(kn(e))return{data:re.goals.map(r=>Pu(r)),error:null};const{data:t,error:n}=await Se.from("goals").select("*, goal_contributions (*)").eq("user_id",e).order("created_at",{ascending:!1});return{data:(t||[]).map(r=>({...Oo(r),goal_contributions:(r.goal_contributions||[]).sort((s,i)=>new Date(i.contributed_at)-new Date(s.contributed_at))})),error:n}},Iw=async(e,t)=>{const n={user_id:e,name:t.name,target_amount:t.targetAmount,target_date:t.targetDate,status:t.status||"active",milestones:t.milestones||[25,50,75,100],linked_budget_id:t.linkedBudgetId||null,created_at:new Date().toISOString()};if(kn(e)){const i={...n,id:`demo-goal-${Date.now()}`};return re.goals=[i,...re.goals],{data:[Pu(i)],error:null}}const{data:r,error:s}=await Se.from("goals").insert([n]).select("*, goal_contributions (*)");return{data:(r||[]).map(i=>({...Oo(i),goal_contributions:(i.goal_contributions||[]).sort((o,a)=>new Date(a.contributed_at)-new Date(o.contributed_at))})),error:s}},$w=async(e,t)=>{const n={name:t.name,target_amount:t.targetAmount,target_date:t.targetDate,status:t.status,milestones:t.milestones,linked_budget_id:t.linkedBudgetId??null};if(e.startsWith("demo-goal-")){const o=re.goals.findIndex(u=>u.id===e);if(o===-1)return{data:null,error:{message:"Goal not found"}};const a=Object.fromEntries(Object.entries(n).filter(([,u])=>u!==void 0));return re.goals[o]={...re.goals[o],...a},{data:[Pu(re.goals[o])],error:null}}const r=Object.fromEntries(Object.entries(n).filter(([,o])=>o!==void 0)),{data:s,error:i}=await Se.from("goals").update(r).eq("id",e).select("*, goal_contributions (*)");return{data:(s||[]).map(o=>({...Oo(o),goal_contributions:(o.goal_contributions||[]).sort((a,u)=>new Date(u.contributed_at)-new Date(a.contributed_at))})),error:i}},Lw=async e=>e.startsWith("demo-goal-")?(re.goals=re.goals.filter(t=>t.id!==e),re.contributions=re.contributions.filter(t=>t.goal_id!==e),{error:null}):Se.from("goals").delete().eq("id",e),Mw=async(e,t)=>{const n={goal_id:e,amount:t.amount,contributed_at:t.date||new Date().toISOString(),note:t.note||null,created_at:new Date().toISOString()};if(e.startsWith("demo-goal-")){const i={...n,id:`demo-goal-contribution-${Date.now()}`};return re.contributions=[i,...re.contributions],{data:[i],error:null}}const{data:r,error:s}=await Se.from("goal_contributions").insert([n]).select();return{data:r,error:s}},Ip=b.createContext(void 0),Uw=1e4,Bw=1e4,Fw=e=>{const t=new Error(e);return t.name="TimeoutError",t},Od=(e,t)=>Promise.race([e,new Promise((n,r)=>setTimeout(()=>r(Fw(t)),Bw))]);function Ws(){const e=b.useContext(Ip);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function $p({children:e}){const[t,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(!0),[a,u]=b.useState(!0),[c,d]=b.useState("checking-session"),h=b.useRef(!0),g=b.useCallback(p=>{h.current&&p()},[]),v=b.useCallback(p=>{g(()=>s(p))},[g]),k=b.useCallback(async p=>{var _;if(!p){v(null);return}let m=!0,y="ready";try{d("loading-profile");const{data:w,error:N}=await Od(bw(p.id),"Profile lookup timed out");if(N&&N.code==="PGRST116"){const j=((_=p.user_metadata)==null?void 0:_.full_name)||p.email,{data:T,error:F}=await Od(Cw(p.id,p.email,j),"Profile creation timed out");if(F){console.error("Error creating profile",F),v(null);return}v((T==null?void 0:T[0])||null);return}if(N){console.error("Error loading profile",N),v(null);return}v(w)}catch(w){if((w==null?void 0:w.name)==="TimeoutError"){console.warn("Supabase did not respond in time while loading the profile. Falling back to signed-out state.",w),v(null),g(()=>o(!1)),d("profile-timeout"),m=!1,y="profile-timeout";return}console.error("Unexpected profile error",w),v(null)}finally{m&&(g(()=>o(!1)),d(y))}},[v,g]),x=b.useCallback(async p=>{g(()=>n(p)),p?(g(()=>o(!0)),await k(p)):(v(null),g(()=>o(!1)),d("signed-out"))},[v,k,g]);b.useEffect(()=>{h.current=!0,(async()=>{try{d("checking-session");const _=new Promise((N,j)=>setTimeout(()=>j(new Error("Session lookup timed out")),Uw)),{user:w}=await Promise.race([Ew(),_]);if(!h.current)return;await x(w)}catch(_){if(console.warn("Failed to resolve initial session",_),!h.current)return;g(()=>{n(null),s(null),o(!1)}),d("signed-out")}finally{h.current&&u(!1)}})();const{data:m}=Se.auth.onAuthStateChange(async(_,w)=>{h.current&&(d("auth-transition"),await x((w==null?void 0:w.user)??null))}),y=async _=>{if(!h.current)return;const{session:w}=_.detail||{};d("auth-transition"),await x((w==null?void 0:w.user)??null)};return typeof window<"u"&&window.addEventListener("demo-auth-change",y),()=>{h.current=!1,m.subscription.unsubscribe(),typeof window<"u"&&window.removeEventListener("demo-auth-change",y)}},[x,g]);const C=b.useMemo(()=>({user:t,userProfile:r,loading:i,initializing:a,status:c}),[t,r,i,a,c]);return l.jsx(Ip.Provider,{value:C,children:e})}$p.propTypes={children:E.node.isRequired};const zw=24*60*60*1e3,qw={weekly:7,biweekly:14,semimonthly:15,"semi-monthly":15,quarterly:91,yearly:365,annual:365},va={green:{label:"On Track"},yellow:{label:"Watch"},red:{label:"Over"}},Rd=(e="")=>e.toLowerCase().trim(),Ww=(e,t,n)=>Math.min(Math.max(e,t),n),Xr=e=>{if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t},Dd=(e,t)=>{const n=new Date(e);return n.setDate(n.getDate()+t),n},wa=(e,t)=>{const n=new Date(e);return n.setMonth(n.getMonth()+t),n},Hw=e=>(((e==null?void 0:e.cycle)||(e==null?void 0:e.cycleMetadata)||{}).type||(e==null?void 0:e.cycleType)||"monthly").toLowerCase(),Vw=(e,t)=>{const n=(e==null?void 0:e.cycle)||(e==null?void 0:e.cycleMetadata)||{};return Xr(n.currentStart)||Xr(n.startDate)||Xr(e==null?void 0:e.cycleStartDate)||Xr(e==null?void 0:e.createdAt)||Xr(e==null?void 0:e.created_at)||new Date(t)},Lp=(e,t)=>{const n=(t==null?void 0:t.cycle)||(t==null?void 0:t.cycleMetadata)||{};return typeof n.lengthDays=="number"?n.lengthDays:typeof n.days=="number"?n.days:e==="custom"&&typeof n.customDays=="number"?n.customDays:e==="per-paycheck"&&typeof n.payFrequencyDays=="number"||e==="per_paycheck"&&typeof n.payFrequencyDays=="number"?n.payFrequencyDays:typeof n.cadenceDays=="number"?n.cadenceDays:typeof n.intervalDays=="number"?n.intervalDays:e==="monthly"?30:e==="biweekly"?14:e==="weekly"?7:e==="per-paycheck"||e==="per_paycheck"?14:e==="custom"?30:qw[e]||30},Id=(e,t,n)=>{const r=(n==null?void 0:n.cycle)||(n==null?void 0:n.cycleMetadata)||{};switch(t){case"monthly":return wa(e,r.repeatEvery||1);case"quarterly":return wa(e,3);case"yearly":case"annual":return wa(e,12);case"semimonthly":case"semi-monthly":{const s=r.days||r.lengthDays||15;return Dd(e,s)}default:{const s=Lp(t,n);return Dd(e,s)}}},Gw=(e,t)=>{const n=Hw(e);let r=Vw(e,t),s=Id(r,n,e),i=0;for(;s&&t>=s&&i<500;)r=s,s=Id(r,n,e),i+=1;const o=s?s.getTime()-r.getTime():Lp(n,e)*zw,a=t.getTime()-r.getTime(),u=o>0?Ww(a/o,0,1):1;return{cycleType:n,currentStart:r,nextStart:s,totalMs:o,elapsedMs:a,progress:u}},Oi=e=>`$${Number.parseFloat(e||0).toFixed(2)}`,Kw=(e,t,n,r)=>{const s=Math.round(r*100);return`Spent ${Oi(e)} of ${Oi(t)} with ${s}% of the cycle elapsed (expected ${Oi(n)}).`},$d=(e,t,n)=>{const r=Number.isFinite(t)?t:0,s=Number.isFinite(e)?e:0,i=r*n;if(r<=0){if(s<=0){const d="green";return{status:d,...va[d],tooltip:"No budget set for this period.",actual:s,budgeted:r,expected:i}}const c="red";return{status:c,...va[c],tooltip:`Spending ${Oi(s)} without a set budget for this cycle.`,actual:s,budgeted:r,expected:i}}const o=s/r,a=.1;let u="green";return o>n+a?u="red":o>n&&(u="yellow"),{status:u,...va[u],tooltip:Kw(s,r,i,n),actual:s,budgeted:r,expected:i}},Mp=(e,t=new Date)=>{const n=e||{},r=(n.transactions||[]).filter(g=>g.type==="expense"),s=Gw(n,t),i=s.progress??1,a=(n.categoryBudgets||[]).map(g=>{const v=Rd(g.category),k=r.filter(p=>Rd(p.category)===v).reduce((p,m)=>p+(Number.isFinite(m.amount)?m.amount:0),0),x=Number.isFinite(g.budgetedAmount)?g.budgetedAmount:Number.isFinite(g.amount)?g.amount:0,C=$d(k,x,i);return{name:g.category,key:v,actual:k,budgeted:x,...C}}),u=a.reduce((g,v)=>(v.key&&(g[v.key]=v),g),{}),c=a.reduce((g,v)=>g+v.budgeted,0),d=r.reduce((g,v)=>g+(Number.isFinite(v.amount)?v.amount:0),0),h=$d(d,c,i);return{cycle:{type:s.cycleType,start:s.currentStart,end:s.nextStart,progress:i},categories:a,categoriesByName:u,overall:h}},Qw=["trial","paid","pro","premium","plus"],Ld=[{category:"Rent",budgetedAmount:1200},{category:"Groceries",budgetedAmount:450},{category:"Transportation",budgetedAmount:180},{category:"Bills",budgetedAmount:320},{category:"Entertainment",budgetedAmount:150},{category:"Shopping",budgetedAmount:120},{category:"Dining Out",budgetedAmount:160},{category:"Emergency Fund",budgetedAmount:100}],Up=[{type:"monthly",label:"Monthly",description:"Free forever. Resets on the first of each month.",requiresPaid:!1},{type:"per-paycheck",label:"Per-paycheck",description:"Sync budgets to each paycheck during trial or paid tiers.",requiresPaid:!0},{type:"custom",label:"Custom",description:"Choose any cycle length you need (paid).",requiresPaid:!0}],mi=e=>{const t=Up.find(n=>n.type===e);return t?t.label:e?e.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Monthly"},gi=e=>({name:e===0?"My First Budget":"My Budget",cycleType:"monthly",startDate:new Date().toISOString().split("T")[0],payFrequencyDays:14,customDays:30,includeDefaultCategories:!0,adsEnabled:!0}),Md=e=>`$${Number.parseFloat(e||0).toFixed(2)}`;function Ou({budgets:e,setSelectedBudget:t,setViewMode:n,setBudgets:r,userId:s,onMetadataChange:i,onMetadataRemove:o}){const{userProfile:a}=Ws(),u=(a==null?void 0:a.plan_tier)||(a==null?void 0:a.planTier)||"free",c=Qw.includes(String(u).toLowerCase()),d=!c,[h,g]=b.useState(null),[v,k]=b.useState(""),[x,C]=b.useState(null),[p,m]=b.useState(!1),[y,_]=b.useState(!1),[w,N]=b.useState(()=>gi(e.length)),j=b.useMemo(()=>e.reduce((R,z)=>{var D;const G=((D=z==null?void 0:z.cycleMetadata)==null?void 0:D.type)||"monthly";return R[G]=(R[G]||0)+1,R},{}),[e]),T=R=>{t(R),n("details")},F=()=>{N(gi(e.length)),_(!1)},H=async()=>{m(!0);try{const R=w.includeDefaultCategories?Ld.map(U=>({...U})):[],z={name:w.name.trim()||"My Budget",categoryBudgets:R},{data:G,error:D}=await Ad(s,z);if(D)console.error("Error creating budget:",D),alert("Failed to create budget. Please try again.");else if(G!=null&&G[0]){const U={id:G[0].id,name:G[0].name,createdAt:new Date(G[0].created_at).toLocaleDateString(),categoryBudgets:G[0].category_budgets||R,transactions:[]};r(K=>[U,...K]);const q=new Date().toISOString(),Y={type:w.cycleType,label:mi(w.cycleType),currentStart:w.startDate?new Date(w.startDate).toISOString():q,payFrequencyDays:w.cycleType==="per-paycheck"?Number(w.payFrequencyDays)||14:void 0,customDays:w.cycleType==="custom"?Number(w.customDays)||30:void 0,lastEditedAt:q};i==null||i(U.id,K=>({...K,cycle:{...K.cycle,...Y},ads:{...K.ads,enabled:w.adsEnabled},changeLog:[{at:q,message:`Budget created (${Y.label}) with ${R.length||"no"} starter categories`,type:"create"},...K.changeLog||[]]})),t({...U,cycleMetadata:Y}),n("details")}}catch(R){console.error("Error creating budget:",R),alert("Failed to create budget. Please try again.")}finally{m(!1),F()}},se=async R=>{if(!v.trim()){g(null);return}m(!0);try{const{error:z}=await Ai(R.id,{name:v.trim(),categoryBudgets:R.categoryBudgets});if(z)console.error("Error updating budget:",z),alert("Failed to update budget name. Please try again.");else{r(D=>D.map(U=>U.id===R.id?{...U,name:v.trim()}:U));const G=new Date().toISOString();i==null||i(R.id,D=>({...D,changeLog:[{at:G,message:`Renamed budget to "${v.trim()}"`,type:"rename"},...D.changeLog||[]]}))}}catch(z){console.error("Error updating budget:",z),alert("Failed to update budget name. Please try again.")}finally{g(null),m(!1)}},ie=async R=>{m(!0);try{const z={name:`${R.name} (Copy)`,categoryBudgets:R.categoryBudgets||[]},{data:G,error:D}=await Ad(s,z);if(D)console.error("Error duplicating budget:",D),alert("Failed to duplicate budget. Please try again.");else if(G!=null&&G[0]){const U={id:G[0].id,name:G[0].name,createdAt:new Date(G[0].created_at).toLocaleDateString(),categoryBudgets:G[0].category_budgets||[],transactions:[]};r(K=>[U,...K]);const q=new Date().toISOString(),Y=R.cycleMetadata||{type:"monthly",label:mi("monthly")};i==null||i(U.id,K=>{var ce,xe;return{...K,cycle:{...K.cycle,...Y,lastEditedAt:q},ads:{...K.ads,enabled:R.adsEnabled!==!1},insights:{...K.insights,...R.insightsPreferences||{},nudges:{...(ce=K.insights)==null?void 0:ce.nudges,...((xe=R.insightsPreferences)==null?void 0:xe.nudges)||{}}},changeLog:[{at:q,message:`Duplicated from ${R.name}`,type:"duplicate"},...K.changeLog||[]]}})}}catch(z){console.error("Error duplicating budget:",z),alert("Failed to duplicate budget. Please try again.")}finally{C(null),m(!1)}},Te=async R=>{m(!0);try{const{error:z}=await Pw(R);z?(console.error("Error deleting budget:",z),alert("Failed to delete budget. Please try again.")):(r(G=>G.filter(D=>D.id!==R)),o==null||o(R))}catch(z){console.error("Error deleting budget:",z),alert("Failed to delete budget. Please try again.")}finally{C(null),m(!1)}},ae=Object.keys(j);return l.jsxs("div",{children:[l.jsxs("div",{className:"header-section",children:[l.jsx("p",{className:"tagline",children:"Manage your budgets and stay on top of your finances."}),l.jsx("div",{className:"header-actions",children:l.jsx("button",{className:"secondary-button",onClick:()=>n("goals"),children:"View savings goals"})})]}),e.length>0&&l.jsxs("div",{className:"cycle-summary-card",children:[l.jsx("div",{className:"cycle-summary-title",children:"Budget cycles"}),l.jsxs("div",{className:"cycle-summary-stats",children:[ae.length===0&&l.jsx("span",{children:"No active budgets yet."}),ae.map(R=>l.jsxs("span",{className:`cycle-chip cycle-${R}`,children:[mi(R),"  ",j[R]]},R))]})]}),e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("p",{children:"Welcome to Pocket Budget! Create your first budget to get started."}),l.jsx("button",{className:"primary-button",onClick:()=>{N(gi(e.length)),_(!0)},disabled:p,children:"Start a Monthly Budget"})]}):e.map(R=>{var Jt;const z=Mp(R),G=z.overall,D=(R.transactions||[]).filter(B=>B.type==="income").reduce((B,P)=>B+P.amount,0),U=(R.transactions||[]).filter(B=>B.type==="expense").reduce((B,P)=>B+P.amount,0),q=D-U,Y=(R.categoryBudgets||[]).map(B=>{var W;const P=(R.transactions||[]).filter(X=>X.type==="expense"&&X.category.toLowerCase().trim()===B.category.toLowerCase().trim()).reduce((X,V)=>X+V.amount,0),$=P>B.budgetedAmount,J=((W=B.category)==null?void 0:W.toLowerCase().trim())||"";return{...B,actual:P,isOver:$,pacing:z.categoriesByName[J]}}),K=Y.some(B=>{var P;return B.isOver||((P=B.pacing)==null?void 0:P.status)==="red"}),ce=Y.reduce((B,P)=>B+(P.budgetedAmount||0),0),xe=Y.reduce((B,P)=>B+(P.actual||0),0),$t=ce-xe,qe=((Jt=R.cycleMetadata)==null?void 0:Jt.type)||"monthly",We=mi(qe);return l.jsx("div",{className:"budgetCard",children:l.jsxs("div",{className:"budgetCard-content",children:[l.jsxs("div",{className:"budgetCard-info",onClick:()=>T(R),children:[l.jsxs("div",{className:"budgetCycleRow",children:[l.jsxs("span",{className:`cycle-pill cycle-${qe}`,children:[We,qe!=="monthly"&&d&&l.jsx("span",{className:"lock-icon","aria-hidden":"true",children:""})]}),l.jsxs("div",{className:`pacing-indicator pacing-${G.status}`,title:G.tooltip,role:"status",children:[l.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),l.jsx("span",{className:"pacing-label",children:G.label})]})]}),h===R.id?l.jsx("input",{className:"input budget-name-input",value:v,onChange:B=>k(B.target.value),onBlur:()=>se(R),onKeyPress:B=>{B.key==="Enter"&&se(R)},autoFocus:!0,disabled:p}):l.jsx("div",{className:"budgetNameRow",children:l.jsxs("div",{className:"budgetName",onClick:B=>{B.stopPropagation(),g(R.id),k(R.name)},children:[R.name,K&&l.jsx("span",{className:"expense",style:{marginLeft:"0.5rem"},children:""})]})}),l.jsxs("div",{className:"budgetBalance",children:["Balance: ",l.jsxs("span",{className:q>=0?"income":"expense",children:["$",q.toFixed(2)]})]}),l.jsxs("div",{className:"budgetSummaryRow",role:"list",children:[l.jsxs("span",{className:"budgetSummaryItem",role:"listitem",children:["Spent ",l.jsx("strong",{children:Md(xe)})]}),l.jsxs("span",{className:"budgetSummaryItem",role:"listitem",children:["Remaining ",l.jsx("strong",{children:Md($t)})]}),l.jsxs("span",{className:`budgetSummaryItem guardrail-${G.status}`,role:"listitem",children:["Guardrail ",l.jsx("strong",{children:G.label})]})]}),l.jsxs("div",{className:"budgetDate",children:["Created: ",R.createdAt]}),Y.length>0&&l.jsxs("div",{className:"category-budgets",children:[Y.slice(0,3).map(B=>l.jsxs("div",{className:"category-budget-row",children:[l.jsxs("div",{className:"category-budget-header",children:[l.jsxs("div",{className:"category-budget-name",children:[B.category,B.isOver&&l.jsx("span",{className:"expense",style:{marginLeft:"0.3rem"},children:""})]}),B.pacing&&l.jsxs("div",{className:`pacing-indicator pacing-${B.pacing.status}`,title:B.pacing.tooltip,role:"status","aria-label":`${B.category} pacing is ${B.pacing.label}`,onClick:P=>P.stopPropagation(),children:[l.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),l.jsx("span",{className:"pacing-label",children:B.pacing.label})]})]}),l.jsxs("div",{className:"category-budget-amounts",children:["$",B.actual.toFixed(2)," / $",B.budgetedAmount.toFixed(2)]}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:`progress-fill ${B.isOver?"over":""}`,style:{width:`${Math.min(B.actual/B.budgetedAmount*100,100)}%`}})})]},B.category)),Y.length>3&&l.jsxs("div",{className:"category-budget-more",children:["+",Y.length-3," more categories"]})]}),d&&R.adsEnabled&&l.jsxs("div",{className:"budget-ad-unit",role:"note","aria-label":"Sponsored offer",children:[l.jsx("div",{className:"budget-ad-badge",children:"Sponsored"}),l.jsxs("div",{className:"budget-ad-copy",children:[l.jsx("strong",{children:"Boost your savings."})," Earn 3.5% on emergency funds with Pocket Partner Bank."]})]})]}),l.jsxs("div",{className:"menuContainer",children:[l.jsx("button",{className:"menuButton",onClick:B=>{B.stopPropagation(),C(x===R.id?null:R.id)},title:"More options",disabled:p,children:""}),x===R.id&&l.jsxs("div",{className:"dropdownMenu",children:[l.jsx("button",{className:"dropdownItem",onClick:B=>{B.stopPropagation(),ie(R)},disabled:p,children:"Copy Budget"}),l.jsx("button",{className:"dropdownItem delete",onClick:B=>{B.stopPropagation(),confirm(`Are you sure you want to delete "${R.name}"?`)&&Te(R.id)},disabled:p,children:"Delete Budget"})]})]})]})},R.id)}),e.length>0&&l.jsxs("div",{className:"budget-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:()=>{N(gi(e.length)),_(!0)},disabled:p,children:"New Budget"}),l.jsx("button",{className:"cancelButton secondary-button cate-btn",onClick:()=>n("categories"),children:"Manage Categories"})]}),y&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent enhanced-modal",children:[l.jsx("h2",{className:"header modal-header",children:"Create a budget"}),l.jsx("label",{className:"input-label",htmlFor:"new-budget-name",children:"Budget name"}),l.jsx("input",{id:"new-budget-name",className:"input",placeholder:"My Budget",value:w.name,onChange:R=>N(z=>({...z,name:R.target.value}))}),l.jsxs("div",{className:"cycle-option-group",children:[l.jsx("span",{className:"input-label",children:"Cycle"}),l.jsx("div",{className:"cycle-option-grid",children:Up.map(R=>{const z=R.requiresPaid&&!c,G=w.cycleType===R.type;return l.jsxs("button",{type:"button",className:`cycle-option ${G?"selected":""} ${z?"locked":""}`,onClick:()=>{z||N(D=>({...D,cycleType:R.type}))},disabled:z,children:[l.jsxs("div",{className:"cycle-option-title",children:[R.label,z&&l.jsx("span",{className:"lock-icon","aria-hidden":"true",children:""})]}),l.jsx("div",{className:"cycle-option-description",children:R.description})]},R.type)})}),!c&&l.jsx("p",{className:"plan-teaser",children:"Upgrade or start a trial to unlock paycheck & custom cycles."})]}),w.cycleType==="per-paycheck"&&l.jsxs("div",{className:"cycle-config-row",children:[l.jsx("label",{className:"input-label",htmlFor:"cycle-pay-frequency",children:"Paycheck frequency (days)"}),l.jsx("input",{id:"cycle-pay-frequency",type:"number",className:"input",min:"7",max:"45",value:w.payFrequencyDays,onChange:R=>N(z=>({...z,payFrequencyDays:R.target.value}))})]}),w.cycleType==="custom"&&l.jsxs("div",{className:"cycle-config-row",children:[l.jsx("label",{className:"input-label",htmlFor:"cycle-custom-length",children:"Cycle length (days)"}),l.jsx("input",{id:"cycle-custom-length",type:"number",className:"input",min:"5",max:"120",value:w.customDays,onChange:R=>N(z=>({...z,customDays:R.target.value}))})]}),l.jsxs("div",{className:"cycle-config-row",children:[l.jsx("label",{className:"input-label",htmlFor:"cycle-start-date",children:"Cycle start date"}),l.jsx("input",{id:"cycle-start-date",type:"date",className:"input",value:w.startDate,onChange:R=>N(z=>({...z,startDate:R.target.value}))})]}),l.jsxs("label",{className:"checkbox-row",children:[l.jsx("input",{type:"checkbox",checked:w.includeDefaultCategories,onChange:R=>N(z=>({...z,includeDefaultCategories:R.target.checked}))}),l.jsxs("span",{children:["Include starter categories (",Ld.length,")"]})]}),d&&l.jsxs("label",{className:"checkbox-row",children:[l.jsx("input",{type:"checkbox",checked:w.adsEnabled,onChange:R=>N(z=>({...z,adsEnabled:R.target.checked}))}),l.jsx("span",{children:"Show relevant offers in my summary (helps keep Free free)"})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:H,disabled:p||!c&&w.cycleType!=="monthly",children:p?"Creating...":"Create budget"}),l.jsx("button",{className:"cancelButton secondary-button",onClick:F,disabled:p,children:"Cancel"})]})]})})]})}const Jw=E.shape({id:E.string.isRequired,name:E.string.isRequired,amount:E.number.isRequired,budgetedAmount:E.number,category:E.string.isRequired,type:E.oneOf(["income","expense"]).isRequired,date:E.string.isRequired,receipt:E.string}),Yw=E.shape({category:E.string.isRequired,budgetedAmount:E.number.isRequired});Ou.propTypes={budgets:E.arrayOf(E.shape({id:E.string.isRequired,name:E.string.isRequired,createdAt:E.string.isRequired,transactions:E.arrayOf(Jw),categoryBudgets:E.arrayOf(Yw),cycleMetadata:E.object,adsEnabled:E.bool})).isRequired,setSelectedBudget:E.func.isRequired,setViewMode:E.func.isRequired,setBudgets:E.func.isRequired,userId:E.string.isRequired,onMetadataChange:E.func,onMetadataRemove:E.func};Ou.defaultProps={onMetadataChange:void 0,onMetadataRemove:void 0};const Xw=["trial","paid","pro","premium","plus"],Bp=[{type:"monthly",label:"Monthly",requiresPaid:!1},{type:"per-paycheck",label:"Per-paycheck",requiresPaid:!0},{type:"custom",label:"Custom",requiresPaid:!0}],_a=e=>{const t=Bp.find(n=>n.type===e);return t?t.label:e?e.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Monthly"},Sa=["","","","","","","",""],Zw=e=>{if(!(e!=null&&e.length))return"";const t=Math.max(...e);return t<=0?"".repeat(e.length):e.map(n=>{const r=Math.max(0,n)/t,s=Math.min(Sa.length-1,Math.round(r*(Sa.length-1)));return Sa[s]}).join("")},xa=e=>`$${Number.parseFloat(e||0).toFixed(2)}`,Tl=()=>new Date().toISOString().split("T")[0],yi=(e,t)=>{if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const n=e?new Date(e):null;if(n&&!Number.isNaN(n.getTime()))return n.toISOString().split("T")[0];if(t!==void 0){if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const r=t?new Date(t):null;if(r&&!Number.isNaN(r.getTime()))return r.toISOString().split("T")[0]}return Tl()},e_=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleDateString()};function Ru({budget:e,categories:t,setViewMode:n,setBudgets:r,budgets:s,setSelectedBudget:i,onMetadataChange:o}){var Xu,Zu,ec;const{userProfile:a}=Ws(),u=(a==null?void 0:a.plan_tier)||(a==null?void 0:a.planTier)||"free",c=Xw.includes(String(u).toLowerCase()),d=e.metadata||{},h=e.insightsPreferences||d.insights||{},g=e.changeLog||d.changeLog||[],[v,k]=b.useState("expenses"),[x,C]=b.useState(!1),[p,m]=b.useState(null),[y,_]=b.useState(1),[w,N]=b.useState(!1),[j,T]=b.useState({name:"",amount:"",budgetedAmount:"",category:"",date:Tl(),type:"expense",receipt:null}),[F,H]=b.useState(null),[se,ie]=b.useState(e.name||""),[Te,ae]=b.useState(()=>(e.categoryBudgets||[]).map(f=>({...f}))),[R,z]=b.useState(!1),[G,D]=b.useState(null),[U,q]=b.useState(!1),[Y,K]=b.useState(!1),[ce,xe]=b.useState(null),[$t,qe]=b.useState(null),[We,Jt]=b.useState(null),[B,P]=b.useState(()=>new Set(h.trackedCategories||[])),[$,J]=b.useState(()=>{var f,S;return{day:((f=h.reportSchedule)==null?void 0:f.day)||"sunday",time:((S=h.reportSchedule)==null?void 0:S.time)||"08:00"}}),[W,X]=b.useState(()=>{var f,S,A,I;return{enabled:!!((f=h.nudges)!=null&&f.enabled),threshold:((S=h.nudges)==null?void 0:S.threshold)||.8,quietStart:((A=h.quietHours)==null?void 0:A.start)??21,quietEnd:((I=h.quietHours)==null?void 0:I.end)??7}}),[V,Pe]=b.useState(()=>{var f,S,A,I,M,te;return{type:((f=e.cycleMetadata)==null?void 0:f.type)||"monthly",startDate:(S=e.cycleMetadata)!=null&&S.currentStart?new Date(e.cycleMetadata.currentStart).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],payFrequencyDays:((A=e.cycleMetadata)==null?void 0:A.payFrequencyDays)||14,customDays:((I=e.cycleMetadata)==null?void 0:I.customDays)||((M=e.cycleMetadata)==null?void 0:M.lengthDays)||((te=e.cycleMetadata)==null?void 0:te.cycleLength)||30}}),[Le,bt]=b.useState(!1),[Ir,vt]=b.useState(!1),[Lu,Ro]=b.useState(""),[Mu,Do]=b.useState(""),Me=b.useMemo(()=>(e.transactions||[]).map(f=>({...f,date:yi(f.date)})),[e.transactions]),Jp=b.useMemo(()=>({...e,transactions:Me}),[e,Me]);b.useEffect(()=>{ae((e.categoryBudgets||[]).map(f=>({...f}))),z(!1)},[e.id,e.categoryBudgets]),b.useEffect(()=>{ie(e.name||"")},[e.id,e.name]),b.useEffect(()=>{var f,S,A,I,M,te,je,pe,Ae,Je,we,rt;P(new Set(h.trackedCategories||[])),J({day:((f=h.reportSchedule)==null?void 0:f.day)||"sunday",time:((S=h.reportSchedule)==null?void 0:S.time)||"08:00"}),X({enabled:!!((A=h.nudges)!=null&&A.enabled),threshold:((I=h.nudges)==null?void 0:I.threshold)||.8,quietStart:((M=h.quietHours)==null?void 0:M.start)??21,quietEnd:((te=h.quietHours)==null?void 0:te.end)??7}),Pe({type:((je=e.cycleMetadata)==null?void 0:je.type)||"monthly",startDate:(pe=e.cycleMetadata)!=null&&pe.currentStart?new Date(e.cycleMetadata.currentStart).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],payFrequencyDays:((Ae=e.cycleMetadata)==null?void 0:Ae.payFrequencyDays)||14,customDays:((Je=e.cycleMetadata)==null?void 0:Je.customDays)||((we=e.cycleMetadata)==null?void 0:we.lengthDays)||((rt=e.cycleMetadata)==null?void 0:rt.cycleLength)||30}),bt(!1)},[e.id,e.cycleMetadata,h]);const Io=7,jn=f=>{o&&o(e.id,f)},Yp=(f,S)=>{const A=Number.parseFloat(S);ae(I=>I.map(M=>M.category===f?{...M,budgetedAmount:Number.isFinite(A)?A:0}:M)),z(!0)},Xp=()=>{const f=Lu.trim();f&&(ae(S=>{if(S.some(M=>M.category.toLowerCase()===f.toLowerCase()))return S;const A=Number.parseFloat(Mu),I={category:f,budgetedAmount:Number.isFinite(A)?A:0};return z(!0),[...S,I]}),Ro(""),Do(""),vt(!1))},Zp=()=>{vt(!1),Ro(""),Do("")},em=f=>{const S=Me.filter(I=>I.type==="expense"&&I.category===f.category).reduce((I,M)=>I+M.amount,0),A=Math.max(0,Number(f.budgetedAmount||0)-S);xe({...f,remaining:A,actual:S,reallocateTo:""})},tm=()=>{if(!ce)return;const{category:f,remaining:S,reallocateTo:A}=ce;if(S>0&&!A){alert("Please choose a category to reallocate the remaining budget.");return}ae(I=>{const M=I.filter(te=>te.category!==f);return S>0&&A?M.map(te=>te.category===A?{...te,budgetedAmount:Number(te.budgetedAmount||0)+S}:te):M}),z(!0),xe(null)},nm=()=>{xe(null)},Uu=f=>{r(S=>S.map(A=>A.id===e.id?f:A)),i(f)},rm=async f=>{if(f)try{N(!0);const{error:S}=await Ai(e.id,{name:e.name,categoryBudgets:f});if(S){console.error("Error undoing allocations:",S),alert("Failed to undo allocation change. Please try again.");return}const A={...e,categoryBudgets:f};Uu(A),ae(f.map(I=>({...I}))),z(!1),jn(I=>({...I,changeLog:[{at:new Date().toISOString(),message:"Reverted allocation change",type:"undo"},...I.changeLog||[]]}))}finally{N(!1),D(null)}},sm=async()=>{const f=Te.map(S=>({category:S.category,budgetedAmount:Number.isFinite(Number(S.budgetedAmount))?Number(S.budgetedAmount):0}));N(!0);try{const{error:S}=await Ai(e.id,{name:e.name,categoryBudgets:f});if(S){console.error("Error saving allocations:",S),alert("Failed to save category allocations.");return}const A=e.categoryBudgets||[],I={...e,categoryBudgets:f};Uu(I),z(!1);const M=new Date().toISOString();jn(te=>({...te,changeLog:[{at:M,message:"Updated category allocations",type:"allocation"},...te.changeLog||[]]})),D({message:"Allocations updated",actionLabel:"Undo",action:()=>rm(A)})}finally{N(!1)}},Bu=()=>D(null),im=()=>{const f=new Date().toISOString();jn(S=>{var A;return{...S,cycle:{...S.cycle,type:V.type,label:_a(V.type),currentStart:V.startDate?new Date(V.startDate).toISOString():(A=S.cycle)==null?void 0:A.currentStart,payFrequencyDays:V.type==="per-paycheck"?Number(V.payFrequencyDays)||14:void 0,customDays:V.type==="custom"?Number(V.customDays)||30:void 0,lastEditedAt:f},changeLog:[{at:f,message:`Updated cycle to ${_a(V.type)}`,type:"cycle"},...S.changeLog||[]]}}),K(!1)},om=f=>{P(S=>{const A=new Set(S);return A.has(f)?A.delete(f):A.add(f),bt(!0),A})},Fu=(f,S)=>{J(A=>({...A,[f]:S})),bt(!0)},Hs=f=>{X(S=>({...S,...f})),bt(!0)};b.useEffect(()=>{if(!Le)return;const f=Array.from(B);jn(S=>{var A,I,M;return{...S,insights:{...S.insights||{},trackedCategories:f,reportSchedule:{...(A=S.insights)==null?void 0:A.reportSchedule,...$},quietHours:{...((I=S.insights)==null?void 0:I.quietHours)||{},start:Number(W.quietStart)??21,end:Number(W.quietEnd)??7},nudges:{...((M=S.insights)==null?void 0:M.nudges)||{},enabled:!!W.enabled,threshold:Number(W.threshold)||.8}}}}),bt(!1)},[Le,B,$,W,jn]);const zu=b.useMemo(()=>{if(B.size)return Array.from(B);const f={};Me.filter(I=>I.type==="expense").forEach(I=>{f[I.category]=(f[I.category]||0)+I.amount});const S=Object.entries(f).sort((I,M)=>M[1]-I[1]).map(([I])=>I),A=(e.categoryBudgets||[]).map(I=>I.category);return Array.from(new Set([...S,...A])).slice(0,6)},[B,Me,e.categoryBudgets]),qu=b.useMemo(()=>{const f=new Set((e.categoryBudgets||[]).map(S=>S.category));return(t.expense||[]).forEach(S=>f.add(S.name)),Array.from(f).sort((S,A)=>S.localeCompare(A))},[e.categoryBudgets,t.expense]),Wu={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},am=f=>{const[S="08",A="00"]=(f||"08:00").split(":"),I=Number.parseInt(S,10),M=Number.parseInt(A,10);return{hours:Number.isFinite(I)?I:8,minutes:Number.isFinite(M)?M:0}},lm=f=>{const S=new Date(f),A=String($.day||"sunday").toLowerCase(),I=Wu[A]??0,M=(S.getDay()-I+7)%7;S.setDate(S.getDate()-M);const{hours:te,minutes:je}=am($.time);return S.setHours(te,je,0,0),S},$r=b.useMemo(()=>{const S=lm(new Date),A=new Date(S);A.setDate(A.getDate()+7);const I=new Date(S);I.setDate(I.getDate()-7);const M=new Date(S),te=(pe,Ae,Je)=>Me.filter(we=>we.type==="expense"&&we.category===pe).filter(we=>{const rt=new Date(we.date);return rt>=Ae&&rt<Je}).reduce((we,rt)=>we+rt.amount,0),je=zu.map(pe=>{var nc;const Ae=te(pe,S,A),Je=te(pe,I,M),we=Ae-Je,rt=Je>0?we/Je*100:Ae>0?100:0,zr=pe.toLowerCase().trim(),ct=(nc=Lt.categoriesByName)==null?void 0:nc[zr],tc=[];for(let Lo=5;Lo>=0;Lo-=1){const Gs=new Date(A);Gs.setDate(Gs.getDate()-7*Lo);const Mo=new Date(Gs);Mo.setDate(Mo.getDate()-7),tc.push(te(pe,Mo,Gs))}return{category:pe,current:Ae,previous:Je,delta:we,pctChange:rt,status:(ct==null?void 0:ct.status)||"green",statusLabel:(ct==null?void 0:ct.label)||"On Track",trend:tc}}).sort((pe,Ae)=>Ae.current-pe.current);return{cards:je,topCards:je.slice(0,3),trends:je.reduce((pe,Ae)=>({...pe,[Ae.category]:Ae.trend}),{}),currentStart:S,currentEnd:A}},[Me,zu,$,Lt]),Lr=Number(W.quietStart)??21,Mr=Number(W.quietEnd)??7,um=f=>{const S=f.getHours();return Lr===Mr?!1:Lr<Mr?S>=Lr&&S<Mr:S>=Lr||S<Mr};b.useEffect(()=>{var te,je,pe,Ae,Je;if(!c||!W.enabled||um(new Date))return;const f=(je=(te=d.insights)==null?void 0:te.nudges)==null?void 0:je.snoozedUntil;if(f&&new Date(f)>new Date)return;const S=Number(W.threshold)||.8,A=(pe=e.cycleMetadata)!=null&&pe.currentStart?new Date(e.cycleMetadata.currentStart).toISOString():e.id,I=((Je=(Ae=d.insights)==null?void 0:Ae.nudges)==null?void 0:Je.acknowledged)||{},M=(Lt.categories||[]).find(we=>{if(!we||!Number.isFinite(we.budgeted)||we.budgeted<=0)return!1;const rt=we.actual/we.budgeted,zr=`${A}:${we.name}`.toLowerCase();return rt>=S&&!I[zr]});M&&!We&&Jt({category:M.name,ratio:M.actual/(M.budgeted||1),actual:M.actual,budgeted:M.budgeted})},[c,W,d.insights,e.cycleMetadata,Lt.categories,We]);const cm=f=>{var I;const A=`${(I=e.cycleMetadata)!=null&&I.currentStart?new Date(e.cycleMetadata.currentStart).toISOString():e.id}:${f}`.toLowerCase();jn(M=>{var te,je,pe;return{...M,insights:{...M.insights||{},nudges:{...((te=M.insights)==null?void 0:te.nudges)||{},acknowledged:{...((pe=(je=M.insights)==null?void 0:je.nudges)==null?void 0:pe.acknowledged)||{},[A]:new Date().toISOString()}}}}}),Jt(null)},dm=(f=6)=>{const S=new Date;S.setHours(S.getHours()+f),jn(A=>{var I;return{...A,insights:{...A.insights||{},nudges:{...((I=A.insights)==null?void 0:I.nudges)||{},snoozedUntil:S.toISOString()}}}}),Jt(null)},Gn=f=>f==="income"||f==="expense"?f:f==="expenses"?"expense":"income",Hu=f=>{const S=Gn(f||v);T({name:"",amount:"",budgetedAmount:"",category:"",date:Tl(),type:S,receipt:null}),m(null),C(!0)},hm=f=>{T({...f,date:yi(f.date),budgetedAmount:f.budgetedAmount||""}),m(f),C(!0)},fm=async()=>{if(!j.name.trim()||isNaN(j.amount)||!j.category.trim()){alert("Please fill in all required fields correctly");return}N(!0);try{const f={name:j.name.trim(),amount:Number.parseFloat(j.amount),budgetedAmount:j.budgetedAmount?Number.parseFloat(j.budgetedAmount):null,category:j.category,type:Gn(j.type),date:yi(j.date),receipt:j.receipt};let S;if(p){const{error:M}=await Aw(p.id,f);if(M){console.error("Error updating transaction:",M),alert("Failed to update transaction. Please try again.");return}S=Me.map(te=>te.id===p.id?{...f,id:p.id}:te)}else{const{data:M,error:te}=await Dp(e.id,f);if(te){console.error("Error creating transaction:",te),alert("Failed to create transaction. Please try again.");return}const je={...f,id:M[0].id};S=[...Me,je]}const A={...e,transactions:S},I=s.map(M=>M.id===e.id?A:M);r(I),i(I.find(M=>M.id===e.id)),C(!1),m(null)}catch(f){console.error("Error saving transaction:",f),alert("Failed to save transaction. Please try again.")}finally{N(!1)}},pm=async()=>{const f=se.trim();if(!f){ie(e.name||"");return}if(f===(e.name||"").trim()){ie(e.name||"");return}try{const{error:S}=await Ai(e.id,{name:f,categoryBudgets:e.categoryBudgets});if(S){console.error("Error updating budget name:",S),ie(e.name||"");return}let A={...e,name:f};r(I=>I.map(M=>M.id!==e.id?M:(A={...M,...e,name:f},A))),i(I=>(I==null?void 0:I.id)===e.id?A:I),ie(f)}catch(S){console.error("Error updating budget name:",S),ie(e.name||"")}},Ur=Me.filter(f=>f.type==="income").reduce((f,S)=>f+S.amount,0),Nn=Me.filter(f=>f.type==="expense").reduce((f,S)=>f+S.amount,0),Vu=Me.filter(f=>f.type==="expense"&&f.budgetedAmount).reduce((f,S)=>f+S.budgetedAmount,0),Gu=Ur-Nn,Lt=Mp(Jp),Ku=((Xu=e.cycleMetadata)==null?void 0:Xu.type)||"monthly",mm=_a(Ku),Qu=(Zu=e.cycleMetadata)!=null&&Zu.currentStart?new Date(e.cycleMetadata.currentStart):null,gm=Qu?Qu.toLocaleDateString():e.createdAt,ym=Te.reduce((f,S)=>f+(Number(S.budgetedAmount)||0),0),vm=Me.filter(f=>f.type==="expense").reduce((f,S)=>(f[S.category]=(f[S.category]||0)+S.amount,f),{}),En=Object.entries(vm).map(([f,S])=>{var A;return{category:f,amount:S,percentage:Nn>0?S/Nn*100:0,icon:((A=t.expense.find(I=>I.name===f))==null?void 0:A.icon)||""}}).sort((f,S)=>S.amount-f.amount).slice(0,5),Vs=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#ec4899"],Br=Me.filter(f=>f.type===Gn(v)).sort((f,S)=>new Date(S.date)-new Date(f.date)),Yt=Math.ceil(Br.length/Io),$o=(y-1)*Io,Ju=$o+Io,wm=Br.slice($o,Ju),Yu=f=>{k(f),_(1)},Fr=f=>{_(f)},_m=()=>{if(Yt<=1)return null;const f=[],S=5;let A=Math.max(1,y-Math.floor(S/2));const I=Math.min(Yt,A+S-1);I-A+1<S&&(A=Math.max(1,I-S+1)),y>1&&f.push(l.jsx("button",{className:"pagination-button",onClick:()=>Fr(y-1),children:""},"prev")),A>1&&(f.push(l.jsx("button",{className:"pagination-button",onClick:()=>Fr(1),children:"1"},1)),A>2&&f.push(l.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis1")));for(let M=A;M<=I;M++)f.push(l.jsx("button",{className:`pagination-button ${y===M?"active":""}`,onClick:()=>Fr(M),children:M},M));return I<Yt&&(I<Yt-1&&f.push(l.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis2")),f.push(l.jsx("button",{className:"pagination-button",onClick:()=>Fr(Yt),children:Yt},Yt))),y<Yt&&f.push(l.jsx("button",{className:"pagination-button",onClick:()=>Fr(y+1),children:""},"next")),l.jsxs("div",{className:"pagination-container",children:[l.jsxs("div",{className:"pagination-info",children:["Showing ",$o+1,"-",Math.min(Ju,Br.length)," of ",Br.length," transactions"]}),l.jsx("div",{className:"pagination-controls",children:f})]})};return l.jsxs("div",{children:[l.jsxs("div",{className:"header-nav",children:[l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>n("budgets"),children:" Back"}),l.jsx("button",{className:"ai-insights-button primary-button",onClick:()=>n("ai"),children:" AI Finance Report"})]}),l.jsx("input",{className:"input budget-title-input no-border",value:se,onChange:f=>ie(f.target.value),onBlur:pm,onKeyDown:f=>{f.key==="Enter"&&(f.preventDefault(),f.currentTarget.blur())},placeholder:"Budget Name"}),l.jsxs("div",{className:"budget-cycle-banner",children:[l.jsx("div",{className:`cycle-pill cycle-${Ku}`,children:mm}),l.jsxs("div",{className:"cycle-meta",children:[l.jsxs("span",{children:["Started ",gm]}),l.jsxs("div",{className:`pacing-indicator pacing-${Lt.overall.status}`,title:Lt.overall.tooltip,role:"status",children:[l.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),l.jsx("span",{className:"pacing-label",children:Lt.overall.label})]})]}),l.jsxs("div",{className:"cycle-actions",children:[l.jsx("button",{className:"secondary-button",onClick:()=>K(!0),children:"Edit cycle"}),l.jsx("button",{className:"link-button",onClick:()=>q(!0),children:"Change log"})]})]}),l.jsxs("div",{className:"category-allocation-card",id:"allocations",children:[l.jsxs("div",{className:"allocation-header",children:[l.jsx("h3",{children:"Category allocations"}),l.jsxs("div",{className:"allocation-header-actions",children:[l.jsxs("span",{className:"allocation-total",children:["Total ",xa(ym)]}),l.jsx("button",{className:"secondary-button",onClick:()=>vt(!0),children:"Add category"})]})]}),Te.length===0?l.jsx("div",{className:"empty-state small",children:"No allocations yet. Add your first category to plan this cycle."}):l.jsx("div",{className:"allocation-table",children:Te.map(f=>l.jsxs("div",{className:"allocation-row",children:[l.jsx("div",{className:"allocation-name",children:f.category}),l.jsx("input",{type:"number",className:"input allocation-input",value:f.budgetedAmount,onChange:S=>Yp(f.category,S.target.value),min:"0",step:"0.01"}),l.jsx("button",{className:"allocation-delete",type:"button",onClick:S=>{S.stopPropagation(),em(f)},children:"Remove"})]},f.category))}),l.jsx("div",{className:"allocation-footer",children:l.jsx("button",{className:"primary-button",onClick:sm,disabled:!R||w,children:w?"Saving...":"Save allocations"})})]}),Ir&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent small-modal",children:[l.jsx("h3",{className:"header modal-header",children:"Add category"}),l.jsx("label",{className:"input-label",htmlFor:"new-category-name",children:"Name"}),l.jsx("input",{id:"new-category-name",className:"input",value:Lu,onChange:f=>Ro(f.target.value),placeholder:"Category name"}),l.jsx("label",{className:"input-label",htmlFor:"new-category-amount",children:"Allocation amount"}),l.jsx("input",{id:"new-category-amount",className:"input",type:"number",step:"0.01",min:"0",value:Mu,onChange:f=>Do(f.target.value)}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:Xp,children:"Add"}),l.jsx("button",{className:"cancelButton secondary-button",onClick:Zp,children:"Cancel"})]})]})}),l.jsxs("div",{className:"budget-overview-card",children:[l.jsx("h3",{className:"overview-title",children:"Budget Overview"}),l.jsxs("div",{className:"overview-content",children:[l.jsxs("div",{className:"overview-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("div",{className:"stat-label",children:"Total Income"}),l.jsxs("div",{className:"stat-value income",children:["$",Ur.toFixed(2)]})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("div",{className:"stat-label",children:"Total Spent"}),l.jsxs("div",{className:"stat-value expense",children:["$",Nn.toFixed(2)]})]}),Vu>0&&l.jsxs("div",{className:"stat-item stat-item-full-width",children:[l.jsx("div",{className:"stat-label",children:"Total Budgeted"}),l.jsxs("div",{className:"stat-value",children:["$",Vu.toFixed(2)]})]})]}),l.jsxs("div",{className:"balance-display",children:[l.jsx("div",{className:"balance-label",children:"Remaining Balance"}),l.jsxs("div",{className:`balance-amount ${Gu>=0?"income":"expense"}`,children:["$",Gu.toFixed(2)]})]}),En.length>0&&l.jsxs("div",{className:"category-chart-section",children:[l.jsx("h4",{className:"chart-section-title",children:"Spending Breakdown"}),l.jsxs("div",{className:"chart-container-centered",children:[l.jsx("div",{className:"pie-chart-wrapper",children:l.jsxs("svg",{className:"pie-chart",viewBox:"0 0 200 200",width:"200",height:"200",onClick:f=>{(f.target.tagName==="svg"||f.target.tagName==="circle"||f.target.tagName==="text")&&H(null)},children:[En.map((f,S)=>{let A=0;for(let ct=0;ct<S;ct++)A+=En[ct].percentage;const I=A/100*360,M=(A+f.percentage)/100*360,te=f.percentage>50?1:0,je=I*Math.PI/180,pe=M*Math.PI/180,Ae=100+80*Math.cos(je),Je=100+80*Math.sin(je),we=100+80*Math.cos(pe),rt=100+80*Math.sin(pe),zr=["M 100 100",`L ${Ae} ${Je}`,`A 80 80 0 ${te} 1 ${we} ${rt}`,"Z"].join(" ");return l.jsx("path",{d:zr,fill:Vs[S%Vs.length],stroke:"white",strokeWidth:"2",className:`pie-slice ${F===S?"selected":""}`,onClick:ct=>{ct.stopPropagation(),H(F===S?null:S)}},f.category)}),l.jsx("circle",{cx:"100",cy:"100",r:"35",fill:"white"}),l.jsx("text",{x:"100",y:"95",textAnchor:"middle",className:"chart-center-text",fontSize:"12",fill:"#6b7280",children:"Total"}),l.jsxs("text",{x:"100",y:"110",textAnchor:"middle",className:"chart-center-amount",fontSize:"14",fontWeight:"600",fill:"#374151",children:["$",Nn.toFixed(0)]})]})}),F!==null&&l.jsx("div",{className:"slice-details",children:l.jsxs("div",{className:"slice-details-content",children:[l.jsxs("div",{className:"slice-header",children:[l.jsx("div",{className:"slice-color-dot",style:{backgroundColor:Vs[F%Vs.length]}}),l.jsx("span",{className:"slice-icon",children:En[F].icon}),l.jsx("span",{className:"slice-category",children:En[F].category})]}),l.jsxs("div",{className:"slice-amount",children:["$",En[F].amount.toFixed(2)]}),l.jsxs("div",{className:"slice-percentage",children:[En[F].percentage.toFixed(1),"% of total spending"]})]})})]})]})]}),l.jsxs("div",{className:"budget-progress",children:[l.jsxs("div",{className:"progress-labels",children:[l.jsxs("span",{className:"income",children:["Income: $",Ur.toFixed(2)]}),l.jsxs("span",{className:"expense",children:["Spent: $",Nn.toFixed(2)]})]}),l.jsx("div",{className:"progress-bar-container",children:l.jsx("div",{className:"income-bar",children:Ur>0&&l.jsx("div",{className:"expense-overlay",style:{width:`${Math.min(Nn/Ur*100,100)}%`}})})})]})]}),Lt.categories.length>0&&l.jsxs("div",{className:"category-budget-list-card",children:[l.jsx("h3",{className:"category-budget-list-title",children:"Category Pacing"}),l.jsx("div",{className:"category-budget-list",children:Lt.categories.map(f=>{const S=f.budgeted>0?Math.min(f.actual/f.budgeted*100,100):f.actual>0?100:0;return l.jsxs("div",{className:"category-budget-list-row",children:[l.jsxs("div",{className:"category-budget-header",children:[l.jsx("div",{className:"category-budget-name",children:f.name||"Uncategorized"}),l.jsxs("div",{className:`pacing-indicator pacing-${f.status}`,title:f.tooltip,role:"status","aria-label":`${f.name||"Uncategorized"} pacing is ${f.label}`,children:[l.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),l.jsx("span",{className:"pacing-label",children:f.label})]})]}),l.jsxs("div",{className:"category-budget-amounts",children:["$",f.actual.toFixed(2)," / $",f.budgeted.toFixed(2)]}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:`progress-fill ${f.actual>f.budgeted&&f.budgeted>0?"over":""}`,style:{width:`${S}%`}})})]},f.key||f.name)})})]}),l.jsxs("div",{className:"cashburn-section",children:[l.jsxs("div",{className:"cashburn-header",children:[l.jsx("h3",{children:"Cash burn insights"}),l.jsxs("span",{className:"cashburn-subtitle",children:["Weekly digest  next drop ",$r.currentEnd?new Date($r.currentEnd).toLocaleString([],{dateStyle:"medium",timeStyle:"short"}):"soon"]})]}),l.jsxs("div",{className:"cashburn-card-grid",children:[$r.topCards.length===0&&l.jsx("div",{className:"empty-state small",children:"Track spending this week to unlock leak insights."}),$r.topCards.map(f=>l.jsxs("button",{type:"button",className:`cashburn-card pacing-${f.status}`,onClick:()=>qe(S=>S===f.category?null:f.category),children:[l.jsxs("div",{className:"cashburn-card-header",children:[l.jsx("span",{className:"cashburn-category",children:f.category}),l.jsxs("div",{className:`pacing-indicator pacing-${f.status}`,children:[l.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),l.jsx("span",{className:"pacing-label",children:f.statusLabel})]})]}),l.jsxs("div",{className:"cashburn-amount-row",children:[l.jsx("span",{className:"cashburn-amount",children:xa(f.current)}),l.jsxs("span",{className:`cashburn-delta ${f.delta>=0?"expense":"income"}`,children:[f.delta>=0?"+":"-","$",Math.abs(f.delta).toFixed(2)," vs last week"]})]}),l.jsxs("div",{className:"cashburn-change",children:["Change ",f.pctChange.toFixed(0),"%"]}),$t===f.category&&l.jsxs("div",{className:"cashburn-trend",children:[l.jsx("div",{className:"sparkline",children:Zw($r.trends[f.category])}),l.jsx("div",{className:"sparkline-label",children:"Last 6 weeks"})]})]},f.category)),isFreePlan&&e.adsEnabled&&l.jsxs("div",{className:"budget-ad-unit",role:"note","aria-label":"Sponsored offer",children:[l.jsx("div",{className:"budget-ad-badge",children:"Sponsored"}),l.jsx("div",{className:"budget-ad-copy",children:"Lower recurring bills with Pocket Partner Energy  average savings $18/mo."})]})]}),l.jsxs("div",{className:"cashburn-settings",children:[l.jsxs("div",{className:"settings-row",children:[l.jsx("label",{children:"Report schedule"}),l.jsxs("div",{className:"settings-inputs",children:[l.jsx("select",{value:$.day,onChange:f=>Fu("day",f.target.value),children:Object.keys(Wu).map(f=>l.jsx("option",{value:f,children:f.charAt(0).toUpperCase()+f.slice(1)},f))}),l.jsx("input",{type:"time",value:$.time,onChange:f=>Fu("time",f.target.value)})]})]}),l.jsxs("div",{className:"settings-row",children:[l.jsx("label",{children:"Tracked categories"}),l.jsxs("div",{className:"tracked-category-grid",children:[qu.map(f=>{const S=B.has(f);return l.jsxs("label",{className:`tracked-chip ${S?"selected":""}`,children:[l.jsx("input",{type:"checkbox",checked:S,onChange:()=>om(f)}),l.jsx("span",{children:f})]},f)}),qu.length===0&&l.jsx("span",{children:"No categories yet."})]})]}),l.jsxs("div",{className:"settings-row",children:[l.jsx("label",{children:"Real-time nudges"}),c?l.jsxs("div",{className:"nudge-config",children:[l.jsxs("label",{className:"checkbox-row",children:[l.jsx("input",{type:"checkbox",checked:W.enabled,onChange:f=>Hs({enabled:f.target.checked})}),l.jsxs("span",{children:["Notify me when a category hits ",Math.round((Number(W.threshold)||.8)*100),"% of budget"]})]}),l.jsxs("div",{className:"nudge-threshold",children:[l.jsx("input",{type:"range",min:"0.5",max:"1",step:"0.05",value:Number(W.threshold)||.8,onChange:f=>Hs({threshold:Number(f.target.value)})}),l.jsxs("span",{children:[Math.round((Number(W.threshold)||.8)*100),"%"]})]}),l.jsxs("div",{className:"quiet-hours-controls",children:[l.jsx("span",{children:"Quiet hours"}),l.jsxs("div",{className:"settings-inputs",children:[l.jsx("input",{type:"number",min:"0",max:"23",value:Lr,onChange:f=>Hs({quietStart:Number(f.target.value)})}),l.jsx("span",{children:"to"}),l.jsx("input",{type:"number",min:"0",max:"23",value:Mr,onChange:f=>Hs({quietEnd:Number(f.target.value)})})]})]})]}):l.jsx("div",{className:"plan-teaser",children:"Upgrade or start a trial to unlock real-time nudges and advanced budgeting cycles."})]})]})]}),l.jsxs("div",{className:"transactions-section",children:[l.jsxs("div",{className:"tabRow",children:[l.jsxs("button",{className:v==="expenses"?"tabActive":"tabInactive",onClick:()=>Yu("expenses"),children:["Expenses (",Me.filter(f=>f.type==="expense").length,")"]}),l.jsxs("button",{className:v==="income"?"tabActive":"tabInactive",onClick:()=>Yu("income"),children:["Income (",Me.filter(f=>f.type==="income").length,")"]})]}),Br.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsxs("p",{children:["No ",Gn(v)," transactions yet."]}),l.jsxs("button",{className:"primary-button",onClick:()=>Hu(v),children:["Add Your First ",Gn(v)==="expense"?"Expense":"Income"]})]}):l.jsxs(l.Fragment,{children:[wm.map(f=>{var S;return l.jsx("div",{className:"transaction enhanced-transaction",onClick:()=>hm(f),children:l.jsx("div",{className:"transaction-info",children:l.jsxs("div",{className:"transaction-main",children:[l.jsx("span",{className:"transaction-icon",children:((S=t[f.type].find(A=>A.name===f.category))==null?void 0:S.icon)||""}),l.jsxs("div",{className:"transaction-details-main",children:[l.jsx("span",{className:"transaction-name",children:f.name}),l.jsxs("div",{className:"transaction-meta",children:[f.category,"  ",e_(f.date),f.receipt&&l.jsx("span",{className:"receipt-indicator",children:""})]})]}),l.jsxs("div",{className:"transaction-amounts",children:[l.jsxs("span",{className:`transaction-amount ${f.type}`,children:[f.type==="income"?"+":"-","$",f.amount.toFixed(2)]}),f.budgetedAmount&&l.jsxs("span",{className:"budgeted-amount",children:["Budget: $",f.budgetedAmount.toFixed(2)]})]})]})})},f.id)}),_m()]})]}),l.jsx("button",{className:"fab",onClick:()=>Hu(v),children:"+"}),x&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent enhanced-modal",children:[l.jsx("h2",{className:"header modal-header",children:p?"Edit Transaction":`Add ${j.type==="expense"?"Expense":"Income"}`}),l.jsx("input",{className:"input",placeholder:"Description",value:j.name,onChange:f=>T({...j,name:f.target.value}),disabled:w}),l.jsx("input",{className:"input",placeholder:"Amount",type:"number",step:"0.01",value:j.amount,onChange:f=>T({...j,amount:f.target.value}),disabled:w}),l.jsx("input",{className:"input",type:"date",value:j.date,onChange:f=>T(S=>({...S,date:yi(f.target.value,S.date)})),disabled:w}),j.type==="expense"&&l.jsx("input",{className:"input",placeholder:"Budgeted amount (optional)",type:"number",step:"0.01",value:j.budgetedAmount,onChange:f=>T({...j,budgetedAmount:f.target.value}),disabled:w}),l.jsxs("select",{className:"input",value:j.category,onChange:f=>T({...j,category:f.target.value}),disabled:w,children:[l.jsx("option",{value:"",children:"Select Category"}),(ec=t[Gn(j.type)])==null?void 0:ec.map(f=>l.jsxs("option",{value:f.name,children:[f.icon," ",f.name]},f.name))]}),l.jsxs("div",{className:"receipt-upload-section",children:[l.jsx("label",{className:"receipt-upload-label",children:" Attach Receipt (Optional)"}),l.jsx("input",{type:"file",accept:"image/*",className:"receipt-input",onChange:f=>{const S=f.target.files[0];if(S){const A=new FileReader;A.onloadend=()=>{T({...j,receipt:A.result})},A.readAsDataURL(S)}},disabled:w}),j.receipt&&l.jsxs("div",{className:"receipt-preview",children:[l.jsx("img",{src:j.receipt||"/placeholder.svg",alt:"Receipt preview",className:"receipt-preview-img"}),l.jsx("button",{type:"button",className:"remove-receipt",onClick:()=>T({...j,receipt:null}),disabled:w,children:"Remove"})]})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsxs("button",{className:"addButton primary-button",onClick:fm,disabled:w,children:[w?"Saving...":p?"Update":"Add"," Transaction"]}),l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>{C(!1),m(null)},disabled:w,children:"Cancel"})]})]})}),ce&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent small-modal",children:[l.jsxs("h3",{className:"header modal-header",children:["Remove ",ce.category]}),ce.remaining>0?l.jsxs(l.Fragment,{children:[l.jsxs("p",{children:["Reallocate ",xa(ce.remaining)," from ",ce.category," before deleting."]}),l.jsxs("select",{className:"input",value:ce.reallocateTo,onChange:f=>xe(S=>({...S,reallocateTo:f.target.value})),children:[l.jsx("option",{value:"",children:"Choose category"}),Te.filter(f=>f.category!==ce.category).map(f=>l.jsx("option",{value:f.category,children:f.category},f.category))]})]}):l.jsxs("p",{children:["Delete ",ce.category," from this cycle?"]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:tm,disabled:ce.remaining>0&&!ce.reallocateTo,children:"Confirm"}),l.jsx("button",{className:"cancelButton secondary-button",onClick:nm,children:"Cancel"})]})]})}),U&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent large-modal",children:[l.jsx("h3",{className:"header modal-header",children:"Change log"}),g.length===0?l.jsx("div",{className:"empty-state small",children:"No changes recorded yet."}):l.jsx("ul",{className:"change-log-list",children:g.map((f,S)=>{const A=(f==null?void 0:f.at)||(f==null?void 0:f.timestamp),I=A?new Date(A).toLocaleString():"Recent";return l.jsxs("li",{className:"change-log-item",children:[l.jsx("span",{className:"change-log-time",children:I}),l.jsx("span",{className:"change-log-message",children:(f==null?void 0:f.message)||"Updated budget"})]},`${I}-${S}`)})}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>q(!1),children:"Close"})})]})}),Y&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent enhanced-modal",children:[l.jsx("h3",{className:"header modal-header",children:"Edit cycle"}),l.jsx("div",{className:"cycle-option-grid",children:Bp.map(f=>{const S=f.requiresPaid&&!c,A=V.type===f.type;return l.jsxs("button",{type:"button",className:`cycle-option ${A?"selected":""} ${S?"locked":""}`,onClick:()=>{S||Pe(I=>({...I,type:f.type}))},disabled:S,children:[l.jsxs("div",{className:"cycle-option-title",children:[f.label,S&&l.jsx("span",{className:"lock-icon",children:""})]}),l.jsx("div",{className:"cycle-option-description",children:f.requiresPaid?"Requires trial or paid":"Included in Free"})]},f.type)})}),V.type==="per-paycheck"&&l.jsxs("div",{className:"cycle-config-row",children:[l.jsx("label",{className:"input-label",htmlFor:"edit-pay-frequency",children:"Paycheck frequency (days)"}),l.jsx("input",{id:"edit-pay-frequency",type:"number",className:"input",min:"7",max:"45",value:V.payFrequencyDays,onChange:f=>Pe(S=>({...S,payFrequencyDays:f.target.value}))})]}),V.type==="custom"&&l.jsxs("div",{className:"cycle-config-row",children:[l.jsx("label",{className:"input-label",htmlFor:"edit-cycle-length",children:"Cycle length (days)"}),l.jsx("input",{id:"edit-cycle-length",type:"number",className:"input",min:"5",max:"120",value:V.customDays,onChange:f=>Pe(S=>({...S,customDays:f.target.value}))})]}),l.jsxs("div",{className:"cycle-config-row",children:[l.jsx("label",{className:"input-label",htmlFor:"edit-cycle-start",children:"Cycle start date"}),l.jsx("input",{id:"edit-cycle-start",type:"date",className:"input",value:V.startDate,onChange:f=>Pe(S=>({...S,startDate:f.target.value}))})]}),!c&&l.jsx("p",{className:"plan-teaser",children:"Upgrade or begin a trial to use paycheck and custom budgeting cycles."}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:im,disabled:!c&&V.type!=="monthly",children:"Save cycle"}),l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>K(!1),children:"Cancel"})]})]})}),G&&l.jsxs("div",{className:"snackbar",children:[l.jsx("span",{children:G.message}),G.action&&l.jsx("button",{className:"link-button",onClick:()=>{G.action(),Bu()},children:G.actionLabel||"Undo"}),l.jsx("button",{className:"link-button",onClick:Bu,children:"Dismiss"})]}),We&&l.jsxs("div",{className:"nudge-toast",role:"status",children:[l.jsxs("div",{className:"nudge-copy",children:[l.jsx("strong",{children:We.category})," is at ",(We.ratio*100).toFixed(0),"% of its budget."]}),l.jsxs("div",{className:"nudge-actions",children:[l.jsx("button",{className:"link-button",onClick:()=>{var f;cm(We.category),(f=document.getElementById("allocations"))==null||f.scrollIntoView({behavior:"smooth"})},children:"Adjust budget"}),l.jsx("button",{className:"link-button",onClick:()=>dm(),children:"Snooze"})]})]})]})}const Ud=E.shape({id:E.string.isRequired,name:E.string.isRequired,amount:E.number.isRequired,budgetedAmount:E.number,category:E.string.isRequired,type:E.oneOf(["income","expense"]).isRequired,date:E.string.isRequired,receipt:E.string}),Bd=E.shape({name:E.string.isRequired,icon:E.string.isRequired});Ru.propTypes={budget:E.shape({id:E.string.isRequired,name:E.string.isRequired,transactions:E.arrayOf(Ud),categoryBudgets:E.arrayOf(E.shape({category:E.string.isRequired,budgetedAmount:E.number.isRequired}))}).isRequired,categories:E.shape({income:E.arrayOf(Bd).isRequired,expense:E.arrayOf(Bd).isRequired}).isRequired,setViewMode:E.func.isRequired,setBudgets:E.func.isRequired,budgets:E.arrayOf(E.shape({id:E.string.isRequired,name:E.string.isRequired,transactions:E.arrayOf(Ud)})).isRequired,setSelectedBudget:E.func.isRequired,onMetadataChange:E.func};Ru.defaultProps={onMetadataChange:void 0};function Fp({categories:e,setCategories:t,budgets:n,setViewMode:r}){const[s,i]=b.useState("expense"),[o,a]=b.useState(!1),[u,c]=b.useState({name:"",icon:""}),[d,h]=b.useState(null),g=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=()=>{if(!u.name.trim())return;if(e[s].some(m=>m.name===u.name.trim())){alert("Category already exists!");return}const p={...e,[s]:[...e[s],{name:u.name.trim(),icon:u.icon}]};t(p),a(!1),c({name:"",icon:""})},k=p=>{h({...p,originalName:p.name})},x=()=>{if(!d.name.trim())return;const p={...e,[s]:e[s].map(m=>m.name===d.originalName?{name:d.name.trim(),icon:d.icon}:m)};t(p),h(null)},C=p=>{if(n.some(_=>_.transactions.some(w=>w.category===p&&w.type===s))){alert("Cannot delete category in use.");return}const y={...e,[s]:e[s].filter(_=>_.name!==p)};t(y)};return l.jsxs("div",{children:[l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>r("budgets"),children:" Back to Budgets"}),l.jsx("h1",{className:"header",children:"Manage Categories"}),l.jsxs("div",{className:"tabRow",children:[l.jsx("button",{className:s==="expense"?"tabActive":"tabInactive",onClick:()=>i("expense"),children:"Expenses"}),l.jsx("button",{className:s==="income"?"tabActive":"tabInactive",onClick:()=>i("income"),children:"Income"})]}),l.jsxs("button",{className:"addButton primary-button",onClick:()=>a(!0),children:["Add ",s.charAt(0).toUpperCase()+s.slice(1)," Category"]}),e[s].length===0?l.jsxs("p",{className:"empty-state",children:["No ",s," categories yet."]}):e[s].map(p=>l.jsx("div",{className:"transaction category-item",children:d&&d.originalName===p.name?l.jsxs("div",{className:"category-edit",children:[l.jsx("input",{className:"input",value:d.name,onChange:m=>h({...d,name:m.target.value})}),l.jsx("div",{className:"icon-selector",children:g.map(m=>l.jsx("button",{className:`icon-button ${d.icon===m?"selected":""}`,onClick:()=>h({...d,icon:m}),children:m},m))}),l.jsxs("div",{className:"category-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:x,children:"Save"}),l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>h(null),children:"Cancel"})]})]}):l.jsxs("div",{className:"category-display",children:[l.jsxs("span",{className:"category-info",children:[p.icon," ",p.name]}),l.jsxs("div",{className:"category-actions",children:[l.jsx("button",{className:"action-button",onClick:()=>k(p),children:"Edit"}),l.jsx("button",{className:"action-button delete",onClick:()=>C(p.name),children:"Delete"})]})]})},p.name)),o&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent",children:[l.jsxs("h2",{className:"header modal-header",children:["Add ",s.charAt(0).toUpperCase()+s.slice(1)," Category"]}),l.jsx("input",{className:"input",placeholder:"Category Name",value:u.name,onChange:p=>c({...u,name:p.target.value})}),l.jsx("div",{className:"icon-selector",children:g.map(p=>l.jsx("button",{className:`icon-button ${u.icon===p?"selected":""}`,onClick:()=>c({...u,icon:p}),children:p},p))}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:v,children:"Add"}),l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>a(!1),children:"Cancel"})]})]})})]})}const t_=E.shape({id:E.string.isRequired,name:E.string.isRequired,amount:E.number.isRequired,budgetedAmount:E.number,category:E.string.isRequired,type:E.oneOf(["income","expense"]).isRequired,date:E.string.isRequired,receipt:E.string}),Fd=E.shape({name:E.string.isRequired,icon:E.string.isRequired});Fp.propTypes={categories:E.shape({income:E.arrayOf(Fd).isRequired,expense:E.arrayOf(Fd).isRequired}).isRequired,setCategories:E.func.isRequired,budgets:E.arrayOf(E.shape({id:E.string.isRequired,transactions:E.arrayOf(t_).isRequired})).isRequired,setViewMode:E.func.isRequired};const Ri=[25,50,75,100],n_=1e3*60*60*24,ka=n_*7,r_=["trial","paid","pro","premium","plus"],er=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(e||0)),zp=e=>({...e,amount:Number(e.amount||0),contributed_at:e.contributed_at||e.date||e.created_at||new Date().toISOString()}),vi=e=>{const t=(e.goal_contributions||e.contributions||[]).map(zp);return t.sort((n,r)=>new Date(r.contributed_at)-new Date(n.contributed_at)),{...e,targetAmount:Number(e.target_amount??e.targetAmount??0),targetDate:e.target_date||e.targetDate||null,status:e.status||"active",milestones:Array.isArray(e.milestones)&&e.milestones.length?e.milestones:Ri,linked_budget_id:e.linked_budget_id||e.linkedBudgetId||null,goal_contributions:t}},s_=e=>{const t=e.created_at||e.createdAt,r=e.start_date||e.startDate||t,s=r?new Date(r):new Date;return Number.isNaN(s.getTime())?new Date:s},i_=e=>{if(!e.targetDate)return null;const t=new Date(e.targetDate);return Number.isNaN(t.getTime())?null:t},o_=e=>{const t=new Date(e),n=t.getDay(),r=t.getDate()-n+(n===0?-6:1),s=new Date(t.setDate(r));return s.setHours(0,0,0,0),s},tr=e=>{const t=new Date,n=e.goal_contributions||[],r=n.reduce((w,N)=>w+Number(N.amount||0),0),s=Number(e.targetAmount||0),i=s>0?Math.min(100,r/s*100):0,o=s_(e),a=i_(e);let u=a?a.getTime()-o.getTime():null;u!==null&&u<=0&&(u=ka);const c=Math.max(0,t.getTime()-o.getTime()),d=u&&u>0?Math.min(1,Math.max(0,c/u)):1,h=s*d,g=u?Math.max(1,Math.ceil(u/ka)):1,v=g>0?s/g:s,k=o_(t),x=new Date(k.getTime()+ka),C=n.filter(w=>{const N=new Date(w.contributed_at);return N>=k&&N<x}).reduce((w,N)=>w+Number(N.amount||0),0),p=s*.02,m=r-h;let y="on-track";m>p?y="ahead":m<-p&&(y="behind");const _=Math.max(0,v-C);return{totalContributed:r,progress:i,weeklyTarget:v,contributedThisWeek:C,guidanceShortfall:_,pace:y,plannedTotal:h,totalWeeks:g}};function qp({setViewMode:e,budgets:t=[],setBudgets:n}){const{user:r,userProfile:s}=Ws(),i=(s==null?void 0:s.plan_tier)||(s==null?void 0:s.planTier)||"free",o=String(i).toLowerCase(),a=r_.includes(o),[u,c]=b.useState([]),[d,h]=b.useState(!0),[g,v]=b.useState(null),[k,x]=b.useState(!1),[C,p]=b.useState({name:"",targetAmount:"",targetDate:"",linkedBudgetId:""}),[m,y]=b.useState(!1),[_,w]=b.useState(""),[N,j]=b.useState(""),[T,F]=b.useState(""),[H,se]=b.useState(null),[ie,Te]=b.useState(null),ae=b.useRef({}),[R,z]=b.useState(!1),[G,D]=b.useState(!1),U=b.useCallback(async()=>{if(r){h(!0),v(null);try{const{data:P,error:$}=await Dw(r.id);if($){console.error("Error loading goals:",$),v($.message||"Failed to load goals");return}const J=(P||[]).map(X=>vi(X));c(J);const W={};J.forEach(X=>{W[X.id]=tr(X).progress}),ae.current=W,J.length&&w(X=>X||J[0].id)}catch(P){console.error("Unexpected error loading goals:",P),v(P.message||"Unexpected error loading goals")}finally{h(!1)}}},[r]);b.useEffect(()=>{r&&U()},[r,U]);const q=async P=>{if(P.preventDefault(),!r)return;if(!a){alert("Goal creation is available during trial or paid plans.");return}const $=parseFloat(C.targetAmount);if(!C.name.trim()||Number.isNaN($)||$<=0){alert("Please provide a goal name and a positive target amount.");return}z(!0);try{const{data:J,error:W}=await Iw(r.id,{name:C.name.trim(),targetAmount:$,targetDate:C.targetDate?new Date(C.targetDate).toISOString():null,milestones:Ri,status:"active",linkedBudgetId:C.linkedBudgetId||null});if(W){console.error("Error creating goal:",W),alert(W.message||"Failed to create goal");return}const X=J==null?void 0:J[0];if(X){const V=vi(X);c(Pe=>[V,...Pe]),ae.current[V.id]=tr(V).progress,w(V.id)}p({name:"",targetAmount:"",targetDate:"",linkedBudgetId:""}),x(!1)}catch(J){console.error("Unexpected error creating goal:",J),alert("Unexpected error creating goal. Please try again.")}finally{z(!1)}},Y=async P=>{if(confirm("Delete this goal? Contributions will remain recorded."))try{const{error:$}=await Lw(P);if($){console.error("Error deleting goal:",$),alert($.message||"Failed to delete goal");return}c(W=>{const X=W.filter(V=>V.id!==P);return X.length===0?w(""):P===_&&w(X[0].id),X});const J={...ae.current};delete J[P],ae.current=J}catch($){console.error("Unexpected error deleting goal:",$),alert("Unexpected error deleting goal")}},K=async(P,$)=>{try{const{data:J,error:W}=await $w(P.id,{linkedBudgetId:$||null});if(W){console.error("Error linking budget:",W),alert(W.message||"Failed to link budget");return}if(J!=null&&J[0]){const X=vi(J[0]);c(V=>V.map(Pe=>Pe.id===P.id?X:Pe))}else c(X=>X.map(V=>V.id===P.id?{...V,linked_budget_id:$||null}:V))}catch(J){console.error("Unexpected error linking budget:",J),alert("Unexpected error while linking budget")}},ce=()=>{y(!1),j(""),F("")},xe=P=>{j($=>P===""?$.slice(0,-1):P==="."&&$.includes(".")?$:`${$}${P}`)},$t=async()=>{const P=parseFloat(N);if(!_||Number.isNaN(P)||P<=0){alert("Enter a valid contribution amount");return}if(!a){alert("Logging contributions is available during trial or paid plans.");return}const $=u.find(W=>W.id===_);if(!$){alert("Select a goal");return}D(!0);const J=new Date().toISOString();try{const W=ae.current[$.id]??tr($).progress,{data:X,error:V}=await Mw($.id,{amount:P,date:J,note:T});if(V){console.error("Error logging contribution:",V),alert(V.message||"Failed to log contribution");return}const Pe=(X||[]).map(zp);if(Pe.length){const Le=vi({...$,goal_contributions:[...Pe,...$.goal_contributions||[]]}),bt=tr(Le).progress;qe(Le,W,bt),ae.current[$.id]=bt,c(Ir=>Ir.map(vt=>vt.id===$.id?Le:vt)),await We($,P,J)}ce()}catch(W){console.error("Unexpected error adding contribution:",W),alert("Unexpected error adding contribution")}finally{D(!1)}},qe=(P,$,J)=>{const X=(P.milestones||Ri).slice().sort((V,Pe)=>V-Pe).find(V=>$<V&&J>=V);X!==void 0&&(se(P.id),Te({goalName:P.name,milestone:X}),setTimeout(()=>{se(null),Te(null)},4e3))},We=async(P,$,J)=>{if(!(!P.linked_budget_id||!n||!t.find(X=>X.id===P.linked_budget_id)))try{const X={name:`Goal Contribution - ${P.name}`,amount:$,budgetedAmount:0,category:"Savings Goals",type:"expense",date:J,receipt:null},{data:V,error:Pe}=await Dp(P.linked_budget_id,X);if(Pe){console.error("Failed to sync contribution to budget:",Pe);return}const Le=V==null?void 0:V[0],bt=Le?{id:Le.id,name:Le.name,amount:Le.amount,budgetedAmount:Le.budgeted_amount,category:Le.category,type:Le.type,date:Le.date,receipt:Le.receipt_url}:{id:`goal-sync-${Date.now()}`,...X};n(Ir=>Ir.map(vt=>vt.id===P.linked_budget_id?{...vt,transactions:[...vt.transactions||[],bt]}:vt))}catch(X){console.error("Unexpected error syncing contribution to budget:",X)}},Jt=P=>{const $=tr(P);return(P.milestones||Ri).filter(W=>$.progress>=W)},B=b.useMemo(()=>[["1","2","3"],["4","5","6"],["7","8","9"],[".","0",""]],[]);return l.jsxs("div",{className:"goals-screen",children:[l.jsxs("div",{className:"goals-header",children:[l.jsx("button",{className:"ghost-button",onClick:()=>e("budgets"),children:" Budgets"}),l.jsx("h2",{children:"Savings Goals"}),l.jsx("p",{className:"tagline",children:"Track milestones, weekly pace, and stay motivated."})]}),!a&&l.jsx("div",{className:"plan-teaser goals-teaser",children:"Goal creation and contribution tracking unlock during your free trial or with Pocket Budget Plus."}),g&&l.jsx("div",{className:"error-banner",children:g}),d?l.jsx("div",{className:"loading-goals",children:"Loading goals"}):u.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("p",{children:"Start a new savings goal to build momentum."}),l.jsx("button",{className:"primary-button",onClick:()=>x(!0),children:"Create your first goal"})]}):u.map(P=>{const $=tr(P),J=Jt(P);return l.jsxs("div",{className:"goal-card",children:[l.jsxs("div",{className:"goal-card-header",children:[l.jsxs("div",{children:[l.jsx("h3",{children:P.name}),l.jsx("span",{className:`goal-pace-badge ${$.pace}`,children:$.pace.replace("-"," ")}),$.progress>=100&&l.jsx("span",{className:"goal-complete",children:" Complete"})]}),l.jsx("button",{className:"icon-button",onClick:()=>Y(P.id),title:"Delete goal",children:""})]}),l.jsx("div",{className:"goal-progress-bar",children:l.jsx("div",{className:"goal-progress",style:{width:`${$.progress}%`}})}),l.jsxs("div",{className:"goal-progress-meta",children:[l.jsxs("span",{children:[er($.totalContributed)," saved"]}),l.jsxs("span",{children:["Target ",er(P.targetAmount)]})]}),l.jsxs("div",{className:"goal-meta-grid",children:[l.jsxs("div",{children:[l.jsx("p",{className:"meta-label",children:"Weekly target"}),l.jsx("p",{className:"meta-value",children:er($.weeklyTarget)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"meta-label",children:"This week"}),l.jsx("p",{className:"meta-value",children:er($.contributedThisWeek)})]}),P.targetDate&&l.jsxs("div",{children:[l.jsx("p",{className:"meta-label",children:"Target date"}),l.jsx("p",{className:"meta-value",children:new Date(P.targetDate).toLocaleDateString()})]}),l.jsxs("div",{children:[l.jsx("p",{className:"meta-label",children:"Milestones"}),l.jsx("p",{className:"meta-value",children:J.length>0?`${J.join("%  ")}%`:""})]})]}),$.pace==="behind"&&$.guidanceShortfall>0&&l.jsxs("div",{className:"goal-guidance",children:["Add ",er($.guidanceShortfall)," this week to catch up."]}),l.jsx("div",{className:"goal-budget-link",children:l.jsxs("label",{children:["Sync with budget",l.jsxs("select",{value:P.linked_budget_id||"",onChange:W=>K(P,W.target.value),children:[l.jsx("option",{value:"",children:"Not linked"}),t.map(W=>l.jsx("option",{value:W.id,children:W.name},W.id))]})]})}),P.goal_contributions&&P.goal_contributions.length>0&&l.jsxs("div",{className:"goal-contributions",children:[l.jsx("h4",{children:"Recent contributions"}),l.jsx("ul",{children:P.goal_contributions.slice(0,4).map(W=>l.jsxs("li",{children:[l.jsx("span",{children:new Date(W.contributed_at).toLocaleDateString()}),l.jsx("span",{children:er(W.amount)})]},W.id))})]})]},P.id)}),l.jsx("button",{className:"fab",onClick:()=>{if(!u.length){x(!0);return}if(!_&&u.length&&w(u[0].id),!a){alert("Upgrade or start a trial to log contributions in real time.");return}y(!0)},title:"Log contribution",children:""}),l.jsx("button",{className:"secondary-button",onClick:()=>x(!0),style:{width:"100%",marginTop:"1rem"},children:"New goal"}),k&&l.jsx("div",{className:"modal-backdrop",children:l.jsxs("div",{className:"modal",children:[l.jsx("h3",{children:"Create goal"}),!a&&l.jsx("div",{className:"plan-teaser",children:"Goal creation is part of Pocket Budget Plus. Start a trial to map savings to your next big milestone."}),l.jsxs("form",{onSubmit:q,className:"goal-form",children:[l.jsxs("fieldset",{disabled:!a,children:[l.jsxs("label",{children:["Goal name",l.jsx("input",{type:"text",value:C.name,onChange:P=>p($=>({...$,name:P.target.value})),placeholder:"Emergency fund",required:!0})]}),l.jsxs("label",{children:["Target amount",l.jsx("input",{type:"number",min:"0",step:"0.01",value:C.targetAmount,onChange:P=>p($=>({...$,targetAmount:P.target.value})),placeholder:"5000",required:!0})]}),l.jsxs("label",{children:["Target date",l.jsx("input",{type:"date",value:C.targetDate,onChange:P=>p($=>({...$,targetDate:P.target.value}))})]}),l.jsxs("label",{children:["Link to budget",l.jsxs("select",{value:C.linkedBudgetId,onChange:P=>p($=>({...$,linkedBudgetId:P.target.value})),children:[l.jsx("option",{value:"",children:"Not linked"}),t.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{type:"button",className:"ghost-button",onClick:()=>x(!1),children:"Cancel"}),l.jsx("button",{type:"submit",className:"primary-button",disabled:R||!a,children:R?"Saving":"Create"})]})]})]})}),m&&l.jsx("div",{className:"modal-backdrop",children:l.jsxs("div",{className:"modal keypad-modal",children:[l.jsx("h3",{children:"Log contribution"}),!a&&l.jsx("p",{className:"plan-teaser",children:"Upgrade or start a trial to log automatic goal contributions."}),l.jsxs("fieldset",{disabled:!a,children:[l.jsxs("label",{children:["Choose goal",l.jsx("select",{value:_,onChange:P=>w(P.target.value),children:u.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))})]}),l.jsx("div",{className:"keypad-display",children:N||"0"}),l.jsx("div",{className:"numeric-keypad",children:B.map((P,$)=>l.jsx("div",{className:"keypad-row",children:P.map(J=>l.jsx("button",{type:"button",onClick:()=>xe(J),children:J},J))},$))}),l.jsxs("label",{children:["Note (optional)",l.jsx("input",{type:"text",value:T,onChange:P=>F(P.target.value),placeholder:"Paycheck transfer"})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{type:"button",className:"ghost-button",onClick:ce,children:"Cancel"}),l.jsx("button",{type:"button",className:"primary-button",onClick:$t,disabled:G||!a,children:G?"Saving":"Log"})]})]})]})}),H&&l.jsx("div",{className:"confetti-overlay",children:Array.from({length:60}).map((P,$)=>l.jsx("span",{className:"confetti-piece",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*1.5}s`},children:""},$))}),ie&&l.jsxs("div",{className:"milestone-banner",children:[l.jsx("strong",{children:ie.goalName})," reached ",ie.milestone,"% of the goal!"]})]})}qp.propTypes={setViewMode:E.func.isRequired,budgets:E.arrayOf(E.shape({id:E.oneOfType([E.string,E.number]).isRequired,name:E.string.isRequired,transactions:E.arrayOf(E.shape({id:E.oneOfType([E.string,E.number]),name:E.string.isRequired,amount:E.number.isRequired,budgetedAmount:E.number,category:E.string.isRequired,type:E.string.isRequired,date:E.string.isRequired,receipt:E.string}))})),setBudgets:E.func.isRequired};function Wp({budget:e,setViewMode:t}){const[n,r]=b.useState(null),[s,i]=b.useState(!0),[o,a]=b.useState(null),u=b.useCallback(()=>{const d=e.transactions||[],h=d.filter(_=>_.type==="income").reduce((_,w)=>_+w.amount,0),g=d.filter(_=>_.type==="expense").reduce((_,w)=>_+w.amount,0),v=h-g,k=h>0?v/h*100:0,x={};d.filter(_=>_.type==="expense").forEach(_=>{x[_.category]=(x[_.category]||0)+_.amount});const C=Object.entries(x).sort(([,_],[,w])=>w-_)[0],p=new Date,m=d.filter(_=>{const w=new Date(_.date);return(p-w)/(1e3*60*60*24)<=7&&_.type==="expense"}).reduce((_,w)=>_+w.amount,0),y=d.filter(_=>{const w=new Date(_.date),N=(p-w)/(1e3*60*60*24);return N>7&&N<=14&&_.type==="expense"}).reduce((_,w)=>_+w.amount,0);return{totalIncome:h,totalExpenses:g,balance:v,savingsRate:k,expensesByCategory:x,topExpenseCategory:C,last7Days:m,previous7Days:y,transactionCount:d.length,avgTransactionAmount:d.length>0?(h+g)/d.length:0}},[e]),c=b.useCallback(async()=>{try{i(!0);const d=u(),h=await l_(d);r(h),a(null)}catch(d){a("Failed to generate AI insights. Please try again."),console.error("AI Insights Error:",d)}finally{i(!1)}},[u]);return b.useEffect(()=>{c()},[c]),s?l.jsxs("div",{children:[l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:" Back to Details"}),l.jsx("h1",{className:"header",children:"AI Financial Report"}),l.jsxs("div",{className:"ai-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Analyzing your financial data..."}),l.jsx("p",{className:"loading-subtext",children:"Generating personalized insights and recommendations"})]})]}):o?l.jsxs("div",{children:[l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:" Back to Details"}),l.jsx("h1",{className:"header",children:"AI Financial Report"}),l.jsxs("div",{className:"error-state",children:[l.jsx("p",{className:"error-message",children:o}),l.jsx("button",{className:"primary-button",onClick:c,children:"Try Again"})]})]}):l.jsxs("div",{children:[l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:" Back to Details"}),l.jsx("h1",{className:"header",children:"AI Financial Report"}),l.jsxs("div",{className:"compact-health-score",children:[l.jsxs("div",{className:"health-score-content",children:[l.jsxs("div",{className:"health-score-number",children:[n.healthScore,"/10"]}),l.jsx("div",{className:"health-score-label",children:"Financial Health"})]}),l.jsx("div",{className:"health-score-bar",children:l.jsx("div",{className:"health-score-fill",style:{width:`${n.healthScore/10*100}%`}})})]}),l.jsxs("div",{className:"report-section",children:[l.jsx("h2",{className:"section-title",children:" Budget Optimization"}),n.budgetSuggestions.map((d,h)=>l.jsxs("div",{className:"budget-suggestion",children:[d.rule&&l.jsxs("div",{className:"budget-rule",children:[l.jsx("h3",{children:d.rule}),l.jsxs("div",{className:"budget-breakdown",children:[l.jsx("div",{children:d.needs}),l.jsx("div",{children:d.wants}),l.jsx("div",{children:d.savings})]})]}),d.category&&l.jsxs("div",{className:"category-suggestion",children:[l.jsxs("strong",{children:[d.category,":"]})," Currently ",d.current," - ",d.suggestion]})]},h))]}),l.jsxs("div",{className:"summary-callout",children:[l.jsx("div",{className:"callout-icon",children:""}),l.jsxs("div",{className:"callout-content",children:[l.jsx("h3",{className:"callout-title",children:"Financial Overview"}),l.jsx("p",{className:"callout-text",children:n.summary})]})]}),l.jsxs("div",{className:"report-section",children:[l.jsx("h2",{className:"section-title",children:" Strengths & Areas for Growth"}),l.jsxs("div",{className:"strengths-improvements-grid",children:[l.jsxs("div",{className:"strengths-column",children:[l.jsx("h3",{className:"column-title",children:" Your Strengths"}),n.strengths.map((d,h)=>l.jsxs("div",{className:"strength-item-compact",children:[l.jsx("span",{className:"strength-icon",children:""}),l.jsx("span",{children:d})]},h))]}),l.jsxs("div",{className:"improvements-column",children:[l.jsx("h3",{className:"column-title",children:" Growth Areas"}),n.improvements.map((d,h)=>l.jsxs("div",{className:"improvement-item-compact",children:[l.jsx("div",{className:"improvement-title-compact",children:d.area}),l.jsx("div",{className:"improvement-action-compact",children:d.action})]},h))]})]})]}),l.jsxs("div",{className:"report-section",children:[l.jsx("h2",{className:"section-title",children:" Spending Insights"}),l.jsxs("div",{className:"analysis-grid-compact",children:[l.jsx("div",{className:"analysis-item-compact",children:n.spendingAnalysis.trend}),l.jsx("div",{className:"analysis-item-compact",children:n.spendingAnalysis.topCategory}),l.jsx("div",{className:"analysis-item-compact",children:n.spendingAnalysis.avgTransaction}),l.jsx("div",{className:"analysis-item-compact",children:n.spendingAnalysis.frequency})]})]}),l.jsxs("div",{className:"report-section",children:[l.jsx("h2",{className:"section-title",children:" Quick Savings Tips"}),l.jsx("div",{className:"tips-grid",children:n.savingsTips.slice(0,4).map((d,h)=>l.jsx("div",{className:"tip-item-compact",children:d},h))})]}),l.jsxs("div",{className:"report-section",children:[l.jsx("h2",{className:"section-title",children:" Recommended Goals"}),l.jsxs("div",{className:"goals-container-compact",children:[l.jsxs("div",{className:"goals-column",children:[l.jsx("h3",{children:"Next 3 Months"}),n.goals.shortTerm.slice(0,3).map((d,h)=>l.jsxs("div",{className:"goal-item-compact short-term",children:[l.jsx("span",{children:""}),d]},h))]}),l.jsxs("div",{className:"goals-column",children:[l.jsx("h3",{children:"6+ Months"}),n.goals.longTerm.slice(0,3).map((d,h)=>l.jsxs("div",{className:"goal-item-compact long-term",children:[l.jsx("span",{children:""}),d]},h))]})]})]}),l.jsx("div",{className:"report-actions",children:l.jsx("button",{className:"primary-button",onClick:c,children:" Generate New Report"})})]})}const a_=E.shape({id:E.string.isRequired,name:E.string.isRequired,amount:E.number.isRequired,budgetedAmount:E.number,category:E.string.isRequired,type:E.oneOf(["income","expense"]).isRequired,date:E.string.isRequired,receipt:E.string});Wp.propTypes={budget:E.shape({id:E.string.isRequired,name:E.string.isRequired,transactions:E.arrayOf(a_)}).isRequired,setViewMode:E.func.isRequired};async function l_(e){var o,a;await new Promise(u=>setTimeout(u,2e3));const t=u_(e),n=e.last7Days>e.previous7Days?"increasing":"decreasing",r=((o=e.topExpenseCategory)==null?void 0:o[0])||"Unknown",s=((a=e.topExpenseCategory)==null?void 0:a[1])||0,i=e.totalExpenses>0?s/e.totalExpenses*100:0;return{healthScore:t,summary:c_(e,t),strengths:d_(e),improvements:h_(e),spendingAnalysis:f_(e,n,r,i),savingsTips:p_(e),budgetSuggestions:m_(e),goals:g_(e)}}function u_(e){let t=5;return e.savingsRate>20?t+=2:e.savingsRate>10?t+=1:e.savingsRate<0&&(t-=2),e.balance>0?t+=1:t-=1,e.transactionCount>10&&(t+=1),(e.topExpenseCategory?e.topExpenseCategory[1]/e.totalExpenses*100:0)>50&&(t-=1),Math.max(1,Math.min(10,t))}function c_(e,t){return t>=8?"Excellent financial health! You're demonstrating strong budgeting discipline with healthy savings and balanced spending.":t>=6?"Good financial foundation with room for optimization. A few adjustments could significantly improve your financial position.":t>=4?"Your finances need attention. Focus on increasing income, reducing expenses, or both to improve your financial stability.":"Critical financial situation requiring immediate action. Consider seeking financial counseling and implementing strict budgeting measures."}function d_(e){const t=[];return e.savingsRate>15&&t.push("Strong savings discipline - you're saving above the recommended 15% rate"),e.transactionCount>15&&t.push("Excellent expense tracking - you're consistently recording transactions"),e.balance>0&&t.push("Positive cash flow - you're living within your means"),Object.keys(e.expensesByCategory).length>=4&&t.push("Diversified spending across multiple categories shows balanced lifestyle"),t.length===0&&t.push("You're taking the first step by tracking your finances - that's commendable!"),t}function h_(e){const t=[];e.savingsRate<10&&t.push({area:"Increase Savings Rate",suggestion:`Aim to save at least 15-20% of income. Currently at ${e.savingsRate.toFixed(1)}%`,action:"Set up automatic transfers to savings account"}),e.balance<0&&t.push({area:"Address Negative Balance",suggestion:"You're spending more than you earn - immediate action needed",action:"Review and cut non-essential expenses immediately"});const n=e.topExpenseCategory?e.topExpenseCategory[1]/e.totalExpenses*100:0;return n>40&&t.push({area:"Diversify Spending",suggestion:`${e.topExpenseCategory[0]} represents ${n.toFixed(1)}% of expenses`,action:"Look for ways to reduce this dominant expense category"}),e.transactionCount<10&&t.push({area:"Improve Expense Tracking",suggestion:"More consistent transaction recording will provide better insights",action:"Set daily reminders to log expenses"}),t}function f_(e,t,n,r){return{trend:t==="increasing"?" Spending increased in the last week":" Spending decreased in the last week",topCategory:` Highest expense category: ${n} (${r.toFixed(1)}% of total)`,avgTransaction:` Average transaction: $${e.avgTransactionAmount.toFixed(2)}`,frequency:` Transaction frequency: ${e.transactionCount} transactions recorded`}}function p_(e){const t=[];return e.expensesByCategory.Groceries>e.totalExpenses*.15&&t.push(" Meal planning could reduce grocery costs by 15-20%"),e.expensesByCategory.Entertainment>e.totalExpenses*.1&&t.push(" Consider free entertainment alternatives to reduce costs"),e.expensesByCategory.Transportation>e.totalExpenses*.15&&t.push(" Explore carpooling or public transit options"),t.push(" Try the 24-hour rule: wait a day before non-essential purchases"),t.push(" Automate savings to make it effortless"),t}function m_(e){const t=[],n=e.totalExpenses*.5,r=e.totalExpenses*.3,s=e.totalIncome*.2;return t.push({rule:"50/30/20 Budget Rule",needs:`Needs (50%): $${n.toFixed(2)}`,wants:`Wants (30%): $${r.toFixed(2)}`,savings:`Savings (20%): $${s.toFixed(2)}`}),Object.entries(e.expensesByCategory).forEach(([i,o])=>{const a=o/e.totalExpenses*100;a>30&&t.push({category:i,current:`${a.toFixed(1)}%`,suggestion:"Consider reducing this category to below 25% of total expenses"})}),t}function g_(e){const t=[],n=[];if(e.savingsRate<15&&t.push("Increase savings rate to 15% within 2 months"),e.balance<e.totalIncome*.25&&t.push("Build emergency fund equal to 1 month of expenses"),t.push("Track all expenses for 30 consecutive days"),n.push("Build emergency fund covering 3-6 months of expenses"),n.push("Achieve 20% savings rate consistently"),n.push("Diversify income sources"),e.totalIncome>0){const r=e.totalExpenses*6;n.push(`Save $${r.toFixed(2)} for full emergency fund`)}return{shortTerm:t,longTerm:n}}function Di({message:e="Loading"}){return l.jsx("div",{className:"loading-screen",children:l.jsxs("div",{className:"loading-content",children:[l.jsx("h1",{className:"header",children:"Pocket Budget"}),l.jsx("div",{className:"loading-spinner-large"}),l.jsxs("p",{className:"loading-text",children:[e,"..."]})]})})}Di.propTypes={message:E.string};function y_(){const[e,t]=b.useState(!1),[n,r]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(""),[u,c]=b.useState(!1),[d,h]=b.useState(""),g=async()=>{c(!0),h("");try{const{error:x}=await bl("fulltest@test.com","fullpass123");x&&h(x.message||"Unable to start demo session")}catch(x){console.error("Demo login error:",x),h("Demo login failed. Please try again.")}finally{c(!1)}},v=async x=>{x.preventDefault(),c(!0),h("");try{if(e){if(s!==o){h("Passwords do not match"),c(!1);return}if(s.length<6){h("Password must be at least 6 characters"),c(!1);return}const{error:C}=await kw(n,s);C?h(C.message):(h(""),t(!1),i(""),a(""))}else{const{error:C}=await bl(n,s);C&&h(C.message)}}catch(C){h("An unexpected error occurred"),console.error("Auth error:",C)}finally{c(!1)}},k=async()=>{c(!0),h("");try{const{error:x}=await jw();x&&h(x.message)}catch(x){h("Failed to sign in with Google"),console.error("Google auth error:",x)}finally{c(!1)}};return l.jsx("div",{className:"login-container",children:l.jsxs("div",{className:"login-content",children:[l.jsxs("div",{className:"login-header",children:[l.jsx("h1",{className:"login-title",children:"Pocket Budget"}),l.jsx("p",{className:"login-subtitle",children:e?"Create your account to get started":"Welcome back! Sign in to continue"})]}),l.jsxs("div",{className:"login-form-container",children:[d&&l.jsx("div",{className:"error-message",children:d}),l.jsx("button",{onClick:g,className:"google-button",style:{background:"linear-gradient(135deg, #0ea5e9, #8b5cf6)",color:"white",border:"none",marginBottom:"1rem"},disabled:u,children:" Demo Login (fulltest@test.com)"}),l.jsxs("form",{onSubmit:v,className:"login-form",children:[l.jsx("input",{type:"email",placeholder:"Email address",value:n,onChange:x=>r(x.target.value),className:"input login-input",required:!0,disabled:u}),l.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:x=>i(x.target.value),className:"input login-input",required:!0,disabled:u,minLength:6}),e&&l.jsx("input",{type:"password",placeholder:"Confirm password",value:o,onChange:x=>a(x.target.value),className:"input login-input",required:!0,disabled:u,minLength:6}),l.jsx("button",{type:"submit",className:"primary-button login-button",disabled:u,children:u?"Please wait...":e?"Create Account":"Sign In"})]}),l.jsx("div",{className:"login-divider",children:l.jsx("span",{children:"or"})}),l.jsxs("button",{onClick:k,className:"google-button",disabled:u,children:[l.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),l.jsx("div",{className:"login-switch",children:l.jsxs("p",{children:[e?"Already have an account?":"Don't have an account?"," ",l.jsx("button",{type:"button",onClick:()=>{t(!e),h(""),r(""),i(""),a("")},className:"login-switch-button",disabled:u,children:e?"Sign In":"Sign Up"})]})})]})]})})}function Hp({title:e,showLogout:t=!1}){const{user:n,userProfile:r}=Ws(),s=async()=>{confirm("Are you sure you want to sign out?")&&await Nw()};return l.jsx("div",{className:"app-header",children:l.jsxs("div",{className:"header-content",children:[l.jsx("h1",{className:"header-title",children:e}),t&&n&&l.jsxs("div",{className:"header-user",children:[l.jsx("span",{className:"user-email",children:(r==null?void 0:r.full_name)||n.email}),l.jsx("button",{onClick:s,className:"logout-button",title:"Sign out",children:""})]})]})})}Hp.propTypes={title:E.string.isRequired,showLogout:E.bool};const Vp="installPromptDismissedUntil",v_=7*24*60*60*1e3,zd=()=>typeof window>"u"?!1:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,qd=()=>{const e=Date.now()+v_;return localStorage.setItem(Vp,e.toString()),e},w_=()=>{const e=localStorage.getItem(Vp);if(!e)return!1;const t=Number.parseInt(e,10);return Number.isFinite(t)&&Date.now()<t};function Wd(){const[e,t]=b.useState(null),[n,r]=b.useState(!1),[s,i]=b.useState(()=>zd());b.useEffect(()=>{const u=c=>{if(c.preventDefault(),s||w_()){t(null),r(!1);return}t(c),r(!0)};return window.addEventListener("beforeinstallprompt",u),()=>window.removeEventListener("beforeinstallprompt",u)},[s]),b.useEffect(()=>{const u=()=>{i(!0),r(!1),t(null)},c=window.matchMedia("(display-mode: standalone)"),d=()=>{const h=zd();i(h),h&&(r(!1),t(null))};return d(),typeof c.addEventListener=="function"?c.addEventListener("change",d):typeof c.addListener=="function"&&c.addListener(d),window.addEventListener("appinstalled",u),()=>{typeof c.removeEventListener=="function"?c.removeEventListener("change",d):typeof c.removeListener=="function"&&c.removeListener(d),window.removeEventListener("appinstalled",u)}},[]);const o=async()=>{if(!e)return;e.prompt();const{outcome:u}=await e.userChoice;t(null),r(!1),u==="accepted"?console.log("User accepted the install prompt"):(console.log("User dismissed the install prompt"),qd())},a=()=>{r(!1),t(null),qd()};return!n||s?null:l.jsx("div",{className:"install-prompt",children:l.jsxs("div",{className:"install-prompt-content",children:[l.jsx("div",{className:"install-prompt-icon",children:""}),l.jsxs("div",{className:"install-prompt-text",children:[l.jsx("h3",{children:"Install Pocket Budget"}),l.jsx("p",{children:"Add to your home screen for a better experience!"})]}),l.jsxs("div",{className:"install-prompt-actions",children:[l.jsx("button",{onClick:o,className:"install-button",children:"Install"}),l.jsx("button",{onClick:a,className:"dismiss-button",children:""})]})]})})}const __=[{key:"home",label:"Home",icon:""},{key:"budgets",label:"Budgets",icon:""},{key:"goals",label:"Goals",icon:""},{key:"reports",label:"Reports",icon:""},{key:"settings",label:"Settings",icon:""}],S_={home:"budgets",budgets:"budgets",goals:"goals",reports:"ai",settings:"settings"},x_=e=>{if(!e)return"home";switch(e){case"budgets":case"details":case"categories":return"budgets";case"goals":return"goals";case"ai":case"reports":return"reports";case"settings":case"profile":return"settings";default:return e}};function Du({viewMode:e,setViewMode:t,onSelect:n}){const r=x_(e),s=i=>{if(n==null||n(i),t){const o=S_[i]||i;t(o)}};return l.jsx("nav",{className:"bottom-nav","aria-label":"Primary navigation",children:__.map(i=>{const o=i.key===r;return l.jsxs("button",{type:"button",className:`bottom-nav__item${o?" is-active":""}`,onClick:()=>s(i.key),"aria-pressed":o,children:[l.jsx("span",{className:"bottom-nav__icon","aria-hidden":"true",children:i.icon}),l.jsx("span",{className:"bottom-nav__label",children:i.label})]},i.key)})})}Du.propTypes={viewMode:E.string,setViewMode:E.func,onSelect:E.func};Du.defaultProps={viewMode:"budgets",setViewMode:void 0,onSelect:void 0};const Gp="pb:budget-metadata:v1",Kp=typeof window<"u"&&typeof window.localStorage<"u",Iu=()=>{if(!Kp)return{};try{const e=window.localStorage.getItem(Gp);if(!e)return{};const t=JSON.parse(e);return t&&typeof t=="object"?t:{}}catch(e){return console.warn("Failed to parse budget metadata",e),{}}},$u=e=>{if(Kp)try{window.localStorage.setItem(Gp,JSON.stringify(e))}catch(t){console.warn("Failed to persist budget metadata",t)}},ys=()=>{const e=new Date().toISOString();return{cycle:{type:"monthly",label:"Monthly",currentStart:e,payFrequencyDays:30,createdAt:e,lastEditedAt:null},changeLog:[],ads:{enabled:!0,lastSeen:null},insights:{trackedCategories:[],reportSchedule:{day:"sunday",time:"08:00"},quietHours:{start:21,end:7},nudges:{enabled:!1,threshold:.8,snoozedUntil:null,acknowledged:{}}},dismissals:{summary:{},recommendations:{}}}},Qp=e=>{if(!e)return ys();const t=Iu();return t[e]||(t[e]=ys(),$u(t)),{...ys(),...t[e]}},k_=(e,t)=>{if(!e)return t;const n=Iu();return n[e]={...ys(),...t},$u(n),n[e]},j_=(e,t)=>{const n=Qp(e),r=typeof t=="function"?t(n):{...n,...t};return k_(e,r)},N_=e=>{if(!e)return;const t=Iu();t[e]&&(delete t[e],$u(t))},Hd={income:[{name:"Salary",icon:""},{name:"Freelance",icon:""},{name:"Investment",icon:""},{name:"Business",icon:""},{name:"Gift",icon:""}],expense:[{name:"Groceries",icon:""},{name:"Rent",icon:""},{name:"Transportation",icon:""},{name:"Entertainment",icon:""},{name:"Bills",icon:""},{name:"Shopping",icon:""}]},ja=()=>({income:Hd.income.map(e=>({...e})),expense:Hd.expense.map(e=>({...e}))});function E_(){const{user:e,loading:t,initializing:n,status:r}=Ws(),[s,i]=b.useState([]),[o,a]=b.useState(ja),[u,c]=b.useState(null),[d,h]=b.useState("budgets"),[g,v]=b.useState("idle"),k=n||t||r==="auth-transition",x=b.useCallback((w,N)=>{var H,se;if(!(w!=null&&w.id))return w;const j=N||w.metadata||Qp(w.id),T=ys(),F={...T,...j,cycle:{...T.cycle,...(j==null?void 0:j.cycle)||{}},ads:{...T.ads,...(j==null?void 0:j.ads)||{}},insights:{...T.insights,...(j==null?void 0:j.insights)||{},nudges:{...T.insights.nudges,...((H=j==null?void 0:j.insights)==null?void 0:H.nudges)||{}}},dismissals:{...T.dismissals,...(j==null?void 0:j.dismissals)||{}}};return{...w,metadata:F,cycleMetadata:F.cycle,changeLog:F.changeLog||[],adsEnabled:((se=F.ads)==null?void 0:se.enabled)!==!1,insightsPreferences:F.insights,dismissedInsights:F.dismissals}},[]),C=b.useCallback(w=>{i(N=>{const j=typeof w=="function"?w(N):w;return Array.isArray(j)?j.map(T=>x(T,T==null?void 0:T.metadata)):N})},[x]);b.useEffect(()=>{e||(C([]),a(ja()),c(null),h("budgets"),v("idle"))},[e]),b.useEffect(()=>{if(!e||t||n)return;let w=!0;v("loading");const N=Tw(e.id),j=Ow(e.id);return Promise.allSettled([N,j]).then(T=>{if(!w)return;const[F,H]=T;if(F.status==="fulfilled"){const{data:se,error:ie}=F.value;ie&&console.error("Error loading budgets:",ie);const Te=(se||[]).map(ae=>({id:ae.id,name:ae.name,createdAt:new Date(ae.created_at).toLocaleDateString(),categoryBudgets:ae.category_budgets||[],transactions:(ae.transactions||[]).map(R=>({id:R.id,name:R.name,amount:Number(R.amount||0),budgetedAmount:R.budgeted_amount??null,category:R.category,type:R.type,date:R.date,receipt:R.receipt_url??null}))}));C(Te.map(ae=>x(ae)))}else console.error("Unexpected error resolving budgets:",F.reason);if(H.status==="fulfilled"){const{data:se,error:ie}=H.value;ie&&ie.code!=="PGRST116"&&console.error("Error loading categories:",ie),se!=null&&se.categories?a(se.categories):(ie==null?void 0:ie.code)==="PGRST116"&&a(ja())}else console.error("Unexpected error resolving categories:",H.reason);v("ready")}),()=>{w=!1}},[e,t,n]);const p=async w=>{if(a(w),!!e)try{await Rw(e.id,w)}catch(N){console.error("Error updating categories:",N)}},m=b.useCallback((w,N)=>{if(!w)return;const j=j_(w,N);C(T=>T.map(F=>F.id===w?x({...F},j):F)),c(T=>!T||T.id!==w?T:x({...T},j))},[x,C]),y=b.useCallback(w=>{w&&(N_(w),c(N=>(N==null?void 0:N.id)===w?null:N))},[]),_=b.useMemo(()=>s.find(w=>w.id===(u==null?void 0:u.id))||u,[s,u]);return n?l.jsx(Di,{message:"Checking your account"}):!e&&!t?l.jsxs(l.Fragment,{children:[l.jsx(y_,{}),l.jsx(Wd,{})]}):k?l.jsx(Di,{message:"Preparing your experience"}):e&&g!=="ready"?l.jsx(Di,{message:g==="loading"?"Loading your budgets":"Setting things up"}):l.jsxs("div",{className:"container",children:[l.jsx(Hp,{title:"Pocket Budget",showLogout:d!=="ai"}),l.jsx(Wd,{}),d==="budgets"&&l.jsx(Ou,{budgets:s,setSelectedBudget:c,setViewMode:h,setBudgets:C,userId:e.id,onMetadataChange:m,onMetadataRemove:y}),d==="goals"&&l.jsx(qp,{setViewMode:h,budgets:s,setBudgets:C}),d==="details"&&_&&l.jsx(Ru,{budget:_,categories:o,setViewMode:h,setBudgets:C,budgets:s,setSelectedBudget:c,onMetadataChange:m}),d==="categories"&&l.jsx(Fp,{categories:o,setCategories:p,budgets:s,setViewMode:h}),d==="ai"&&_&&l.jsx(Wp,{budget:_,setViewMode:h}),l.jsx(Du,{viewMode:d,setViewMode:h})]})}function C_(){return l.jsx($p,{children:l.jsx(E_,{})})}const b_=document.getElementById("root"),T_=ip(b_);T_.render(l.jsx(C_,{}));

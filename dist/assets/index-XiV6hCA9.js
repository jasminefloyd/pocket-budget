(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Wm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Hm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var ph={exports:{}},xo={},mh={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gs=Symbol.for("react.element"),Vm=Symbol.for("react.portal"),Gm=Symbol.for("react.fragment"),Km=Symbol.for("react.strict_mode"),Qm=Symbol.for("react.profiler"),Jm=Symbol.for("react.provider"),Ym=Symbol.for("react.context"),Xm=Symbol.for("react.forward_ref"),Zm=Symbol.for("react.suspense"),eg=Symbol.for("react.memo"),tg=Symbol.for("react.lazy"),jc=Symbol.iterator;function ng(e){return e===null||typeof e!="object"?null:(e=jc&&e[jc]||e["@@iterator"],typeof e=="function"?e:null)}var gh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yh=Object.assign,vh={};function qr(e,t,n){this.props=e,this.context=t,this.refs=vh,this.updater=n||gh}qr.prototype.isReactComponent={};qr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wh(){}wh.prototype=qr.prototype;function Gl(e,t,n){this.props=e,this.context=t,this.refs=vh,this.updater=n||gh}var Kl=Gl.prototype=new wh;Kl.constructor=Gl;yh(Kl,qr.prototype);Kl.isPureReactComponent=!0;var bc=Array.isArray,_h=Object.prototype.hasOwnProperty,Ql={current:null},Sh={key:!0,ref:!0,__self:!0,__source:!0};function xh(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)_h.call(t,r)&&!Sh.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Gs,type:e,key:i,ref:o,props:s,_owner:Ql.current}}function rg(e,t){return{$$typeof:Gs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Jl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gs}function sg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Nc=/\/+/g;function ra(e,t){return typeof e=="object"&&e!==null&&e.key!=null?sg(""+e.key):t.toString(36)}function Pi(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Gs:case Vm:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+ra(o,0):r,bc(s)?(n="",e!=null&&(n=e.replace(Nc,"$&/")+"/"),Pi(s,t,n,"",function(c){return c})):s!=null&&(Jl(s)&&(s=rg(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Nc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",bc(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+ra(i,l);o+=Pi(i,t,n,u,s)}else if(u=ng(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+ra(i,l++),o+=Pi(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ii(e,t,n){if(e==null)return e;var r=[],s=0;return Pi(e,r,"","",function(i){return t.call(n,i,s++)}),r}function ig(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ze={current:null},Ai={transition:null},og={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:Ai,ReactCurrentOwner:Ql};function kh(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:ii,forEach:function(e,t,n){ii(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ii(e,function(){t++}),t},toArray:function(e){return ii(e,function(t){return t})||[]},only:function(e){if(!Jl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};se.Component=qr;se.Fragment=Gm;se.Profiler=Qm;se.PureComponent=Gl;se.StrictMode=Km;se.Suspense=Zm;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=og;se.act=kh;se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=yh({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ql.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_h.call(t,u)&&!Sh.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Gs,type:e.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(e){return e={$$typeof:Ym,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Jm,_context:e},e.Consumer=e};se.createElement=xh;se.createFactory=function(e){var t=xh.bind(null,e);return t.type=e,t};se.createRef=function(){return{current:null}};se.forwardRef=function(e){return{$$typeof:Xm,render:e}};se.isValidElement=Jl;se.lazy=function(e){return{$$typeof:tg,_payload:{_status:-1,_result:e},_init:ig}};se.memo=function(e,t){return{$$typeof:eg,type:e,compare:t===void 0?null:t}};se.startTransition=function(e){var t=Ai.transition;Ai.transition={};try{e()}finally{Ai.transition=t}};se.unstable_act=kh;se.useCallback=function(e,t){return Ze.current.useCallback(e,t)};se.useContext=function(e){return Ze.current.useContext(e)};se.useDebugValue=function(){};se.useDeferredValue=function(e){return Ze.current.useDeferredValue(e)};se.useEffect=function(e,t){return Ze.current.useEffect(e,t)};se.useId=function(){return Ze.current.useId()};se.useImperativeHandle=function(e,t,n){return Ze.current.useImperativeHandle(e,t,n)};se.useInsertionEffect=function(e,t){return Ze.current.useInsertionEffect(e,t)};se.useLayoutEffect=function(e,t){return Ze.current.useLayoutEffect(e,t)};se.useMemo=function(e,t){return Ze.current.useMemo(e,t)};se.useReducer=function(e,t,n){return Ze.current.useReducer(e,t,n)};se.useRef=function(e){return Ze.current.useRef(e)};se.useState=function(e){return Ze.current.useState(e)};se.useSyncExternalStore=function(e,t,n){return Ze.current.useSyncExternalStore(e,t,n)};se.useTransition=function(){return Ze.current.useTransition()};se.version="18.3.1";mh.exports=se;var E=mh.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag=E,lg=Symbol.for("react.element"),ug=Symbol.for("react.fragment"),cg=Object.prototype.hasOwnProperty,dg=ag.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hg={key:!0,ref:!0,__self:!0,__source:!0};function jh(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)cg.call(t,r)&&!hg.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:lg,type:e,key:i,ref:o,props:s,_owner:dg.current}}xo.Fragment=ug;xo.jsx=jh;xo.jsxs=jh;ph.exports=xo;var a=ph.exports,bh={exports:{}},ft={},Nh={exports:{}},Eh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,$){var B=P.length;P.push($);e:for(;0<B;){var X=B-1>>>1,Z=P[X];if(0<s(Z,$))P[X]=$,P[B]=Z,B=X;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var $=P[0],B=P.pop();if(B!==$){P[0]=B;e:for(var X=0,Z=P.length,ce=Z>>>1;X<ce;){var Oe=2*(X+1)-1,Y=P[Oe],ee=Oe+1,Re=P[ee];if(0>s(Y,B))ee<Z&&0>s(Re,Y)?(P[X]=Re,P[ee]=B,X=ee):(P[X]=Y,P[Oe]=B,X=Oe);else if(ee<Z&&0>s(Re,B))P[X]=Re,P[ee]=B,X=ee;else break e}}return $}function s(P,$){var B=P.sortIndex-$.sortIndex;return B!==0?B:P.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,f=null,y=3,v=!1,w=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(P){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=P)r(c),$.sortIndex=$.expirationTime,t(u,$);else break;$=n(c)}}function S(P){if(x=!1,g(P),!w)if(n(u)!==null)w=!0,N(C);else{var $=n(c);$!==null&&z(S,$.startTime-P)}}function C(P,$){w=!1,x&&(x=!1,p(O),O=-1),v=!0;var B=y;try{for(g($),f=n(u);f!==null&&(!(f.expirationTime>$)||P&&!J());){var X=f.callback;if(typeof X=="function"){f.callback=null,y=f.priorityLevel;var Z=X(f.expirationTime<=$);$=e.unstable_now(),typeof Z=="function"?f.callback=Z:f===n(u)&&r(u),g($)}else r(u);f=n(u)}if(f!==null)var ce=!0;else{var Oe=n(c);Oe!==null&&z(S,Oe.startTime-$),ce=!1}return ce}finally{f=null,y=B,v=!1}}var j=!1,b=null,O=-1,F=5,I=-1;function J(){return!(e.unstable_now()-I<F)}function le(){if(b!==null){var P=e.unstable_now();I=P;var $=!0;try{$=b(!0,P)}finally{$?we():(j=!1,b=null)}}else j=!1}var we;if(typeof m=="function")we=function(){m(le)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,U=Ae.port2;Ae.port1.onmessage=le,we=function(){U.postMessage(null)}}else we=function(){T(le,0)};function N(P){b=P,j||(j=!0,we())}function z(P,$){O=T(function(){P(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,N(C))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(P){switch(y){case 1:case 2:case 3:var $=3;break;default:$=y}var B=y;y=$;try{return P()}finally{y=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,$){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var B=y;y=P;try{return $()}finally{y=B}},e.unstable_scheduleCallback=function(P,$,B){var X=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?X+B:X):B=X,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=B+Z,P={id:d++,callback:$,priorityLevel:P,startTime:B,expirationTime:Z,sortIndex:-1},B>X?(P.sortIndex=B,t(c,P),n(u)===null&&P===n(c)&&(x?(p(O),O=-1):x=!0,z(S,B-X))):(P.sortIndex=Z,t(u,P),w||v||(w=!0,N(C))),P},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(P){var $=y;return function(){var B=y;y=$;try{return P.apply(this,arguments)}finally{y=B}}}})(Eh);Nh.exports=Eh;var fg=Nh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg=E,ht=fg;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ch=new Set,Ts={};function Yn(e,t){Ir(e,t),Ir(e+"Capture",t)}function Ir(e,t){for(Ts[e]=t,e=0;e<t.length;e++)Ch.add(t[e])}var Jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),za=Object.prototype.hasOwnProperty,mg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ec={},Cc={};function gg(e){return za.call(Cc,e)?!0:za.call(Ec,e)?!1:mg.test(e)?Cc[e]=!0:(Ec[e]=!0,!1)}function yg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function vg(e,t,n,r){if(t===null||typeof t>"u"||yg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function et(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){We[e]=new et(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];We[t]=new et(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){We[e]=new et(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){We[e]=new et(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){We[e]=new et(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){We[e]=new et(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){We[e]=new et(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){We[e]=new et(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){We[e]=new et(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yl=/[\-:]([a-z])/g;function Xl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yl,Xl);We[t]=new et(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yl,Xl);We[t]=new et(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yl,Xl);We[t]=new et(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){We[e]=new et(e,1,!1,e.toLowerCase(),null,!1,!1)});We.xlinkHref=new et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){We[e]=new et(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zl(e,t,n,r){var s=We.hasOwnProperty(t)?We[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vg(t,n,s,r)&&(n=null),r||s===null?gg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var en=pg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oi=Symbol.for("react.element"),gr=Symbol.for("react.portal"),yr=Symbol.for("react.fragment"),eu=Symbol.for("react.strict_mode"),qa=Symbol.for("react.profiler"),Th=Symbol.for("react.provider"),Ph=Symbol.for("react.context"),tu=Symbol.for("react.forward_ref"),Wa=Symbol.for("react.suspense"),Ha=Symbol.for("react.suspense_list"),nu=Symbol.for("react.memo"),ln=Symbol.for("react.lazy"),Ah=Symbol.for("react.offscreen"),Tc=Symbol.iterator;function es(e){return e===null||typeof e!="object"?null:(e=Tc&&e[Tc]||e["@@iterator"],typeof e=="function"?e:null)}var je=Object.assign,sa;function cs(e){if(sa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);sa=t&&t[1]||""}return`
`+sa+e}var ia=!1;function oa(e,t){if(!e||ia)return"";ia=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{ia=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?cs(e):""}function wg(e){switch(e.tag){case 5:return cs(e.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 2:case 15:return e=oa(e.type,!1),e;case 11:return e=oa(e.type.render,!1),e;case 1:return e=oa(e.type,!0),e;default:return""}}function Va(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yr:return"Fragment";case gr:return"Portal";case qa:return"Profiler";case eu:return"StrictMode";case Wa:return"Suspense";case Ha:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ph:return(e.displayName||"Context")+".Consumer";case Th:return(e._context.displayName||"Context")+".Provider";case tu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nu:return t=e.displayName||null,t!==null?t:Va(e.type)||"Memo";case ln:t=e._payload,e=e._init;try{return Va(e(t))}catch{}}return null}function _g(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Va(t);case 8:return t===eu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function jn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Oh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sg(e){var t=Oh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ai(e){e._valueTracker||(e._valueTracker=Sg(e))}function Rh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Oh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Gi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ga(e,t){var n=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Pc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=jn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Dh(e,t){t=t.checked,t!=null&&Zl(e,"checked",t,!1)}function Ka(e,t){Dh(e,t);var n=jn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Qa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Qa(e,t.type,jn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ac(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Qa(e,t,n){(t!=="number"||Gi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ds=Array.isArray;function Cr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+jn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ja(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Oc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(ds(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:jn(n)}}function Ih(e,t){var n=jn(t.value),r=jn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Rc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Lh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ya(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Lh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var li,$h=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(li=li||document.createElement("div"),li.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=li.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ps(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xg=["Webkit","ms","Moz","O"];Object.keys(ms).forEach(function(e){xg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ms[t]=ms[e]})});function Uh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ms.hasOwnProperty(e)&&ms[e]?(""+t).trim():t+"px"}function Mh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Uh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var kg=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xa(e,t){if(t){if(kg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Za(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var el=null;function ru(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tl=null,Tr=null,Pr=null;function Dc(e){if(e=Js(e)){if(typeof tl!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Eo(t),tl(e.stateNode,e.type,t))}}function Bh(e){Tr?Pr?Pr.push(e):Pr=[e]:Tr=e}function Fh(){if(Tr){var e=Tr,t=Pr;if(Pr=Tr=null,Dc(e),t)for(e=0;e<t.length;e++)Dc(t[e])}}function zh(e,t){return e(t)}function qh(){}var aa=!1;function Wh(e,t,n){if(aa)return e(t,n);aa=!0;try{return zh(e,t,n)}finally{aa=!1,(Tr!==null||Pr!==null)&&(qh(),Fh())}}function As(e,t){var n=e.stateNode;if(n===null)return null;var r=Eo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var nl=!1;if(Jt)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){nl=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{nl=!1}function jg(e,t,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var gs=!1,Ki=null,Qi=!1,rl=null,bg={onError:function(e){gs=!0,Ki=e}};function Ng(e,t,n,r,s,i,o,l,u){gs=!1,Ki=null,jg.apply(bg,arguments)}function Eg(e,t,n,r,s,i,o,l,u){if(Ng.apply(this,arguments),gs){if(gs){var c=Ki;gs=!1,Ki=null}else throw Error(D(198));Qi||(Qi=!0,rl=c)}}function Xn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Hh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ic(e){if(Xn(e)!==e)throw Error(D(188))}function Cg(e){var t=e.alternate;if(!t){if(t=Xn(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ic(s),e;if(i===r)return Ic(s),t;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Vh(e){return e=Cg(e),e!==null?Gh(e):null}function Gh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gh(e);if(t!==null)return t;e=e.sibling}return null}var Kh=ht.unstable_scheduleCallback,Lc=ht.unstable_cancelCallback,Tg=ht.unstable_shouldYield,Pg=ht.unstable_requestPaint,Ee=ht.unstable_now,Ag=ht.unstable_getCurrentPriorityLevel,su=ht.unstable_ImmediatePriority,Qh=ht.unstable_UserBlockingPriority,Ji=ht.unstable_NormalPriority,Og=ht.unstable_LowPriority,Jh=ht.unstable_IdlePriority,ko=null,Mt=null;function Rg(e){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(ko,e,void 0,(e.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:Lg,Dg=Math.log,Ig=Math.LN2;function Lg(e){return e>>>=0,e===0?32:31-(Dg(e)/Ig|0)|0}var ui=64,ci=4194304;function hs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=hs(l):(i&=o,i!==0&&(r=hs(i)))}else o=n&~s,o!==0?r=hs(o):i!==0&&(r=hs(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Pt(t),s=1<<n,r|=e[n],t&=~s;return r}function $g(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ug(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Pt(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=$g(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function sl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Yh(){var e=ui;return ui<<=1,!(ui&4194240)&&(ui=64),e}function la(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ks(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pt(t),e[t]=n}function Mg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Pt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function iu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Pt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var de=0;function Xh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Zh,ou,ef,tf,nf,il=!1,di=[],gn=null,yn=null,vn=null,Os=new Map,Rs=new Map,cn=[],Bg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $c(e,t){switch(e){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":vn=null;break;case"pointerover":case"pointerout":Os.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rs.delete(t.pointerId)}}function ns(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Js(t),t!==null&&ou(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Fg(e,t,n,r,s){switch(t){case"focusin":return gn=ns(gn,e,t,n,r,s),!0;case"dragenter":return yn=ns(yn,e,t,n,r,s),!0;case"mouseover":return vn=ns(vn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Os.set(i,ns(Os.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rs.set(i,ns(Rs.get(i)||null,e,t,n,r,s)),!0}return!1}function rf(e){var t=Bn(e.target);if(t!==null){var n=Xn(t);if(n!==null){if(t=n.tag,t===13){if(t=Hh(n),t!==null){e.blockedOn=t,nf(e.priority,function(){ef(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Oi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ol(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);el=r,n.target.dispatchEvent(r),el=null}else return t=Js(n),t!==null&&ou(t),e.blockedOn=n,!1;t.shift()}return!0}function Uc(e,t,n){Oi(e)&&n.delete(t)}function zg(){il=!1,gn!==null&&Oi(gn)&&(gn=null),yn!==null&&Oi(yn)&&(yn=null),vn!==null&&Oi(vn)&&(vn=null),Os.forEach(Uc),Rs.forEach(Uc)}function rs(e,t){e.blockedOn===t&&(e.blockedOn=null,il||(il=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,zg)))}function Ds(e){function t(s){return rs(s,e)}if(0<di.length){rs(di[0],e);for(var n=1;n<di.length;n++){var r=di[n];r.blockedOn===e&&(r.blockedOn=null)}}for(gn!==null&&rs(gn,e),yn!==null&&rs(yn,e),vn!==null&&rs(vn,e),Os.forEach(t),Rs.forEach(t),n=0;n<cn.length;n++)r=cn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<cn.length&&(n=cn[0],n.blockedOn===null);)rf(n),n.blockedOn===null&&cn.shift()}var Ar=en.ReactCurrentBatchConfig,Xi=!0;function qg(e,t,n,r){var s=de,i=Ar.transition;Ar.transition=null;try{de=1,au(e,t,n,r)}finally{de=s,Ar.transition=i}}function Wg(e,t,n,r){var s=de,i=Ar.transition;Ar.transition=null;try{de=4,au(e,t,n,r)}finally{de=s,Ar.transition=i}}function au(e,t,n,r){if(Xi){var s=ol(e,t,n,r);if(s===null)va(e,t,r,Zi,n),$c(e,r);else if(Fg(s,e,t,n,r))r.stopPropagation();else if($c(e,r),t&4&&-1<Bg.indexOf(e)){for(;s!==null;){var i=Js(s);if(i!==null&&Zh(i),i=ol(e,t,n,r),i===null&&va(e,t,r,Zi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else va(e,t,r,null,n)}}var Zi=null;function ol(e,t,n,r){if(Zi=null,e=ru(r),e=Bn(e),e!==null)if(t=Xn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Hh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zi=e,null}function sf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ag()){case su:return 1;case Qh:return 4;case Ji:case Og:return 16;case Jh:return 536870912;default:return 16}default:return 16}}var pn=null,lu=null,Ri=null;function of(){if(Ri)return Ri;var e,t=lu,n=t.length,r,s="value"in pn?pn.value:pn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Ri=s.slice(e,1<r?1-r:void 0)}function Di(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hi(){return!0}function Mc(){return!1}function pt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hi:Mc,this.isPropagationStopped=Mc,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hi)},persist:function(){},isPersistent:hi}),t}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uu=pt(Wr),Qs=je({},Wr,{view:0,detail:0}),Hg=pt(Qs),ua,ca,ss,jo=je({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ss&&(ss&&e.type==="mousemove"?(ua=e.screenX-ss.screenX,ca=e.screenY-ss.screenY):ca=ua=0,ss=e),ua)},movementY:function(e){return"movementY"in e?e.movementY:ca}}),Bc=pt(jo),Vg=je({},jo,{dataTransfer:0}),Gg=pt(Vg),Kg=je({},Qs,{relatedTarget:0}),da=pt(Kg),Qg=je({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),Jg=pt(Qg),Yg=je({},Wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xg=pt(Yg),Zg=je({},Wr,{data:0}),Fc=pt(Zg),ey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ty={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ny={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ry(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ny[e])?!!t[e]:!1}function cu(){return ry}var sy=je({},Qs,{key:function(e){if(e.key){var t=ey[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Di(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ty[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(e){return e.type==="keypress"?Di(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Di(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),iy=pt(sy),oy=je({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zc=pt(oy),ay=je({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),ly=pt(ay),uy=je({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),cy=pt(uy),dy=je({},jo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hy=pt(dy),fy=[9,13,27,32],du=Jt&&"CompositionEvent"in window,ys=null;Jt&&"documentMode"in document&&(ys=document.documentMode);var py=Jt&&"TextEvent"in window&&!ys,af=Jt&&(!du||ys&&8<ys&&11>=ys),qc=" ",Wc=!1;function lf(e,t){switch(e){case"keyup":return fy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vr=!1;function my(e,t){switch(e){case"compositionend":return uf(t);case"keypress":return t.which!==32?null:(Wc=!0,qc);case"textInput":return e=t.data,e===qc&&Wc?null:e;default:return null}}function gy(e,t){if(vr)return e==="compositionend"||!du&&lf(e,t)?(e=of(),Ri=lu=pn=null,vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return af&&t.locale!=="ko"?null:t.data;default:return null}}var yy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yy[e.type]:t==="textarea"}function cf(e,t,n,r){Bh(r),t=eo(t,"onChange"),0<t.length&&(n=new uu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var vs=null,Is=null;function vy(e){Sf(e,0)}function bo(e){var t=Sr(e);if(Rh(t))return e}function wy(e,t){if(e==="change")return t}var df=!1;if(Jt){var ha;if(Jt){var fa="oninput"in document;if(!fa){var Vc=document.createElement("div");Vc.setAttribute("oninput","return;"),fa=typeof Vc.oninput=="function"}ha=fa}else ha=!1;df=ha&&(!document.documentMode||9<document.documentMode)}function Gc(){vs&&(vs.detachEvent("onpropertychange",hf),Is=vs=null)}function hf(e){if(e.propertyName==="value"&&bo(Is)){var t=[];cf(t,Is,e,ru(e)),Wh(vy,t)}}function _y(e,t,n){e==="focusin"?(Gc(),vs=t,Is=n,vs.attachEvent("onpropertychange",hf)):e==="focusout"&&Gc()}function Sy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bo(Is)}function xy(e,t){if(e==="click")return bo(t)}function ky(e,t){if(e==="input"||e==="change")return bo(t)}function jy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ot=typeof Object.is=="function"?Object.is:jy;function Ls(e,t){if(Ot(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!za.call(t,s)||!Ot(e[s],t[s]))return!1}return!0}function Kc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qc(e,t){var n=Kc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kc(n)}}function ff(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ff(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pf(){for(var e=window,t=Gi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gi(e.document)}return t}function hu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function by(e){var t=pf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ff(n.ownerDocument.documentElement,n)){if(r!==null&&hu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Qc(n,i);var o=Qc(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ny=Jt&&"documentMode"in document&&11>=document.documentMode,wr=null,al=null,ws=null,ll=!1;function Jc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ll||wr==null||wr!==Gi(r)||(r=wr,"selectionStart"in r&&hu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ws&&Ls(ws,r)||(ws=r,r=eo(al,"onSelect"),0<r.length&&(t=new uu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=wr)))}function fi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionend:fi("Transition","TransitionEnd")},pa={},mf={};Jt&&(mf=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);function No(e){if(pa[e])return pa[e];if(!_r[e])return e;var t=_r[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in mf)return pa[e]=t[n];return e}var gf=No("animationend"),yf=No("animationiteration"),vf=No("animationstart"),wf=No("transitionend"),_f=new Map,Yc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nn(e,t){_f.set(e,t),Yn(t,[e])}for(var ma=0;ma<Yc.length;ma++){var ga=Yc[ma],Ey=ga.toLowerCase(),Cy=ga[0].toUpperCase()+ga.slice(1);Nn(Ey,"on"+Cy)}Nn(gf,"onAnimationEnd");Nn(yf,"onAnimationIteration");Nn(vf,"onAnimationStart");Nn("dblclick","onDoubleClick");Nn("focusin","onFocus");Nn("focusout","onBlur");Nn(wf,"onTransitionEnd");Ir("onMouseEnter",["mouseout","mouseover"]);Ir("onMouseLeave",["mouseout","mouseover"]);Ir("onPointerEnter",["pointerout","pointerover"]);Ir("onPointerLeave",["pointerout","pointerover"]);Yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ty=new Set("cancel close invalid load scroll toggle".split(" ").concat(fs));function Xc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Eg(r,t,void 0,e),e.currentTarget=null}function Sf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Xc(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Xc(s,l,c),i=u}}}if(Qi)throw e=rl,Qi=!1,rl=null,e}function ge(e,t){var n=t[fl];n===void 0&&(n=t[fl]=new Set);var r=e+"__bubble";n.has(r)||(xf(t,e,2,!1),n.add(r))}function ya(e,t,n){var r=0;t&&(r|=4),xf(n,e,r,t)}var pi="_reactListening"+Math.random().toString(36).slice(2);function $s(e){if(!e[pi]){e[pi]=!0,Ch.forEach(function(n){n!=="selectionchange"&&(Ty.has(n)||ya(n,!1,e),ya(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pi]||(t[pi]=!0,ya("selectionchange",!1,t))}}function xf(e,t,n,r){switch(sf(t)){case 1:var s=qg;break;case 4:s=Wg;break;default:s=au}n=s.bind(null,t,n,e),s=void 0,!nl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function va(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Bn(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Wh(function(){var c=i,d=ru(n),f=[];e:{var y=_f.get(e);if(y!==void 0){var v=uu,w=e;switch(e){case"keypress":if(Di(n)===0)break e;case"keydown":case"keyup":v=iy;break;case"focusin":w="focus",v=da;break;case"focusout":w="blur",v=da;break;case"beforeblur":case"afterblur":v=da;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Gg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=ly;break;case gf:case yf:case vf:v=Jg;break;case wf:v=cy;break;case"scroll":v=Hg;break;case"wheel":v=hy;break;case"copy":case"cut":case"paste":v=Xg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=zc}var x=(t&4)!==0,T=!x&&e==="scroll",p=x?y!==null?y+"Capture":null:y;x=[];for(var m=c,g;m!==null;){g=m;var S=g.stateNode;if(g.tag===5&&S!==null&&(g=S,p!==null&&(S=As(m,p),S!=null&&x.push(Us(m,S,g)))),T)break;m=m.return}0<x.length&&(y=new v(y,w,null,n,d),f.push({event:y,listeners:x}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",y&&n!==el&&(w=n.relatedTarget||n.fromElement)&&(Bn(w)||w[Yt]))break e;if((v||y)&&(y=d.window===d?d:(y=d.ownerDocument)?y.defaultView||y.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=c,w=w?Bn(w):null,w!==null&&(T=Xn(w),w!==T||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=c),v!==w)){if(x=Bc,S="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(x=zc,S="onPointerLeave",p="onPointerEnter",m="pointer"),T=v==null?y:Sr(v),g=w==null?y:Sr(w),y=new x(S,m+"leave",v,n,d),y.target=T,y.relatedTarget=g,S=null,Bn(d)===c&&(x=new x(p,m+"enter",w,n,d),x.target=g,x.relatedTarget=T,S=x),T=S,v&&w)t:{for(x=v,p=w,m=0,g=x;g;g=ir(g))m++;for(g=0,S=p;S;S=ir(S))g++;for(;0<m-g;)x=ir(x),m--;for(;0<g-m;)p=ir(p),g--;for(;m--;){if(x===p||p!==null&&x===p.alternate)break t;x=ir(x),p=ir(p)}x=null}else x=null;v!==null&&Zc(f,y,v,x,!1),w!==null&&T!==null&&Zc(f,T,w,x,!0)}}e:{if(y=c?Sr(c):window,v=y.nodeName&&y.nodeName.toLowerCase(),v==="select"||v==="input"&&y.type==="file")var C=wy;else if(Hc(y))if(df)C=ky;else{C=Sy;var j=_y}else(v=y.nodeName)&&v.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(C=xy);if(C&&(C=C(e,c))){cf(f,C,n,d);break e}j&&j(e,y,c),e==="focusout"&&(j=y._wrapperState)&&j.controlled&&y.type==="number"&&Qa(y,"number",y.value)}switch(j=c?Sr(c):window,e){case"focusin":(Hc(j)||j.contentEditable==="true")&&(wr=j,al=c,ws=null);break;case"focusout":ws=al=wr=null;break;case"mousedown":ll=!0;break;case"contextmenu":case"mouseup":case"dragend":ll=!1,Jc(f,n,d);break;case"selectionchange":if(Ny)break;case"keydown":case"keyup":Jc(f,n,d)}var b;if(du)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else vr?lf(e,n)&&(O="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(af&&n.locale!=="ko"&&(vr||O!=="onCompositionStart"?O==="onCompositionEnd"&&vr&&(b=of()):(pn=d,lu="value"in pn?pn.value:pn.textContent,vr=!0)),j=eo(c,O),0<j.length&&(O=new Fc(O,e,null,n,d),f.push({event:O,listeners:j}),b?O.data=b:(b=uf(n),b!==null&&(O.data=b)))),(b=py?my(e,n):gy(e,n))&&(c=eo(c,"onBeforeInput"),0<c.length&&(d=new Fc("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=b))}Sf(f,t)})}function Us(e,t,n){return{instance:e,listener:t,currentTarget:n}}function eo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=As(e,n),i!=null&&r.unshift(Us(e,i,s)),i=As(e,t),i!=null&&r.push(Us(e,i,s))),e=e.return}return r}function ir(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zc(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=As(n,i),u!=null&&o.unshift(Us(n,u,l))):s||(u=As(n,i),u!=null&&o.push(Us(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Py=/\r\n?/g,Ay=/\u0000|\uFFFD/g;function ed(e){return(typeof e=="string"?e:""+e).replace(Py,`
`).replace(Ay,"")}function mi(e,t,n){if(t=ed(t),ed(e)!==t&&n)throw Error(D(425))}function to(){}var ul=null,cl=null;function dl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hl=typeof setTimeout=="function"?setTimeout:void 0,Oy=typeof clearTimeout=="function"?clearTimeout:void 0,td=typeof Promise=="function"?Promise:void 0,Ry=typeof queueMicrotask=="function"?queueMicrotask:typeof td<"u"?function(e){return td.resolve(null).then(e).catch(Dy)}:hl;function Dy(e){setTimeout(function(){throw e})}function wa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ds(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ds(t)}function wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function nd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Hr=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Hr,Ms="__reactProps$"+Hr,Yt="__reactContainer$"+Hr,fl="__reactEvents$"+Hr,Iy="__reactListeners$"+Hr,Ly="__reactHandles$"+Hr;function Bn(e){var t=e[Ut];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yt]||n[Ut]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=nd(e);e!==null;){if(n=e[Ut])return n;e=nd(e)}return t}e=n,n=e.parentNode}return null}function Js(e){return e=e[Ut]||e[Yt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Eo(e){return e[Ms]||null}var pl=[],xr=-1;function En(e){return{current:e}}function ye(e){0>xr||(e.current=pl[xr],pl[xr]=null,xr--)}function pe(e,t){xr++,pl[xr]=e.current,e.current=t}var bn={},Ke=En(bn),it=En(!1),Hn=bn;function Lr(e,t){var n=e.type.contextTypes;if(!n)return bn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ot(e){return e=e.childContextTypes,e!=null}function no(){ye(it),ye(Ke)}function rd(e,t,n){if(Ke.current!==bn)throw Error(D(168));pe(Ke,t),pe(it,n)}function kf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,_g(e)||"Unknown",s));return je({},n,r)}function ro(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bn,Hn=Ke.current,pe(Ke,e),pe(it,it.current),!0}function sd(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=kf(e,t,Hn),r.__reactInternalMemoizedMergedChildContext=e,ye(it),ye(Ke),pe(Ke,e)):ye(it),pe(it,n)}var Vt=null,Co=!1,_a=!1;function jf(e){Vt===null?Vt=[e]:Vt.push(e)}function $y(e){Co=!0,jf(e)}function Cn(){if(!_a&&Vt!==null){_a=!0;var e=0,t=de;try{var n=Vt;for(de=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Vt=null,Co=!1}catch(s){throw Vt!==null&&(Vt=Vt.slice(e+1)),Kh(su,Cn),s}finally{de=t,_a=!1}}return null}var kr=[],jr=0,so=null,io=0,mt=[],gt=0,Vn=null,Gt=1,Kt="";function Ln(e,t){kr[jr++]=io,kr[jr++]=so,so=e,io=t}function bf(e,t,n){mt[gt++]=Gt,mt[gt++]=Kt,mt[gt++]=Vn,Vn=e;var r=Gt;e=Kt;var s=32-Pt(r)-1;r&=~(1<<s),n+=1;var i=32-Pt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gt=1<<32-Pt(t)+s|n<<s|r,Kt=i+e}else Gt=1<<i|n<<s|r,Kt=e}function fu(e){e.return!==null&&(Ln(e,1),bf(e,1,0))}function pu(e){for(;e===so;)so=kr[--jr],kr[jr]=null,io=kr[--jr],kr[jr]=null;for(;e===Vn;)Vn=mt[--gt],mt[gt]=null,Kt=mt[--gt],mt[gt]=null,Gt=mt[--gt],mt[gt]=null}var dt=null,ct=null,Se=!1,Tt=null;function Nf(e,t){var n=yt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function id(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dt=e,ct=wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dt=e,ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vn!==null?{id:Gt,overflow:Kt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=yt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,dt=e,ct=null,!0):!1;default:return!1}}function ml(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gl(e){if(Se){var t=ct;if(t){var n=t;if(!id(e,t)){if(ml(e))throw Error(D(418));t=wn(n.nextSibling);var r=dt;t&&id(e,t)?Nf(r,n):(e.flags=e.flags&-4097|2,Se=!1,dt=e)}}else{if(ml(e))throw Error(D(418));e.flags=e.flags&-4097|2,Se=!1,dt=e}}}function od(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dt=e}function gi(e){if(e!==dt)return!1;if(!Se)return od(e),Se=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dl(e.type,e.memoizedProps)),t&&(t=ct)){if(ml(e))throw Ef(),Error(D(418));for(;t;)Nf(e,t),t=wn(t.nextSibling)}if(od(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ct=wn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ct=null}}else ct=dt?wn(e.stateNode.nextSibling):null;return!0}function Ef(){for(var e=ct;e;)e=wn(e.nextSibling)}function $r(){ct=dt=null,Se=!1}function mu(e){Tt===null?Tt=[e]:Tt.push(e)}var Uy=en.ReactCurrentBatchConfig;function is(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ad(e){var t=e._init;return t(e._payload)}function Cf(e){function t(p,m){if(e){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=kn(p,m),p.index=0,p.sibling=null,p}function i(p,m,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,m,g,S){return m===null||m.tag!==6?(m=Ea(g,p.mode,S),m.return=p,m):(m=s(m,g),m.return=p,m)}function u(p,m,g,S){var C=g.type;return C===yr?d(p,m,g.props.children,S,g.key):m!==null&&(m.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ln&&ad(C)===m.type)?(S=s(m,g.props),S.ref=is(p,m,g),S.return=p,S):(S=Fi(g.type,g.key,g.props,null,p.mode,S),S.ref=is(p,m,g),S.return=p,S)}function c(p,m,g,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Ca(g,p.mode,S),m.return=p,m):(m=s(m,g.children||[]),m.return=p,m)}function d(p,m,g,S,C){return m===null||m.tag!==7?(m=Wn(g,p.mode,S,C),m.return=p,m):(m=s(m,g),m.return=p,m)}function f(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ea(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case oi:return g=Fi(m.type,m.key,m.props,null,p.mode,g),g.ref=is(p,null,m),g.return=p,g;case gr:return m=Ca(m,p.mode,g),m.return=p,m;case ln:var S=m._init;return f(p,S(m._payload),g)}if(ds(m)||es(m))return m=Wn(m,p.mode,g,null),m.return=p,m;yi(p,m)}return null}function y(p,m,g,S){var C=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return C!==null?null:l(p,m,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case oi:return g.key===C?u(p,m,g,S):null;case gr:return g.key===C?c(p,m,g,S):null;case ln:return C=g._init,y(p,m,C(g._payload),S)}if(ds(g)||es(g))return C!==null?null:d(p,m,g,S,null);yi(p,g)}return null}function v(p,m,g,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(g)||null,l(m,p,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case oi:return p=p.get(S.key===null?g:S.key)||null,u(m,p,S,C);case gr:return p=p.get(S.key===null?g:S.key)||null,c(m,p,S,C);case ln:var j=S._init;return v(p,m,g,j(S._payload),C)}if(ds(S)||es(S))return p=p.get(g)||null,d(m,p,S,C,null);yi(m,S)}return null}function w(p,m,g,S){for(var C=null,j=null,b=m,O=m=0,F=null;b!==null&&O<g.length;O++){b.index>O?(F=b,b=null):F=b.sibling;var I=y(p,b,g[O],S);if(I===null){b===null&&(b=F);break}e&&b&&I.alternate===null&&t(p,b),m=i(I,m,O),j===null?C=I:j.sibling=I,j=I,b=F}if(O===g.length)return n(p,b),Se&&Ln(p,O),C;if(b===null){for(;O<g.length;O++)b=f(p,g[O],S),b!==null&&(m=i(b,m,O),j===null?C=b:j.sibling=b,j=b);return Se&&Ln(p,O),C}for(b=r(p,b);O<g.length;O++)F=v(b,p,O,g[O],S),F!==null&&(e&&F.alternate!==null&&b.delete(F.key===null?O:F.key),m=i(F,m,O),j===null?C=F:j.sibling=F,j=F);return e&&b.forEach(function(J){return t(p,J)}),Se&&Ln(p,O),C}function x(p,m,g,S){var C=es(g);if(typeof C!="function")throw Error(D(150));if(g=C.call(g),g==null)throw Error(D(151));for(var j=C=null,b=m,O=m=0,F=null,I=g.next();b!==null&&!I.done;O++,I=g.next()){b.index>O?(F=b,b=null):F=b.sibling;var J=y(p,b,I.value,S);if(J===null){b===null&&(b=F);break}e&&b&&J.alternate===null&&t(p,b),m=i(J,m,O),j===null?C=J:j.sibling=J,j=J,b=F}if(I.done)return n(p,b),Se&&Ln(p,O),C;if(b===null){for(;!I.done;O++,I=g.next())I=f(p,I.value,S),I!==null&&(m=i(I,m,O),j===null?C=I:j.sibling=I,j=I);return Se&&Ln(p,O),C}for(b=r(p,b);!I.done;O++,I=g.next())I=v(b,p,O,I.value,S),I!==null&&(e&&I.alternate!==null&&b.delete(I.key===null?O:I.key),m=i(I,m,O),j===null?C=I:j.sibling=I,j=I);return e&&b.forEach(function(le){return t(p,le)}),Se&&Ln(p,O),C}function T(p,m,g,S){if(typeof g=="object"&&g!==null&&g.type===yr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case oi:e:{for(var C=g.key,j=m;j!==null;){if(j.key===C){if(C=g.type,C===yr){if(j.tag===7){n(p,j.sibling),m=s(j,g.props.children),m.return=p,p=m;break e}}else if(j.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ln&&ad(C)===j.type){n(p,j.sibling),m=s(j,g.props),m.ref=is(p,j,g),m.return=p,p=m;break e}n(p,j);break}else t(p,j);j=j.sibling}g.type===yr?(m=Wn(g.props.children,p.mode,S,g.key),m.return=p,p=m):(S=Fi(g.type,g.key,g.props,null,p.mode,S),S.ref=is(p,m,g),S.return=p,p=S)}return o(p);case gr:e:{for(j=g.key;m!==null;){if(m.key===j)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=s(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=Ca(g,p.mode,S),m.return=p,p=m}return o(p);case ln:return j=g._init,T(p,m,j(g._payload),S)}if(ds(g))return w(p,m,g,S);if(es(g))return x(p,m,g,S);yi(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,g),m.return=p,p=m):(n(p,m),m=Ea(g,p.mode,S),m.return=p,p=m),o(p)):n(p,m)}return T}var Ur=Cf(!0),Tf=Cf(!1),oo=En(null),ao=null,br=null,gu=null;function yu(){gu=br=ao=null}function vu(e){var t=oo.current;ye(oo),e._currentValue=t}function yl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Or(e,t){ao=e,gu=br=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rt=!0),e.firstContext=null)}function _t(e){var t=e._currentValue;if(gu!==e)if(e={context:e,memoizedValue:t,next:null},br===null){if(ao===null)throw Error(D(308));br=e,ao.dependencies={lanes:0,firstContext:e}}else br=br.next=e;return t}var Fn=null;function wu(e){Fn===null?Fn=[e]:Fn.push(e)}function Pf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,wu(t)):(n.next=s.next,s.next=n),t.interleaved=n,Xt(e,r)}function Xt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var un=!1;function _u(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Af(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _n(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Xt(e,n)}return s=r.interleaved,s===null?(t.next=t,wu(r)):(t.next=s.next,s.next=t),r.interleaved=t,Xt(e,n)}function Ii(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iu(e,n)}}function ld(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lo(e,t,n,r){var s=e.updateQueue;un=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;o=0,d=c=u=null,l=i;do{var y=l.lane,v=l.eventTime;if((r&y)===y){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,x=l;switch(y=t,v=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){f=w.call(v,f,y);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,y=typeof w=="function"?w.call(v,f,y):w,y==null)break e;f=je({},f,y);break e;case 2:un=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,y=s.effects,y===null?s.effects=[l]:y.push(l))}else v={eventTime:v,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=v,u=f):d=d.next=v,o|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(d===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Kn|=o,e.lanes=o,e.memoizedState=f}}function ud(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var Ys={},Bt=En(Ys),Bs=En(Ys),Fs=En(Ys);function zn(e){if(e===Ys)throw Error(D(174));return e}function Su(e,t){switch(pe(Fs,t),pe(Bs,e),pe(Bt,Ys),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ya(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ya(t,e)}ye(Bt),pe(Bt,t)}function Mr(){ye(Bt),ye(Bs),ye(Fs)}function Of(e){zn(Fs.current);var t=zn(Bt.current),n=Ya(t,e.type);t!==n&&(pe(Bs,e),pe(Bt,n))}function xu(e){Bs.current===e&&(ye(Bt),ye(Bs))}var xe=En(0);function uo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Sa=[];function ku(){for(var e=0;e<Sa.length;e++)Sa[e]._workInProgressVersionPrimary=null;Sa.length=0}var Li=en.ReactCurrentDispatcher,xa=en.ReactCurrentBatchConfig,Gn=0,ke=null,$e=null,Be=null,co=!1,_s=!1,zs=0,My=0;function He(){throw Error(D(321))}function ju(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ot(e[n],t[n]))return!1;return!0}function bu(e,t,n,r,s,i){if(Gn=i,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Li.current=e===null||e.memoizedState===null?qy:Wy,e=n(r,s),_s){i=0;do{if(_s=!1,zs=0,25<=i)throw Error(D(301));i+=1,Be=$e=null,t.updateQueue=null,Li.current=Hy,e=n(r,s)}while(_s)}if(Li.current=ho,t=$e!==null&&$e.next!==null,Gn=0,Be=$e=ke=null,co=!1,t)throw Error(D(300));return e}function Nu(){var e=zs!==0;return zs=0,e}function Lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?ke.memoizedState=Be=e:Be=Be.next=e,Be}function St(){if($e===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=Be===null?ke.memoizedState:Be.next;if(t!==null)Be=t,$e=e;else{if(e===null)throw Error(D(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Be===null?ke.memoizedState=Be=e:Be=Be.next=e}return Be}function qs(e,t){return typeof t=="function"?t(e):t}function ka(e){var t=St(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var d=c.lane;if((Gn&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=f,o=r):u=u.next=f,ke.lanes|=d,Kn|=d}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,Ot(r,t.memoizedState)||(rt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,ke.lanes|=i,Kn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ja(e){var t=St(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ot(i,t.memoizedState)||(rt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Rf(){}function Df(e,t){var n=ke,r=St(),s=t(),i=!Ot(r.memoizedState,s);if(i&&(r.memoizedState=s,rt=!0),r=r.queue,Eu($f.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,Ws(9,Lf.bind(null,n,r,s,t),void 0,null),Fe===null)throw Error(D(349));Gn&30||If(n,t,s)}return s}function If(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Lf(e,t,n,r){t.value=n,t.getSnapshot=r,Uf(t)&&Mf(e)}function $f(e,t,n){return n(function(){Uf(t)&&Mf(e)})}function Uf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ot(e,n)}catch{return!0}}function Mf(e){var t=Xt(e,1);t!==null&&At(t,e,1,-1)}function cd(e){var t=Lt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:e},t.queue=e,e=e.dispatch=zy.bind(null,ke,e),[t.memoizedState,e]}function Ws(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Bf(){return St().memoizedState}function $i(e,t,n,r){var s=Lt();ke.flags|=e,s.memoizedState=Ws(1|t,n,void 0,r===void 0?null:r)}function To(e,t,n,r){var s=St();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&ju(r,o.deps)){s.memoizedState=Ws(t,n,i,r);return}}ke.flags|=e,s.memoizedState=Ws(1|t,n,i,r)}function dd(e,t){return $i(8390656,8,e,t)}function Eu(e,t){return To(2048,8,e,t)}function Ff(e,t){return To(4,2,e,t)}function zf(e,t){return To(4,4,e,t)}function qf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wf(e,t,n){return n=n!=null?n.concat([e]):null,To(4,4,qf.bind(null,t,e),n)}function Cu(){}function Hf(e,t){var n=St();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ju(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vf(e,t){var n=St();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ju(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Gf(e,t,n){return Gn&21?(Ot(n,t)||(n=Yh(),ke.lanes|=n,Kn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rt=!0),e.memoizedState=n)}function By(e,t){var n=de;de=n!==0&&4>n?n:4,e(!0);var r=xa.transition;xa.transition={};try{e(!1),t()}finally{de=n,xa.transition=r}}function Kf(){return St().memoizedState}function Fy(e,t,n){var r=xn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qf(e))Jf(t,n);else if(n=Pf(e,t,n,r),n!==null){var s=Xe();At(n,e,r,s),Yf(n,t,r)}}function zy(e,t,n){var r=xn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qf(e))Jf(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Ot(l,o)){var u=t.interleaved;u===null?(s.next=s,wu(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=Pf(e,t,s,r),n!==null&&(s=Xe(),At(n,e,r,s),Yf(n,t,r))}}function Qf(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function Jf(e,t){_s=co=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iu(e,n)}}var ho={readContext:_t,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useInsertionEffect:He,useLayoutEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useMutableSource:He,useSyncExternalStore:He,useId:He,unstable_isNewReconciler:!1},qy={readContext:_t,useCallback:function(e,t){return Lt().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:dd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$i(4194308,4,qf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $i(4194308,4,e,t)},useInsertionEffect:function(e,t){return $i(4,2,e,t)},useMemo:function(e,t){var n=Lt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Lt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Fy.bind(null,ke,e),[r.memoizedState,e]},useRef:function(e){var t=Lt();return e={current:e},t.memoizedState=e},useState:cd,useDebugValue:Cu,useDeferredValue:function(e){return Lt().memoizedState=e},useTransition:function(){var e=cd(!1),t=e[0];return e=By.bind(null,e[1]),Lt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ke,s=Lt();if(Se){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Fe===null)throw Error(D(349));Gn&30||If(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,dd($f.bind(null,r,i,e),[e]),r.flags|=2048,Ws(9,Lf.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Lt(),t=Fe.identifierPrefix;if(Se){var n=Kt,r=Gt;n=(r&~(1<<32-Pt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=zs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=My++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wy={readContext:_t,useCallback:Hf,useContext:_t,useEffect:Eu,useImperativeHandle:Wf,useInsertionEffect:Ff,useLayoutEffect:zf,useMemo:Vf,useReducer:ka,useRef:Bf,useState:function(){return ka(qs)},useDebugValue:Cu,useDeferredValue:function(e){var t=St();return Gf(t,$e.memoizedState,e)},useTransition:function(){var e=ka(qs)[0],t=St().memoizedState;return[e,t]},useMutableSource:Rf,useSyncExternalStore:Df,useId:Kf,unstable_isNewReconciler:!1},Hy={readContext:_t,useCallback:Hf,useContext:_t,useEffect:Eu,useImperativeHandle:Wf,useInsertionEffect:Ff,useLayoutEffect:zf,useMemo:Vf,useReducer:ja,useRef:Bf,useState:function(){return ja(qs)},useDebugValue:Cu,useDeferredValue:function(e){var t=St();return $e===null?t.memoizedState=e:Gf(t,$e.memoizedState,e)},useTransition:function(){var e=ja(qs)[0],t=St().memoizedState;return[e,t]},useMutableSource:Rf,useSyncExternalStore:Df,useId:Kf,unstable_isNewReconciler:!1};function Nt(e,t){if(e&&e.defaultProps){t=je({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function vl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Po={isMounted:function(e){return(e=e._reactInternals)?Xn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xe(),s=xn(e),i=Qt(r,s);i.payload=t,n!=null&&(i.callback=n),t=_n(e,i,s),t!==null&&(At(t,e,s,r),Ii(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xe(),s=xn(e),i=Qt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=_n(e,i,s),t!==null&&(At(t,e,s,r),Ii(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xe(),r=xn(e),s=Qt(n,r);s.tag=2,t!=null&&(s.callback=t),t=_n(e,s,r),t!==null&&(At(t,e,r,n),Ii(t,e,r))}};function hd(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ls(n,r)||!Ls(s,i):!0}function Xf(e,t,n){var r=!1,s=bn,i=t.contextType;return typeof i=="object"&&i!==null?i=_t(i):(s=ot(t)?Hn:Ke.current,r=t.contextTypes,i=(r=r!=null)?Lr(e,s):bn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Po,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function fd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Po.enqueueReplaceState(t,t.state,null)}function wl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},_u(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=_t(i):(i=ot(t)?Hn:Ke.current,s.context=Lr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(vl(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Po.enqueueReplaceState(s,s.state,null),lo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Br(e,t){try{var n="",r=t;do n+=wg(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ba(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _l(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Vy=typeof WeakMap=="function"?WeakMap:Map;function Zf(e,t,n){n=Qt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){po||(po=!0,Pl=r),_l(e,t)},n}function ep(e,t,n){n=Qt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){_l(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){_l(e,t),typeof r!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function pd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Vy;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=ov.bind(null,e,t,n),t.then(e,e))}function md(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gd(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qt(-1,1),t.tag=2,_n(n,t,1))),n.lanes|=1),e)}var Gy=en.ReactCurrentOwner,rt=!1;function Ye(e,t,n,r){t.child=e===null?Tf(t,null,n,r):Ur(t,e.child,n,r)}function yd(e,t,n,r,s){n=n.render;var i=t.ref;return Or(t,s),r=bu(e,t,n,r,i,s),n=Nu(),e!==null&&!rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zt(e,t,s)):(Se&&n&&fu(t),t.flags|=1,Ye(e,t,r,s),t.child)}function vd(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Lu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,tp(e,t,i,r,s)):(e=Fi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ls,n(o,r)&&e.ref===t.ref)return Zt(e,t,s)}return t.flags|=1,e=kn(i,r),e.ref=t.ref,e.return=t,t.child=e}function tp(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ls(i,r)&&e.ref===t.ref)if(rt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(rt=!0);else return t.lanes=e.lanes,Zt(e,t,s)}return Sl(e,t,n,r,s)}function np(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(Er,ut),ut|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pe(Er,ut),ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pe(Er,ut),ut|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,pe(Er,ut),ut|=r;return Ye(e,t,s,n),t.child}function rp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sl(e,t,n,r,s){var i=ot(n)?Hn:Ke.current;return i=Lr(t,i),Or(t,s),n=bu(e,t,n,r,i,s),r=Nu(),e!==null&&!rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zt(e,t,s)):(Se&&r&&fu(t),t.flags|=1,Ye(e,t,n,s),t.child)}function wd(e,t,n,r,s){if(ot(n)){var i=!0;ro(t)}else i=!1;if(Or(t,s),t.stateNode===null)Ui(e,t),Xf(t,n,r),wl(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=_t(c):(c=ot(n)?Hn:Ke.current,c=Lr(t,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&fd(t,o,r,c),un=!1;var y=t.memoizedState;o.state=y,lo(t,r,o,s),u=t.memoizedState,l!==r||y!==u||it.current||un?(typeof d=="function"&&(vl(t,n,d,r),u=t.memoizedState),(l=un||hd(t,n,l,r,y,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Af(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Nt(t.type,l),o.props=c,f=t.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=_t(u):(u=ot(n)?Hn:Ke.current,u=Lr(t,u));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||y!==u)&&fd(t,o,r,u),un=!1,y=t.memoizedState,o.state=y,lo(t,r,o,s);var w=t.memoizedState;l!==f||y!==w||it.current||un?(typeof v=="function"&&(vl(t,n,v,r),w=t.memoizedState),(c=un||hd(t,n,c,r,y,w,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return xl(e,t,n,r,i,s)}function xl(e,t,n,r,s,i){rp(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&sd(t,n,!1),Zt(e,t,i);r=t.stateNode,Gy.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ur(t,e.child,null,i),t.child=Ur(t,null,l,i)):Ye(e,t,l,i),t.memoizedState=r.state,s&&sd(t,n,!0),t.child}function sp(e){var t=e.stateNode;t.pendingContext?rd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rd(e,t.context,!1),Su(e,t.containerInfo)}function _d(e,t,n,r,s){return $r(),mu(s),t.flags|=256,Ye(e,t,n,r),t.child}var kl={dehydrated:null,treeContext:null,retryLane:0};function jl(e){return{baseLanes:e,cachePool:null,transitions:null}}function ip(e,t,n){var r=t.pendingProps,s=xe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),pe(xe,s&1),e===null)return gl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ro(o,r,0,null),e=Wn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=jl(n),t.memoizedState=kl,e):Tu(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Ky(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=kn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=kn(l,i):(i=Wn(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?jl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=kl,r}return i=e.child,e=i.sibling,r=kn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Tu(e,t){return t=Ro({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vi(e,t,n,r){return r!==null&&mu(r),Ur(t,e.child,null,n),e=Tu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ky(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=ba(Error(D(422))),vi(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Ro({mode:"visible",children:r.children},s,0,null),i=Wn(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ur(t,e.child,null,o),t.child.memoizedState=jl(o),t.memoizedState=kl,i);if(!(t.mode&1))return vi(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(D(419)),r=ba(i,r,void 0),vi(e,t,o,r)}if(l=(o&e.childLanes)!==0,rt||l){if(r=Fe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xt(e,s),At(r,e,s,-1))}return Iu(),r=ba(Error(D(421))),vi(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=av.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ct=wn(s.nextSibling),dt=t,Se=!0,Tt=null,e!==null&&(mt[gt++]=Gt,mt[gt++]=Kt,mt[gt++]=Vn,Gt=e.id,Kt=e.overflow,Vn=t),t=Tu(t,r.children),t.flags|=4096,t)}function Sd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yl(e.return,t,n)}function Na(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function op(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ye(e,t,r.children,n),r=xe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sd(e,n,t);else if(e.tag===19)Sd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pe(xe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&uo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Na(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&uo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Na(t,!0,n,null,i);break;case"together":Na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ui(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=kn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=kn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Qy(e,t,n){switch(t.tag){case 3:sp(t),$r();break;case 5:Of(t);break;case 1:ot(t.type)&&ro(t);break;case 4:Su(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;pe(oo,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(pe(xe,xe.current&1),t.flags|=128,null):n&t.child.childLanes?ip(e,t,n):(pe(xe,xe.current&1),e=Zt(e,t,n),e!==null?e.sibling:null);pe(xe,xe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return op(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pe(xe,xe.current),r)break;return null;case 22:case 23:return t.lanes=0,np(e,t,n)}return Zt(e,t,n)}var ap,bl,lp,up;ap=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bl=function(){};lp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,zn(Bt.current);var i=null;switch(n){case"input":s=Ga(e,s),r=Ga(e,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=Ja(e,s),r=Ja(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=to)}Xa(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ts.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ts.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ge("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};up=function(e,t,n,r){n!==r&&(t.flags|=4)};function os(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ve(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Jy(e,t,n){var r=t.pendingProps;switch(pu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(t),null;case 1:return ot(t.type)&&no(),Ve(t),null;case 3:return r=t.stateNode,Mr(),ye(it),ye(Ke),ku(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(gi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tt!==null&&(Rl(Tt),Tt=null))),bl(e,t),Ve(t),null;case 5:xu(t);var s=zn(Fs.current);if(n=t.type,e!==null&&t.stateNode!=null)lp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return Ve(t),null}if(e=zn(Bt.current),gi(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Ut]=t,r[Ms]=i,e=(t.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(s=0;s<fs.length;s++)ge(fs[s],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":Pc(r,i),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ge("invalid",r);break;case"textarea":Oc(r,i),ge("invalid",r)}Xa(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&mi(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&mi(r.textContent,l,e),s=["children",""+l]):Ts.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ge("scroll",r)}switch(n){case"input":ai(r),Ac(r,i,!0);break;case"textarea":ai(r),Rc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=to)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Lh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ut]=t,e[Ms]=r,ap(e,t,!1,!1),t.stateNode=e;e:{switch(o=Za(n,r),n){case"dialog":ge("cancel",e),ge("close",e),s=r;break;case"iframe":case"object":case"embed":ge("load",e),s=r;break;case"video":case"audio":for(s=0;s<fs.length;s++)ge(fs[s],e);s=r;break;case"source":ge("error",e),s=r;break;case"img":case"image":case"link":ge("error",e),ge("load",e),s=r;break;case"details":ge("toggle",e),s=r;break;case"input":Pc(e,r),s=Ga(e,r),ge("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),ge("invalid",e);break;case"textarea":Oc(e,r),s=Ja(e,r),ge("invalid",e);break;default:s=r}Xa(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Mh(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&$h(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ps(e,u):typeof u=="number"&&Ps(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ts.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ge("scroll",e):u!=null&&Zl(e,i,u,o))}switch(n){case"input":ai(e),Ac(e,r,!1);break;case"textarea":ai(e),Rc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+jn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Cr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Cr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=to)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ve(t),null;case 6:if(e&&t.stateNode!=null)up(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=zn(Fs.current),zn(Bt.current),gi(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ut]=t,(i=r.nodeValue!==n)&&(e=dt,e!==null))switch(e.tag){case 3:mi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&mi(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ut]=t,t.stateNode=r}return Ve(t),null;case 13:if(ye(xe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Se&&ct!==null&&t.mode&1&&!(t.flags&128))Ef(),$r(),t.flags|=98560,i=!1;else if(i=gi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Ut]=t}else $r(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ve(t),i=!1}else Tt!==null&&(Rl(Tt),Tt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?Ue===0&&(Ue=3):Iu())),t.updateQueue!==null&&(t.flags|=4),Ve(t),null);case 4:return Mr(),bl(e,t),e===null&&$s(t.stateNode.containerInfo),Ve(t),null;case 10:return vu(t.type._context),Ve(t),null;case 17:return ot(t.type)&&no(),Ve(t),null;case 19:if(ye(xe),i=t.memoizedState,i===null)return Ve(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)os(i,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=uo(e),o!==null){for(t.flags|=128,os(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return pe(xe,xe.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ee()>Fr&&(t.flags|=128,r=!0,os(i,!1),t.lanes=4194304)}else{if(!r)if(e=uo(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),os(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Se)return Ve(t),null}else 2*Ee()-i.renderingStartTime>Fr&&n!==1073741824&&(t.flags|=128,r=!0,os(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ee(),t.sibling=null,n=xe.current,pe(xe,r?n&1|2:n&1),t):(Ve(t),null);case 22:case 23:return Du(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ut&1073741824&&(Ve(t),t.subtreeFlags&6&&(t.flags|=8192)):Ve(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Yy(e,t){switch(pu(t),t.tag){case 1:return ot(t.type)&&no(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mr(),ye(it),ye(Ke),ku(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return xu(t),null;case 13:if(ye(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));$r()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ye(xe),null;case 4:return Mr(),null;case 10:return vu(t.type._context),null;case 22:case 23:return Du(),null;case 24:return null;default:return null}}var wi=!1,Ge=!1,Xy=typeof WeakSet=="function"?WeakSet:Set,q=null;function Nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(e,t,r)}else n.current=null}function Nl(e,t,n){try{n()}catch(r){be(e,t,r)}}var xd=!1;function Zy(e,t){if(ul=Xi,e=pf(),hu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,d=0,f=e,y=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)y=f,f=v;for(;;){if(f===e)break t;if(y===n&&++c===s&&(l=o),y===i&&++d===r&&(u=o),(v=f.nextSibling)!==null)break;f=y,y=f.parentNode}f=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(cl={focusedElem:e,selectionRange:n},Xi=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,T=w.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?x:Nt(t.type,x),T);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(S){be(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return w=xd,xd=!1,w}function Ss(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Nl(t,n,i)}s=s.next}while(s!==r)}}function Ao(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function El(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function cp(e){var t=e.alternate;t!==null&&(e.alternate=null,cp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ut],delete t[Ms],delete t[fl],delete t[Iy],delete t[Ly])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dp(e){return e.tag===5||e.tag===3||e.tag===4}function kd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=to));else if(r!==4&&(e=e.child,e!==null))for(Cl(e,t,n),e=e.sibling;e!==null;)Cl(e,t,n),e=e.sibling}function Tl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Tl(e,t,n),e=e.sibling;e!==null;)Tl(e,t,n),e=e.sibling}var ze=null,Et=!1;function sn(e,t,n){for(n=n.child;n!==null;)hp(e,t,n),n=n.sibling}function hp(e,t,n){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(ko,n)}catch{}switch(n.tag){case 5:Ge||Nr(n,t);case 6:var r=ze,s=Et;ze=null,sn(e,t,n),ze=r,Et=s,ze!==null&&(Et?(e=ze,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ze.removeChild(n.stateNode));break;case 18:ze!==null&&(Et?(e=ze,n=n.stateNode,e.nodeType===8?wa(e.parentNode,n):e.nodeType===1&&wa(e,n),Ds(e)):wa(ze,n.stateNode));break;case 4:r=ze,s=Et,ze=n.stateNode.containerInfo,Et=!0,sn(e,t,n),ze=r,Et=s;break;case 0:case 11:case 14:case 15:if(!Ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Nl(n,t,o),s=s.next}while(s!==r)}sn(e,t,n);break;case 1:if(!Ge&&(Nr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,t,l)}sn(e,t,n);break;case 21:sn(e,t,n);break;case 22:n.mode&1?(Ge=(r=Ge)||n.memoizedState!==null,sn(e,t,n),Ge=r):sn(e,t,n);break;default:sn(e,t,n)}}function jd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Xy),t.forEach(function(r){var s=lv.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ze=l.stateNode,Et=!1;break e;case 3:ze=l.stateNode.containerInfo,Et=!0;break e;case 4:ze=l.stateNode.containerInfo,Et=!0;break e}l=l.return}if(ze===null)throw Error(D(160));hp(i,o,s),ze=null,Et=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){be(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fp(t,e),t=t.sibling}function fp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jt(t,e),It(e),r&4){try{Ss(3,e,e.return),Ao(3,e)}catch(x){be(e,e.return,x)}try{Ss(5,e,e.return)}catch(x){be(e,e.return,x)}}break;case 1:jt(t,e),It(e),r&512&&n!==null&&Nr(n,n.return);break;case 5:if(jt(t,e),It(e),r&512&&n!==null&&Nr(n,n.return),e.flags&32){var s=e.stateNode;try{Ps(s,"")}catch(x){be(e,e.return,x)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Dh(s,i),Za(l,o);var c=Za(l,i);for(o=0;o<u.length;o+=2){var d=u[o],f=u[o+1];d==="style"?Mh(s,f):d==="dangerouslySetInnerHTML"?$h(s,f):d==="children"?Ps(s,f):Zl(s,d,f,c)}switch(l){case"input":Ka(s,i);break;case"textarea":Ih(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Cr(s,!!i.multiple,v,!1):y!==!!i.multiple&&(i.defaultValue!=null?Cr(s,!!i.multiple,i.defaultValue,!0):Cr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ms]=i}catch(x){be(e,e.return,x)}}break;case 6:if(jt(t,e),It(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){be(e,e.return,x)}}break;case 3:if(jt(t,e),It(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ds(t.containerInfo)}catch(x){be(e,e.return,x)}break;case 4:jt(t,e),It(e);break;case 13:jt(t,e),It(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ou=Ee())),r&4&&jd(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Ge=(c=Ge)||d,jt(t,e),Ge=c):jt(t,e),It(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(q=e,d=e.child;d!==null;){for(f=q=d;q!==null;){switch(y=q,v=y.child,y.tag){case 0:case 11:case 14:case 15:Ss(4,y,y.return);break;case 1:Nr(y,y.return);var w=y.stateNode;if(typeof w.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(x){be(r,n,x)}}break;case 5:Nr(y,y.return);break;case 22:if(y.memoizedState!==null){Nd(f);continue}}v!==null?(v.return=y,q=v):Nd(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Uh("display",o))}catch(x){be(e,e.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){be(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:jt(t,e),It(e),r&4&&jd(e);break;case 21:break;default:jt(t,e),It(e)}}function It(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(dp(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ps(s,""),r.flags&=-33);var i=kd(e);Tl(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=kd(e);Cl(e,l,o);break;default:throw Error(D(161))}}catch(u){be(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ev(e,t,n){q=e,pp(e)}function pp(e,t,n){for(var r=(e.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||wi;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Ge;l=wi;var c=Ge;if(wi=o,(Ge=u)&&!c)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Ed(s):u!==null?(u.return=o,q=u):Ed(s);for(;i!==null;)q=i,pp(i),i=i.sibling;q=s,wi=l,Ge=c}bd(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):bd(e)}}function bd(e){for(;q!==null;){var t=q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ge||Ao(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ge)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Nt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&ud(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ud(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ds(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Ge||t.flags&512&&El(t)}catch(y){be(t,t.return,y)}}if(t===e){q=null;break}if(n=t.sibling,n!==null){n.return=t.return,q=n;break}q=t.return}}function Nd(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,q=n;break}q=t.return}}function Ed(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ao(4,t)}catch(u){be(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){be(t,s,u)}}var i=t.return;try{El(t)}catch(u){be(t,i,u)}break;case 5:var o=t.return;try{El(t)}catch(u){be(t,o,u)}}}catch(u){be(t,t.return,u)}if(t===e){q=null;break}var l=t.sibling;if(l!==null){l.return=t.return,q=l;break}q=t.return}}var tv=Math.ceil,fo=en.ReactCurrentDispatcher,Pu=en.ReactCurrentOwner,vt=en.ReactCurrentBatchConfig,oe=0,Fe=null,Pe=null,qe=0,ut=0,Er=En(0),Ue=0,Hs=null,Kn=0,Oo=0,Au=0,xs=null,tt=null,Ou=0,Fr=1/0,Wt=null,po=!1,Pl=null,Sn=null,_i=!1,mn=null,mo=0,ks=0,Al=null,Mi=-1,Bi=0;function Xe(){return oe&6?Ee():Mi!==-1?Mi:Mi=Ee()}function xn(e){return e.mode&1?oe&2&&qe!==0?qe&-qe:Uy.transition!==null?(Bi===0&&(Bi=Yh()),Bi):(e=de,e!==0||(e=window.event,e=e===void 0?16:sf(e.type)),e):1}function At(e,t,n,r){if(50<ks)throw ks=0,Al=null,Error(D(185));Ks(e,n,r),(!(oe&2)||e!==Fe)&&(e===Fe&&(!(oe&2)&&(Oo|=n),Ue===4&&dn(e,qe)),at(e,r),n===1&&oe===0&&!(t.mode&1)&&(Fr=Ee()+500,Co&&Cn()))}function at(e,t){var n=e.callbackNode;Ug(e,t);var r=Yi(e,e===Fe?qe:0);if(r===0)n!==null&&Lc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Lc(n),t===1)e.tag===0?$y(Cd.bind(null,e)):jf(Cd.bind(null,e)),Ry(function(){!(oe&6)&&Cn()}),n=null;else{switch(Xh(r)){case 1:n=su;break;case 4:n=Qh;break;case 16:n=Ji;break;case 536870912:n=Jh;break;default:n=Ji}n=xp(n,mp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function mp(e,t){if(Mi=-1,Bi=0,oe&6)throw Error(D(327));var n=e.callbackNode;if(Rr()&&e.callbackNode!==n)return null;var r=Yi(e,e===Fe?qe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=go(e,r);else{t=r;var s=oe;oe|=2;var i=yp();(Fe!==e||qe!==t)&&(Wt=null,Fr=Ee()+500,qn(e,t));do try{sv();break}catch(l){gp(e,l)}while(!0);yu(),fo.current=i,oe=s,Pe!==null?t=0:(Fe=null,qe=0,t=Ue)}if(t!==0){if(t===2&&(s=sl(e),s!==0&&(r=s,t=Ol(e,s))),t===1)throw n=Hs,qn(e,0),dn(e,r),at(e,Ee()),n;if(t===6)dn(e,r);else{if(s=e.current.alternate,!(r&30)&&!nv(s)&&(t=go(e,r),t===2&&(i=sl(e),i!==0&&(r=i,t=Ol(e,i))),t===1))throw n=Hs,qn(e,0),dn(e,r),at(e,Ee()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:$n(e,tt,Wt);break;case 3:if(dn(e,r),(r&130023424)===r&&(t=Ou+500-Ee(),10<t)){if(Yi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Xe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=hl($n.bind(null,e,tt,Wt),t);break}$n(e,tt,Wt);break;case 4:if(dn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Pt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Ee()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tv(r/1960))-r,10<r){e.timeoutHandle=hl($n.bind(null,e,tt,Wt),r);break}$n(e,tt,Wt);break;case 5:$n(e,tt,Wt);break;default:throw Error(D(329))}}}return at(e,Ee()),e.callbackNode===n?mp.bind(null,e):null}function Ol(e,t){var n=xs;return e.current.memoizedState.isDehydrated&&(qn(e,t).flags|=256),e=go(e,t),e!==2&&(t=tt,tt=n,t!==null&&Rl(t)),e}function Rl(e){tt===null?tt=e:tt.push.apply(tt,e)}function nv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ot(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dn(e,t){for(t&=~Au,t&=~Oo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Pt(t),r=1<<n;e[n]=-1,t&=~r}}function Cd(e){if(oe&6)throw Error(D(327));Rr();var t=Yi(e,0);if(!(t&1))return at(e,Ee()),null;var n=go(e,t);if(e.tag!==0&&n===2){var r=sl(e);r!==0&&(t=r,n=Ol(e,r))}if(n===1)throw n=Hs,qn(e,0),dn(e,t),at(e,Ee()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$n(e,tt,Wt),at(e,Ee()),null}function Ru(e,t){var n=oe;oe|=1;try{return e(t)}finally{oe=n,oe===0&&(Fr=Ee()+500,Co&&Cn())}}function Qn(e){mn!==null&&mn.tag===0&&!(oe&6)&&Rr();var t=oe;oe|=1;var n=vt.transition,r=de;try{if(vt.transition=null,de=1,e)return e()}finally{de=r,vt.transition=n,oe=t,!(oe&6)&&Cn()}}function Du(){ut=Er.current,ye(Er)}function qn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Oy(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(pu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&no();break;case 3:Mr(),ye(it),ye(Ke),ku();break;case 5:xu(r);break;case 4:Mr();break;case 13:ye(xe);break;case 19:ye(xe);break;case 10:vu(r.type._context);break;case 22:case 23:Du()}n=n.return}if(Fe=e,Pe=e=kn(e.current,null),qe=ut=t,Ue=0,Hs=null,Au=Oo=Kn=0,tt=xs=null,Fn!==null){for(t=0;t<Fn.length;t++)if(n=Fn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Fn=null}return e}function gp(e,t){do{var n=Pe;try{if(yu(),Li.current=ho,co){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}co=!1}if(Gn=0,Be=$e=ke=null,_s=!1,zs=0,Pu.current=null,n===null||n.return===null){Ue=1,Hs=t,Pe=null;break}e:{var i=e,o=n.return,l=n,u=t;if(t=qe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var y=d.alternate;y?(d.updateQueue=y.updateQueue,d.memoizedState=y.memoizedState,d.lanes=y.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=md(o);if(v!==null){v.flags&=-257,gd(v,o,l,i,t),v.mode&1&&pd(i,c,t),t=v,u=c;var w=t.updateQueue;if(w===null){var x=new Set;x.add(u),t.updateQueue=x}else w.add(u);break e}else{if(!(t&1)){pd(i,c,t),Iu();break e}u=Error(D(426))}}else if(Se&&l.mode&1){var T=md(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),gd(T,o,l,i,t),mu(Br(u,l));break e}}i=u=Br(u,l),Ue!==4&&(Ue=2),xs===null?xs=[i]:xs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=Zf(i,u,t);ld(i,p);break e;case 1:l=u;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Sn===null||!Sn.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=ep(i,l,t);ld(i,S);break e}}i=i.return}while(i!==null)}wp(n)}catch(C){t=C,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(!0)}function yp(){var e=fo.current;return fo.current=ho,e===null?ho:e}function Iu(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Fe===null||!(Kn&268435455)&&!(Oo&268435455)||dn(Fe,qe)}function go(e,t){var n=oe;oe|=2;var r=yp();(Fe!==e||qe!==t)&&(Wt=null,qn(e,t));do try{rv();break}catch(s){gp(e,s)}while(!0);if(yu(),oe=n,fo.current=r,Pe!==null)throw Error(D(261));return Fe=null,qe=0,Ue}function rv(){for(;Pe!==null;)vp(Pe)}function sv(){for(;Pe!==null&&!Tg();)vp(Pe)}function vp(e){var t=Sp(e.alternate,e,ut);e.memoizedProps=e.pendingProps,t===null?wp(e):Pe=t,Pu.current=null}function wp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Yy(n,t),n!==null){n.flags&=32767,Pe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Pe=null;return}}else if(n=Jy(n,t,ut),n!==null){Pe=n;return}if(t=t.sibling,t!==null){Pe=t;return}Pe=t=e}while(t!==null);Ue===0&&(Ue=5)}function $n(e,t,n){var r=de,s=vt.transition;try{vt.transition=null,de=1,iv(e,t,n,r)}finally{vt.transition=s,de=r}return null}function iv(e,t,n,r){do Rr();while(mn!==null);if(oe&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Mg(e,i),e===Fe&&(Pe=Fe=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_i||(_i=!0,xp(Ji,function(){return Rr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vt.transition,vt.transition=null;var o=de;de=1;var l=oe;oe|=4,Pu.current=null,Zy(e,n),fp(n,e),by(cl),Xi=!!ul,cl=ul=null,e.current=n,ev(n),Pg(),oe=l,de=o,vt.transition=i}else e.current=n;if(_i&&(_i=!1,mn=e,mo=s),i=e.pendingLanes,i===0&&(Sn=null),Rg(n.stateNode),at(e,Ee()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(po)throw po=!1,e=Pl,Pl=null,e;return mo&1&&e.tag!==0&&Rr(),i=e.pendingLanes,i&1?e===Al?ks++:(ks=0,Al=e):ks=0,Cn(),null}function Rr(){if(mn!==null){var e=Xh(mo),t=vt.transition,n=de;try{if(vt.transition=null,de=16>e?16:e,mn===null)var r=!1;else{if(e=mn,mn=null,mo=0,oe&6)throw Error(D(331));var s=oe;for(oe|=4,q=e.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(q=c;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:Ss(8,d,i)}var f=d.child;if(f!==null)f.return=d,q=f;else for(;q!==null;){d=q;var y=d.sibling,v=d.return;if(cp(d),d===c){q=null;break}if(y!==null){y.return=v,q=y;break}q=v}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var T=x.sibling;x.sibling=null,x=T}while(x!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ss(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,q=p;break e}q=i.return}}var m=e.current;for(q=m;q!==null;){o=q;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,q=g;else e:for(o=m;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ao(9,l)}}catch(C){be(l,l.return,C)}if(l===o){q=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,q=S;break e}q=l.return}}if(oe=s,Cn(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(ko,e)}catch{}r=!0}return r}finally{de=n,vt.transition=t}}return!1}function Td(e,t,n){t=Br(n,t),t=Zf(e,t,1),e=_n(e,t,1),t=Xe(),e!==null&&(Ks(e,1,t),at(e,t))}function be(e,t,n){if(e.tag===3)Td(e,e,n);else for(;t!==null;){if(t.tag===3){Td(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sn===null||!Sn.has(r))){e=Br(n,e),e=ep(t,e,1),t=_n(t,e,1),e=Xe(),t!==null&&(Ks(t,1,e),at(t,e));break}}t=t.return}}function ov(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Xe(),e.pingedLanes|=e.suspendedLanes&n,Fe===e&&(qe&n)===n&&(Ue===4||Ue===3&&(qe&130023424)===qe&&500>Ee()-Ou?qn(e,0):Au|=n),at(e,t)}function _p(e,t){t===0&&(e.mode&1?(t=ci,ci<<=1,!(ci&130023424)&&(ci=4194304)):t=1);var n=Xe();e=Xt(e,t),e!==null&&(Ks(e,t,n),at(e,n))}function av(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_p(e,n)}function lv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),_p(e,n)}var Sp;Sp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||it.current)rt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return rt=!1,Qy(e,t,n);rt=!!(e.flags&131072)}else rt=!1,Se&&t.flags&1048576&&bf(t,io,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ui(e,t),e=t.pendingProps;var s=Lr(t,Ke.current);Or(t,n),s=bu(null,t,r,e,s,n);var i=Nu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ot(r)?(i=!0,ro(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_u(t),s.updater=Po,t.stateNode=s,s._reactInternals=t,wl(t,r,e,n),t=xl(null,t,r,!0,i,n)):(t.tag=0,Se&&i&&fu(t),Ye(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ui(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=cv(r),e=Nt(r,e),s){case 0:t=Sl(null,t,r,e,n);break e;case 1:t=wd(null,t,r,e,n);break e;case 11:t=yd(null,t,r,e,n);break e;case 14:t=vd(null,t,r,Nt(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nt(r,s),Sl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nt(r,s),wd(e,t,r,s,n);case 3:e:{if(sp(t),e===null)throw Error(D(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Af(e,t),lo(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Br(Error(D(423)),t),t=_d(e,t,r,n,s);break e}else if(r!==s){s=Br(Error(D(424)),t),t=_d(e,t,r,n,s);break e}else for(ct=wn(t.stateNode.containerInfo.firstChild),dt=t,Se=!0,Tt=null,n=Tf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($r(),r===s){t=Zt(e,t,n);break e}Ye(e,t,r,n)}t=t.child}return t;case 5:return Of(t),e===null&&gl(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,dl(r,s)?o=null:i!==null&&dl(r,i)&&(t.flags|=32),rp(e,t),Ye(e,t,o,n),t.child;case 6:return e===null&&gl(t),null;case 13:return ip(e,t,n);case 4:return Su(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ur(t,null,r,n):Ye(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nt(r,s),yd(e,t,r,s,n);case 7:return Ye(e,t,t.pendingProps,n),t.child;case 8:return Ye(e,t,t.pendingProps.children,n),t.child;case 12:return Ye(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,pe(oo,r._currentValue),r._currentValue=o,i!==null)if(Ot(i.value,o)){if(i.children===s.children&&!it.current){t=Zt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Qt(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),yl(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),yl(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ye(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Or(t,n),s=_t(s),r=r(s),t.flags|=1,Ye(e,t,r,n),t.child;case 14:return r=t.type,s=Nt(r,t.pendingProps),s=Nt(r.type,s),vd(e,t,r,s,n);case 15:return tp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nt(r,s),Ui(e,t),t.tag=1,ot(r)?(e=!0,ro(t)):e=!1,Or(t,n),Xf(t,r,s),wl(t,r,s,n),xl(null,t,r,!0,e,n);case 19:return op(e,t,n);case 22:return np(e,t,n)}throw Error(D(156,t.tag))};function xp(e,t){return Kh(e,t)}function uv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(e,t,n,r){return new uv(e,t,n,r)}function Lu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cv(e){if(typeof e=="function")return Lu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tu)return 11;if(e===nu)return 14}return 2}function kn(e,t){var n=e.alternate;return n===null?(n=yt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fi(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Lu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case yr:return Wn(n.children,s,i,t);case eu:o=8,s|=8;break;case qa:return e=yt(12,n,t,s|2),e.elementType=qa,e.lanes=i,e;case Wa:return e=yt(13,n,t,s),e.elementType=Wa,e.lanes=i,e;case Ha:return e=yt(19,n,t,s),e.elementType=Ha,e.lanes=i,e;case Ah:return Ro(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Th:o=10;break e;case Ph:o=9;break e;case tu:o=11;break e;case nu:o=14;break e;case ln:o=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=yt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Wn(e,t,n,r){return e=yt(7,e,r,t),e.lanes=n,e}function Ro(e,t,n,r){return e=yt(22,e,r,t),e.elementType=Ah,e.lanes=n,e.stateNode={isHidden:!1},e}function Ea(e,t,n){return e=yt(6,e,null,t),e.lanes=n,e}function Ca(e,t,n){return t=yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dv(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=la(0),this.expirationTimes=la(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function $u(e,t,n,r,s,i,o,l,u){return e=new dv(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=yt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_u(i),e}function hv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function kp(e){if(!e)return bn;e=e._reactInternals;e:{if(Xn(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(ot(n))return kf(e,n,t)}return t}function jp(e,t,n,r,s,i,o,l,u){return e=$u(n,r,!0,e,s,i,o,l,u),e.context=kp(null),n=e.current,r=Xe(),s=xn(n),i=Qt(r,s),i.callback=t??null,_n(n,i,s),e.current.lanes=s,Ks(e,s,r),at(e,r),e}function Do(e,t,n,r){var s=t.current,i=Xe(),o=xn(s);return n=kp(n),t.context===null?t.context=n:t.pendingContext=n,t=Qt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=_n(s,t,o),e!==null&&(At(e,s,o,i),Ii(e,s,o)),o}function yo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Pd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Uu(e,t){Pd(e,t),(e=e.alternate)&&Pd(e,t)}function fv(){return null}var bp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Mu(e){this._internalRoot=e}Io.prototype.render=Mu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Do(e,t,null,null)};Io.prototype.unmount=Mu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qn(function(){Do(null,e,null,null)}),t[Yt]=null}};function Io(e){this._internalRoot=e}Io.prototype.unstable_scheduleHydration=function(e){if(e){var t=tf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<cn.length&&t!==0&&t<cn[n].priority;n++);cn.splice(n,0,e),n===0&&rf(e)}};function Bu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ad(){}function pv(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=yo(o);i.call(c)}}var o=jp(t,r,e,0,null,!1,!1,"",Ad);return e._reactRootContainer=o,e[Yt]=o.current,$s(e.nodeType===8?e.parentNode:e),Qn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=yo(u);l.call(c)}}var u=$u(e,0,!1,null,null,!1,!1,"",Ad);return e._reactRootContainer=u,e[Yt]=u.current,$s(e.nodeType===8?e.parentNode:e),Qn(function(){Do(t,u,n,r)}),u}function $o(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=yo(o);l.call(u)}}Do(t,o,e,s)}else o=pv(n,t,e,s,r);return yo(o)}Zh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hs(t.pendingLanes);n!==0&&(iu(t,n|1),at(t,Ee()),!(oe&6)&&(Fr=Ee()+500,Cn()))}break;case 13:Qn(function(){var r=Xt(e,1);if(r!==null){var s=Xe();At(r,e,1,s)}}),Uu(e,1)}};ou=function(e){if(e.tag===13){var t=Xt(e,134217728);if(t!==null){var n=Xe();At(t,e,134217728,n)}Uu(e,134217728)}};ef=function(e){if(e.tag===13){var t=xn(e),n=Xt(e,t);if(n!==null){var r=Xe();At(n,e,t,r)}Uu(e,t)}};tf=function(){return de};nf=function(e,t){var n=de;try{return de=e,t()}finally{de=n}};tl=function(e,t,n){switch(t){case"input":if(Ka(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Eo(r);if(!s)throw Error(D(90));Rh(r),Ka(r,s)}}}break;case"textarea":Ih(e,n);break;case"select":t=n.value,t!=null&&Cr(e,!!n.multiple,t,!1)}};zh=Ru;qh=Qn;var mv={usingClientEntryPoint:!1,Events:[Js,Sr,Eo,Bh,Fh,Ru]},as={findFiberByHostInstance:Bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gv={bundleType:as.bundleType,version:as.version,rendererPackageName:as.rendererPackageName,rendererConfig:as.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:en.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Vh(e),e===null?null:e.stateNode},findFiberByHostInstance:as.findFiberByHostInstance||fv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Si.isDisabled&&Si.supportsFiber)try{ko=Si.inject(gv),Mt=Si}catch{}}ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mv;ft.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bu(t))throw Error(D(200));return hv(e,t,null,n)};ft.createRoot=function(e,t){if(!Bu(e))throw Error(D(299));var n=!1,r="",s=bp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=$u(e,1,!1,null,null,n,!1,r,s),e[Yt]=t.current,$s(e.nodeType===8?e.parentNode:e),new Mu(t)};ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Vh(t),e=e===null?null:e.stateNode,e};ft.flushSync=function(e){return Qn(e)};ft.hydrate=function(e,t,n){if(!Lo(t))throw Error(D(200));return $o(null,e,t,!0,n)};ft.hydrateRoot=function(e,t,n){if(!Bu(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=bp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=jp(t,null,e,1,n??null,s,!1,i,o),e[Yt]=t.current,$s(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Io(t)};ft.render=function(e,t,n){if(!Lo(t))throw Error(D(200));return $o(null,e,t,!1,n)};ft.unmountComponentAtNode=function(e){if(!Lo(e))throw Error(D(40));return e._reactRootContainer?(Qn(function(){$o(null,null,e,!1,function(){e._reactRootContainer=null,e[Yt]=null})}),!0):!1};ft.unstable_batchedUpdates=Ru;ft.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Lo(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return $o(e,t,n,!1,r)};ft.version="18.3.1-next-f1338f8080-20240426";function Np(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Np)}catch(e){console.error(e)}}Np(),bh.exports=ft;var yv=bh.exports,Ep,Od=yv;Ep=Od.createRoot,Od.hydrateRoot;var Cp={exports:{}},vv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wv=vv,_v=wv;function Tp(){}function Pp(){}Pp.resetWarningCache=Tp;var Sv=function(){function e(r,s,i,o,l,u){if(u!==_v){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Pp,resetWarningCache:Tp};return n.PropTypes=n,n};Cp.exports=Sv();var xv=Cp.exports;const k=Wm(xv),kv="modulepreload",jv=function(e){return"/pocket-budget/"+e},Rd={},Xs=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(l=>{if(l=jv(l),l in Rd)return;Rd[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":kv,u||(d.as="script",d.crossOrigin=""),d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((f,y)=>{d.addEventListener("load",f),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},bv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Xs(async()=>{const{default:r}=await Promise.resolve().then(()=>Vr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Fu extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Nv extends Fu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Dd extends Fu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Id extends Fu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Dl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Dl||(Dl={}));var Ev=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(e,t||[])).next())})};class Cv{constructor(t,{headers:n={},customFetch:r,region:s=Dl.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=bv(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return Ev(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:u}=n;u||(u=this.region);const c=new URL(`${this.url}/${t}`);u&&u!=="any"&&(l["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(x=>{throw new Nv(x)}),y=f.headers.get("x-relay-error");if(y&&y==="true")throw new Dd(f);if(!f.ok)throw new Id(f);let v=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),w;return v==="application/json"?w=yield f.json():v==="application/octet-stream"?w=yield f.blob():v==="text/event-stream"?w=f:v==="multipart/form-data"?w=yield f.formData():w=yield f.text(),{data:w,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof Id||s instanceof Dd?s.context:void 0}}})}}var nt={},zu={},Uo={},Zs={},Mo={},Bo={},Tv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")},zr=Tv();const Pv=zr.fetch,Ap=zr.fetch.bind(zr),Op=zr.Headers,Av=zr.Request,Ov=zr.Response,Vr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Op,Request:Av,Response:Ov,default:Ap,fetch:Pv},Symbol.toStringTag,{value:"Module"})),Rv=Hm(Vr);var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});let Dv=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Fo.default=Dv;var Rp=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bo,"__esModule",{value:!0});const Iv=Rp(Rv),Lv=Rp(Fo);let $v=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Iv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,u;let c=null,d=null,f=null,y=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=p:d=JSON.parse(p))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),T=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&T&&T.length>1&&(f=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,y=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(d=[],c=null,y=200,v="OK")}catch{i.status===404&&x===""?(y=204,v="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,y=200,v="OK"),c&&this.shouldThrowOnError)throw new Lv.default(c)}return{error:c,data:d,count:f,status:y,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,u;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(u=i==null?void 0:i.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Bo.default=$v;var Uv=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mo,"__esModule",{value:!0});const Mv=Uv(Bo);let Bv=class extends Mv.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const u=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${u};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Mo.default=Bv;var Fv=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zs,"__esModule",{value:!0});const zv=Fv(Mo);let qv=class extends zv.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Zs.default=qv;var Wv=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uo,"__esModule",{value:!0});const ls=Wv(Zs);let Hv=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new ls.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(o.length>0){const l=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new ls.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const u=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new ls.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new ls.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ls.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Uo.default=Hv;var zo={},qo={};Object.defineProperty(qo,"__esModule",{value:!0});qo.version=void 0;qo.version="0.0.0-automated";Object.defineProperty(zo,"__esModule",{value:!0});zo.DEFAULT_HEADERS=void 0;const Vv=qo;zo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Vv.version}`};var Dp=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zu,"__esModule",{value:!0});const Gv=Dp(Uo),Kv=Dp(Zs),Qv=zo;let Jv=class Ip{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Qv.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new Gv.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ip(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let u;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",u=n);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Kv.default({method:o,url:l,headers:c,schema:this.schemaName,body:u,fetch:this.fetch,allowEmpty:!1})}};zu.default=Jv;var Gr=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nt,"__esModule",{value:!0});nt.PostgrestError=nt.PostgrestBuilder=nt.PostgrestTransformBuilder=nt.PostgrestFilterBuilder=nt.PostgrestQueryBuilder=nt.PostgrestClient=void 0;const Lp=Gr(zu);nt.PostgrestClient=Lp.default;const $p=Gr(Uo);nt.PostgrestQueryBuilder=$p.default;const Up=Gr(Zs);nt.PostgrestFilterBuilder=Up.default;const Mp=Gr(Mo);nt.PostgrestTransformBuilder=Mp.default;const Bp=Gr(Bo);nt.PostgrestBuilder=Bp.default;const Fp=Gr(Fo);nt.PostgrestError=Fp.default;var Yv=nt.default={PostgrestClient:Lp.default,PostgrestQueryBuilder:$p.default,PostgrestFilterBuilder:Up.default,PostgrestTransformBuilder:Mp.default,PostgrestBuilder:Bp.default,PostgrestError:Fp.default};const{PostgrestClient:Xv,PostgrestQueryBuilder:dS,PostgrestFilterBuilder:hS,PostgrestTransformBuilder:fS,PostgrestBuilder:pS,PostgrestError:mS}=Yv;class Zv{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const e0="2.15.1",t0=`realtime-js/${e0}`,n0="1.0.0",Il=1e4,r0=1e3,s0=100;var js;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(js||(js={}));var Ie;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ie||(Ie={}));var Ct;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ct||(Ct={}));var Ll;(function(e){e.websocket="websocket"})(Ll||(Ll={}));var Mn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Mn||(Mn={}));class i0{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+s));o=o+s;const u=r.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:u,payload:c}}}class zp{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var fe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(fe||(fe={}));const Ld=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=o0(o,e,t,s),i),{})},o0=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?qp(i,o):$l(o)},qp=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return c0(t,n)}switch(e){case fe.bool:return a0(t);case fe.float4:case fe.float8:case fe.int2:case fe.int4:case fe.int8:case fe.numeric:case fe.oid:return l0(t);case fe.json:case fe.jsonb:return u0(t);case fe.timestamp:return d0(t);case fe.abstime:case fe.date:case fe.daterange:case fe.int4range:case fe.int8range:case fe.money:case fe.reltime:case fe.text:case fe.time:case fe.timestamptz:case fe.timetz:case fe.tsrange:case fe.tstzrange:return $l(t);default:return $l(t)}},$l=e=>e,a0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},l0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},u0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},c0=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>qp(t,l))}return e},d0=e=>typeof e=="string"?e.replace(" ","T"):e,Wp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Ta{constructor(t,n,r={},s=Il){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var $d;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})($d||($d={}));class bs{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bs.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=bs.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=bs.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),l={},u={};return this.map(i,(c,d)=>{o[c]||(u[c]=d)}),this.map(o,(c,d)=>{const f=i[c];if(f){const y=d.map(T=>T.presence_ref),v=f.map(T=>T.presence_ref),w=d.filter(T=>v.indexOf(T.presence_ref)<0),x=f.filter(T=>y.indexOf(T.presence_ref)<0);w.length>0&&(l[c]=w),x.length>0&&(u[c]=x)}else l[c]=d}),this.syncDiff(i,{joins:l,leaves:u},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,u)=>{var c;const d=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(u),d.length>0){const f=t[l].map(v=>v.presence_ref),y=d.filter(v=>f.indexOf(v.presence_ref)<0);t[l].unshift(...y)}r(l,d,u)}),this.map(o,(l,u)=>{let c=t[l];if(!c)return;const d=u.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=c,s(l,c,u),c.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ud;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ud||(Ud={}));var Ns;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ns||(Ns={}));var Ht;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ht||(Ht={}));class qu{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ta(this,Ct.join,this.params,this.timeout),this.rejoinTimer=new zp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ie.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ct.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new bs(this),this.broadcastEndpointURL=Wp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ie.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Ns.PRESENCE]&&this.bindings[Ns.PRESENCE].length>0,d={},f={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(Ht.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(Ht.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket.setAuth(),y===void 0){t==null||t(Ht.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,x=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,T=[];for(let p=0;p<x;p++){const m=w[p],{filter:{event:g,schema:S,table:C,filter:j}}=m,b=y&&y[p];if(b&&b.event===g&&b.schema===S&&b.table===C&&b.filter===j)T.push(Object.assign(Object.assign({},m),{id:b.id}));else{this.unsubscribe(),this.state=Ie.errored,t==null||t(Ht.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,t&&t(Ht.SUBSCRIBED);return}}).receive("error",y=>{this.state=Ie.errored,t==null||t(Ht.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ht.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Ie.joined&&t===Ns.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,u;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ie.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ct.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Ta(this,Ct.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ie.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ta(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>s0){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=Ct;if(r&&[l,u,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let y=this._onMessage(o,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var w,x,T;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((T=(x=v.filter)===null||x===void 0?void 0:x.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===o}).map(v=>v.callback(y,r)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var w,x,T,p,m,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const S=v.id,C=(w=v.filter)===null||w===void 0?void 0:w.event;return S&&((x=n.ids)===null||x===void 0?void 0:x.includes(S))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((T=n.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const S=(m=(p=v==null?void 0:v.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return S==="*"||S===((g=n==null?void 0:n.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof y=="object"&&"ids"in y){const w=y.data,{schema:x,table:T,commit_timestamp:p,type:m,errors:g}=w;y=Object.assign(Object.assign({},{schema:x,table:T,commit_timestamp:p,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(w))}v.callback(y,r)})}_isClosed(){return this.state===Ie.closed}_isJoined(){return this.state===Ie.joined}_isJoining(){return this.state===Ie.joining}_isLeaving(){return this.state===Ie.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&qu.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ct.close,{},t)}_onError(t){this._on(Ct.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ie.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ld(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ld(t.columns,t.old_record)),n}}const Md=()=>{},xi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},h0=[1e3,2e3,5e3,1e4],f0=1e4,p0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class m0{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Il,this.transport=null,this.heartbeatIntervalMs=xi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Md,this.ref=0,this.reconnectTimer=null,this.logger=Md,this.conn=null,this.sendBuffer=[],this.serializer=new i0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Xs(async()=>{const{default:l}=await Promise.resolve().then(()=>Vr);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Ll.websocket}`,this.httpEndpoint=Wp(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Zv.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:n0}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case js.connecting:return Mn.Connecting;case js.open:return Mn.Open;case js.closing:return Mn.Closing;default:return Mn.Closed}}isConnected(){return this.connectionState()===Mn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new qu(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(r0,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},xi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,l=o?`(${o})`:"",u=i.status||"";this.log("receive",`${u} ${r} ${s} ${l}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ct.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([p0],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:t0};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Ct.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new zp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,l,u,c;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Il,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:xi.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:d=>h0[d-1]||f0,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(d,f)=>f(JSON.stringify(d)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Wu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Le(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class g0 extends Wu{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ul extends Wu{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var y0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(e,t||[])).next())})};const Hp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Xs(async()=>{const{default:r}=await Promise.resolve().then(()=>Vr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},v0=()=>y0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xs(()=>Promise.resolve().then(()=>Vr),void 0)).Response:Response}),Ml=e=>{if(Array.isArray(e))return e.map(n=>Ml(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ml(r)}),t},w0=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Zn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(e,t||[])).next())})};const Pa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_0=(e,t,n)=>Zn(void 0,void 0,void 0,function*(){const r=yield v0();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new g0(Pa(s),i,o))}).catch(s=>{t(new Ul(Pa(s),s))}):t(new Ul(Pa(e),e))}),S0=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(w0(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function ei(e,t,n,r,s,i){return Zn(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,S0(t,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>_0(u,l,r))})})}function vo(e,t,n,r){return Zn(this,void 0,void 0,function*(){return ei(e,"GET",t,n,r)})}function $t(e,t,n,r,s){return Zn(this,void 0,void 0,function*(){return ei(e,"POST",t,r,s,n)})}function Bl(e,t,n,r,s){return Zn(this,void 0,void 0,function*(){return ei(e,"PUT",t,r,s,n)})}function x0(e,t,n,r){return Zn(this,void 0,void 0,function*(){return ei(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Vp(e,t,n,r,s){return Zn(this,void 0,void 0,function*(){return ei(e,"DELETE",t,r,s,n)})}var Je=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(e,t||[])).next())})};const k0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class j0{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Hp(s)}uploadOrUpdate(t,n,r,s){return Je(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Bd),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),f=yield(t=="PUT"?Bl:$t)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(Le(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Je(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let u;const c=Object.assign({upsert:Bd.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield Bl(this.fetch,l.toString(),u,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(u){if(Le(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,n){return Je(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield $t(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Wu("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}update(t,n,r){return Je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Je(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Je(this,void 0,void 0,function*(){try{return{data:{path:(yield $t(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Je(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield $t(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Je(this,void 0,void 0,function*(){try{const s=yield $t(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}})}download(t,n){return Je(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield vo(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Le(l))return{data:null,error:l};throw l}})}info(t){return Je(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield vo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ml(r),error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}exists(t){return Je(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield x0(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Le(r)&&r instanceof Ul){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&s.push(u);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(t){return Je(this,void 0,void 0,function*(){try{return{data:yield Vp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}list(t,n,r){return Je(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},k0),n),{prefix:t||""});return{data:yield $t(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}})}listV2(t,n){return Je(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield $t(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const b0="2.11.0",N0={"X-Client-Info":`storage-js/${b0}`};var or=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(e,[])).next())})};class E0{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},N0),n),this.fetch=Hp(r)}listBuckets(){return or(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Le(t))return{data:null,error:t};throw t}})}getBucket(t){return or(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return or(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return or(this,void 0,void 0,function*(){try{return{data:yield Bl(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}emptyBucket(t){return or(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}deleteBucket(t){return or(this,void 0,void 0,function*(){try{return{data:yield Vp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}}class C0 extends E0{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new j0(this.url,this.headers,t,this.fetch)}}const T0="2.55.0";let ps="";typeof Deno<"u"?ps="deno":typeof document<"u"?ps="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ps="react-native":ps="node";const P0={"X-Client-Info":`supabase-js-${ps}/${T0}`},A0={headers:P0},O0={schema:"public"},R0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},D0={};var I0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(e,t||[])).next())})};const L0=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ap:t=fetch,(...n)=>t(...n)},$0=()=>typeof Headers>"u"?Op:Headers,U0=(e,t,n)=>{const r=L0(n),s=$0();return(i,o)=>I0(void 0,void 0,void 0,function*(){var l;const u=(l=yield t())!==null&&l!==void 0?l:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var M0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(e,[])).next())})};function B0(e){return e.endsWith("/")?e:e+"/"}function F0(e,t){var n,r;const{db:s,auth:i,realtime:o,global:l}=e,{db:u,auth:c,realtime:d,global:f}=t,y={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>M0(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}const Gp="2.71.1",pr=30*1e3,Fl=3,Aa=Fl*pr,z0="http://localhost:9999",q0="supabase.auth.token",W0={"X-Client-Info":`gotrue-js/${Gp}`},zl="X-Supabase-Api-Version",Kp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},H0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V0=10*60*1e3;class Hu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Q(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class G0 extends Hu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function K0(e){return Q(e)&&e.name==="AuthApiError"}class Qp extends Hu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Tn extends Hu{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class an extends Tn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Q0(e){return Q(e)&&e.name==="AuthSessionMissingError"}class ki extends Tn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ji extends Tn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class bi extends Tn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function J0(e){return Q(e)&&e.name==="AuthImplicitGrantRedirectError"}class Fd extends Tn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ql extends Tn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Oa(e){return Q(e)&&e.name==="AuthRetryableFetchError"}class zd extends Tn{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Wl extends Tn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const wo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qd=` 	
\r=`.split(""),Y0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<qd.length;t+=1)e[qd[t].charCodeAt(0)]=-2;for(let t=0;t<wo.length;t+=1)e[wo[t].charCodeAt(0)]=t;return e})();function Wd(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(wo[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(wo[r]),t.queuedBits-=6}}function Jp(e,t,n){const r=Y0[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Hd(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{ew(o,r,n)};for(let o=0;o<e.length;o+=1)Jp(e.charCodeAt(o),s,i);return t.join("")}function X0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Z0(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}X0(r,t)}}function ew(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function tw(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Jp(e.charCodeAt(s),n,r);return new Uint8Array(t)}function nw(e){const t=[];return Z0(e,n=>t.push(n)),new Uint8Array(t)}function rw(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Wd(s,n,r)),Wd(null,n,r),t.join("")}function sw(e){return Math.round(Date.now()/1e3)+e}function iw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const bt=()=>typeof window<"u"&&typeof document<"u",Dn={tested:!1,writable:!1},Yp=()=>{if(!bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Dn.tested)return Dn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Dn.tested=!0,Dn.writable=!0}catch{Dn.tested=!0,Dn.writable=!1}return Dn.writable};function ow(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Xp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Xs(async()=>{const{default:r}=await Promise.resolve().then(()=>Vr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},aw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",mr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},In=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},on=async(e,t)=>{await e.removeItem(t)};class Wo{constructor(){this.promise=new Wo.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Wo.promiseConstructor=Promise;function Ra(e){const t=e.split(".");if(t.length!==3)throw new Wl("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!H0.test(t[r]))throw new Wl("JWT not in base64url format");return{header:JSON.parse(Hd(t[0])),payload:JSON.parse(Hd(t[1])),signature:tw(t[2]),raw:{header:t[0],payload:t[1]}}}async function lw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function uw(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function cw(e){return("0"+e.toString(16)).substr(-2)}function dw(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,cw).join("")}async function hw(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function fw(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await hw(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ar(e,t,n=!1){const r=dw();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await mr(e,`${t}-code-verifier`,s);const i=await fw(r);return[i,r===i?"plain":"s256"]}const pw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mw(e){const t=e.headers.get(zl);if(!t||!t.match(pw))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function gw(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function yw(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lr(e){if(!vw.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Da(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Vd(e){return JSON.parse(JSON.stringify(e))}var ww=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Un=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_w=[502,503,504];async function Gd(e){var t;if(!aw(e))throw new ql(Un(e),0);if(_w.includes(e.status))throw new ql(Un(e),e.status);let n;try{n=await e.json()}catch(i){throw new Qp(Un(i),i)}let r;const s=mw(e);if(s&&s.getTime()>=Kp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new zd(Un(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new an}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new zd(Un(n),e.status,n.weak_password.reasons);throw new G0(Un(n),e.status||500,r)}const Sw=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function re(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[zl]||(i[zl]=Kp["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await xw(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function xw(e,t,n,r,s,i){const o=Sw(t,r,s,i);let l;try{l=await e(n,Object.assign({},o))}catch(u){throw console.error(u),new ql(Un(u),0)}if(l.ok||await Gd(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(u){await Gd(u)}}function qt(e){var t;let n=null;Nw(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=sw(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Kd(e){const t=qt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function hn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function kw(e){return{data:e,error:null}}function jw(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=ww(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function bw(e){return e}function Nw(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ia=["global","local","others"];var Ew=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class Cw{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Xp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Ia[0]){if(Ia.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ia.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:hn})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Ew(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:jw,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Q(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:hn})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:bw});if(d.error)throw d.error;const f=await d.json(),y=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(w.split(";")[1].split("=")[1]);c[`${T}Page`]=x}),c.total=parseInt(y)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Q(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){lr(t);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:hn})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){lr(t);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:hn})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){lr(t);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:hn})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){lr(t.userId);try{const{data:n,error:r}=await re(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _deleteFactor(t){lr(t.userId),lr(t.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}}function Qd(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function Tw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ur={debug:!!(globalThis&&Yp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Pw extends Zp{}async function Aw(e,t,n){ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ur.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Pw(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ur.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Tw();const Ow={url:z0,storageKey:q0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:W0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jd(e,t,n){return await n()}const cr={};class Vs{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vs.nextInstanceID,Vs.nextInstanceID+=1,this.instanceID>0&&bt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Ow),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Cw({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Xp(s.fetch),this.lock=s.lock||Jd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:bt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Aw:this.lock=Jd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Yp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qd(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Qd(this.memoryStorage)),bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=cr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){cr[this.storageKey]=Object.assign(Object.assign({},cr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=cr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){cr[this.storageKey]=Object.assign(Object.assign({},cr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=ow(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),bt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),J0(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Q(n)?{error:n}:{error:new Qp("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:qt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:f,options:y}=t;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await ar(this.storage,this.storageKey)),i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:d,password:f,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:w},xform:qt})}else if("phone"in t){const{phone:d,password:f,options:y}=t;i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:qt})}else throw new ji("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Kd})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Kd})}else throw new ji("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ki}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,l,u,c,d,f,y,v;let w,x;if("message"in t)w=t.message,x=t.signature;else{const{chain:T,wallet:p,statement:m,options:g}=t;let S;if(bt())if(typeof p=="object")S=p;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))S=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=p}const C=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const j=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),m?{statement:m}:null));let b;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")b=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)b=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in b&&"signature"in b&&(typeof b.signedMessage=="string"||b.signedMessage instanceof Uint8Array)&&b.signature instanceof Uint8Array)w=typeof b.signedMessage=="string"?b.signedMessage:new TextDecoder().decode(b.signedMessage),x=b.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${C.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(r=g==null?void 0:g.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((f=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...g.signInWithSolana.resources.map(b=>`- ${b}`)]:[]].join(`
`);const j=await S.signMessage(new TextEncoder().encode(w),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=j}}try{const{data:T,error:p}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:rw(x)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:qt});if(p)throw p;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new ki}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:p})}catch(T){if(Q(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(t){const n=await In(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:qt});if(await on(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ki}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,l=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:qt}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new ki}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:l,options:u}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await ar(this.storage,this.storageKey));const{error:f}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:u}=t,{data:c,error:d}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new ji("You must provide either an email or phone number.")}catch(l){if(Q(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:qt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,c=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(Q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ar(this.storage,this.storageKey)),await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:kw})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new an;const{error:s}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Q(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await re(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:l}=await re(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new ji("You must provide either an email or phone number and a type")}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await In(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Aa:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await In(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Da()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(u,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:hn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new an}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:hn})})}catch(n){if(Q(n))return Q0(n)&&(await this._removeSession(),await on(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new an;const o=s.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await ar(this.storage,this.storageKey));const{data:c,error:d}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:hn});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new an;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Ra(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Q(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new an;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!bt())throw new bi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new bi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Fd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Fd("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:u,token_type:c}=t;if(!i||!l||!o||!c)throw new bi("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let y=d+f;u&&(y=parseInt(u));const v=y-d;v*1e3<=pr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const w=y-f;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,y,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,y,d);const{data:x,error:T}=await this._getUser(i);if(T)throw T;const p={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:y,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(r){if(Q(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await In(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(K0(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await on(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=iw(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await ar(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,u,c,d;const{data:f,error:y}=i;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return bt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Q(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await uw(async s=>(s>0&&await lw(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Oa(i)&&Date.now()+o-r<pr})}catch(r){if(this._debug(n,"error",r),Q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),bt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await In(this.storage,this.storageKey);if(s&&this.userStorage){let o=await In(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await mr(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Da()}else if(s&&!s.user&&!s.user){const o=await In(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await on(this.storage,this.storageKey+"-user"),await mr(this.storage,this.storageKey,s)):s.user=Da()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Aa;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Aa}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Oa(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new an;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Wo;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new an;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Q(i)){const o={session:null,error:i};return Oa(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await mr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Vd(s);await mr(this.storage,this.storageKey,i)}else{const s=Vd(n);await mr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await on(this.storage,this.storageKey),await on(this.storage,this.storageKey+"-code-verifier"),await on(this.storage,this.storageKey+"-user"),this.userStorage&&await on(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&bt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),pr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/pr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${pr}ms, refresh threshold is ${Fl} ticks`),s<=Fl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Zp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await ar(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await re(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:u,error:c}=await re(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Q(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Q(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ra(s.access_token);let l=null;o.aal&&(l=o.aal);let u=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+V0>s)return r;const{data:i,error:o}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:v,error:w}=await this.getSession();if(w||!v.session)return{data:null,error:w};r=v.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:u}}=Ra(r);n!=null&&n.allowExpired||gw(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:s,signature:o},error:null}}const d=yw(s.alg),f=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,nw(`${l}.${u}`)))throw new Wl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}}Vs.nextInstanceID=0;const Rw=Vs;class Dw extends Rw{constructor(t){super(t)}}var Iw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((r=r.apply(e,[])).next())})};class Lw{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=B0(t),u=new URL(l);this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,d={db:O0,realtime:D0,auth:Object.assign(Object.assign({},R0),{storageKey:c}),global:A0},f=F0(r??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=U0(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Xv(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new C0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new Cv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Iw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:l,debug:u},c,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dw({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:u,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new m0(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $w=(e,t,n)=>new Lw(e,t,n);function Uw(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Uw()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");async function Mw(e){var o,l;await new Promise(u=>setTimeout(u,600));const t=Bw(e),n=e.last7Days>e.previous7Days?"increasing":"decreasing",r=((o=e.topExpenseCategory)==null?void 0:o[0])||"Uncategorized",s=((l=e.topExpenseCategory)==null?void 0:l[1])||0,i=e.totalExpenses>0?s/e.totalExpenses*100:0;return{healthScore:t,summary:Fw(e,t),strengths:zw(e),improvements:qw(e),spendingAnalysis:Ww(e,n,r,i),savingsTips:Hw(e),budgetSuggestions:Vw(e),goals:Gw(e)}}function Bw(e){let t=5;return e.savingsRate>20?t+=2:e.savingsRate>10?t+=1:e.savingsRate<0&&(t-=2),e.balance>0?t+=1:t-=1,e.transactionCount>10&&(t+=1),(e.topExpenseCategory?e.topExpenseCategory[1]/e.totalExpenses*100:0)>50&&(t-=1),Math.max(1,Math.min(10,t))}function Fw(e,t){return t>=8?"Excellent financial health! You're demonstrating strong budgeting discipline with healthy savings and balanced spending.":t>=6?"Good financial foundation with room for optimization. A few adjustments could significantly improve your financial position.":t>=4?"Your finances need attention. Focus on increasing income, reducing expenses, or both to improve your financial stability.":"Critical financial situation requiring immediate action. Consider seeking financial counseling and implementing strict budgeting measures."}function zw(e){const t=[];return e.savingsRate>15&&t.push("Strong savings discipline - you're saving above the recommended 15% rate"),e.transactionCount>15&&t.push("Excellent expense tracking - you're consistently recording transactions"),e.balance>0&&t.push("Positive cash flow - you're living within your means"),Object.keys(e.expensesByCategory).length>=4&&t.push("Diversified spending across multiple categories shows balanced lifestyle"),t.length===0&&t.push("You're taking the first step by tracking your finances - that's commendable!"),t}function qw(e){const t=[];e.savingsRate<10&&t.push({area:"Increase Savings Rate",suggestion:`Aim to save at least 15-20% of income. Currently at ${e.savingsRate.toFixed(1)}%`,action:"Set up automatic transfers to savings account"}),e.balance<0&&t.push({area:"Address Negative Balance",suggestion:"You're spending more than you earn - immediate action needed",action:"Review and cut non-essential expenses immediately"});const n=e.topExpenseCategory?e.topExpenseCategory[1]/e.totalExpenses*100:0;return n>40&&t.push({area:"Diversify Spending",suggestion:`${e.topExpenseCategory[0]} represents ${n.toFixed(1)}% of expenses`,action:"Look for ways to reduce this dominant expense category"}),e.transactionCount<10&&t.push({area:"Improve Expense Tracking",suggestion:"More consistent transaction recording will provide better insights",action:"Set daily reminders to log expenses"}),t}function Ww(e,t,n,r){return{trend:t==="increasing"?"📈 Spending increased in the last week":"📉 Spending decreased in the last week",topCategory:`🏆 Highest expense category: ${n} (${r.toFixed(1)}% of total)`,avgTransaction:`💳 Average transaction: $${e.avgTransactionAmount.toFixed(2)}`,frequency:`📊 Transaction frequency: ${e.transactionCount} transactions recorded`}}function Hw(e){var n;const t=[];return e.savingsRate<10&&t.push("Automate a 10% transfer from each paycheck to savings"),(n=e.topExpenseCategory)!=null&&n[0]&&t.push(`Set a mini-challenge to cut ${e.topExpenseCategory[0]} spending by 10% next month`),e.avgTransactionAmount>50&&t.push("Review subscriptions and recurring charges for quick wins"),t.push("Allocate unexpected income (refunds, bonuses) directly toward goals"),t.push("Do a weekly 10-minute expense review to stay proactive"),t}function Vw(e){const t=[],n=e.totalIncome||1,r=Math.min(e.totalExpenses,n*.5),s=Math.max(0,e.totalExpenses-r),i=Math.max(0,n-e.totalExpenses);return t.push({rule:"50 / 30 / 20 Check-in",needs:`Needs · $${r.toFixed(2)} (${(r/n*100).toFixed(1)}%)`,wants:`Wants · $${s.toFixed(2)} (${(s/n*100).toFixed(1)}%)`,savings:`Savings · $${i.toFixed(2)} (${(i/n*100).toFixed(1)}%)`}),e.topExpenseCategory&&t.push({category:e.topExpenseCategory[0],current:`$${e.topExpenseCategory[1].toFixed(2)} spent`,suggestion:"Challenge yourself to reduce this category by 5% next cycle"}),t}function Gw(e){const t={shortTerm:[],longTerm:[]};return e.balance>0?t.shortTerm.push("Direct extra cash flow toward your top savings goal this month"):t.shortTerm.push("Pause discretionary spending for one week to rebuild balance"),e.savingsRate<15?t.longTerm.push("Build a 3-month emergency fund by saving a little every paycheck"):t.longTerm.push("Accelerate long-term investing with automated monthly transfers"),t.longTerm.push("Review and refresh your goals quarterly to stay motivated"),t}const Kw=14*24*60*60*1e3,em=(e,t=Date.now())=>e?t-e>Kw:!0;var Qw={VITE_SUPABASE_URL:"https://micbqxkhejumwddmwyxm.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pY2JxeGtoZWp1bXdkZG13eXhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMzQzOTMsImV4cCI6MjA3MDgxMDM5M30.w1Mc6TrXvkRwjqc6gIGA4baVaMuwVHxR76nH5kt8BJg",BASE_URL:"/pocket-budget/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Jw=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"],Yd=Jw.filter(e=>!Qw[e]);if(Yd.length)throw new Error(`Missing Supabase environment variables: ${Yd.join(", ")}`);const ve=$w("https://micbqxkhejumwddmwyxm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pY2JxeGtoZWp1bXdkZG13eXhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMzQzOTMsImV4cCI6MjA3MDgxMDM5M30.w1Mc6TrXvkRwjqc6gIGA4baVaMuwVHxR76nH5kt8BJg",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),st=typeof window<"u"?window.localStorage:null,Vu="fulltest-session-timestamp",_o="fulltest-demo-session",Gu=()=>{st&&st.setItem(Vu,Date.now().toString())},Dr=()=>{st&&st.removeItem(Vu)},tm=()=>{if(!st)return null;const e=st.getItem(Vu);if(!e)return null;const t=Number.parseInt(e,10);return Number.isNaN(t)?null:t},Ft={id:"fulltest-demo-user-id",email:"fulltest@test.com",password:"fullpass123",name:"Full Test Demo"},Yw=()=>({id:Ft.id,email:Ft.email,full_name:Ft.name,created_at:new Date().toISOString()}),Xw={income:[{name:"Salary",icon:"💼"},{name:"Freelance",icon:"💻"},{name:"Investment",icon:"📈"},{name:"Business",icon:"🏢"},{name:"Gift",icon:"🎁"}],expense:[{name:"Groceries",icon:"🛒"},{name:"Rent",icon:"🏠"},{name:"Transportation",icon:"🚗"},{name:"Entertainment",icon:"🎮"},{name:"Bills",icon:"🧾"},{name:"Shopping",icon:"🛍️"}]},So=e=>({income:[...(e==null?void 0:e.income)||[]].map(t=>({...t})),expense:[...(e==null?void 0:e.expense)||[]].map(t=>({...t}))}),ie={session:null,profile:Yw(),categories:So(Xw),budgets:[],goals:[],contributions:[],aiInsights:[]},Es=()=>{const e=!!ie.session;let t=!1;return st&&(t=!!st.getItem(_o)),ie.session=null,st&&st.removeItem(_o),e||t},nm=e=>{if(!e){Es(),Dr();return}ie.session=e,st&&st.setItem(_o,JSON.stringify(e)),Gu()},Zw=()=>{if(ie.session)return ie.session;if(!st)return null;try{const e=st.getItem(_o);if(!e)return null;const t=tm();if(em(t))return Es(),Dr(),null;const n=JSON.parse(e);return n!=null&&n.user?(ie.session=n,n):(Es(),Dr(),null)}catch(e){return console.error("Failed to hydrate demo session",e),Es(),Dr(),null}},e_={id:Ft.id,email:Ft.email,user_metadata:{full_name:Ft.name},created_at:new Date().toISOString()},t_=()=>({user:e_,access_token:"fulltest-demo-token",refresh_token:"fulltest-demo-refresh",token_type:"bearer",expires_in:3600}),Rt=e=>e===Ft.id,Ku=e=>({...e,transactions:[...e.transactions||[]],category_budgets:[...e.category_budgets||[]]}),Jn=e=>({...e,budgeted_amount:e.budgeted_amount??e.budgetedAmount??null,receipt_url:e.receipt_url??e.receipt??null}),Ho=e=>({...e,milestones:e.milestones&&e.milestones.length?e.milestones:[25,50,75,100]}),Qu=e=>({...Ho(e),goal_contributions:(ie.contributions||[]).filter(t=>t.goal_id===e.id).sort((t,n)=>new Date(n.contributed_at)-new Date(t.contributed_at))}),rm=e=>({...e,insights:e.insights||{}}),sm=e=>({...e,insights:e.insights||{}}),zi={burnPerDay:0,burnPerWeek:0,burnPerMonth:0,daysLeft:null,projectionDate:null,status:"safe",badgeLabel:"Safe Zone",sampleStart:null,sampleEnd:null,totalExpense:0,safeBalance:0},fn=e=>e==null?0:Number(e),n_=(e=[])=>{if(!Array.isArray(e)||e.length===0)return{...zi};const t=e.filter(p=>(p==null?void 0:p.type)==="expense"),n=e.filter(p=>(p==null?void 0:p.type)==="income").reduce((p,m)=>p+fn(m.amount),0),r=e.filter(p=>(p==null?void 0:p.type)==="expense").reduce((p,m)=>p+fn(m.amount),0),s=Math.max(0,n-r);if(t.length===0)return{...zi,safeBalance:s};const i=1e3*60*60*24,o=new Date;o.setDate(o.getDate()-30);const l=t.filter(p=>{const m=p!=null&&p.date?new Date(p.date):null;return m&&!Number.isNaN(m.getTime())&&m>=o}),u=l.length>0?l:t;let c=Number.POSITIVE_INFINITY,d=0,f=0;if(u.forEach(p=>{const m=p!=null&&p.date?new Date(p.date).getTime():Number.NaN;Number.isFinite(m)&&(c=Math.min(c,m),d=Math.max(d,m),f+=fn(p.amount))}),!Number.isFinite(c)||!Number.isFinite(d))return{...zi,safeBalance:s};const y=Math.max(1,Math.round((d-c)/i)+1),v=y>0?f/y:0,w=v>0?Math.floor(s/v):null,x=typeof w=="number"?new Date(Date.now()+w*i):null,T=typeof w=="number"&&w<15?"critical":"safe";return{burnPerDay:v,burnPerWeek:v*7,burnPerMonth:v*30,daysLeft:w,projectionDate:x,status:T,badgeLabel:T==="critical"?"Critical Burn":"Safe Zone",sampleStart:new Date(c),sampleEnd:new Date(d),totalExpense:f,safeBalance:s}},r_=e=>{if(!e)return null;const t=e.status||"safe",n=e.badge_label||(t==="critical"?"Critical Burn":"Safe Zone");return{burnPerDay:fn(e.burn_per_day),burnPerWeek:fn(e.burn_per_week),burnPerMonth:fn(e.burn_per_month),daysLeft:e.days_left===null||e.days_left===void 0?null:Number(e.days_left),projectionDate:e.projection_date?new Date(e.projection_date):null,status:t,badgeLabel:n,sampleStart:e.sample_start?new Date(e.sample_start):null,sampleEnd:e.sample_end?new Date(e.sample_end):null,totalExpense:fn(e.total_expense),safeBalance:fn(e.safe_balance)}},s_=async(e,t)=>e===Ft.email?Hl(e,t):ve.auth.signUp({email:e,password:t}),Hl=async(e,t)=>{var r;if(e===Ft.email&&t===Ft.password){const s=t_();return nm(s),typeof window<"u"&&window.dispatchEvent(new CustomEvent("demo-auth-change",{detail:{session:s,event:"SIGNED_IN"}})),{data:{user:s.user,session:s},error:null}}const n=await ve.auth.signInWithPassword({email:e,password:t});return!n.error&&((r=n.data)!=null&&r.session)&&Gu(),n},i_=async()=>ve.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}}),o_=async()=>(nm(null),typeof window<"u"&&window.dispatchEvent(new CustomEvent("demo-auth-change",{detail:{session:null,event:"SIGNED_OUT"}})),ve.auth.signOut()),a_=async()=>{const e=Zw();if(e!=null&&e.user)return{user:e.user,error:null};const{data:{user:t},error:n}=await ve.auth.getUser();return{user:t,error:n}},l_=async(e,t,n)=>Rt(e)?(ie.profile={id:e,email:t,full_name:n,created_at:new Date().toISOString()},{data:[ie.profile],error:null}):ve.from("user_profiles").insert([{id:e,email:t,full_name:n,created_at:new Date().toISOString()}]).select(),u_=async e=>Rt(e)?{data:ie.profile,error:null}:ve.from("user_profiles").select("*").eq("id",e).single(),Vo=()=>ie.budgets,im=e=>Vo().find(t=>t.id===e),c_=async e=>{if(Rt(e))return{data:Vo().map(Ku),error:null};const{data:t,error:n}=await ve.from("budgets").select("*, transactions (*)").eq("user_id",e).order("created_at",{ascending:!1});return{data:(t||[]).map(r=>({...r,transactions:(r.transactions||[]).map(Jn)})),error:n}},Xd=async(e,t)=>{const n={user_id:e,name:t.name,category_budgets:t.categoryBudgets||[],created_at:new Date().toISOString(),transactions:[]};if(Rt(e)){const i={...n,id:`demo-budget-${Date.now()}`};return ie.budgets=[i,...ie.budgets],{data:[Ku(i)],error:null}}const{data:r,error:s}=await ve.from("budgets").insert([{user_id:e,name:t.name,category_budgets:t.categoryBudgets||[]}]).select("*, transactions (*)");return{data:(r||[]).map(i=>({...i,transactions:(i.transactions||[]).map(Jn)})),error:s}},qi=async(e,t)=>{if(e.startsWith("demo-budget-")){const o=im(e);return o?(Object.assign(o,{name:t.name??o.name,category_budgets:t.categoryBudgets??o.category_budgets}),{data:[Ku(o)],error:null}):{data:null,error:{message:"Budget not found"}}}const n={name:t.name,category_budgets:t.categoryBudgets},r=Object.fromEntries(Object.entries(n).filter(([,o])=>o!==void 0)),{data:s,error:i}=await ve.from("budgets").update(r).eq("id",e).select("*, transactions (*)");return{data:(s||[]).map(o=>({...o,transactions:(o.transactions||[]).map(Jn)})),error:i}},d_=async e=>e.startsWith("demo-budget-")?(ie.budgets=ie.budgets.filter(t=>t.id!==e),ie.contributions=ie.contributions.filter(t=>t.linked_budget_id!==e),{error:null}):ve.from("budgets").delete().eq("id",e),om=async(e,t)=>{const n={budget_id:e,name:t.name,amount:t.amount,budgeted_amount:t.budgetedAmount??null,category:t.category,type:t.type,date:t.date,receipt_url:t.receipt??null,created_at:new Date().toISOString()};if(e.startsWith("demo-budget-")){const i=im(e);if(!i)return{data:null,error:{message:"Budget not found"}};const o={...n,id:`demo-tx-${Date.now()}`};return i.transactions=[...i.transactions||[],o],{data:[Jn(o)],error:null}}const{data:r,error:s}=await ve.from("transactions").insert([n]).select();return{data:(r||[]).map(Jn),error:s}},h_=async(e,t)=>{const n={name:t.name,amount:t.amount,budgeted_amount:t.budgetedAmount??null,category:t.category,type:t.type,date:t.date,receipt_url:t.receipt??null};if(e.startsWith("demo-tx-")){const o=Vo().find(u=>(u.transactions||[]).some(c=>c.id===e));if(!o)return{data:null,error:{message:"Transaction not found"}};o.transactions=(o.transactions||[]).map(u=>u.id===e?{...u,...n}:u);const l=o.transactions.find(u=>u.id===e);return{data:[Jn(l)],error:null}}const r=Object.fromEntries(Object.entries(n).filter(([,o])=>o!==void 0)),{data:s,error:i}=await ve.from("transactions").update(r).eq("id",e).select();return{data:(s||[]).map(Jn),error:i}},f_=async e=>{if(!e)return{data:null,error:{message:"User ID is required"}};if(Rt(e)){const i=Vo().flatMap(o=>o.transactions||[]);return{data:n_(i),error:null}}const{data:t,error:n}=await ve.rpc("get_cash_burn",{p_user_id:e});if(n)return{data:null,error:n};const r=Array.isArray(t)?t[0]:t;return{data:r_(r)??{...zi},error:null}},p_=async e=>Rt(e)?{data:{categories:So(ie.categories)},error:null}:ve.from("user_categories").select("*").eq("user_id",e).single(),m_=async(e,t)=>Rt(e)?(ie.categories=So(t),{data:[{categories:So(ie.categories)}],error:null}):ve.from("user_categories").upsert([{user_id:e,categories:t}]).select(),g_=async e=>{if(Rt(e))return{data:ie.goals.map(r=>Qu(r)),error:null};const{data:t,error:n}=await ve.from("goals").select("*, goal_contributions (*)").eq("user_id",e).order("created_at",{ascending:!1});return{data:(t||[]).map(r=>({...Ho(r),goal_contributions:(r.goal_contributions||[]).sort((s,i)=>new Date(i.contributed_at)-new Date(s.contributed_at))})),error:n}},y_=async(e,t)=>{const n={user_id:e,name:t.name,target_amount:t.targetAmount,target_date:t.targetDate,status:t.status||"active",milestones:t.milestones||[25,50,75,100],linked_budget_id:t.linkedBudgetId||null,created_at:new Date().toISOString()};if(Rt(e)){const i={...n,id:`demo-goal-${Date.now()}`};return ie.goals=[i,...ie.goals],{data:[Qu(i)],error:null}}const{data:r,error:s}=await ve.from("goals").insert([n]).select("*, goal_contributions (*)");return{data:(r||[]).map(i=>({...Ho(i),goal_contributions:(i.goal_contributions||[]).sort((o,l)=>new Date(l.contributed_at)-new Date(o.contributed_at))})),error:s}},v_=async(e,t)=>{const n={name:t.name,target_amount:t.targetAmount,target_date:t.targetDate,status:t.status,milestones:t.milestones,linked_budget_id:t.linkedBudgetId??null};if(e.startsWith("demo-goal-")){const o=ie.goals.findIndex(u=>u.id===e);if(o===-1)return{data:null,error:{message:"Goal not found"}};const l=Object.fromEntries(Object.entries(n).filter(([,u])=>u!==void 0));return ie.goals[o]={...ie.goals[o],...l},{data:[Qu(ie.goals[o])],error:null}}const r=Object.fromEntries(Object.entries(n).filter(([,o])=>o!==void 0)),{data:s,error:i}=await ve.from("goals").update(r).eq("id",e).select("*, goal_contributions (*)");return{data:(s||[]).map(o=>({...Ho(o),goal_contributions:(o.goal_contributions||[]).sort((l,u)=>new Date(u.contributed_at)-new Date(l.contributed_at))})),error:i}},w_=async e=>e.startsWith("demo-goal-")?(ie.goals=ie.goals.filter(t=>t.id!==e),ie.contributions=ie.contributions.filter(t=>t.goal_id!==e),{error:null}):ve.from("goals").delete().eq("id",e),__=async(e,t)=>{const n={goal_id:e,amount:t.amount,contributed_at:t.date||new Date().toISOString(),note:t.note||null,created_at:new Date().toISOString()};if(e.startsWith("demo-goal-")){const i={...n,id:`demo-goal-contribution-${Date.now()}`};return ie.contributions=[i,...ie.contributions],{data:[i],error:null}}const{data:r,error:s}=await ve.from("goal_contributions").insert([n]).select();return{data:r,error:s}},S_=async(e,t,n={})=>{const r=n.limit??10;if(!e||!t)return{data:[],error:null};if(Rt(e)||t.startsWith("demo-budget-"))return{data:ie.aiInsights.filter(u=>u.user_id===e&&u.budget_id===t).sort((u,c)=>new Date(c.created_at)-new Date(u.created_at)).slice(0,r).map(rm),error:null};let s=ve.from("ai_insights").select("*").eq("user_id",e).eq("budget_id",t).order("created_at",{ascending:!1});r&&(s=s.limit(r));const{data:i,error:o}=await s;return{data:(i||[]).map(sm),error:o}},x_=async({userId:e,budgetId:t,metrics:n={},tier:r="free"})=>{if(!e||!t)return{data:null,error:{message:"Missing user or budget context"}};const s=["paid","trial","pro","premium","plus"].includes(String(r).toLowerCase())?"paid":"free";if(Rt(e)||t.startsWith("demo-budget-")){const u=await Mw(n),c=rm({id:`demo-insight-${Date.now()}`,user_id:e,budget_id:t,tier:s,model:s==="paid"?"gpt-4o":"gpt-4o-mini",prompt:{tier:s,metrics:n},insights:u,raw_response:JSON.stringify(u),usage:null,created_at:new Date().toISOString()});return ie.aiInsights=[c,...ie.aiInsights].slice(0,20),{data:c,error:null}}const{data:i,error:o}=await ve.functions.invoke("ai-insights",{body:{budgetId:t,userId:e,tier:s,metrics:n}});if(o)return{data:null,error:o};const l=i!=null&&i.insight?sm(i.insight):null;return l?{data:l,error:null}:{data:null,error:{message:"No insight was returned"}}},am=E.createContext(void 0),k_=1e4,j_=1e4,b_=e=>{const t=new Error(e);return t.name="TimeoutError",t},Zd=(e,t)=>Promise.race([e,new Promise((n,r)=>setTimeout(()=>r(b_(t)),j_))]);function Kr(){const e=E.useContext(am);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function lm({children:e}){const[t,n]=E.useState(null),[r,s]=E.useState(null),[i,o]=E.useState(!0),[l,u]=E.useState(!0),[c,d]=E.useState("checking-session"),f=E.useRef(!0),y=E.useCallback(p=>{f.current&&p()},[]),v=E.useCallback(p=>{y(()=>s(p))},[y]),w=E.useCallback(async p=>{var S;if(!p){v(null);return}let m=!0,g="ready";try{d("loading-profile");const{data:C,error:j}=await Zd(u_(p.id),"Profile lookup timed out");if(j&&j.code==="PGRST116"){const b=((S=p.user_metadata)==null?void 0:S.full_name)||p.email,{data:O,error:F}=await Zd(l_(p.id,p.email,b),"Profile creation timed out");if(F){console.error("Error creating profile",F),v(null);return}v((O==null?void 0:O[0])||null);return}if(j){console.error("Error loading profile",j),v(null);return}v(C)}catch(C){if((C==null?void 0:C.name)==="TimeoutError"){console.warn("Supabase did not respond in time while loading the profile. Falling back to signed-out state.",C),v(null),y(()=>o(!1)),d("profile-timeout"),m=!1,g="profile-timeout";return}console.error("Unexpected profile error",C),v(null)}finally{m&&(y(()=>o(!1)),d(g))}},[v,y]),x=E.useCallback(async p=>{y(()=>n(p)),p?(y(()=>o(!0)),await w(p)):(v(null),y(()=>o(!1)),d("signed-out"))},[v,w,y]);E.useEffect(()=>{f.current=!0,(async()=>{try{d("checking-session");const S=tm();if(em(S)){const O=Es();if(Dr(),!O)try{await ve.auth.signOut()}catch(F){console.warn("Failed to clear Supabase session while expiring stored session",F)}if(!f.current)return;y(()=>{n(null),s(null),o(!1)}),d("signed-out");return}const j=new Promise((O,F)=>setTimeout(()=>F(new Error("Session lookup timed out")),k_)),{user:b}=await Promise.race([a_(),j]);if(!f.current)return;await x(b)}catch(S){if(console.warn("Failed to resolve initial session",S),!f.current)return;y(()=>{n(null),s(null),o(!1)}),d("signed-out")}finally{f.current&&u(!1)}})();const{data:m}=ve.auth.onAuthStateChange(async(S,C)=>{S==="SIGNED_IN"&&Gu(),S==="SIGNED_OUT"&&Dr(),f.current&&(d("auth-transition"),await x((C==null?void 0:C.user)??null))}),g=async S=>{if(!f.current)return;const{session:C}=S.detail||{};d("auth-transition"),await x((C==null?void 0:C.user)??null)};return typeof window<"u"&&window.addEventListener("demo-auth-change",g),()=>{f.current=!1,m.subscription.unsubscribe(),typeof window<"u"&&window.removeEventListener("demo-auth-change",g)}},[x,y]);const T=E.useMemo(()=>({user:t,userProfile:r,loading:i,initializing:l,status:c}),[t,r,i,l,c]);return a.jsx(am.Provider,{value:T,children:e})}lm.propTypes={children:k.node.isRequired};const N_=24*60*60*1e3,E_={weekly:7,biweekly:14,semimonthly:15,"semi-monthly":15,quarterly:91,yearly:365,annual:365},La={green:{label:"On Track"},yellow:{label:"Watch"},red:{label:"Over"}},eh=(e="")=>e.toLowerCase().trim(),C_=(e,t,n)=>Math.min(Math.max(e,t),n),us=e=>{if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t},th=(e,t)=>{const n=new Date(e);return n.setDate(n.getDate()+t),n},$a=(e,t)=>{const n=new Date(e);return n.setMonth(n.getMonth()+t),n},T_=e=>(((e==null?void 0:e.cycle)||(e==null?void 0:e.cycleMetadata)||{}).type||(e==null?void 0:e.cycleType)||"monthly").toLowerCase(),P_=(e,t)=>{const n=(e==null?void 0:e.cycle)||(e==null?void 0:e.cycleMetadata)||{};return us(n.currentStart)||us(n.startDate)||us(e==null?void 0:e.cycleStartDate)||us(e==null?void 0:e.createdAt)||us(e==null?void 0:e.created_at)||new Date(t)},um=(e,t)=>{const n=(t==null?void 0:t.cycle)||(t==null?void 0:t.cycleMetadata)||{};return typeof n.lengthDays=="number"?n.lengthDays:typeof n.days=="number"?n.days:e==="custom"&&typeof n.customDays=="number"?n.customDays:e==="per-paycheck"&&typeof n.payFrequencyDays=="number"||e==="per_paycheck"&&typeof n.payFrequencyDays=="number"?n.payFrequencyDays:typeof n.cadenceDays=="number"?n.cadenceDays:typeof n.intervalDays=="number"?n.intervalDays:e==="monthly"?30:e==="biweekly"?14:e==="weekly"?7:e==="per-paycheck"||e==="per_paycheck"?14:e==="custom"?30:E_[e]||30},nh=(e,t,n)=>{const r=(n==null?void 0:n.cycle)||(n==null?void 0:n.cycleMetadata)||{};switch(t){case"monthly":return $a(e,r.repeatEvery||1);case"quarterly":return $a(e,3);case"yearly":case"annual":return $a(e,12);case"semimonthly":case"semi-monthly":{const s=r.days||r.lengthDays||15;return th(e,s)}default:{const s=um(t,n);return th(e,s)}}},A_=(e,t)=>{const n=T_(e);let r=P_(e,t),s=nh(r,n,e),i=0;for(;s&&t>=s&&i<500;)r=s,s=nh(r,n,e),i+=1;const o=s?s.getTime()-r.getTime():um(n,e)*N_,l=t.getTime()-r.getTime(),u=o>0?C_(l/o,0,1):1;return{cycleType:n,currentStart:r,nextStart:s,totalMs:o,elapsedMs:l,progress:u}},Wi=e=>`$${Number.parseFloat(e||0).toFixed(2)}`,O_=(e,t,n,r)=>{const s=Math.round(r*100);return`Spent ${Wi(e)} of ${Wi(t)} with ${s}% of the cycle elapsed (expected ${Wi(n)}).`},rh=(e,t,n)=>{const r=Number.isFinite(t)?t:0,s=Number.isFinite(e)?e:0,i=r*n;if(r<=0){if(s<=0){const d="green";return{status:d,...La[d],tooltip:"No budget set for this period.",actual:s,budgeted:r,expected:i}}const c="red";return{status:c,...La[c],tooltip:`Spending ${Wi(s)} without a set budget for this cycle.`,actual:s,budgeted:r,expected:i}}const o=s/r,l=.1;let u="green";return o>n+l?u="red":o>n&&(u="yellow"),{status:u,...La[u],tooltip:O_(s,r,i,n),actual:s,budgeted:r,expected:i}},cm=(e,t=new Date)=>{const n=e||{},r=(n.transactions||[]).filter(y=>y.type==="expense"),s=A_(n,t),i=s.progress??1,l=(n.categoryBudgets||[]).map(y=>{const v=eh(y.category),w=r.filter(p=>eh(p.category)===v).reduce((p,m)=>p+(Number.isFinite(m.amount)?m.amount:0),0),x=Number.isFinite(y.budgetedAmount)?y.budgetedAmount:Number.isFinite(y.amount)?y.amount:0,T=rh(w,x,i);return{name:y.category,key:v,actual:w,budgeted:x,...T}}),u=l.reduce((y,v)=>(v.key&&(y[v.key]=v),y),{}),c=l.reduce((y,v)=>y+v.budgeted,0),d=r.reduce((y,v)=>y+(Number.isFinite(v.amount)?v.amount:0),0),f=rh(d,c,i);return{cycle:{type:s.cycleType,start:s.currentStart,end:s.nextStart,progress:i},categories:l,categoriesByName:u,overall:f}},R_=["trial","paid","pro","premium","plus"],sh=[{category:"Rent",budgetedAmount:1200},{category:"Groceries",budgetedAmount:450},{category:"Transportation",budgetedAmount:180},{category:"Bills",budgetedAmount:320},{category:"Entertainment",budgetedAmount:150},{category:"Shopping",budgetedAmount:120},{category:"Dining Out",budgetedAmount:160},{category:"Emergency Fund",budgetedAmount:100}],dm=[{type:"monthly",label:"Monthly",description:"Free forever. Resets on the first of each month.",requiresPaid:!1},{type:"per-paycheck",label:"Per-paycheck",description:"Sync budgets to each paycheck during trial or paid tiers.",requiresPaid:!0},{type:"custom",label:"Custom",description:"Choose any cycle length you need (paid).",requiresPaid:!0}],Ni=e=>{const t=dm.find(n=>n.type===e);return t?t.label:e?e.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Monthly"},Ei=e=>({name:e===0?"My First Budget":"My Budget",cycleType:"monthly",startDate:new Date().toISOString().split("T")[0],payFrequencyDays:14,customDays:30,includeDefaultCategories:!0,adsEnabled:!0}),ih=e=>`$${Number.parseFloat(e||0).toFixed(2)}`;function Ju({budgets:e,setSelectedBudget:t,setViewMode:n,setBudgets:r,userId:s,onMetadataChange:i,onMetadataRemove:o,onDataMutated:l}){const{userProfile:u}=Kr(),c=(u==null?void 0:u.plan_tier)||(u==null?void 0:u.planTier)||"free",d=R_.includes(String(c).toLowerCase()),f=!d,[y,v]=E.useState(null),[w,x]=E.useState(""),[T,p]=E.useState(null),[m,g]=E.useState(!1),[S,C]=E.useState(!1),[j,b]=E.useState(()=>Ei(e.length)),O=E.useMemo(()=>e.reduce((N,z)=>{var $;const P=(($=z==null?void 0:z.cycleMetadata)==null?void 0:$.type)||"monthly";return N[P]=(N[P]||0)+1,N},{}),[e]),F=N=>{t(N),n("details")},I=()=>{b(Ei(e.length)),C(!1)},J=async()=>{g(!0);try{const N=j.includeDefaultCategories?sh.map(B=>({...B})):[],z={name:j.name.trim()||"My Budget",categoryBudgets:N},{data:P,error:$}=await Xd(s,z);if($)console.error("Error creating budget:",$),alert("Failed to create budget. Please try again.");else if(P!=null&&P[0]){const B={id:P[0].id,name:P[0].name,createdAt:new Date(P[0].created_at).toLocaleDateString(),categoryBudgets:P[0].category_budgets||N,transactions:[]};r(ce=>[B,...ce]);const X=new Date().toISOString(),Z={type:j.cycleType,label:Ni(j.cycleType),currentStart:j.startDate?new Date(j.startDate).toISOString():X,payFrequencyDays:j.cycleType==="per-paycheck"?Number(j.payFrequencyDays)||14:void 0,customDays:j.cycleType==="custom"?Number(j.customDays)||30:void 0,lastEditedAt:X};i==null||i(B.id,ce=>({...ce,cycle:{...ce.cycle,...Z},ads:{...ce.ads,enabled:j.adsEnabled},changeLog:[{at:X,message:`Budget created (${Z.label}) with ${N.length||"no"} starter categories`,type:"create"},...ce.changeLog||[]]})),t({...B,cycleMetadata:Z}),n("details"),l==null||l()}}catch(N){console.error("Error creating budget:",N),alert("Failed to create budget. Please try again.")}finally{g(!1),I()}},le=async N=>{if(!w.trim()){v(null);return}g(!0);try{const{error:z}=await qi(N.id,{name:w.trim(),categoryBudgets:N.categoryBudgets});if(z)console.error("Error updating budget:",z),alert("Failed to update budget name. Please try again.");else{r($=>$.map(B=>B.id===N.id?{...B,name:w.trim()}:B));const P=new Date().toISOString();i==null||i(N.id,$=>({...$,changeLog:[{at:P,message:`Renamed budget to "${w.trim()}"`,type:"rename"},...$.changeLog||[]]})),l==null||l()}}catch(z){console.error("Error updating budget:",z),alert("Failed to update budget name. Please try again.")}finally{v(null),g(!1)}},we=async N=>{g(!0);try{const z={name:`${N.name} (Copy)`,categoryBudgets:N.categoryBudgets||[]},{data:P,error:$}=await Xd(s,z);if($)console.error("Error duplicating budget:",$),alert("Failed to duplicate budget. Please try again.");else if(P!=null&&P[0]){const B={id:P[0].id,name:P[0].name,createdAt:new Date(P[0].created_at).toLocaleDateString(),categoryBudgets:P[0].category_budgets||[],transactions:[]};r(ce=>[B,...ce]);const X=new Date().toISOString(),Z=N.cycleMetadata||{type:"monthly",label:Ni("monthly")};i==null||i(B.id,ce=>{var Oe,Y;return{...ce,cycle:{...ce.cycle,...Z,lastEditedAt:X},ads:{...ce.ads,enabled:N.adsEnabled!==!1},insights:{...ce.insights,...N.insightsPreferences||{},nudges:{...(Oe=ce.insights)==null?void 0:Oe.nudges,...((Y=N.insightsPreferences)==null?void 0:Y.nudges)||{}}},changeLog:[{at:X,message:`Duplicated from ${N.name}`,type:"duplicate"},...ce.changeLog||[]]}}),l==null||l()}}catch(z){console.error("Error duplicating budget:",z),alert("Failed to duplicate budget. Please try again.")}finally{p(null),g(!1)}},Ae=async N=>{g(!0);try{const{error:z}=await d_(N);z?(console.error("Error deleting budget:",z),alert("Failed to delete budget. Please try again.")):(r(P=>P.filter($=>$.id!==N)),o==null||o(N),l==null||l())}catch(z){console.error("Error deleting budget:",z),alert("Failed to delete budget. Please try again.")}finally{p(null),g(!1)}},U=Object.keys(O);return a.jsxs("div",{children:[a.jsxs("div",{className:"header-section",children:[a.jsx("p",{className:"tagline",children:"Manage your budgets and stay on top of your finances."}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{className:"secondary-button",onClick:()=>n("goals"),children:"View savings goals"})})]}),e.length>0&&a.jsxs("div",{className:"cycle-summary-card",children:[a.jsx("div",{className:"cycle-summary-title",children:"Budget cycles"}),a.jsxs("div",{className:"cycle-summary-stats",children:[U.length===0&&a.jsx("span",{children:"No active budgets yet."}),U.map(N=>a.jsxs("span",{className:`cycle-chip cycle-${N}`,children:[Ni(N)," · ",O[N]]},N))]})]}),e.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("p",{children:"Welcome to Pocket Budget! Create your first budget to get started."}),a.jsx("button",{className:"primary-button",onClick:()=>{b(Ei(e.length)),C(!0)},disabled:m,children:"Start a Monthly Budget"})]}):e.map(N=>{var er;const z=cm(N),P=z.overall,$=(N.transactions||[]).filter(H=>H.type==="income").reduce((H,R)=>H+R.amount,0),B=(N.transactions||[]).filter(H=>H.type==="expense").reduce((H,R)=>H+R.amount,0),X=$-B,Z=(N.categoryBudgets||[]).map(H=>{var V;const R=(N.transactions||[]).filter(te=>te.type==="expense"&&te.category.toLowerCase().trim()===H.category.toLowerCase().trim()).reduce((te,K)=>te+K.amount,0),M=R>H.budgetedAmount,G=((V=H.category)==null?void 0:V.toLowerCase().trim())||"";return{...H,actual:R,isOver:M,pacing:z.categoriesByName[G]}}),ce=Z.some(H=>{var R;return H.isOver||((R=H.pacing)==null?void 0:R.status)==="red"}),Oe=Z.reduce((H,R)=>H+(R.budgetedAmount||0),0),Y=Z.reduce((H,R)=>H+(R.actual||0),0),ee=Oe-Y,Re=((er=N.cycleMetadata)==null?void 0:er.type)||"monthly",Qr=Ni(Re);return a.jsx("div",{className:"budgetCard",children:a.jsxs("div",{className:"budgetCard-content",children:[a.jsxs("div",{className:"budgetCard-info",onClick:()=>F(N),children:[a.jsxs("div",{className:"budgetCycleRow",children:[a.jsxs("span",{className:`cycle-pill cycle-${Re}`,children:[Qr,Re!=="monthly"&&f&&a.jsx("span",{className:"lock-icon","aria-hidden":"true",children:"🔒"})]}),a.jsxs("div",{className:`pacing-indicator pacing-${P.status}`,title:P.tooltip,role:"status",children:[a.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),a.jsx("span",{className:"pacing-label",children:P.label})]})]}),y===N.id?a.jsx("input",{className:"input budget-name-input",value:w,onChange:H=>x(H.target.value),onBlur:()=>le(N),onKeyPress:H=>{H.key==="Enter"&&le(N)},autoFocus:!0,disabled:m}):a.jsx("div",{className:"budgetNameRow",children:a.jsxs("div",{className:"budgetName",onClick:H=>{H.stopPropagation(),v(N.id),x(N.name)},children:[N.name,ce&&a.jsx("span",{className:"expense",style:{marginLeft:"0.5rem"},children:"🚩"})]})}),a.jsxs("div",{className:"budgetBalance",children:["Balance: ",a.jsxs("span",{className:X>=0?"income":"expense",children:["$",X.toFixed(2)]})]}),a.jsxs("div",{className:"budgetSummaryRow",role:"list",children:[a.jsxs("span",{className:"budgetSummaryItem",role:"listitem",children:["Spent ",a.jsx("strong",{children:ih(Y)})]}),a.jsxs("span",{className:"budgetSummaryItem",role:"listitem",children:["Remaining ",a.jsx("strong",{children:ih(ee)})]}),a.jsxs("span",{className:`budgetSummaryItem guardrail-${P.status}`,role:"listitem",children:["Guardrail ",a.jsx("strong",{children:P.label})]})]}),a.jsxs("div",{className:"budgetDate",children:["Created: ",N.createdAt]}),Z.length>0&&a.jsxs("div",{className:"category-budgets",children:[Z.slice(0,3).map(H=>{const R=!!H.budgetedAmount&&H.budgetedAmount>0,M=R?Math.min(H.actual/H.budgetedAmount*100,100):0;return a.jsxs("div",{className:"category-budget-row",children:[a.jsxs("div",{className:"category-budget-header",children:[a.jsxs("div",{className:"category-budget-name",children:[H.category,H.isOver&&a.jsx("span",{className:"expense",style:{marginLeft:"0.3rem"},children:"⚠"})]}),H.pacing&&a.jsxs("div",{className:`pacing-indicator pacing-${H.pacing.status}`,title:H.pacing.tooltip,role:"status","aria-label":`${H.category} pacing is ${H.pacing.label}`,onClick:G=>G.stopPropagation(),children:[a.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),a.jsx("span",{className:"pacing-label",children:H.pacing.label})]})]}),a.jsxs("div",{className:"category-budget-amounts",children:["$",H.actual.toFixed(2)," / $",H.budgetedAmount.toFixed(2)]}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:`progress-fill ${H.isOver?"over":""}`,style:{width:`${M}%`},"aria-label":R?void 0:`${H.category} has no budget set`})})]},H.category)}),Z.length>3&&a.jsxs("div",{className:"category-budget-more",children:["+",Z.length-3," more categories"]})]}),f&&N.adsEnabled&&a.jsxs("div",{className:"budget-ad-unit",role:"note","aria-label":"Sponsored offer",children:[a.jsx("div",{className:"budget-ad-badge",children:"Sponsored"}),a.jsxs("div",{className:"budget-ad-copy",children:[a.jsx("strong",{children:"Boost your savings."})," Earn 3.5% on emergency funds with Pocket Partner Bank."]})]})]}),a.jsxs("div",{className:"menuContainer",children:[a.jsx("button",{className:"menuButton",onClick:H=>{H.stopPropagation(),p(T===N.id?null:N.id)},title:"More options",disabled:m,children:"⋮"}),T===N.id&&a.jsxs("div",{className:"dropdownMenu",children:[a.jsx("button",{className:"dropdownItem",onClick:H=>{H.stopPropagation(),we(N)},disabled:m,children:"Copy Budget"}),a.jsx("button",{className:"dropdownItem delete",onClick:H=>{H.stopPropagation(),confirm(`Are you sure you want to delete "${N.name}"?`)&&Ae(N.id)},disabled:m,children:"Delete Budget"})]})]})]})},N.id)}),e.length>0&&a.jsxs("div",{className:"budget-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:()=>{b(Ei(e.length)),C(!0)},disabled:m,children:"New Budget"}),a.jsx("button",{className:"cancelButton secondary-button cate-btn",onClick:()=>n("categories"),children:"Manage Categories"})]}),S&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent enhanced-modal",children:[a.jsx("h2",{className:"header modal-header",children:"Create a budget"}),a.jsx("label",{className:"input-label",htmlFor:"new-budget-name",children:"Budget name"}),a.jsx("input",{id:"new-budget-name",className:"input",placeholder:"My Budget",value:j.name,onChange:N=>b(z=>({...z,name:N.target.value}))}),a.jsxs("div",{className:"cycle-option-group",children:[a.jsx("span",{className:"input-label",children:"Cycle"}),a.jsx("div",{className:"cycle-option-grid",children:dm.map(N=>{const z=N.requiresPaid&&!d,P=j.cycleType===N.type;return a.jsxs("button",{type:"button",className:`cycle-option ${P?"selected":""} ${z?"locked":""}`,onClick:()=>{z||b($=>({...$,cycleType:N.type}))},disabled:z,children:[a.jsxs("div",{className:"cycle-option-title",children:[N.label,z&&a.jsx("span",{className:"lock-icon","aria-hidden":"true",children:"🔒"})]}),a.jsx("div",{className:"cycle-option-description",children:N.description})]},N.type)})}),!d&&a.jsx("p",{className:"plan-teaser",children:"Upgrade or start a trial to unlock paycheck & custom cycles."})]}),j.cycleType==="per-paycheck"&&a.jsxs("div",{className:"cycle-config-row",children:[a.jsx("label",{className:"input-label",htmlFor:"cycle-pay-frequency",children:"Paycheck frequency (days)"}),a.jsx("input",{id:"cycle-pay-frequency",type:"number",className:"input",min:"7",max:"45",value:j.payFrequencyDays,onChange:N=>b(z=>({...z,payFrequencyDays:N.target.value}))})]}),j.cycleType==="custom"&&a.jsxs("div",{className:"cycle-config-row",children:[a.jsx("label",{className:"input-label",htmlFor:"cycle-custom-length",children:"Cycle length (days)"}),a.jsx("input",{id:"cycle-custom-length",type:"number",className:"input",min:"5",max:"120",value:j.customDays,onChange:N=>b(z=>({...z,customDays:N.target.value}))})]}),a.jsxs("div",{className:"cycle-config-row",children:[a.jsx("label",{className:"input-label",htmlFor:"cycle-start-date",children:"Cycle start date"}),a.jsx("input",{id:"cycle-start-date",type:"date",className:"input",value:j.startDate,onChange:N=>b(z=>({...z,startDate:N.target.value}))})]}),a.jsxs("label",{className:"checkbox-row",children:[a.jsx("input",{type:"checkbox",checked:j.includeDefaultCategories,onChange:N=>b(z=>({...z,includeDefaultCategories:N.target.checked}))}),a.jsxs("span",{children:["Include starter categories (",sh.length,")"]})]}),f&&a.jsxs("label",{className:"checkbox-row",children:[a.jsx("input",{type:"checkbox",checked:j.adsEnabled,onChange:N=>b(z=>({...z,adsEnabled:N.target.checked}))}),a.jsx("span",{children:"Show relevant offers in my summary (helps keep Free free)"})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:J,disabled:m||!d&&j.cycleType!=="monthly",children:m?"Creating...":"Create budget"}),a.jsx("button",{className:"cancelButton secondary-button",onClick:I,disabled:m,children:"Cancel"})]})]})})]})}const D_=k.shape({id:k.string.isRequired,name:k.string.isRequired,amount:k.number.isRequired,budgetedAmount:k.number,category:k.string.isRequired,type:k.oneOf(["income","expense"]).isRequired,date:k.string.isRequired,receipt:k.string}),I_=k.shape({category:k.string.isRequired,budgetedAmount:k.number.isRequired});Ju.propTypes={budgets:k.arrayOf(k.shape({id:k.string.isRequired,name:k.string.isRequired,createdAt:k.string.isRequired,transactions:k.arrayOf(D_),categoryBudgets:k.arrayOf(I_),cycleMetadata:k.object,adsEnabled:k.bool})).isRequired,setSelectedBudget:k.func.isRequired,setViewMode:k.func.isRequired,setBudgets:k.func.isRequired,userId:k.string.isRequired,onMetadataChange:k.func,onMetadataRemove:k.func,onDataMutated:k.func};Ju.defaultProps={onMetadataChange:void 0,onMetadataRemove:void 0,onDataMutated:void 0};const L_=["trial","paid","pro","premium","plus"],hm=[{type:"monthly",label:"Monthly",requiresPaid:!1},{type:"per-paycheck",label:"Per-paycheck",requiresPaid:!0},{type:"custom",label:"Custom",requiresPaid:!0}],Ua=e=>{const t=hm.find(n=>n.type===e);return t?t.label:e?e.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Monthly"},Ma=["▁","▂","▃","▄","▅","▆","▇","█"],$_=e=>{if(!(e!=null&&e.length))return"▁▁▁▁▁▁";const t=Math.max(...e);return t<=0?"▁".repeat(e.length):e.map(n=>{const r=Math.max(0,n)/t,s=Math.min(Ma.length-1,Math.round(r*(Ma.length-1)));return Ma[s]}).join("")},oh={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},dr=e=>`$${Number.parseFloat(e||0).toFixed(2)}`,Vl=()=>new Date().toISOString().split("T")[0],Ci=(e,t)=>{if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const n=e?new Date(e):null;if(n&&!Number.isNaN(n.getTime()))return n.toISOString().split("T")[0];if(t!==void 0){if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const r=t?new Date(t):null;if(r&&!Number.isNaN(r.getTime()))return r.toISOString().split("T")[0]}return Vl()},U_=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleDateString()};function Yu({budget:e,categories:t,setViewMode:n,setBudgets:r,budgets:s,setSelectedBudget:i,onMetadataChange:o,onDataMutated:l}){var Sc,xc,kc;const{user:u,userProfile:c}=Kr(),d=(c==null?void 0:c.plan_tier)||(c==null?void 0:c.planTier)||"free",f=L_.includes(String(d).toLowerCase()),y=!f,v=E.useMemo(()=>e.metadata||{},[e.metadata]),w=E.useMemo(()=>e.insightsPreferences||v.insights||{},[e.insightsPreferences,v.insights]),x=E.useMemo(()=>e.changeLog||v.changeLog||[],[e.changeLog,v.changeLog]),[T,p]=E.useState("expenses"),[m,g]=E.useState(!1),[S,C]=E.useState(null),[j,b]=E.useState(1),[O,F]=E.useState(!1),[I,J]=E.useState({name:"",amount:"",budgetedAmount:"",category:"",date:Vl(),type:"expense",receipt:null}),[le,we]=E.useState(null),[Ae,U]=E.useState(e.name||""),[N,z]=E.useState(()=>(e.categoryBudgets||[]).map(h=>({...h}))),[P,$]=E.useState(!1),[B,X]=E.useState(null),[Z,ce]=E.useState(!1),[Oe,Y]=E.useState(!1),[ee,Re]=E.useState(null),[Qr,er]=E.useState(null),[H,R]=E.useState(null),[M,G]=E.useState(()=>new Set(w.trackedCategories||[])),[V,te]=E.useState(()=>{var h,_;return{day:((h=w.reportSchedule)==null?void 0:h.day)||"sunday",time:((_=w.reportSchedule)==null?void 0:_.time)||"08:00"}}),[K,Qe]=E.useState(()=>{var h,_,A,L;return{enabled:!!((h=w.nudges)!=null&&h.enabled),threshold:((_=w.nudges)==null?void 0:_.threshold)||.8,quietStart:((A=w.quietHours)==null?void 0:A.start)??21,quietEnd:((L=w.quietHours)==null?void 0:L.end)??7}}),[ue,Dt]=E.useState(()=>{var h,_,A,L,W,ne;return{type:((h=e.cycleMetadata)==null?void 0:h.type)||"monthly",startDate:(_=e.cycleMetadata)!=null&&_.currentStart?new Date(e.cycleMetadata.currentStart).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],payFrequencyDays:((A=e.cycleMetadata)==null?void 0:A.payFrequencyDays)||14,customDays:((L=e.cycleMetadata)==null?void 0:L.customDays)||((W=e.cycleMetadata)==null?void 0:W.lengthDays)||((ne=e.cycleMetadata)==null?void 0:ne.cycleLength)||30}}),[tr,lt]=E.useState(!1),[Sm,Go]=E.useState(!1),[nc,Ko]=E.useState(""),[rc,Qo]=E.useState(""),[tn,Jo]=E.useState(null),[sc,Yo]=E.useState(null),[ic,oc]=E.useState(!1),De=E.useMemo(()=>(e.transactions||[]).map(h=>({...h,date:Ci(h.date)})),[e.transactions]),xm=E.useMemo(()=>({...e,transactions:De}),[e,De]);E.useEffect(()=>{z((e.categoryBudgets||[]).map(h=>({...h}))),$(!1)},[e.id,e.categoryBudgets]),E.useEffect(()=>{U(e.name||"")},[e.id,e.name]),E.useEffect(()=>{var h,_,A,L,W,ne,_e,he,ae,Ce,me,Me;G(new Set(w.trackedCategories||[])),te({day:((h=w.reportSchedule)==null?void 0:h.day)||"sunday",time:((_=w.reportSchedule)==null?void 0:_.time)||"08:00"}),Qe({enabled:!!((A=w.nudges)!=null&&A.enabled),threshold:((L=w.nudges)==null?void 0:L.threshold)||.8,quietStart:((W=w.quietHours)==null?void 0:W.start)??21,quietEnd:((ne=w.quietHours)==null?void 0:ne.end)??7}),Dt({type:((_e=e.cycleMetadata)==null?void 0:_e.type)||"monthly",startDate:(he=e.cycleMetadata)!=null&&he.currentStart?new Date(e.cycleMetadata.currentStart).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],payFrequencyDays:((ae=e.cycleMetadata)==null?void 0:ae.payFrequencyDays)||14,customDays:((Ce=e.cycleMetadata)==null?void 0:Ce.customDays)||((me=e.cycleMetadata)==null?void 0:me.lengthDays)||((Me=e.cycleMetadata)==null?void 0:Me.cycleLength)||30}),lt(!1)},[e.id,e.cycleMetadata,w]);const Xo=7,Pn=E.useCallback(h=>{o&&o(e.id,h)},[o,e.id]),km=(h,_)=>{const A=Number.parseFloat(_);z(L=>L.map(W=>W.category===h?{...W,budgetedAmount:Number.isFinite(A)?A:0}:W)),$(!0)},jm=()=>{const h=nc.trim();h&&(z(_=>{if(_.some(W=>W.category.toLowerCase()===h.toLowerCase()))return _;const A=Number.parseFloat(rc),L={category:h,budgetedAmount:Number.isFinite(A)?A:0};return $(!0),[..._,L]}),Ko(""),Qo(""),Go(!1))},bm=()=>{Go(!1),Ko(""),Qo("")},Nm=h=>{const _=De.filter(L=>L.type==="expense"&&L.category===h.category).reduce((L,W)=>L+W.amount,0),A=Math.max(0,Number(h.budgetedAmount||0)-_);Re({...h,remaining:A,actual:_,reallocateTo:""})},Em=()=>{if(!ee)return;const{category:h,remaining:_,reallocateTo:A}=ee;if(_>0&&!A){alert("Please choose a category to reallocate the remaining budget.");return}z(L=>{const W=L.filter(ne=>ne.category!==h);return _>0&&A?W.map(ne=>ne.category===A?{...ne,budgetedAmount:Number(ne.budgetedAmount||0)+_}:ne):W}),$(!0),Re(null)},Cm=()=>{Re(null)},ac=h=>{r(_=>_.map(A=>A.id===e.id?h:A)),i(h)},Tm=async h=>{if(h)try{F(!0);const{error:_}=await qi(e.id,{name:e.name,categoryBudgets:h});if(_){console.error("Error undoing allocations:",_),alert("Failed to undo allocation change. Please try again.");return}const A={...e,categoryBudgets:h};ac(A),z(h.map(L=>({...L}))),$(!1),Pn(L=>({...L,changeLog:[{at:new Date().toISOString(),message:"Reverted allocation change",type:"undo"},...L.changeLog||[]]})),l==null||l()}finally{F(!1),X(null)}},Pm=async()=>{const h=N.map(_=>({category:_.category,budgetedAmount:Number.isFinite(Number(_.budgetedAmount))?Number(_.budgetedAmount):0}));F(!0);try{const{error:_}=await qi(e.id,{name:e.name,categoryBudgets:h});if(_){console.error("Error saving allocations:",_),alert("Failed to save category allocations.");return}const A=e.categoryBudgets||[],L={...e,categoryBudgets:h};ac(L),$(!1);const W=new Date().toISOString();Pn(ne=>({...ne,changeLog:[{at:W,message:"Updated category allocations",type:"allocation"},...ne.changeLog||[]]})),l==null||l(),X({message:"Allocations updated",actionLabel:"Undo",action:()=>Tm(A)})}finally{F(!1)}},lc=()=>X(null),Am=()=>{const h=new Date().toISOString();Pn(_=>{var A;return{..._,cycle:{..._.cycle,type:ue.type,label:Ua(ue.type),currentStart:ue.startDate?new Date(ue.startDate).toISOString():(A=_.cycle)==null?void 0:A.currentStart,payFrequencyDays:ue.type==="per-paycheck"?Number(ue.payFrequencyDays)||14:void 0,customDays:ue.type==="custom"?Number(ue.customDays)||30:void 0,lastEditedAt:h},changeLog:[{at:h,message:`Updated cycle to ${Ua(ue.type)}`,type:"cycle"},..._.changeLog||[]]}}),Y(!1)},Om=h=>{G(_=>{const A=new Set(_);return A.has(h)?A.delete(h):A.add(h),lt(!0),A})},uc=(h,_)=>{te(A=>({...A,[h]:_})),lt(!0)},ti=h=>{Qe(_=>({..._,...h})),lt(!0)};E.useEffect(()=>{if(!tr)return;const h=Array.from(M);Pn(_=>{var A,L,W;return{..._,insights:{..._.insights||{},trackedCategories:h,reportSchedule:{...(A=_.insights)==null?void 0:A.reportSchedule,...V},quietHours:{...((L=_.insights)==null?void 0:L.quietHours)||{},start:Number(K.quietStart)??21,end:Number(K.quietEnd)??7},nudges:{...((W=_.insights)==null?void 0:W.nudges)||{},enabled:!!K.enabled,threshold:Number(K.threshold)||.8}}}}),lt(!1)},[tr,M,V,K,Pn]);const cc=E.useMemo(()=>{if(M.size)return Array.from(M);const h={};De.filter(L=>L.type==="expense").forEach(L=>{h[L.category]=(h[L.category]||0)+L.amount});const _=Object.entries(h).sort((L,W)=>W[1]-L[1]).map(([L])=>L),A=(e.categoryBudgets||[]).map(L=>L.category);return Array.from(new Set([..._,...A])).slice(0,6)},[M,De,e.categoryBudgets]),dc=E.useMemo(()=>{const h=new Set((e.categoryBudgets||[]).map(_=>_.category));return(t.expense||[]).forEach(_=>h.add(_.name)),Array.from(h).sort((_,A)=>_.localeCompare(A))},[e.categoryBudgets,t.expense]),hc=E.useCallback(h=>{const[_="08",A="00"]=(h||"08:00").split(":"),L=Number.parseInt(_,10),W=Number.parseInt(A,10);return{hours:Number.isFinite(L)?L:8,minutes:Number.isFinite(W)?W:0}},[]),fc=E.useCallback(h=>{const _=new Date(h),A=String(V.day||"sunday").toLowerCase(),L=oh[A]??0,W=(_.getDay()-L+7)%7;_.setDate(_.getDate()-W);const{hours:ne,minutes:_e}=hc(V.time);return _.setHours(ne,_e,0,0),_},[V.day,V.time,hc]),Jr=E.useMemo(()=>{const _=fc(new Date),A=new Date(_);A.setDate(A.getDate()+7);const L=new Date(_);L.setDate(L.getDate()-7);const W=new Date(_),ne=(he,ae,Ce)=>De.filter(me=>me.type==="expense"&&me.category===he).filter(me=>{const Me=new Date(me.date);return Me>=ae&&Me<Ce}).reduce((me,Me)=>me+Me.amount,0),_e=cc.map(he=>{var ta;const ae=ne(he,_,A),Ce=ne(he,L,W),me=ae-Ce,Me=Ce>0?me/Ce*100:ae>0?100:0,Ne=he.toLowerCase().trim(),Te=(ta=zt.categoriesByName)==null?void 0:ta[Ne],Rn=[];for(let rn=5;rn>=0;rn-=1){const kt=new Date(A);kt.setDate(kt.getDate()-7*rn);const na=new Date(kt);na.setDate(na.getDate()-7),Rn.push(ne(he,na,kt))}return{category:he,current:ae,previous:Ce,delta:me,pctChange:Me,status:(Te==null?void 0:Te.status)||"green",statusLabel:(Te==null?void 0:Te.label)||"On Track",trend:Rn}}).sort((he,ae)=>ae.current-he.current);return{cards:_e,topCards:_e.slice(0,3),trends:_e.reduce((he,ae)=>({...he,[ae.category]:ae.trend}),{}),currentStart:_,currentEnd:A}},[De,cc,zt,fc]),nr=Number(K.quietStart)??21,rr=Number(K.quietEnd)??7,pc=E.useCallback(h=>{const _=h.getHours();return nr===rr?!1:nr<rr?_>=nr&&_<rr:_>=nr||_<rr},[nr,rr]);E.useEffect(()=>{var ne,_e,he,ae,Ce;if(!f||!K.enabled||pc(new Date))return;const h=(_e=(ne=v.insights)==null?void 0:ne.nudges)==null?void 0:_e.snoozedUntil;if(h&&new Date(h)>new Date)return;const _=Number(K.threshold)||.8,A=(he=e.cycleMetadata)!=null&&he.currentStart?new Date(e.cycleMetadata.currentStart).toISOString():e.id,L=((Ce=(ae=v.insights)==null?void 0:ae.nudges)==null?void 0:Ce.acknowledged)||{},W=(zt.categories||[]).find(me=>{if(!me||!Number.isFinite(me.budgeted)||me.budgeted<=0)return!1;const Me=me.actual/me.budgeted,Ne=`${A}:${me.name}`.toLowerCase();return Me>=_&&!L[Ne]});W&&!H&&R({category:W.name,ratio:W.actual/(W.budgeted||1),actual:W.actual,budgeted:W.budgeted})},[f,K,v.insights,e.cycleMetadata,e.id,zt.categories,H,pc]);const Rm=h=>{var L;const A=`${(L=e.cycleMetadata)!=null&&L.currentStart?new Date(e.cycleMetadata.currentStart).toISOString():e.id}:${h}`.toLowerCase();Pn(W=>{var ne,_e,he;return{...W,insights:{...W.insights||{},nudges:{...((ne=W.insights)==null?void 0:ne.nudges)||{},acknowledged:{...((he=(_e=W.insights)==null?void 0:_e.nudges)==null?void 0:he.acknowledged)||{},[A]:new Date().toISOString()}}}}}),R(null)},Dm=(h=6)=>{const _=new Date;_.setHours(_.getHours()+h),Pn(A=>{var L;return{...A,insights:{...A.insights||{},nudges:{...((L=A.insights)==null?void 0:L.nudges)||{},snoozedUntil:_.toISOString()}}}}),R(null)},sr=h=>h==="income"||h==="expense"?h:h==="expenses"?"expense":"income",mc=h=>{const _=sr(h||T);J({name:"",amount:"",budgetedAmount:"",category:"",date:Vl(),type:_,receipt:null}),C(null),g(!0)},Im=h=>{J({...h,date:Ci(h.date),budgetedAmount:h.budgetedAmount||""}),C(h),g(!0)},Lm=async()=>{const h=I.name.trim(),_=I.category.trim(),A=String(I.amount??"").trim(),L=Number.parseFloat(A),W=A!==""&&Number.isFinite(L),ne=I.budgetedAmount===null||I.budgetedAmount===void 0?"":String(I.budgetedAmount).trim(),_e=ne===""?null:Number.parseFloat(ne),he=_e===null||Number.isFinite(_e);if(!h||!W||!_||!he){alert("Please fill in all required fields with valid numbers where applicable.");return}F(!0);try{const ae={name:h,amount:L,budgetedAmount:_e,category:_,type:sr(I.type),date:Ci(I.date),receipt:I.receipt};let Ce;if(S){const{error:Ne}=await h_(S.id,ae);if(Ne){console.error("Error updating transaction:",Ne),alert("Failed to update transaction. Please try again.");return}Ce=De.map(Te=>Te.id===S.id?{...ae,id:S.id}:Te)}else{const{data:Ne,error:Te}=await om(e.id,ae);if(Te){console.error("Error creating transaction:",Te),alert("Failed to create transaction. Please try again.");return}const Rn={...ae,id:Ne[0].id};Ce=[...De,Rn]}const me={...e,transactions:Ce},Me=s.map(Ne=>Ne.id===e.id?me:Ne);r(Me),i(Me.find(Ne=>Ne.id===e.id)),l==null||l(),g(!1),C(null)}catch(ae){console.error("Error saving transaction:",ae),alert("Failed to save transaction. Please try again.")}finally{F(!1)}},$m=async()=>{const h=Ae.trim();if(!h){U(e.name||"");return}if(h===(e.name||"").trim()){U(e.name||"");return}try{const{error:_}=await qi(e.id,{name:h,categoryBudgets:e.categoryBudgets});if(_){console.error("Error updating budget name:",_),U(e.name||"");return}let A={...e,name:h};r(L=>L.map(W=>W.id!==e.id?W:(A={...W,...e,name:h},A))),i(L=>(L==null?void 0:L.id)===e.id?A:L),U(h),l==null||l()}catch(_){console.error("Error updating budget name:",_),U(e.name||"")}},Yr=De.filter(h=>h.type==="income").reduce((h,_)=>h+_.amount,0),An=De.filter(h=>h.type==="expense").reduce((h,_)=>h+_.amount,0),gc=De.filter(h=>h.type==="expense"&&h.budgetedAmount).reduce((h,_)=>h+_.budgetedAmount,0),ni=Yr-An,ri=E.useMemo(()=>De.filter(h=>h.type==="expense"),[De]),Zo=E.useMemo(()=>{if(ri.length===0)return{burnPerDay:0,burnPerWeek:0,burnPerMonth:0,daysLeft:null,projectionDate:null,status:"safe",badgeLabel:"Safe Zone"};const h=1e3*60*60*24,_=new Date;_.setDate(_.getDate()-30);const A=ri.filter(rn=>{const kt=new Date(rn.date);return!Number.isNaN(kt.getTime())&&kt>=_}),L=A.length?A:ri;let W=Number.POSITIVE_INFINITY,ne=0,_e=0;if(L.forEach(rn=>{const kt=new Date(rn.date).getTime();Number.isFinite(kt)&&(W=Math.min(W,kt),ne=Math.max(ne,kt),_e+=rn.amount)}),!Number.isFinite(W)||!Number.isFinite(ne))return{burnPerDay:0,burnPerWeek:0,burnPerMonth:0,daysLeft:null,projectionDate:null,status:"safe",badgeLabel:"Safe Zone"};const he=Math.max(1,Math.round((ne-W)/h)+1),ae=_e/he,Ce=ae*7,me=ae*30,Me=Math.max(0,ni),Ne=ae>0?Math.floor(Me/ae):null,Te=typeof Ne=="number"?new Date(Date.now()+Ne*h):null,Rn=typeof Ne=="number"&&Ne<15?"critical":"safe";return{burnPerDay:ae,burnPerWeek:Ce,burnPerMonth:me,daysLeft:Ne,projectionDate:Te,status:Rn,badgeLabel:Rn==="critical"?"Critical Burn":"Safe Zone"}},[ri,ni]);E.useEffect(()=>{if(!(u!=null&&u.id))return;let h=!0;return(async()=>{oc(!0);try{const{data:A,error:L}=await f_(u.id);if(!h)return;if(L){console.error("Failed to fetch cash burn",L),Yo(L.message||"Unable to sync burn metrics"),Jo(null);return}Yo(null),Jo(A||null)}catch(A){if(!h)return;console.error("Unexpected cash burn error",A),Yo(A.message||"Unable to sync burn metrics"),Jo(null)}finally{h&&oc(!1)}})(),()=>{h=!1}},[u==null?void 0:u.id,e.id,De.length]);const xt=E.useMemo(()=>{if(!tn)return Zo;const h=tn.projectionDate instanceof Date||tn.projectionDate===null?tn.projectionDate:tn.projectionDate?new Date(tn.projectionDate):null;return{...Zo,...tn,projectionDate:h}},[Zo,tn]),zt=cm(xm),yc=((Sc=e.cycleMetadata)==null?void 0:Sc.type)||"monthly",Um=Ua(yc),vc=(xc=e.cycleMetadata)!=null&&xc.currentStart?new Date(e.cycleMetadata.currentStart):null,Mm=vc?vc.toLocaleDateString():e.createdAt,Bm=N.reduce((h,_)=>h+(Number(_.budgetedAmount)||0),0),Fm=De.filter(h=>h.type==="expense").reduce((h,_)=>(h[_.category]=(h[_.category]||0)+_.amount,h),{}),On=Object.entries(Fm).map(([h,_])=>{var A;return{category:h,amount:_,percentage:An>0?_/An*100:0,icon:((A=t.expense.find(L=>L.name===h))==null?void 0:A.icon)||"💰"}}).sort((h,_)=>_.amount-h.amount).slice(0,5),si=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#ec4899"],Xr=De.filter(h=>h.type===sr(T)).sort((h,_)=>new Date(_.date)-new Date(h.date)),nn=Math.ceil(Xr.length/Xo),ea=(j-1)*Xo,wc=ea+Xo,zm=Xr.slice(ea,wc),_c=h=>{p(h),b(1)},Zr=h=>{b(h)},qm=()=>{if(nn<=1)return null;const h=[],_=5;let A=Math.max(1,j-Math.floor(_/2));const L=Math.min(nn,A+_-1);L-A+1<_&&(A=Math.max(1,L-_+1)),j>1&&h.push(a.jsx("button",{className:"pagination-button",onClick:()=>Zr(j-1),children:"←"},"prev")),A>1&&(h.push(a.jsx("button",{className:"pagination-button",onClick:()=>Zr(1),children:"1"},1)),A>2&&h.push(a.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis1")));for(let W=A;W<=L;W++)h.push(a.jsx("button",{className:`pagination-button ${j===W?"active":""}`,onClick:()=>Zr(W),children:W},W));return L<nn&&(L<nn-1&&h.push(a.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis2")),h.push(a.jsx("button",{className:"pagination-button",onClick:()=>Zr(nn),children:nn},nn))),j<nn&&h.push(a.jsx("button",{className:"pagination-button",onClick:()=>Zr(j+1),children:"→"},"next")),a.jsxs("div",{className:"pagination-container",children:[a.jsxs("div",{className:"pagination-info",children:["Showing ",ea+1,"-",Math.min(wc,Xr.length)," of ",Xr.length," transactions"]}),a.jsx("div",{className:"pagination-controls",children:h})]})};return a.jsxs("div",{children:[a.jsxs("div",{className:"header-nav",children:[a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>n("budgets"),children:"← Back"}),a.jsx("button",{className:"ai-insights-button primary-button",onClick:()=>n("ai"),children:"🧠 AI Finance Report"})]}),a.jsx("input",{className:"input budget-title-input no-border",value:Ae,onChange:h=>U(h.target.value),onBlur:$m,onKeyDown:h=>{h.key==="Enter"&&(h.preventDefault(),h.currentTarget.blur())},placeholder:"Budget Name"}),a.jsxs("div",{className:"budget-cycle-banner",children:[a.jsx("div",{className:`cycle-pill cycle-${yc}`,children:Um}),a.jsxs("div",{className:"cycle-meta",children:[a.jsxs("span",{children:["Started ",Mm]}),a.jsxs("div",{className:`pacing-indicator pacing-${zt.overall.status}`,title:zt.overall.tooltip,role:"status",children:[a.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),a.jsx("span",{className:"pacing-label",children:zt.overall.label})]})]}),a.jsxs("div",{className:"cycle-actions",children:[a.jsx("button",{className:"secondary-button",onClick:()=>Y(!0),children:"Edit cycle"}),a.jsx("button",{className:"link-button",onClick:()=>ce(!0),children:"Change log"})]})]}),a.jsxs("div",{className:"category-allocation-card",id:"allocations",children:[a.jsxs("div",{className:"allocation-header",children:[a.jsx("h3",{children:"Category allocations"}),a.jsxs("div",{className:"allocation-header-actions",children:[a.jsxs("span",{className:"allocation-total",children:["Total ",dr(Bm)]}),a.jsx("button",{className:"secondary-button",onClick:()=>Go(!0),children:"Add category"})]})]}),N.length===0?a.jsx("div",{className:"empty-state small",children:"No allocations yet. Add your first category to plan this cycle."}):a.jsx("div",{className:"allocation-table",children:N.map(h=>a.jsxs("div",{className:"allocation-row",children:[a.jsx("div",{className:"allocation-name",children:h.category}),a.jsx("input",{type:"number",className:"input allocation-input",value:h.budgetedAmount,onChange:_=>km(h.category,_.target.value),min:"0",step:"0.01"}),a.jsx("button",{className:"allocation-delete",type:"button",onClick:_=>{_.stopPropagation(),Nm(h)},children:"Remove"})]},h.category))}),a.jsx("div",{className:"allocation-footer",children:a.jsx("button",{className:"primary-button",onClick:Pm,disabled:!P||O,children:O?"Saving...":"Save allocations"})})]}),Sm&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent small-modal",children:[a.jsx("h3",{className:"header modal-header",children:"Add category"}),a.jsx("label",{className:"input-label",htmlFor:"new-category-name",children:"Name"}),a.jsx("input",{id:"new-category-name",className:"input",value:nc,onChange:h=>Ko(h.target.value),placeholder:"Category name"}),a.jsx("label",{className:"input-label",htmlFor:"new-category-amount",children:"Allocation amount"}),a.jsx("input",{id:"new-category-amount",className:"input",type:"number",step:"0.01",min:"0",value:rc,onChange:h=>Qo(h.target.value)}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:jm,children:"Add"}),a.jsx("button",{className:"cancelButton secondary-button",onClick:bm,children:"Cancel"})]})]})}),a.jsxs("div",{className:"budget-overview-card",children:[a.jsx("h3",{className:"overview-title",children:"Budget Overview"}),a.jsxs("div",{className:"overview-content",children:[a.jsxs("div",{className:"overview-stats",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-label",children:"Total Income"}),a.jsxs("div",{className:"stat-value income",children:["$",Yr.toFixed(2)]})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-label",children:"Total Spent"}),a.jsxs("div",{className:"stat-value expense",children:["$",An.toFixed(2)]})]}),gc>0&&a.jsxs("div",{className:"stat-item stat-item-full-width",children:[a.jsx("div",{className:"stat-label",children:"Total Budgeted"}),a.jsxs("div",{className:"stat-value",children:["$",gc.toFixed(2)]})]})]}),a.jsxs("div",{className:"balance-display",children:[a.jsx("div",{className:"balance-label",children:"Remaining Balance"}),a.jsxs("div",{className:`balance-amount ${ni>=0?"income":"expense"}`,children:["$",ni.toFixed(2)]})]}),On.length>0&&a.jsxs("div",{className:"category-chart-section",children:[a.jsx("h4",{className:"chart-section-title",children:"Spending Breakdown"}),a.jsxs("div",{className:"chart-container-centered",children:[a.jsx("div",{className:"pie-chart-wrapper",children:a.jsxs("svg",{className:"pie-chart",viewBox:"0 0 200 200",width:"200",height:"200",onClick:h=>{(h.target.tagName==="svg"||h.target.tagName==="circle"||h.target.tagName==="text")&&we(null)},children:[On.map((h,_)=>{let A=0;for(let Te=0;Te<_;Te++)A+=On[Te].percentage;const L=A/100*360,W=(A+h.percentage)/100*360,ne=h.percentage>50?1:0,_e=L*Math.PI/180,he=W*Math.PI/180,ae=100+80*Math.cos(_e),Ce=100+80*Math.sin(_e),me=100+80*Math.cos(he),Me=100+80*Math.sin(he),Ne=["M 100 100",`L ${ae} ${Ce}`,`A 80 80 0 ${ne} 1 ${me} ${Me}`,"Z"].join(" ");return a.jsx("path",{d:Ne,fill:si[_%si.length],stroke:"white",strokeWidth:"2",className:`pie-slice ${le===_?"selected":""}`,onClick:Te=>{Te.stopPropagation(),we(le===_?null:_)}},h.category)}),a.jsx("circle",{cx:"100",cy:"100",r:"35",fill:"white"}),a.jsx("text",{x:"100",y:"95",textAnchor:"middle",className:"chart-center-text",fontSize:"12",fill:"#6b7280",children:"Total"}),a.jsxs("text",{x:"100",y:"110",textAnchor:"middle",className:"chart-center-amount",fontSize:"14",fontWeight:"600",fill:"#374151",children:["$",An.toFixed(0)]})]})}),le!==null&&a.jsx("div",{className:"slice-details",children:a.jsxs("div",{className:"slice-details-content",children:[a.jsxs("div",{className:"slice-header",children:[a.jsx("div",{className:"slice-color-dot",style:{backgroundColor:si[le%si.length]}}),a.jsx("span",{className:"slice-icon",children:On[le].icon}),a.jsx("span",{className:"slice-category",children:On[le].category})]}),a.jsxs("div",{className:"slice-amount",children:["$",On[le].amount.toFixed(2)]}),a.jsxs("div",{className:"slice-percentage",children:[On[le].percentage.toFixed(1),"% of total spending"]})]})})]})]})]}),a.jsxs("div",{className:"budget-progress",children:[a.jsxs("div",{className:"progress-labels",children:[a.jsxs("span",{className:"income",children:["Income: $",Yr.toFixed(2)]}),a.jsxs("span",{className:"expense",children:["Spent: $",An.toFixed(2)]})]}),a.jsx("div",{className:"progress-bar-container",children:a.jsx("div",{className:"income-bar",children:Yr>0&&a.jsx("div",{className:"expense-overlay",style:{width:`${Math.min(An/Yr*100,100)}%`}})})})]})]}),zt.categories.length>0&&a.jsxs("div",{className:"category-budget-list-card",children:[a.jsx("h3",{className:"category-budget-list-title",children:"Category Pacing"}),a.jsx("div",{className:"category-budget-list",children:zt.categories.map(h=>{const _=h.budgeted>0?Math.min(h.actual/h.budgeted*100,100):h.actual>0?100:0;return a.jsxs("div",{className:"category-budget-list-row",children:[a.jsxs("div",{className:"category-budget-header",children:[a.jsx("div",{className:"category-budget-name",children:h.name||"Uncategorized"}),a.jsxs("div",{className:`pacing-indicator pacing-${h.status}`,title:h.tooltip,role:"status","aria-label":`${h.name||"Uncategorized"} pacing is ${h.label}`,children:[a.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),a.jsx("span",{className:"pacing-label",children:h.label})]})]}),a.jsxs("div",{className:"category-budget-amounts",children:["$",h.actual.toFixed(2)," / $",h.budgeted.toFixed(2)]}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:`progress-fill ${h.actual>h.budgeted&&h.budgeted>0?"over":""}`,style:{width:`${_}%`}})})]},h.key||h.name)})})]}),a.jsxs("div",{className:"cashburn-section",children:[a.jsxs("div",{className:"cashburn-header",children:[a.jsx("h3",{children:"Cash burn insights"}),a.jsxs("span",{className:"cashburn-subtitle",children:["Weekly digest · next drop ",Jr.currentEnd?new Date(Jr.currentEnd).toLocaleString([],{dateStyle:"medium",timeStyle:"short"}):"soon"]})]}),a.jsxs("div",{className:"cashburn-summary-grid",children:[a.jsx("div",{className:`cashburn-status-badge status-${xt.status}`,children:xt.badgeLabel}),a.jsxs("div",{className:"cashburn-metric",children:[a.jsx("span",{className:"cashburn-metric-label",children:"Daily burn"}),a.jsx("span",{className:"cashburn-metric-value",children:dr(xt.burnPerDay)})]}),a.jsxs("div",{className:"cashburn-metric",children:[a.jsx("span",{className:"cashburn-metric-label",children:"Weekly burn"}),a.jsx("span",{className:"cashburn-metric-value",children:dr(xt.burnPerWeek)})]}),a.jsxs("div",{className:"cashburn-metric",children:[a.jsx("span",{className:"cashburn-metric-label",children:"Monthly burn"}),a.jsx("span",{className:"cashburn-metric-value",children:dr(xt.burnPerMonth)})]}),a.jsxs("div",{className:"cashburn-metric projection",children:[a.jsx("span",{className:"cashburn-metric-label",children:"Days left"}),a.jsx("span",{className:"cashburn-metric-value",children:typeof xt.daysLeft=="number"?`${Math.max(0,xt.daysLeft)} ${xt.daysLeft===1?"day":"days"}`:xt.burnPerDay===0?"Not burning":"—"}),xt.projectionDate&&a.jsxs("span",{className:"cashburn-projection-date",children:["until ",xt.projectionDate.toLocaleDateString([],{dateStyle:"medium"})]})]})]}),ic&&a.jsx("div",{className:"cashburn-sync-status",role:"status",children:"Syncing latest burn metrics…"}),sc&&!ic&&a.jsxs("div",{className:"cashburn-sync-status error",role:"status",children:["Using local estimate — ",sc]}),y?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"plan-teaser",children:"Upgrade or start a trial to unlock leak alerts, trend graphs, and burn pacing recommendations."}),e.adsEnabled&&a.jsxs("div",{className:"budget-ad-unit",role:"note","aria-label":"Sponsored offer",children:[a.jsx("div",{className:"budget-ad-badge",children:"Sponsored"}),a.jsx("div",{className:"budget-ad-copy",children:"Lower recurring bills with Pocket Partner Energy — average savings $18/mo."})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"cashburn-card-grid",children:[Jr.topCards.length===0&&a.jsx("div",{className:"empty-state small",children:"Track spending this week to unlock leak insights."}),Jr.topCards.map(h=>a.jsxs("button",{type:"button",className:`cashburn-card pacing-${h.status}`,onClick:()=>er(_=>_===h.category?null:h.category),children:[a.jsxs("div",{className:"cashburn-card-header",children:[a.jsx("span",{className:"cashburn-category",children:h.category}),a.jsxs("div",{className:`pacing-indicator pacing-${h.status}`,children:[a.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),a.jsx("span",{className:"pacing-label",children:h.statusLabel})]})]}),a.jsxs("div",{className:"cashburn-amount-row",children:[a.jsx("span",{className:"cashburn-amount",children:dr(h.current)}),a.jsxs("span",{className:`cashburn-delta ${h.delta>=0?"expense":"income"}`,children:[h.delta>=0?"+":"-","$",Math.abs(h.delta).toFixed(2)," vs last week"]})]}),a.jsxs("div",{className:"cashburn-change",children:["Change ",h.pctChange.toFixed(0),"%"]}),Qr===h.category&&a.jsxs("div",{className:"cashburn-trend",children:[a.jsx("div",{className:"sparkline",children:$_(Jr.trends[h.category])}),a.jsx("div",{className:"sparkline-label",children:"Last 6 weeks"})]})]},h.category))]}),a.jsxs("div",{className:"cashburn-settings",children:[a.jsxs("div",{className:"settings-row",children:[a.jsx("label",{children:"Report schedule"}),a.jsxs("div",{className:"settings-inputs",children:[a.jsx("select",{value:V.day,onChange:h=>uc("day",h.target.value),children:Object.keys(oh).map(h=>a.jsx("option",{value:h,children:h.charAt(0).toUpperCase()+h.slice(1)},h))}),a.jsx("input",{type:"time",value:V.time,onChange:h=>uc("time",h.target.value)})]})]}),a.jsxs("div",{className:"settings-row",children:[a.jsx("label",{children:"Tracked categories"}),a.jsxs("div",{className:"tracked-category-grid",children:[dc.map(h=>{const _=M.has(h);return a.jsxs("label",{className:`tracked-chip ${_?"selected":""}`,children:[a.jsx("input",{type:"checkbox",checked:_,onChange:()=>Om(h)}),a.jsx("span",{children:h})]},h)}),dc.length===0&&a.jsx("span",{children:"No categories yet."})]})]}),a.jsxs("div",{className:"settings-row",children:[a.jsx("label",{children:"Real-time nudges"}),f?a.jsxs("div",{className:"nudge-config",children:[a.jsxs("label",{className:"checkbox-row",children:[a.jsx("input",{type:"checkbox",checked:K.enabled,onChange:h=>ti({enabled:h.target.checked})}),a.jsxs("span",{children:["Notify me when a category hits ",Math.round((Number(K.threshold)||.8)*100),"% of budget"]})]}),a.jsxs("div",{className:"nudge-threshold",children:[a.jsx("input",{type:"range",min:"0.5",max:"1",step:"0.05",value:Number(K.threshold)||.8,onChange:h=>ti({threshold:Number(h.target.value)})}),a.jsxs("span",{children:[Math.round((Number(K.threshold)||.8)*100),"%"]})]}),a.jsxs("div",{className:"quiet-hours-controls",children:[a.jsx("span",{children:"Quiet hours"}),a.jsxs("div",{className:"settings-inputs",children:[a.jsx("input",{type:"number",min:"0",max:"23",value:nr,onChange:h=>ti({quietStart:Number(h.target.value)})}),a.jsx("span",{children:"to"}),a.jsx("input",{type:"number",min:"0",max:"23",value:rr,onChange:h=>ti({quietEnd:Number(h.target.value)})})]})]})]}):a.jsx("div",{className:"plan-teaser",children:"Upgrade or start a trial to unlock real-time nudges and advanced budgeting cycles."})]})]})]})]}),a.jsxs("div",{className:"transactions-section",children:[a.jsxs("div",{className:"tabRow",children:[a.jsxs("button",{className:T==="expenses"?"tabActive":"tabInactive",onClick:()=>_c("expenses"),children:["Expenses (",De.filter(h=>h.type==="expense").length,")"]}),a.jsxs("button",{className:T==="income"?"tabActive":"tabInactive",onClick:()=>_c("income"),children:["Income (",De.filter(h=>h.type==="income").length,")"]})]}),Xr.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsxs("p",{children:["No ",sr(T)," transactions yet."]}),a.jsxs("button",{className:"primary-button",onClick:()=>mc(T),children:["Add Your First ",sr(T)==="expense"?"Expense":"Income"]})]}):a.jsxs(a.Fragment,{children:[zm.map(h=>{var _;return a.jsx("div",{className:"transaction enhanced-transaction",onClick:()=>Im(h),children:a.jsx("div",{className:"transaction-info",children:a.jsxs("div",{className:"transaction-main",children:[a.jsx("span",{className:"transaction-icon",children:((_=t[h.type].find(A=>A.name===h.category))==null?void 0:_.icon)||"💰"}),a.jsxs("div",{className:"transaction-details-main",children:[a.jsx("span",{className:"transaction-name",children:h.name}),a.jsxs("div",{className:"transaction-meta",children:[h.category," • ",U_(h.date),h.receipt&&a.jsx("span",{className:"receipt-indicator",children:"📎"})]})]}),a.jsxs("div",{className:"transaction-amounts",children:[a.jsxs("span",{className:`transaction-amount ${h.type}`,children:[h.type==="income"?"+":"-","$",h.amount.toFixed(2)]}),h.budgetedAmount&&a.jsxs("span",{className:"budgeted-amount",children:["Budget: $",h.budgetedAmount.toFixed(2)]})]})]})})},h.id)}),qm()]})]}),a.jsx("button",{className:"fab",onClick:()=>mc(T),children:"+"}),m&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent enhanced-modal",children:[a.jsx("h2",{className:"header modal-header",children:S?"Edit Transaction":`Add ${I.type==="expense"?"Expense":"Income"}`}),a.jsx("input",{className:"input",placeholder:"Description",value:I.name,onChange:h=>J({...I,name:h.target.value}),disabled:O}),a.jsx("input",{className:"input",placeholder:"Amount",type:"number",step:"0.01",value:I.amount,onChange:h=>J({...I,amount:h.target.value}),disabled:O}),a.jsx("input",{className:"input",type:"date",value:I.date,onChange:h=>J(_=>({..._,date:Ci(h.target.value,_.date)})),disabled:O}),I.type==="expense"&&a.jsx("input",{className:"input",placeholder:"Budgeted amount (optional)",type:"number",step:"0.01",value:I.budgetedAmount,onChange:h=>J({...I,budgetedAmount:h.target.value}),disabled:O}),a.jsxs("select",{className:"input",value:I.category,onChange:h=>J({...I,category:h.target.value}),disabled:O,children:[a.jsx("option",{value:"",children:"Select Category"}),(kc=t[sr(I.type)])==null?void 0:kc.map(h=>a.jsxs("option",{value:h.name,children:[h.icon," ",h.name]},h.name))]}),a.jsxs("div",{className:"receipt-upload-section",children:[a.jsx("label",{className:"receipt-upload-label",children:"📎 Attach Receipt (Optional)"}),a.jsx("input",{type:"file",accept:"image/*",className:"receipt-input",onChange:h=>{const _=h.target.files[0];if(_){const A=new FileReader;A.onloadend=()=>{J({...I,receipt:A.result})},A.readAsDataURL(_)}},disabled:O}),I.receipt&&a.jsxs("div",{className:"receipt-preview",children:[a.jsx("img",{src:I.receipt||"/placeholder.svg",alt:"Receipt preview",className:"receipt-preview-img"}),a.jsx("button",{type:"button",className:"remove-receipt",onClick:()=>J({...I,receipt:null}),disabled:O,children:"Remove"})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsxs("button",{className:"addButton primary-button",onClick:Lm,disabled:O,children:[O?"Saving...":S?"Update":"Add"," Transaction"]}),a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>{g(!1),C(null)},disabled:O,children:"Cancel"})]})]})}),ee&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent small-modal",children:[a.jsxs("h3",{className:"header modal-header",children:["Remove ",ee.category]}),ee.remaining>0?a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:["Reallocate ",dr(ee.remaining)," from ",ee.category," before deleting."]}),a.jsxs("select",{className:"input",value:ee.reallocateTo,onChange:h=>Re(_=>({..._,reallocateTo:h.target.value})),children:[a.jsx("option",{value:"",children:"Choose category"}),N.filter(h=>h.category!==ee.category).map(h=>a.jsx("option",{value:h.category,children:h.category},h.category))]})]}):a.jsxs("p",{children:["Delete ",ee.category," from this cycle?"]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:Em,disabled:ee.remaining>0&&!ee.reallocateTo,children:"Confirm"}),a.jsx("button",{className:"cancelButton secondary-button",onClick:Cm,children:"Cancel"})]})]})}),Z&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent large-modal",children:[a.jsx("h3",{className:"header modal-header",children:"Change log"}),x.length===0?a.jsx("div",{className:"empty-state small",children:"No changes recorded yet."}):a.jsx("ul",{className:"change-log-list",children:x.map((h,_)=>{const A=(h==null?void 0:h.at)||(h==null?void 0:h.timestamp),L=A?new Date(A).toLocaleString():"Recent";return a.jsxs("li",{className:"change-log-item",children:[a.jsx("span",{className:"change-log-time",children:L}),a.jsx("span",{className:"change-log-message",children:(h==null?void 0:h.message)||"Updated budget"})]},`${L}-${_}`)})}),a.jsx("div",{className:"modal-actions",children:a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>ce(!1),children:"Close"})})]})}),Oe&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent enhanced-modal",children:[a.jsx("h3",{className:"header modal-header",children:"Edit cycle"}),a.jsx("div",{className:"cycle-option-grid",children:hm.map(h=>{const _=h.requiresPaid&&!f,A=ue.type===h.type;return a.jsxs("button",{type:"button",className:`cycle-option ${A?"selected":""} ${_?"locked":""}`,onClick:()=>{_||Dt(L=>({...L,type:h.type}))},disabled:_,children:[a.jsxs("div",{className:"cycle-option-title",children:[h.label,_&&a.jsx("span",{className:"lock-icon",children:"🔒"})]}),a.jsx("div",{className:"cycle-option-description",children:h.requiresPaid?"Requires trial or paid":"Included in Free"})]},h.type)})}),ue.type==="per-paycheck"&&a.jsxs("div",{className:"cycle-config-row",children:[a.jsx("label",{className:"input-label",htmlFor:"edit-pay-frequency",children:"Paycheck frequency (days)"}),a.jsx("input",{id:"edit-pay-frequency",type:"number",className:"input",min:"7",max:"45",value:ue.payFrequencyDays,onChange:h=>Dt(_=>({..._,payFrequencyDays:h.target.value}))})]}),ue.type==="custom"&&a.jsxs("div",{className:"cycle-config-row",children:[a.jsx("label",{className:"input-label",htmlFor:"edit-cycle-length",children:"Cycle length (days)"}),a.jsx("input",{id:"edit-cycle-length",type:"number",className:"input",min:"5",max:"120",value:ue.customDays,onChange:h=>Dt(_=>({..._,customDays:h.target.value}))})]}),a.jsxs("div",{className:"cycle-config-row",children:[a.jsx("label",{className:"input-label",htmlFor:"edit-cycle-start",children:"Cycle start date"}),a.jsx("input",{id:"edit-cycle-start",type:"date",className:"input",value:ue.startDate,onChange:h=>Dt(_=>({..._,startDate:h.target.value}))})]}),!f&&a.jsx("p",{className:"plan-teaser",children:"Upgrade or begin a trial to use paycheck and custom budgeting cycles."}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:Am,disabled:!f&&ue.type!=="monthly",children:"Save cycle"}),a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>Y(!1),children:"Cancel"})]})]})}),B&&a.jsxs("div",{className:"snackbar",children:[a.jsx("span",{children:B.message}),B.action&&a.jsx("button",{className:"link-button",onClick:()=>{B.action(),lc()},children:B.actionLabel||"Undo"}),a.jsx("button",{className:"link-button",onClick:lc,children:"Dismiss"})]}),H&&a.jsxs("div",{className:"nudge-toast",role:"status",children:[a.jsxs("div",{className:"nudge-copy",children:[a.jsx("strong",{children:H.category})," is at ",(H.ratio*100).toFixed(0),"% of its budget."]}),a.jsxs("div",{className:"nudge-actions",children:[a.jsx("button",{className:"link-button",onClick:()=>{var h;Rm(H.category),(h=document.getElementById("allocations"))==null||h.scrollIntoView({behavior:"smooth"})},children:"Adjust budget"}),a.jsx("button",{className:"link-button",onClick:()=>Dm(),children:"Snooze"})]})]})]})}const ah=k.shape({id:k.string.isRequired,name:k.string.isRequired,amount:k.number.isRequired,budgetedAmount:k.number,category:k.string.isRequired,type:k.oneOf(["income","expense"]).isRequired,date:k.string.isRequired,receipt:k.string}),lh=k.shape({name:k.string.isRequired,icon:k.string.isRequired});Yu.propTypes={budget:k.shape({id:k.string.isRequired,name:k.string.isRequired,transactions:k.arrayOf(ah),categoryBudgets:k.arrayOf(k.shape({category:k.string.isRequired,budgetedAmount:k.number.isRequired})),metadata:k.object,insightsPreferences:k.shape({trackedCategories:k.arrayOf(k.string),reportSchedule:k.shape({day:k.string,time:k.string}),nudges:k.shape({enabled:k.bool,threshold:k.number})}),changeLog:k.arrayOf(k.shape({at:k.string,message:k.string,type:k.string})),cycleMetadata:k.shape({type:k.string,currentStart:k.string,payFrequencyDays:k.number,customDays:k.number,lengthDays:k.number,cycleLength:k.number}),adsEnabled:k.bool,createdAt:k.string}).isRequired,categories:k.shape({income:k.arrayOf(lh).isRequired,expense:k.arrayOf(lh).isRequired}).isRequired,setViewMode:k.func.isRequired,setBudgets:k.func.isRequired,budgets:k.arrayOf(k.shape({id:k.string.isRequired,name:k.string.isRequired,transactions:k.arrayOf(ah)})).isRequired,setSelectedBudget:k.func.isRequired,onMetadataChange:k.func,onDataMutated:k.func};Yu.defaultProps={onMetadataChange:void 0,onDataMutated:void 0};function fm({categories:e,setCategories:t,budgets:n,setViewMode:r}){const[s,i]=E.useState("expense"),[o,l]=E.useState(!1),[u,c]=E.useState({name:"",icon:"💲"}),[d,f]=E.useState(null),y=["💲","💰","💳","🏦","🍔","🍽️","☕","🛒","🚗","⛽","✈️","🚌","🏠","💡","📱","💻","🎮","🎬","📚","🏥","💊","🛍️","👕","🎁","💼","📈","🔧","🎯","🧾","⭐","🎉","📄"],v=()=>{if(!u.name.trim())return;if(e[s].some(m=>m.name===u.name.trim())){alert("Category already exists!");return}const p={...e,[s]:[...e[s],{name:u.name.trim(),icon:u.icon}]};t(p),l(!1),c({name:"",icon:"💲"})},w=p=>{f({...p,originalName:p.name})},x=()=>{if(!d.name.trim())return;const p={...e,[s]:e[s].map(m=>m.name===d.originalName?{name:d.name.trim(),icon:d.icon}:m)};t(p),f(null)},T=p=>{if(n.some(S=>S.transactions.some(C=>C.category===p&&C.type===s))){alert("Cannot delete category in use.");return}const g={...e,[s]:e[s].filter(S=>S.name!==p)};t(g)};return a.jsxs("div",{children:[a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>r("budgets"),children:"← Back to Budgets"}),a.jsx("h1",{className:"header",children:"Manage Categories"}),a.jsxs("div",{className:"tabRow",children:[a.jsx("button",{className:s==="expense"?"tabActive":"tabInactive",onClick:()=>i("expense"),children:"Expenses"}),a.jsx("button",{className:s==="income"?"tabActive":"tabInactive",onClick:()=>i("income"),children:"Income"})]}),a.jsxs("button",{className:"addButton primary-button",onClick:()=>l(!0),children:["Add ",s.charAt(0).toUpperCase()+s.slice(1)," Category"]}),e[s].length===0?a.jsxs("p",{className:"empty-state",children:["No ",s," categories yet."]}):e[s].map(p=>a.jsx("div",{className:"transaction category-item",children:d&&d.originalName===p.name?a.jsxs("div",{className:"category-edit",children:[a.jsx("input",{className:"input",value:d.name,onChange:m=>f({...d,name:m.target.value})}),a.jsx("div",{className:"icon-selector",children:y.map(m=>a.jsx("button",{className:`icon-button ${d.icon===m?"selected":""}`,onClick:()=>f({...d,icon:m}),children:m},m))}),a.jsxs("div",{className:"category-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:x,children:"Save"}),a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>f(null),children:"Cancel"})]})]}):a.jsxs("div",{className:"category-display",children:[a.jsxs("span",{className:"category-info",children:[p.icon," ",p.name]}),a.jsxs("div",{className:"category-actions",children:[a.jsx("button",{className:"action-button",onClick:()=>w(p),children:"Edit"}),a.jsx("button",{className:"action-button delete",onClick:()=>T(p.name),children:"Delete"})]})]})},p.name)),o&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent",children:[a.jsxs("h2",{className:"header modal-header",children:["Add ",s.charAt(0).toUpperCase()+s.slice(1)," Category"]}),a.jsx("input",{className:"input",placeholder:"Category Name",value:u.name,onChange:p=>c({...u,name:p.target.value})}),a.jsx("div",{className:"icon-selector",children:y.map(p=>a.jsx("button",{className:`icon-button ${u.icon===p?"selected":""}`,onClick:()=>c({...u,icon:p}),children:p},p))}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:v,children:"Add"}),a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>l(!1),children:"Cancel"})]})]})})]})}const M_=k.shape({id:k.string.isRequired,name:k.string.isRequired,amount:k.number.isRequired,budgetedAmount:k.number,category:k.string.isRequired,type:k.oneOf(["income","expense"]).isRequired,date:k.string.isRequired,receipt:k.string}),uh=k.shape({name:k.string.isRequired,icon:k.string.isRequired});fm.propTypes={categories:k.shape({income:k.arrayOf(uh).isRequired,expense:k.arrayOf(uh).isRequired}).isRequired,setCategories:k.func.isRequired,budgets:k.arrayOf(k.shape({id:k.string.isRequired,transactions:k.arrayOf(M_).isRequired})).isRequired,setViewMode:k.func.isRequired};const Hi=[25,50,75,100],B_=1e3*60*60*24,Ba=B_*7,F_=["trial","paid","pro","premium","plus"],hr=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(e||0)),pm=e=>({...e,amount:Number(e.amount||0),contributed_at:e.contributed_at||e.date||e.created_at||new Date().toISOString()}),Ti=e=>{const t=(e.goal_contributions||e.contributions||[]).map(pm);return t.sort((n,r)=>new Date(r.contributed_at)-new Date(n.contributed_at)),{...e,targetAmount:Number(e.target_amount??e.targetAmount??0),targetDate:e.target_date||e.targetDate||null,status:e.status||"active",milestones:Array.isArray(e.milestones)&&e.milestones.length?e.milestones:Hi,linked_budget_id:e.linked_budget_id||e.linkedBudgetId||null,goal_contributions:t}},z_=e=>{const t=e.created_at||e.createdAt,r=e.start_date||e.startDate||t,s=r?new Date(r):new Date;return Number.isNaN(s.getTime())?new Date:s},q_=e=>{if(!e.targetDate)return null;const t=new Date(e.targetDate);return Number.isNaN(t.getTime())?null:t},W_=e=>{const t=new Date(e),n=t.getDay(),r=t.getDate()-n+(n===0?-6:1),s=new Date(t.setDate(r));return s.setHours(0,0,0,0),s},fr=e=>{const t=new Date,n=e.goal_contributions||[],r=n.reduce((C,j)=>C+Number(j.amount||0),0),s=Number(e.targetAmount||0),i=s>0?Math.min(100,r/s*100):0,o=z_(e),l=q_(e);let u=l?l.getTime()-o.getTime():null;u!==null&&u<=0&&(u=Ba);const c=Math.max(0,t.getTime()-o.getTime()),d=u&&u>0?Math.min(1,Math.max(0,c/u)):1,f=s*d,y=u?Math.max(1,Math.ceil(u/Ba)):1,v=y>0?s/y:s,w=W_(t),x=new Date(w.getTime()+Ba),T=n.filter(C=>{const j=new Date(C.contributed_at);return j>=w&&j<x}).reduce((C,j)=>C+Number(j.amount||0),0),p=s*.02,m=r-f;let g="on-track";m>p?g="ahead":m<-p&&(g="behind");const S=Math.max(0,v-T);return{totalContributed:r,progress:i,weeklyTarget:v,contributedThisWeek:T,guidanceShortfall:S,pace:g,plannedTotal:f,totalWeeks:y}};function Xu({setViewMode:e,budgets:t=[],setBudgets:n,onDataMutated:r}){const{user:s,userProfile:i}=Kr(),o=(i==null?void 0:i.plan_tier)||(i==null?void 0:i.planTier)||"free",l=String(o).toLowerCase(),u=F_.includes(l),[c,d]=E.useState([]),[f,y]=E.useState(!0),[v,w]=E.useState(null),[x,T]=E.useState(!1),[p,m]=E.useState({name:"",targetAmount:"",targetDate:"",linkedBudgetId:""}),[g,S]=E.useState(!1),[C,j]=E.useState(""),[b,O]=E.useState(""),[F,I]=E.useState(""),[J,le]=E.useState(null),[we,Ae]=E.useState(null),U=E.useRef({}),[N,z]=E.useState(!1),[P,$]=E.useState(!1),B=E.useCallback(async()=>{if(s){y(!0),w(null);try{const{data:R,error:M}=await g_(s.id);if(M){console.error("Error loading goals:",M),w(M.message||"Failed to load goals");return}const G=(R||[]).map(te=>Ti(te));d(G);const V={};G.forEach(te=>{V[te.id]=fr(te).progress}),U.current=V,G.length&&j(te=>te||G[0].id)}catch(R){console.error("Unexpected error loading goals:",R),w(R.message||"Unexpected error loading goals")}finally{y(!1)}}},[s]);E.useEffect(()=>{s&&B()},[s,B]);const X=async R=>{if(R.preventDefault(),!s)return;if(!u){alert("Goal creation is available during trial or paid plans.");return}const M=parseFloat(p.targetAmount);if(!p.name.trim()||Number.isNaN(M)||M<=0){alert("Please provide a goal name and a positive target amount.");return}z(!0);try{const{data:G,error:V}=await y_(s.id,{name:p.name.trim(),targetAmount:M,targetDate:p.targetDate?new Date(p.targetDate).toISOString():null,milestones:Hi,status:"active",linkedBudgetId:p.linkedBudgetId||null});if(V){console.error("Error creating goal:",V),alert(V.message||"Failed to create goal");return}const te=G==null?void 0:G[0];if(te){const K=Ti(te);d(Qe=>[K,...Qe]),U.current[K.id]=fr(K).progress,j(K.id)}m({name:"",targetAmount:"",targetDate:"",linkedBudgetId:""}),T(!1)}catch(G){console.error("Unexpected error creating goal:",G),alert("Unexpected error creating goal. Please try again.")}finally{z(!1)}},Z=async R=>{if(confirm("Delete this goal? Contributions will remain recorded."))try{const{error:M}=await w_(R);if(M){console.error("Error deleting goal:",M),alert(M.message||"Failed to delete goal");return}d(V=>{const te=V.filter(K=>K.id!==R);return te.length===0?j(""):R===C&&j(te[0].id),te});const G={...U.current};delete G[R],U.current=G}catch(M){console.error("Unexpected error deleting goal:",M),alert("Unexpected error deleting goal")}},ce=async(R,M)=>{try{const{data:G,error:V}=await v_(R.id,{linkedBudgetId:M||null});if(V){console.error("Error linking budget:",V),alert(V.message||"Failed to link budget");return}if(G!=null&&G[0]){const te=Ti(G[0]);d(K=>K.map(Qe=>Qe.id===R.id?te:Qe))}else d(te=>te.map(K=>K.id===R.id?{...K,linked_budget_id:M||null}:K))}catch(G){console.error("Unexpected error linking budget:",G),alert("Unexpected error while linking budget")}},Oe=()=>{S(!1),O(""),I("")},Y=R=>{O(M=>R==="←"?M.slice(0,-1):R==="."&&M.includes(".")?M:`${M}${R}`)},ee=async()=>{const R=parseFloat(b);if(!C||Number.isNaN(R)||R<=0){alert("Enter a valid contribution amount");return}if(!u){alert("Logging contributions is available during trial or paid plans.");return}const M=c.find(V=>V.id===C);if(!M){alert("Select a goal");return}$(!0);const G=new Date().toISOString();try{const V=U.current[M.id]??fr(M).progress,{data:te,error:K}=await __(M.id,{amount:R,date:G,note:F});if(K){console.error("Error logging contribution:",K),alert(K.message||"Failed to log contribution");return}const Qe=(te||[]).map(pm);if(Qe.length){const ue=Ti({...M,goal_contributions:[...Qe,...M.goal_contributions||[]]}),Dt=fr(ue).progress;Re(ue,V,Dt),U.current[M.id]=Dt,d(tr=>tr.map(lt=>lt.id===M.id?ue:lt)),await Qr(M,R,G)}Oe()}catch(V){console.error("Unexpected error adding contribution:",V),alert("Unexpected error adding contribution")}finally{$(!1)}},Re=(R,M,G)=>{const te=(R.milestones||Hi).slice().sort((K,Qe)=>K-Qe).find(K=>M<K&&G>=K);te!==void 0&&(le(R.id),Ae({goalName:R.name,milestone:te}),setTimeout(()=>{le(null),Ae(null)},4e3))},Qr=async(R,M,G)=>{if(!(!R.linked_budget_id||!n||!t.find(te=>te.id===R.linked_budget_id)))try{const te={name:`Goal Contribution - ${R.name}`,amount:M,budgetedAmount:0,category:"Savings Goals",type:"expense",date:G,receipt:null},{data:K,error:Qe}=await om(R.linked_budget_id,te);if(Qe){console.error("Failed to sync contribution to budget:",Qe);return}const ue=K==null?void 0:K[0],Dt=ue?{id:ue.id,name:ue.name,amount:ue.amount,budgetedAmount:ue.budgeted_amount,category:ue.category,type:ue.type,date:ue.date,receipt:ue.receipt_url}:{id:`goal-sync-${Date.now()}`,...te};n(tr=>tr.map(lt=>lt.id===R.linked_budget_id?{...lt,transactions:[...lt.transactions||[],Dt]}:lt)),r==null||r()}catch(te){console.error("Unexpected error syncing contribution to budget:",te)}},er=R=>{const M=fr(R);return(R.milestones||Hi).filter(V=>M.progress>=V)},H=E.useMemo(()=>[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","←"]],[]);return a.jsxs("div",{className:"goals-screen",children:[a.jsxs("div",{className:"goals-header",children:[a.jsx("button",{className:"ghost-button",onClick:()=>e("budgets"),children:"← Budgets"}),a.jsx("h2",{children:"Savings Goals"}),a.jsx("p",{className:"tagline",children:"Track milestones, weekly pace, and stay motivated."})]}),!u&&a.jsx("div",{className:"plan-teaser goals-teaser",children:"Goal creation and contribution tracking unlock during your free trial or with Pocket Budget Plus."}),v&&a.jsx("div",{className:"error-banner",children:v}),f?a.jsx("div",{className:"loading-goals",children:"Loading goals…"}):c.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("p",{children:"Start a new savings goal to build momentum."}),a.jsx("button",{className:"primary-button",onClick:()=>T(!0),children:"Create your first goal"})]}):c.map(R=>{const M=fr(R),G=er(R);return a.jsxs("div",{className:"goal-card",children:[a.jsxs("div",{className:"goal-card-header",children:[a.jsxs("div",{children:[a.jsx("h3",{children:R.name}),a.jsx("span",{className:`goal-pace-badge ${M.pace}`,children:M.pace.replace("-"," ")}),M.progress>=100&&a.jsx("span",{className:"goal-complete",children:"🎉 Complete"})]}),a.jsx("button",{className:"icon-button",onClick:()=>Z(R.id),title:"Delete goal",children:"🗑️"})]}),a.jsx("div",{className:"goal-progress-bar",children:a.jsx("div",{className:"goal-progress",style:{width:`${M.progress}%`}})}),a.jsxs("div",{className:"goal-progress-meta",children:[a.jsxs("span",{children:[hr(M.totalContributed)," saved"]}),a.jsxs("span",{children:["Target ",hr(R.targetAmount)]})]}),a.jsxs("div",{className:"goal-meta-grid",children:[a.jsxs("div",{children:[a.jsx("p",{className:"meta-label",children:"Weekly target"}),a.jsx("p",{className:"meta-value",children:hr(M.weeklyTarget)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"meta-label",children:"This week"}),a.jsx("p",{className:"meta-value",children:hr(M.contributedThisWeek)})]}),R.targetDate&&a.jsxs("div",{children:[a.jsx("p",{className:"meta-label",children:"Target date"}),a.jsx("p",{className:"meta-value",children:new Date(R.targetDate).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"meta-label",children:"Milestones"}),a.jsx("p",{className:"meta-value",children:G.length>0?`${G.join("% • ")}%`:"—"})]})]}),M.pace==="behind"&&M.guidanceShortfall>0&&a.jsxs("div",{className:"goal-guidance",children:["Add ",hr(M.guidanceShortfall)," this week to catch up."]}),a.jsx("div",{className:"goal-budget-link",children:a.jsxs("label",{children:["Sync with budget",a.jsxs("select",{value:R.linked_budget_id||"",onChange:V=>ce(R,V.target.value),children:[a.jsx("option",{value:"",children:"Not linked"}),t.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]})}),R.goal_contributions&&R.goal_contributions.length>0&&a.jsxs("div",{className:"goal-contributions",children:[a.jsx("h4",{children:"Recent contributions"}),a.jsx("ul",{children:R.goal_contributions.slice(0,4).map(V=>a.jsxs("li",{children:[a.jsx("span",{children:new Date(V.contributed_at).toLocaleDateString()}),a.jsx("span",{children:hr(V.amount)})]},V.id))})]})]},R.id)}),a.jsx("button",{className:"fab",onClick:()=>{if(!c.length){T(!0);return}if(!C&&c.length&&j(c[0].id),!u){alert("Upgrade or start a trial to log contributions in real time.");return}S(!0)},title:"Log contribution",children:"➕"}),a.jsx("button",{className:"secondary-button",onClick:()=>T(!0),style:{width:"100%",marginTop:"1rem"},children:"New goal"}),x&&a.jsx("div",{className:"modal-backdrop",children:a.jsxs("div",{className:"modal",children:[a.jsx("h3",{children:"Create goal"}),!u&&a.jsx("div",{className:"plan-teaser",children:"Goal creation is part of Pocket Budget Plus. Start a trial to map savings to your next big milestone."}),a.jsxs("form",{onSubmit:X,className:"goal-form",children:[a.jsxs("fieldset",{disabled:!u,children:[a.jsxs("label",{children:["Goal name",a.jsx("input",{type:"text",value:p.name,onChange:R=>m(M=>({...M,name:R.target.value})),placeholder:"Emergency fund",required:!0})]}),a.jsxs("label",{children:["Target amount",a.jsx("input",{type:"number",min:"0",step:"0.01",value:p.targetAmount,onChange:R=>m(M=>({...M,targetAmount:R.target.value})),placeholder:"5000",required:!0})]}),a.jsxs("label",{children:["Target date",a.jsx("input",{type:"date",value:p.targetDate,onChange:R=>m(M=>({...M,targetDate:R.target.value}))})]}),a.jsxs("label",{children:["Link to budget",a.jsxs("select",{value:p.linkedBudgetId,onChange:R=>m(M=>({...M,linkedBudgetId:R.target.value})),children:[a.jsx("option",{value:"",children:"Not linked"}),t.map(R=>a.jsx("option",{value:R.id,children:R.name},R.id))]})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"ghost-button",onClick:()=>T(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"primary-button",disabled:N||!u,children:N?"Saving…":"Create"})]})]})]})}),g&&a.jsx("div",{className:"modal-backdrop",children:a.jsxs("div",{className:"modal keypad-modal",children:[a.jsx("h3",{children:"Log contribution"}),!u&&a.jsx("p",{className:"plan-teaser",children:"Upgrade or start a trial to log automatic goal contributions."}),a.jsxs("fieldset",{disabled:!u,children:[a.jsxs("label",{children:["Choose goal",a.jsx("select",{value:C,onChange:R=>j(R.target.value),children:c.map(R=>a.jsx("option",{value:R.id,children:R.name},R.id))})]}),a.jsx("div",{className:"keypad-display",children:b||"0"}),a.jsx("div",{className:"numeric-keypad",children:H.map((R,M)=>a.jsx("div",{className:"keypad-row",children:R.map(G=>a.jsx("button",{type:"button",onClick:()=>Y(G),children:G},G))},M))}),a.jsxs("label",{children:["Note (optional)",a.jsx("input",{type:"text",value:F,onChange:R=>I(R.target.value),placeholder:"Paycheck transfer"})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"ghost-button",onClick:Oe,children:"Cancel"}),a.jsx("button",{type:"button",className:"primary-button",onClick:ee,disabled:P||!u,children:P?"Saving…":"Log"})]})]})]})}),J&&a.jsx("div",{className:"confetti-overlay",children:Array.from({length:60}).map((R,M)=>a.jsx("span",{className:"confetti-piece",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*1.5}s`},children:"🎉"},M))}),we&&a.jsxs("div",{className:"milestone-banner",children:[a.jsx("strong",{children:we.goalName})," reached ",we.milestone,"% of the goal!"]})]})}Xu.propTypes={setViewMode:k.func.isRequired,budgets:k.arrayOf(k.shape({id:k.oneOfType([k.string,k.number]).isRequired,name:k.string.isRequired,transactions:k.arrayOf(k.shape({id:k.oneOfType([k.string,k.number]),name:k.string.isRequired,amount:k.number.isRequired,budgetedAmount:k.number,category:k.string.isRequired,type:k.string.isRequired,date:k.string.isRequired,receipt:k.string}))})),setBudgets:k.func.isRequired,onDataMutated:k.func};Xu.defaultProps={onDataMutated:void 0};const H_=["trial","paid","pro","premium","plus"];function mm({budget:e,setViewMode:t}){var F,I,J,le,we,Ae;const{user:n,userProfile:r}=Kr(),s=(r==null?void 0:r.plan_tier)||(r==null?void 0:r.planTier)||"free",i=String(s).toLowerCase(),o=H_.includes(i),[l,u]=E.useState([]),[c,d]=E.useState(null),[f,y]=E.useState(!0),[v,w]=E.useState(!1),[x,T]=E.useState(null),p=E.useCallback(()=>{const U=e.transactions||[],N=U.filter(Y=>Y.type==="income").reduce((Y,ee)=>Y+ee.amount,0),z=U.filter(Y=>Y.type==="expense").reduce((Y,ee)=>Y+ee.amount,0),P=N-z,$=N>0?P/N*100:0,B={};U.filter(Y=>Y.type==="expense").forEach(Y=>{B[Y.category]=(B[Y.category]||0)+Y.amount});const X=Object.entries(B).sort(([,Y],[,ee])=>ee-Y)[0],Z=new Date,ce=U.filter(Y=>{const ee=new Date(Y.date);return(Z-ee)/(1e3*60*60*24)<=7&&Y.type==="expense"}).reduce((Y,ee)=>Y+ee.amount,0),Oe=U.filter(Y=>{const ee=new Date(Y.date),Re=(Z-ee)/(1e3*60*60*24);return Re>7&&Re<=14&&Y.type==="expense"}).reduce((Y,ee)=>Y+ee.amount,0);return{totalIncome:N,totalExpenses:z,balance:P,savingsRate:$,expensesByCategory:B,topExpenseCategory:X,last7Days:ce,previous7Days:Oe,transactionCount:U.length,avgTransactionAmount:U.length>0?(N+z)/U.length:0}},[e]),m=E.useMemo(()=>{if(!l.length)return null;if(c){const U=l.find(N=>N.id===c);if(U)return U}return l[0]},[l,c]),g=(m==null?void 0:m.insights)||null,C=((m==null?void 0:m.tier)||(o?"paid":"free"))!=="free",j=E.useCallback(async()=>{if(n){y(!0);try{const{data:U,error:N}=await S_(n.id,e.id,{limit:10});if(N){console.error("Failed to load AI insights",N),T(N.message||"Unable to load AI insights"),u([]),d(null);return}u(U||[]),d(z=>U!=null&&U.length?z&&U.some(P=>P.id===z)?z:U[0].id:null),T(null)}catch(U){console.error("Unexpected error loading insights",U),T(U.message||"Unexpected error loading insights"),u([]),d(null)}finally{y(!1)}}},[n,e.id]);E.useEffect(()=>{j()},[j]);const b=E.useCallback(async()=>{if(n){w(!0),T(null);try{const U=p(),{data:N,error:z}=await x_({userId:n.id,budgetId:e.id,metrics:U,tier:o?"paid":"free"});if(z){console.error("Failed to generate AI insight",z),T(z.message||"Failed to generate insight");return}N&&(u(P=>{const $=P.filter(B=>B.id!==N.id);return[N,...$]}),d(N.id))}catch(U){console.error("Unexpected error generating insights",U),T(U.message||"Unexpected error generating insights")}finally{w(!1),y(!1)}}},[n,e.id,p,o]);if(f&&!l.length)return a.jsxs("div",{children:[a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:"← Back to Details"}),a.jsx("h1",{className:"header",children:"AI Financial Report"}),a.jsxs("div",{className:"ai-loading",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Analyzing your financial data..."}),a.jsx("p",{className:"loading-subtext",children:"Generating personalized insights and recommendations"})]})]});if(!f&&!l.length)return a.jsxs("div",{children:[a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:"← Back to Details"}),a.jsx("h1",{className:"header",children:"AI Financial Report"}),a.jsxs("div",{className:"empty-state",children:[a.jsx("p",{children:"Run your first AI analysis to unlock a personalized report for this budget."}),a.jsx("button",{className:"primary-button",onClick:b,disabled:v,children:v?"Generating...":"Generate AI Report"}),x&&a.jsx("p",{className:"error-message",children:x})]})]});if(x&&!v&&!g)return a.jsxs("div",{children:[a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:"← Back to Details"}),a.jsx("h1",{className:"header",children:"AI Financial Report"}),a.jsxs("div",{className:"error-state",children:[a.jsx("p",{className:"error-message",children:x}),a.jsx("button",{className:"primary-button",onClick:j,children:"Try Again"})]})]});const O=m!=null&&m.created_at?new Date(m.created_at).toLocaleString([],{dateStyle:"medium",timeStyle:"short"}):"";return a.jsxs("div",{children:[a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:"← Back to Details"}),a.jsx("h1",{className:"header",children:"AI Financial Report"}),a.jsxs("div",{className:"insight-run-meta",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"insight-run-time",children:["Generated ",O||"recently"]}),a.jsx("div",{className:`insight-tier-badge tier-${C?"paid":"free"}`,children:C?"Recommendations enabled":"Summary insight"})]}),l.length>1&&a.jsxs("label",{className:"history-selector",children:[a.jsx("span",{children:"Previous reports"}),a.jsx("select",{value:(m==null?void 0:m.id)||"",onChange:U=>d(U.target.value),children:l.map(U=>a.jsx("option",{value:U.id,children:new Date(U.created_at).toLocaleString([],{dateStyle:"medium",timeStyle:"short"})},U.id))})]})]}),x&&!v&&a.jsx("p",{className:"error-message",role:"alert",children:x}),g&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compact-health-score",children:[a.jsxs("div",{className:"health-score-content",children:[a.jsxs("div",{className:"health-score-number",children:[g.healthScore,"/10"]}),a.jsx("div",{className:"health-score-label",children:"Financial Health"})]}),a.jsx("div",{className:"health-score-bar",children:a.jsx("div",{className:"health-score-fill",style:{width:`${Math.min(Number(g.healthScore||0)/10*100,100)}%`}})})]}),a.jsxs("div",{className:"summary-callout",children:[a.jsx("div",{className:"callout-icon",children:"💡"}),a.jsxs("div",{className:"callout-content",children:[a.jsx("h3",{className:"callout-title",children:"Financial Overview"}),a.jsx("p",{className:"callout-text",children:g.summary})]})]}),a.jsxs("div",{className:"report-section",children:[a.jsx("h2",{className:"section-title",children:"📈 Spending Insights"}),a.jsxs("div",{className:"analysis-grid-compact",children:[a.jsx("div",{className:"analysis-item-compact",children:(F=g.spendingAnalysis)==null?void 0:F.trend}),a.jsx("div",{className:"analysis-item-compact",children:(I=g.spendingAnalysis)==null?void 0:I.topCategory}),a.jsx("div",{className:"analysis-item-compact",children:(J=g.spendingAnalysis)==null?void 0:J.avgTransaction}),a.jsx("div",{className:"analysis-item-compact",children:(le=g.spendingAnalysis)==null?void 0:le.frequency})]})]}),!C&&a.jsx("div",{className:"plan-teaser",children:"Upgrade to unlock personalized recommendations, savings tips, and goal coaching."}),C&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"report-section",children:[a.jsx("h2",{className:"section-title",children:"📋 Budget Optimization"}),(g.budgetSuggestions||[]).map((U,N)=>a.jsxs("div",{className:"budget-suggestion",children:[U.rule&&a.jsxs("div",{className:"budget-rule",children:[a.jsx("h3",{children:U.rule}),a.jsxs("div",{className:"budget-breakdown",children:[a.jsx("div",{children:U.needs}),a.jsx("div",{children:U.wants}),a.jsx("div",{children:U.savings})]})]}),U.category&&a.jsxs("div",{className:"category-suggestion",children:[a.jsxs("strong",{children:[U.category,":"]})," Currently ",U.current," - ",U.suggestion]})]},N))]}),a.jsxs("div",{className:"report-section",children:[a.jsx("h2",{className:"section-title",children:"⚖️ Strengths & Areas for Growth"}),a.jsxs("div",{className:"strengths-improvements-grid",children:[a.jsxs("div",{className:"strengths-column",children:[a.jsx("h3",{className:"column-title",children:"✅ Your Strengths"}),(g.strengths||[]).map((U,N)=>a.jsxs("div",{className:"strength-item-compact",children:[a.jsx("span",{className:"strength-icon",children:"✓"}),a.jsx("span",{children:U})]},N))]}),a.jsxs("div",{className:"improvements-column",children:[a.jsx("h3",{className:"column-title",children:"🎯 Growth Areas"}),(g.improvements||[]).map((U,N)=>a.jsxs("div",{className:"improvement-item-compact",children:[a.jsx("div",{className:"improvement-title-compact",children:U.area}),a.jsx("div",{className:"improvement-action-compact",children:U.action})]},N))]})]})]}),a.jsxs("div",{className:"report-section",children:[a.jsx("h2",{className:"section-title",children:"💡 Quick Savings Tips"}),a.jsx("div",{className:"tips-grid",children:(g.savingsTips||[]).slice(0,4).map((U,N)=>a.jsx("div",{className:"tip-item-compact",children:U},N))})]}),a.jsxs("div",{className:"report-section",children:[a.jsx("h2",{className:"section-title",children:"🎯 Recommended Goals"}),a.jsxs("div",{className:"goals-container-compact",children:[a.jsxs("div",{className:"goals-column",children:[a.jsx("h3",{children:"Next 3 Months"}),(((we=g.goals)==null?void 0:we.shortTerm)||[]).slice(0,3).map((U,N)=>a.jsxs("div",{className:"goal-item-compact short-term",children:[a.jsx("span",{children:"📅"}),U]},N))]}),a.jsxs("div",{className:"goals-column",children:[a.jsx("h3",{children:"6+ Months"}),(((Ae=g.goals)==null?void 0:Ae.longTerm)||[]).slice(0,3).map((U,N)=>a.jsxs("div",{className:"goal-item-compact long-term",children:[a.jsx("span",{children:"📆"}),U]},N))]})]})]})]})]}),a.jsx("div",{className:"report-actions",children:a.jsx("button",{className:"primary-button",onClick:b,disabled:v,children:v?"Generating...":"🔄 Generate New Report"})})]})}const V_=k.shape({id:k.string.isRequired,name:k.string.isRequired,amount:k.number.isRequired,budgetedAmount:k.number,category:k.string.isRequired,type:k.oneOf(["income","expense"]).isRequired,date:k.string.isRequired,receipt:k.string});mm.propTypes={budget:k.shape({id:k.string.isRequired,name:k.string.isRequired,transactions:k.arrayOf(V_)}).isRequired,setViewMode:k.func.isRequired};function Vi({message:e="Loading"}){return a.jsx("div",{className:"loading-screen",children:a.jsxs("div",{className:"loading-content",children:[a.jsx("h1",{className:"header",children:"Pocket Budget"}),a.jsx("div",{className:"loading-spinner-large"}),a.jsxs("p",{className:"loading-text",children:[e,"..."]})]})})}Vi.propTypes={message:k.string};function G_(){const[e,t]=E.useState(!1),[n,r]=E.useState(""),[s,i]=E.useState(""),[o,l]=E.useState(""),[u,c]=E.useState(!1),[d,f]=E.useState(""),y=async()=>{c(!0),f("");try{const{error:x}=await Hl("fulltest@test.com","fullpass123");x&&f(x.message||"Unable to start demo session")}catch(x){console.error("Demo login error:",x),f("Demo login failed. Please try again.")}finally{c(!1)}},v=async x=>{x.preventDefault(),c(!0),f("");try{if(e){if(s!==o){f("Passwords do not match"),c(!1);return}if(s.length<6){f("Password must be at least 6 characters"),c(!1);return}const{error:T}=await s_(n,s);T?f(T.message):(f(""),t(!1),i(""),l(""))}else{const{error:T}=await Hl(n,s);T&&f(T.message)}}catch(T){f("An unexpected error occurred"),console.error("Auth error:",T)}finally{c(!1)}},w=async()=>{c(!0),f("");try{const{error:x}=await i_();x&&f(x.message)}catch(x){f("Failed to sign in with Google"),console.error("Google auth error:",x)}finally{c(!1)}};return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-content",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("h1",{className:"login-title",children:"Pocket Budget"}),a.jsx("p",{className:"login-subtitle",children:e?"Create your account to get started":"Welcome back! Sign in to continue"})]}),a.jsxs("div",{className:"login-form-container",children:[d&&a.jsx("div",{className:"error-message",children:d}),a.jsx("button",{onClick:y,className:"google-button",style:{background:"linear-gradient(135deg, #0ea5e9, #8b5cf6)",color:"white",border:"none",marginBottom:"1rem"},disabled:u,children:"🎯 Demo Login (fulltest@test.com)"}),a.jsxs("form",{onSubmit:v,className:"login-form",children:[a.jsx("input",{type:"email",placeholder:"Email address",value:n,onChange:x=>r(x.target.value),className:"input login-input",required:!0,disabled:u}),a.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:x=>i(x.target.value),className:"input login-input",required:!0,disabled:u,minLength:6}),e&&a.jsx("input",{type:"password",placeholder:"Confirm password",value:o,onChange:x=>l(x.target.value),className:"input login-input",required:!0,disabled:u,minLength:6}),a.jsx("button",{type:"submit",className:"primary-button login-button",disabled:u,children:u?"Please wait...":e?"Create Account":"Sign In"})]}),a.jsx("div",{className:"login-divider",children:a.jsx("span",{children:"or"})}),a.jsxs("button",{onClick:w,className:"google-button",disabled:u,children:[a.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),a.jsx("div",{className:"login-switch",children:a.jsxs("p",{children:[e?"Already have an account?":"Don't have an account?"," ",a.jsx("button",{type:"button",onClick:()=>{t(!e),f(""),r(""),i(""),l("")},className:"login-switch-button",disabled:u,children:e?"Sign In":"Sign Up"})]})})]})]})})}function gm({title:e,showLogout:t=!1}){const{user:n,userProfile:r}=Kr(),s=async()=>{confirm("Are you sure you want to sign out?")&&await o_()};return a.jsx("div",{className:"app-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("h1",{className:"header-title",children:e}),t&&n&&a.jsxs("div",{className:"header-user",children:[a.jsx("span",{className:"user-email",children:(r==null?void 0:r.full_name)||n.email}),a.jsx("button",{onClick:s,className:"logout-button",title:"Sign out",children:"🚪"})]})]})})}gm.propTypes={title:k.string.isRequired,showLogout:k.bool};const ym="installPromptDismissedUntil",K_=7*24*60*60*1e3,ch=()=>typeof window>"u"?!1:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,dh=()=>{const e=Date.now()+K_;return localStorage.setItem(ym,e.toString()),e},Q_=()=>{const e=localStorage.getItem(ym);if(!e)return!1;const t=Number.parseInt(e,10);return Number.isFinite(t)&&Date.now()<t};function hh(){const[e,t]=E.useState(null),[n,r]=E.useState(!1),[s,i]=E.useState(()=>ch());E.useEffect(()=>{const u=c=>{if(c.preventDefault(),s||Q_()){t(null),r(!1);return}t(c),r(!0)};return window.addEventListener("beforeinstallprompt",u),()=>window.removeEventListener("beforeinstallprompt",u)},[s]),E.useEffect(()=>{const u=()=>{i(!0),r(!1),t(null)},c=window.matchMedia("(display-mode: standalone)"),d=()=>{const f=ch();i(f),f&&(r(!1),t(null))};return d(),typeof c.addEventListener=="function"?c.addEventListener("change",d):typeof c.addListener=="function"&&c.addListener(d),window.addEventListener("appinstalled",u),()=>{typeof c.removeEventListener=="function"?c.removeEventListener("change",d):typeof c.removeListener=="function"&&c.removeListener(d),window.removeEventListener("appinstalled",u)}},[]);const o=async()=>{if(!e)return;e.prompt();const{outcome:u}=await e.userChoice;t(null),r(!1),u==="accepted"?console.log("User accepted the install prompt"):(console.log("User dismissed the install prompt"),dh())},l=()=>{r(!1),t(null),dh()};return!n||s?null:a.jsx("div",{className:"install-prompt",children:a.jsxs("div",{className:"install-prompt-content",children:[a.jsx("div",{className:"install-prompt-icon",children:"📱"}),a.jsxs("div",{className:"install-prompt-text",children:[a.jsx("h3",{children:"Install Pocket Budget"}),a.jsx("p",{children:"Add to your home screen for a better experience!"})]}),a.jsxs("div",{className:"install-prompt-actions",children:[a.jsx("button",{onClick:o,className:"install-button",children:"Install"}),a.jsx("button",{onClick:l,className:"dismiss-button",children:"✕"})]})]})})}const J_=[{key:"home",label:"Home",icon:"🏠"},{key:"budgets",label:"Budgets",icon:"💼"},{key:"goals",label:"Goals",icon:"🎯"},{key:"reports",label:"Reports",icon:"📊"},{key:"settings",label:"Settings",icon:"⚙️"}],Y_={home:"budgets",budgets:"budgets",goals:"goals",reports:"ai",settings:"settings"},X_=e=>{if(!e)return"home";switch(e){case"budgets":case"details":case"categories":return"budgets";case"goals":return"goals";case"ai":case"reports":return"reports";case"settings":case"profile":return"settings";default:return e}};function Zu({viewMode:e,setViewMode:t,onSelect:n}){const r=X_(e),s=i=>{if(n==null||n(i),t){const o=Y_[i]||i;t(o)}};return a.jsx("nav",{className:"bottom-nav","aria-label":"Primary navigation",children:J_.map(i=>{const o=i.key===r;return a.jsxs("button",{type:"button",className:`bottom-nav__item${o?" is-active":""}`,onClick:()=>s(i.key),"aria-pressed":o,children:[a.jsx("span",{className:"bottom-nav__icon","aria-hidden":"true",children:i.icon}),a.jsx("span",{className:"bottom-nav__label",children:i.label})]},i.key)})})}Zu.propTypes={viewMode:k.string,setViewMode:k.func,onSelect:k.func};Zu.defaultProps={viewMode:"budgets",setViewMode:void 0,onSelect:void 0};const vm="pb:budget-metadata:v1",wm=typeof window<"u"&&typeof window.localStorage<"u",ec=()=>{if(!wm)return{};try{const e=window.localStorage.getItem(vm);if(!e)return{};const t=JSON.parse(e);return t&&typeof t=="object"?t:{}}catch(e){return console.warn("Failed to parse budget metadata",e),{}}},tc=e=>{if(wm)try{window.localStorage.setItem(vm,JSON.stringify(e))}catch(t){console.warn("Failed to persist budget metadata",t)}},Cs=()=>{const e=new Date().toISOString();return{cycle:{type:"monthly",label:"Monthly",currentStart:e,payFrequencyDays:30,createdAt:e,lastEditedAt:null},changeLog:[],ads:{enabled:!0,lastSeen:null},insights:{trackedCategories:[],reportSchedule:{day:"sunday",time:"08:00"},quietHours:{start:21,end:7},nudges:{enabled:!1,threshold:.8,snoozedUntil:null,acknowledged:{}}},dismissals:{summary:{},recommendations:{}}}},_m=e=>{if(!e)return Cs();const t=ec();return t[e]||(t[e]=Cs(),tc(t)),{...Cs(),...t[e]}},Z_=(e,t)=>{if(!e)return t;const n=ec();return n[e]={...Cs(),...t},tc(n),n[e]},eS=(e,t)=>{const n=_m(e),r=typeof t=="function"?t(n):{...n,...t};return Z_(e,r)},tS=e=>{if(!e)return;const t=ec();t[e]&&(delete t[e],tc(t))},fh={income:[{name:"Salary",icon:"💼"},{name:"Freelance",icon:"💻"},{name:"Investment",icon:"📈"},{name:"Business",icon:"🏢"},{name:"Gift",icon:"🎁"}],expense:[{name:"Groceries",icon:"🛒"},{name:"Rent",icon:"🏠"},{name:"Transportation",icon:"🚗"},{name:"Entertainment",icon:"🎮"},{name:"Bills",icon:"🧾"},{name:"Shopping",icon:"🛍️"}]},Fa=()=>({income:fh.income.map(e=>({...e})),expense:fh.expense.map(e=>({...e}))});function nS(){const{user:e,loading:t,initializing:n,status:r}=Kr(),[s,i]=E.useState([]),[o,l]=E.useState(Fa),[u,c]=E.useState(null),[d,f]=E.useState("budgets"),[y,v]=E.useState("idle"),w=E.useRef(null),x=n||t||r==="auth-transition",T=E.useCallback(()=>{e!=null&&e.id&&(w.current=null)},[e==null?void 0:e.id]),p=E.useCallback((b,O)=>{var le,we;if(!(b!=null&&b.id))return b;const F=O||b.metadata||_m(b.id),I=Cs(),J={...I,...F,cycle:{...I.cycle,...(F==null?void 0:F.cycle)||{}},ads:{...I.ads,...(F==null?void 0:F.ads)||{}},insights:{...I.insights,...(F==null?void 0:F.insights)||{},nudges:{...I.insights.nudges,...((le=F==null?void 0:F.insights)==null?void 0:le.nudges)||{}}},dismissals:{...I.dismissals,...(F==null?void 0:F.dismissals)||{}}};return{...b,metadata:J,cycleMetadata:J.cycle,changeLog:J.changeLog||[],adsEnabled:((we=J.ads)==null?void 0:we.enabled)!==!1,insightsPreferences:J.insights,dismissedInsights:J.dismissals}},[]),m=E.useCallback(b=>{i(O=>{const F=typeof b=="function"?b(O):b;return Array.isArray(F)?F.map(I=>p(I,I==null?void 0:I.metadata)):O})},[p]);E.useEffect(()=>{e||(m([]),l(Fa()),c(null),f("budgets"),v("idle"),w.current=null)},[e,m]),E.useEffect(()=>{if(!e||t||n||w.current===e.id)return;const b=e.id;w.current=b;let O=!0;v("loading");const F=c_(b),I=p_(b);return Promise.allSettled([F,I]).then(J=>{if(!O)return;const[le,we]=J;let Ae=!1;if(le.status==="fulfilled"){const{data:U,error:N}=le.value;N&&(console.error("Error loading budgets:",N),Ae=!0);const z=(U||[]).map(P=>({id:P.id,name:P.name,createdAt:new Date(P.created_at).toLocaleDateString(),categoryBudgets:P.category_budgets||[],transactions:(P.transactions||[]).map($=>({id:$.id,name:$.name,amount:Number($.amount||0),budgetedAmount:$.budgeted_amount??null,category:$.category,type:$.type,date:$.date,receipt:$.receipt_url??null}))}));m(z.map(P=>p(P)))}else console.error("Unexpected error resolving budgets:",le.reason),Ae=!0;if(we.status==="fulfilled"){const{data:U,error:N}=we.value;N&&N.code!=="PGRST116"&&(console.error("Error loading categories:",N),Ae=!0),U!=null&&U.categories?l(U.categories):(N==null?void 0:N.code)==="PGRST116"&&l(Fa())}else console.error("Unexpected error resolving categories:",we.reason),Ae=!0;Ae?w.current=null:w.current=b,v("ready")}),()=>{O=!1}},[e,t,n,m,p]);const g=async b=>{if(l(b),!!e)try{const{error:O}=await m_(e.id,b);O||T()}catch(O){console.error("Error updating categories:",O)}},S=E.useCallback((b,O)=>{if(!b)return;const F=eS(b,O);m(I=>I.map(J=>J.id===b?p({...J},F):J)),c(I=>!I||I.id!==b?I:p({...I},F))},[p,m]),C=E.useCallback(b=>{b&&(tS(b),c(O=>(O==null?void 0:O.id)===b?null:O))},[]),j=E.useMemo(()=>s.find(b=>b.id===(u==null?void 0:u.id))||u,[s,u]);return n?a.jsx(Vi,{message:"Checking your account"}):!e&&!t?a.jsxs(a.Fragment,{children:[a.jsx(G_,{}),a.jsx(hh,{})]}):x?a.jsx(Vi,{message:"Preparing your experience"}):e&&y!=="ready"?a.jsx(Vi,{message:y==="loading"?"Loading your budgets":"Setting things up"}):a.jsxs("div",{className:"container",children:[a.jsx(gm,{title:"Pocket Budget",showLogout:d!=="ai"}),a.jsx(hh,{}),d==="budgets"&&a.jsx(Ju,{budgets:s,setSelectedBudget:c,setViewMode:f,setBudgets:m,userId:e.id,onMetadataChange:S,onMetadataRemove:C,onDataMutated:T}),d==="goals"&&a.jsx(Xu,{setViewMode:f,budgets:s,setBudgets:m,onDataMutated:T}),d==="details"&&j&&a.jsx(Yu,{budget:j,categories:o,setViewMode:f,setBudgets:m,budgets:s,setSelectedBudget:c,onMetadataChange:S,onDataMutated:T}),d==="categories"&&a.jsx(fm,{categories:o,setCategories:g,budgets:s,setViewMode:f}),d==="ai"&&j&&a.jsx(mm,{budget:j,setViewMode:f}),a.jsx(Zu,{viewMode:d,setViewMode:f})]})}function rS(){return a.jsx(lm,{children:a.jsx(nS,{})})}const sS=document.getElementById("root"),iS=Ep(sS);iS.render(a.jsx(rS,{}));

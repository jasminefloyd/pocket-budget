(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Km(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Qm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var _h={exports:{}},ya={},xh={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs=Symbol.for("react.element"),Jm=Symbol.for("react.portal"),Ym=Symbol.for("react.fragment"),Xm=Symbol.for("react.strict_mode"),Zm=Symbol.for("react.profiler"),eg=Symbol.for("react.provider"),tg=Symbol.for("react.context"),ng=Symbol.for("react.forward_ref"),rg=Symbol.for("react.suspense"),sg=Symbol.for("react.memo"),ig=Symbol.for("react.lazy"),ju=Symbol.iterator;function ag(e){return e===null||typeof e!="object"?null:(e=ju&&e[ju]||e["@@iterator"],typeof e=="function"?e:null)}var Sh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kh=Object.assign,jh={};function Lr(e,t,n){this.props=e,this.context=t,this.refs=jh,this.updater=n||Sh}Lr.prototype.isReactComponent={};Lr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Lr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Nh(){}Nh.prototype=Lr.prototype;function Hl(e,t,n){this.props=e,this.context=t,this.refs=jh,this.updater=n||Sh}var Vl=Hl.prototype=new Nh;Vl.constructor=Hl;kh(Vl,Lr.prototype);Vl.isPureReactComponent=!0;var Nu=Array.isArray,bh=Object.prototype.hasOwnProperty,Gl={current:null},Eh={key:!0,ref:!0,__self:!0,__source:!0};function Ch(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)bh.call(t,r)&&!Eh.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Bs,type:e,key:i,ref:a,props:s,_owner:Gl.current}}function og(e,t){return{$$typeof:Bs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bs}function lg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var bu=/\/+/g;function Ja(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lg(""+e.key):t.toString(36)}function ki(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Bs:case Jm:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Ja(a,0):r,Nu(s)?(n="",e!=null&&(n=e.replace(bu,"$&/")+"/"),ki(s,t,n,"",function(u){return u})):s!=null&&(Kl(s)&&(s=og(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(bu,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Nu(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Ja(i,l);a+=ki(i,t,n,c,s)}else if(c=ag(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Ja(i,l++),a+=ki(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Xs(e,t,n){if(e==null)return e;var r=[],s=0;return ki(e,r,"","",function(i){return t.call(n,i,s++)}),r}function cg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Je={current:null},ji={transition:null},ug={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:ji,ReactCurrentOwner:Gl};function Th(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Xs,forEach:function(e,t,n){Xs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Xs(e,function(){t++}),t},toArray:function(e){return Xs(e,function(t){return t})||[]},only:function(e){if(!Kl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=Lr;oe.Fragment=Ym;oe.Profiler=Zm;oe.PureComponent=Hl;oe.StrictMode=Xm;oe.Suspense=rg;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ug;oe.act=Th;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=kh({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Gl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)bh.call(t,c)&&!Eh.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Bs,type:e.type,key:s,ref:i,props:r,_owner:a}};oe.createContext=function(e){return e={$$typeof:tg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:eg,_context:e},e.Consumer=e};oe.createElement=Ch;oe.createFactory=function(e){var t=Ch.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:ng,render:e}};oe.isValidElement=Kl;oe.lazy=function(e){return{$$typeof:ig,_payload:{_status:-1,_result:e},_init:cg}};oe.memo=function(e,t){return{$$typeof:sg,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=ji.transition;ji.transition={};try{e()}finally{ji.transition=t}};oe.unstable_act=Th;oe.useCallback=function(e,t){return Je.current.useCallback(e,t)};oe.useContext=function(e){return Je.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return Je.current.useDeferredValue(e)};oe.useEffect=function(e,t){return Je.current.useEffect(e,t)};oe.useId=function(){return Je.current.useId()};oe.useImperativeHandle=function(e,t,n){return Je.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return Je.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return Je.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return Je.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return Je.current.useReducer(e,t,n)};oe.useRef=function(e){return Je.current.useRef(e)};oe.useState=function(e){return Je.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return Je.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return Je.current.useTransition()};oe.version="18.3.1";xh.exports=oe;var j=xh.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg=j,hg=Symbol.for("react.element"),fg=Symbol.for("react.fragment"),pg=Object.prototype.hasOwnProperty,mg=dg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gg={key:!0,ref:!0,__self:!0,__source:!0};function Ph(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)pg.call(t,r)&&!gg.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:hg,type:e,key:i,ref:a,props:s,_owner:mg.current}}ya.Fragment=fg;ya.jsx=Ph;ya.jsxs=Ph;_h.exports=ya;var o=_h.exports,Ah={exports:{}},ct={},Oh={exports:{}},Rh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,W){var B=I.length;I.push(W);e:for(;0<B;){var Y=B-1>>>1,X=I[Y];if(0<s(X,W))I[Y]=W,I[B]=X,B=Y;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var W=I[0],B=I.pop();if(B!==W){I[0]=B;e:for(var Y=0,X=I.length,K=X>>>1;Y<K;){var $=2*(Y+1)-1,G=I[$],D=$+1,T=I[D];if(0>s(G,B))D<X&&0>s(T,G)?(I[Y]=T,I[D]=B,Y=D):(I[Y]=G,I[$]=B,Y=$);else if(D<X&&0>s(T,B))I[Y]=T,I[D]=B,Y=D;else break e}}return W}function s(I,W){var B=I.sortIndex-W.sortIndex;return B!==0?B:I.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,g=3,v=!1,_=!1,S=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(I){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=I)r(u),W.sortIndex=W.expirationTime,t(c,W);else break;W=n(u)}}function x(I){if(S=!1,y(I),!_)if(n(c)!==null)_=!0,J(P);else{var W=n(u);W!==null&&le(x,W.startTime-I)}}function P(I,W){_=!1,S&&(S=!1,m(C),C=-1),v=!0;var B=g;try{for(y(W),h=n(c);h!==null&&(!(h.expirationTime>W)||I&&!O());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,g=h.priorityLevel;var X=Y(h.expirationTime<=W);W=e.unstable_now(),typeof X=="function"?h.callback=X:h===n(c)&&r(c),y(W)}else r(c);h=n(c)}if(h!==null)var K=!0;else{var $=n(u);$!==null&&le(x,$.startTime-W),K=!1}return K}finally{h=null,g=B,v=!1}}var N=!1,A=null,C=-1,q=5,F=-1;function O(){return!(e.unstable_now()-F<q)}function E(){if(A!==null){var I=e.unstable_now();F=I;var W=!0;try{W=A(!0,I)}finally{W?z():(N=!1,A=null)}}else N=!1}var z;if(typeof p=="function")z=function(){p(E)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ee=Q.port2;Q.port1.onmessage=E,z=function(){ee.postMessage(null)}}else z=function(){b(E,0)};function J(I){A=I,N||(N=!0,z())}function le(I,W){C=b(function(){I(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){_||v||(_=!0,J(P))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(I){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var B=g;g=W;try{return I()}finally{g=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,W){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var B=g;g=I;try{return W()}finally{g=B}},e.unstable_scheduleCallback=function(I,W,B){var Y=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Y+B:Y):B=Y,I){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=B+X,I={id:d++,callback:W,priorityLevel:I,startTime:B,expirationTime:X,sortIndex:-1},B>Y?(I.sortIndex=B,t(u,I),n(c)===null&&I===n(u)&&(S?(m(C),C=-1):S=!0,le(x,B-Y))):(I.sortIndex=X,t(c,I),_||v||(_=!0,J(P))),I},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(I){var W=g;return function(){var B=g;g=W;try{return I.apply(this,arguments)}finally{g=B}}}})(Rh);Oh.exports=Rh;var yg=Oh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg=j,lt=yg;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dh=new Set,Ss={};function qn(e,t){Er(e,t),Er(e+"Capture",t)}function Er(e,t){for(Ss[e]=t,e=0;e<t.length;e++)Dh.add(t[e])}var Ht=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mo=Object.prototype.hasOwnProperty,wg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Eu={},Cu={};function _g(e){return Mo.call(Cu,e)?!0:Mo.call(Eu,e)?!1:wg.test(e)?Cu[e]=!0:(Eu[e]=!0,!1)}function xg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Sg(e,t,n,r){if(t===null||typeof t>"u"||xg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ye(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fe[e]=new Ye(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fe[t]=new Ye(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fe[e]=new Ye(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fe[e]=new Ye(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fe[e]=new Ye(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fe[e]=new Ye(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fe[e]=new Ye(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fe[e]=new Ye(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fe[e]=new Ye(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ql=/[\-:]([a-z])/g;function Jl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ql,Jl);Fe[t]=new Ye(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ql,Jl);Fe[t]=new Ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ql,Jl);Fe[t]=new Ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fe[e]=new Ye(e,1,!1,e.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fe[e]=new Ye(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yl(e,t,n,r){var s=Fe.hasOwnProperty(t)?Fe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Sg(t,n,s,r)&&(n=null),r||s===null?_g(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Qt=vg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zs=Symbol.for("react.element"),cr=Symbol.for("react.portal"),ur=Symbol.for("react.fragment"),Xl=Symbol.for("react.strict_mode"),Uo=Symbol.for("react.profiler"),Ih=Symbol.for("react.provider"),Lh=Symbol.for("react.context"),Zl=Symbol.for("react.forward_ref"),Bo=Symbol.for("react.suspense"),Fo=Symbol.for("react.suspense_list"),ec=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),$h=Symbol.for("react.offscreen"),Tu=Symbol.iterator;function Vr(e){return e===null||typeof e!="object"?null:(e=Tu&&e[Tu]||e["@@iterator"],typeof e=="function"?e:null)}var je=Object.assign,Ya;function ns(e){if(Ya===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ya=t&&t[1]||""}return`
`+Ya+e}var Xa=!1;function Za(e,t){if(!e||Xa)return"";Xa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Xa=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ns(e):""}function kg(e){switch(e.tag){case 5:return ns(e.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 2:case 15:return e=Za(e.type,!1),e;case 11:return e=Za(e.type.render,!1),e;case 1:return e=Za(e.type,!0),e;default:return""}}function zo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ur:return"Fragment";case cr:return"Portal";case Uo:return"Profiler";case Xl:return"StrictMode";case Bo:return"Suspense";case Fo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lh:return(e.displayName||"Context")+".Consumer";case Ih:return(e._context.displayName||"Context")+".Provider";case Zl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ec:return t=e.displayName||null,t!==null?t:zo(e.type)||"Memo";case nn:t=e._payload,e=e._init;try{return zo(e(t))}catch{}}return null}function jg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zo(t);case 8:return t===Xl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ng(e){var t=Mh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ei(e){e._valueTracker||(e._valueTracker=Ng(e))}function Uh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Mh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qo(e,t){var n=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Pu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=vn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Bh(e,t){t=t.checked,t!=null&&Yl(e,"checked",t,!1)}function Wo(e,t){Bh(e,t);var n=vn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ho(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ho(e,t.type,vn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Au(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ho(e,t,n){(t!=="number"||Bi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var rs=Array.isArray;function xr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Vo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ou(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(L(92));if(rs(n)){if(1<n.length)throw Error(L(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:vn(n)}}function Fh(e,t){var n=vn(t.value),r=vn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ru(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Go(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ti,qh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ti=ti||document.createElement("div"),ti.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ti.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ks(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bg=["Webkit","ms","Moz","O"];Object.keys(os).forEach(function(e){bg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),os[t]=os[e]})});function Wh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||os.hasOwnProperty(e)&&os[e]?(""+t).trim():t+"px"}function Hh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Wh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Eg=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ko(e,t){if(t){if(Eg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function Qo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=null;function tc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yo=null,Sr=null,kr=null;function Du(e){if(e=qs(e)){if(typeof Yo!="function")throw Error(L(280));var t=e.stateNode;t&&(t=Sa(t),Yo(e.stateNode,e.type,t))}}function Vh(e){Sr?kr?kr.push(e):kr=[e]:Sr=e}function Gh(){if(Sr){var e=Sr,t=kr;if(kr=Sr=null,Du(e),t)for(e=0;e<t.length;e++)Du(t[e])}}function Kh(e,t){return e(t)}function Qh(){}var eo=!1;function Jh(e,t,n){if(eo)return e(t,n);eo=!0;try{return Kh(e,t,n)}finally{eo=!1,(Sr!==null||kr!==null)&&(Qh(),Gh())}}function js(e,t){var n=e.stateNode;if(n===null)return null;var r=Sa(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var Xo=!1;if(Ht)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){Xo=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{Xo=!1}function Cg(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var ls=!1,Fi=null,zi=!1,Zo=null,Tg={onError:function(e){ls=!0,Fi=e}};function Pg(e,t,n,r,s,i,a,l,c){ls=!1,Fi=null,Cg.apply(Tg,arguments)}function Ag(e,t,n,r,s,i,a,l,c){if(Pg.apply(this,arguments),ls){if(ls){var u=Fi;ls=!1,Fi=null}else throw Error(L(198));zi||(zi=!0,Zo=u)}}function Wn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Yh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Iu(e){if(Wn(e)!==e)throw Error(L(188))}function Og(e){var t=e.alternate;if(!t){if(t=Wn(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Iu(s),e;if(i===r)return Iu(s),t;i=i.sibling}throw Error(L(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function Xh(e){return e=Og(e),e!==null?Zh(e):null}function Zh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zh(e);if(t!==null)return t;e=e.sibling}return null}var ef=lt.unstable_scheduleCallback,Lu=lt.unstable_cancelCallback,Rg=lt.unstable_shouldYield,Dg=lt.unstable_requestPaint,Ee=lt.unstable_now,Ig=lt.unstable_getCurrentPriorityLevel,nc=lt.unstable_ImmediatePriority,tf=lt.unstable_UserBlockingPriority,qi=lt.unstable_NormalPriority,Lg=lt.unstable_LowPriority,nf=lt.unstable_IdlePriority,va=null,It=null;function $g(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(va,e,void 0,(e.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:Bg,Mg=Math.log,Ug=Math.LN2;function Bg(e){return e>>>=0,e===0?32:31-(Mg(e)/Ug|0)|0}var ni=64,ri=4194304;function ss(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=ss(l):(i&=a,i!==0&&(r=ss(i)))}else a=n&~s,a!==0?r=ss(a):i!==0&&(r=ss(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-bt(t),s=1<<n,r|=e[n],t&=~s;return r}function Fg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-bt(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Fg(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function el(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rf(){var e=ni;return ni<<=1,!(ni&4194240)&&(ni=64),e}function to(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Fs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bt(t),e[t]=n}function qg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-bt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function rc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var he=0;function sf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var af,sc,of,lf,cf,tl=!1,si=[],un=null,dn=null,hn=null,Ns=new Map,bs=new Map,sn=[],Wg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $u(e,t){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":hn=null;break;case"pointerover":case"pointerout":Ns.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bs.delete(t.pointerId)}}function Kr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=qs(t),t!==null&&sc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Hg(e,t,n,r,s){switch(t){case"focusin":return un=Kr(un,e,t,n,r,s),!0;case"dragenter":return dn=Kr(dn,e,t,n,r,s),!0;case"mouseover":return hn=Kr(hn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ns.set(i,Kr(Ns.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,bs.set(i,Kr(bs.get(i)||null,e,t,n,r,s)),!0}return!1}function uf(e){var t=Rn(e.target);if(t!==null){var n=Wn(t);if(n!==null){if(t=n.tag,t===13){if(t=Yh(n),t!==null){e.blockedOn=t,cf(e.priority,function(){of(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ni(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Jo=r,n.target.dispatchEvent(r),Jo=null}else return t=qs(n),t!==null&&sc(t),e.blockedOn=n,!1;t.shift()}return!0}function Mu(e,t,n){Ni(e)&&n.delete(t)}function Vg(){tl=!1,un!==null&&Ni(un)&&(un=null),dn!==null&&Ni(dn)&&(dn=null),hn!==null&&Ni(hn)&&(hn=null),Ns.forEach(Mu),bs.forEach(Mu)}function Qr(e,t){e.blockedOn===t&&(e.blockedOn=null,tl||(tl=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,Vg)))}function Es(e){function t(s){return Qr(s,e)}if(0<si.length){Qr(si[0],e);for(var n=1;n<si.length;n++){var r=si[n];r.blockedOn===e&&(r.blockedOn=null)}}for(un!==null&&Qr(un,e),dn!==null&&Qr(dn,e),hn!==null&&Qr(hn,e),Ns.forEach(t),bs.forEach(t),n=0;n<sn.length;n++)r=sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<sn.length&&(n=sn[0],n.blockedOn===null);)uf(n),n.blockedOn===null&&sn.shift()}var jr=Qt.ReactCurrentBatchConfig,Hi=!0;function Gg(e,t,n,r){var s=he,i=jr.transition;jr.transition=null;try{he=1,ic(e,t,n,r)}finally{he=s,jr.transition=i}}function Kg(e,t,n,r){var s=he,i=jr.transition;jr.transition=null;try{he=4,ic(e,t,n,r)}finally{he=s,jr.transition=i}}function ic(e,t,n,r){if(Hi){var s=nl(e,t,n,r);if(s===null)ho(e,t,r,Vi,n),$u(e,r);else if(Hg(s,e,t,n,r))r.stopPropagation();else if($u(e,r),t&4&&-1<Wg.indexOf(e)){for(;s!==null;){var i=qs(s);if(i!==null&&af(i),i=nl(e,t,n,r),i===null&&ho(e,t,r,Vi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ho(e,t,r,null,n)}}var Vi=null;function nl(e,t,n,r){if(Vi=null,e=tc(r),e=Rn(e),e!==null)if(t=Wn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Yh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vi=e,null}function df(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ig()){case nc:return 1;case tf:return 4;case qi:case Lg:return 16;case nf:return 536870912;default:return 16}default:return 16}}var ln=null,ac=null,bi=null;function hf(){if(bi)return bi;var e,t=ac,n=t.length,r,s="value"in ln?ln.value:ln.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return bi=s.slice(e,1<r?1-r:void 0)}function Ei(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ii(){return!0}function Uu(){return!1}function ut(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ii:Uu,this.isPropagationStopped=Uu,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),t}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oc=ut($r),zs=je({},$r,{view:0,detail:0}),Qg=ut(zs),no,ro,Jr,wa=je({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jr&&(Jr&&e.type==="mousemove"?(no=e.screenX-Jr.screenX,ro=e.screenY-Jr.screenY):ro=no=0,Jr=e),no)},movementY:function(e){return"movementY"in e?e.movementY:ro}}),Bu=ut(wa),Jg=je({},wa,{dataTransfer:0}),Yg=ut(Jg),Xg=je({},zs,{relatedTarget:0}),so=ut(Xg),Zg=je({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),ey=ut(Zg),ty=je({},$r,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ny=ut(ty),ry=je({},$r,{data:0}),Fu=ut(ry),sy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ay={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ay[e])?!!t[e]:!1}function lc(){return oy}var ly=je({},zs,{key:function(e){if(e.key){var t=sy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ei(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lc,charCode:function(e){return e.type==="keypress"?Ei(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ei(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cy=ut(ly),uy=je({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=ut(uy),dy=je({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lc}),hy=ut(dy),fy=je({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),py=ut(fy),my=je({},wa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gy=ut(my),yy=[9,13,27,32],cc=Ht&&"CompositionEvent"in window,cs=null;Ht&&"documentMode"in document&&(cs=document.documentMode);var vy=Ht&&"TextEvent"in window&&!cs,ff=Ht&&(!cc||cs&&8<cs&&11>=cs),qu=" ",Wu=!1;function pf(e,t){switch(e){case"keyup":return yy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var dr=!1;function wy(e,t){switch(e){case"compositionend":return mf(t);case"keypress":return t.which!==32?null:(Wu=!0,qu);case"textInput":return e=t.data,e===qu&&Wu?null:e;default:return null}}function _y(e,t){if(dr)return e==="compositionend"||!cc&&pf(e,t)?(e=hf(),bi=ac=ln=null,dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ff&&t.locale!=="ko"?null:t.data;default:return null}}var xy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xy[e.type]:t==="textarea"}function gf(e,t,n,r){Vh(r),t=Gi(t,"onChange"),0<t.length&&(n=new oc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var us=null,Cs=null;function Sy(e){Ef(e,0)}function _a(e){var t=pr(e);if(Uh(t))return e}function ky(e,t){if(e==="change")return t}var yf=!1;if(Ht){var io;if(Ht){var ao="oninput"in document;if(!ao){var Vu=document.createElement("div");Vu.setAttribute("oninput","return;"),ao=typeof Vu.oninput=="function"}io=ao}else io=!1;yf=io&&(!document.documentMode||9<document.documentMode)}function Gu(){us&&(us.detachEvent("onpropertychange",vf),Cs=us=null)}function vf(e){if(e.propertyName==="value"&&_a(Cs)){var t=[];gf(t,Cs,e,tc(e)),Jh(Sy,t)}}function jy(e,t,n){e==="focusin"?(Gu(),us=t,Cs=n,us.attachEvent("onpropertychange",vf)):e==="focusout"&&Gu()}function Ny(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _a(Cs)}function by(e,t){if(e==="click")return _a(t)}function Ey(e,t){if(e==="input"||e==="change")return _a(t)}function Cy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:Cy;function Ts(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Mo.call(t,s)||!Ct(e[s],t[s]))return!1}return!0}function Ku(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qu(e,t){var n=Ku(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ku(n)}}function wf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _f(){for(var e=window,t=Bi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bi(e.document)}return t}function uc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ty(e){var t=_f(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wf(n.ownerDocument.documentElement,n)){if(r!==null&&uc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Qu(n,i);var a=Qu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Py=Ht&&"documentMode"in document&&11>=document.documentMode,hr=null,rl=null,ds=null,sl=!1;function Ju(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sl||hr==null||hr!==Bi(r)||(r=hr,"selectionStart"in r&&uc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ds&&Ts(ds,r)||(ds=r,r=Gi(rl,"onSelect"),0<r.length&&(t=new oc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hr)))}function ai(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fr={animationend:ai("Animation","AnimationEnd"),animationiteration:ai("Animation","AnimationIteration"),animationstart:ai("Animation","AnimationStart"),transitionend:ai("Transition","TransitionEnd")},oo={},xf={};Ht&&(xf=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function xa(e){if(oo[e])return oo[e];if(!fr[e])return e;var t=fr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in xf)return oo[e]=t[n];return e}var Sf=xa("animationend"),kf=xa("animationiteration"),jf=xa("animationstart"),Nf=xa("transitionend"),bf=new Map,Yu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _n(e,t){bf.set(e,t),qn(t,[e])}for(var lo=0;lo<Yu.length;lo++){var co=Yu[lo],Ay=co.toLowerCase(),Oy=co[0].toUpperCase()+co.slice(1);_n(Ay,"on"+Oy)}_n(Sf,"onAnimationEnd");_n(kf,"onAnimationIteration");_n(jf,"onAnimationStart");_n("dblclick","onDoubleClick");_n("focusin","onFocus");_n("focusout","onBlur");_n(Nf,"onTransitionEnd");Er("onMouseEnter",["mouseout","mouseover"]);Er("onMouseLeave",["mouseout","mouseover"]);Er("onPointerEnter",["pointerout","pointerover"]);Er("onPointerLeave",["pointerout","pointerover"]);qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qn("onBeforeInput",["compositionend","keypress","textInput","paste"]);qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ry=new Set("cancel close invalid load scroll toggle".split(" ").concat(is));function Xu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ag(r,t,void 0,e),e.currentTarget=null}function Ef(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Xu(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Xu(s,l,u),i=c}}}if(zi)throw e=Zo,zi=!1,Zo=null,e}function ve(e,t){var n=t[cl];n===void 0&&(n=t[cl]=new Set);var r=e+"__bubble";n.has(r)||(Cf(t,e,2,!1),n.add(r))}function uo(e,t,n){var r=0;t&&(r|=4),Cf(n,e,r,t)}var oi="_reactListening"+Math.random().toString(36).slice(2);function Ps(e){if(!e[oi]){e[oi]=!0,Dh.forEach(function(n){n!=="selectionchange"&&(Ry.has(n)||uo(n,!1,e),uo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[oi]||(t[oi]=!0,uo("selectionchange",!1,t))}}function Cf(e,t,n,r){switch(df(t)){case 1:var s=Gg;break;case 4:s=Kg;break;default:s=ic}n=s.bind(null,t,n,e),s=void 0,!Xo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ho(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Rn(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Jh(function(){var u=i,d=tc(n),h=[];e:{var g=bf.get(e);if(g!==void 0){var v=oc,_=e;switch(e){case"keypress":if(Ei(n)===0)break e;case"keydown":case"keyup":v=cy;break;case"focusin":_="focus",v=so;break;case"focusout":_="blur",v=so;break;case"beforeblur":case"afterblur":v=so;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Yg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=hy;break;case Sf:case kf:case jf:v=ey;break;case Nf:v=py;break;case"scroll":v=Qg;break;case"wheel":v=gy;break;case"copy":case"cut":case"paste":v=ny;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=zu}var S=(t&4)!==0,b=!S&&e==="scroll",m=S?g!==null?g+"Capture":null:g;S=[];for(var p=u,y;p!==null;){y=p;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,m!==null&&(x=js(p,m),x!=null&&S.push(As(p,x,y)))),b)break;p=p.return}0<S.length&&(g=new v(g,_,null,n,d),h.push({event:g,listeners:S}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==Jo&&(_=n.relatedTarget||n.fromElement)&&(Rn(_)||_[Vt]))break e;if((v||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=u,_=_?Rn(_):null,_!==null&&(b=Wn(_),_!==b||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=u),v!==_)){if(S=Bu,x="onMouseLeave",m="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(S=zu,x="onPointerLeave",m="onPointerEnter",p="pointer"),b=v==null?g:pr(v),y=_==null?g:pr(_),g=new S(x,p+"leave",v,n,d),g.target=b,g.relatedTarget=y,x=null,Rn(d)===u&&(S=new S(m,p+"enter",_,n,d),S.target=y,S.relatedTarget=b,x=S),b=x,v&&_)t:{for(S=v,m=_,p=0,y=S;y;y=Xn(y))p++;for(y=0,x=m;x;x=Xn(x))y++;for(;0<p-y;)S=Xn(S),p--;for(;0<y-p;)m=Xn(m),y--;for(;p--;){if(S===m||m!==null&&S===m.alternate)break t;S=Xn(S),m=Xn(m)}S=null}else S=null;v!==null&&Zu(h,g,v,S,!1),_!==null&&b!==null&&Zu(h,b,_,S,!0)}}e:{if(g=u?pr(u):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var P=ky;else if(Hu(g))if(yf)P=Ey;else{P=Ny;var N=jy}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(P=by);if(P&&(P=P(e,u))){gf(h,P,n,d);break e}N&&N(e,g,u),e==="focusout"&&(N=g._wrapperState)&&N.controlled&&g.type==="number"&&Ho(g,"number",g.value)}switch(N=u?pr(u):window,e){case"focusin":(Hu(N)||N.contentEditable==="true")&&(hr=N,rl=u,ds=null);break;case"focusout":ds=rl=hr=null;break;case"mousedown":sl=!0;break;case"contextmenu":case"mouseup":case"dragend":sl=!1,Ju(h,n,d);break;case"selectionchange":if(Py)break;case"keydown":case"keyup":Ju(h,n,d)}var A;if(cc)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else dr?pf(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(ff&&n.locale!=="ko"&&(dr||C!=="onCompositionStart"?C==="onCompositionEnd"&&dr&&(A=hf()):(ln=d,ac="value"in ln?ln.value:ln.textContent,dr=!0)),N=Gi(u,C),0<N.length&&(C=new Fu(C,e,null,n,d),h.push({event:C,listeners:N}),A?C.data=A:(A=mf(n),A!==null&&(C.data=A)))),(A=vy?wy(e,n):_y(e,n))&&(u=Gi(u,"onBeforeInput"),0<u.length&&(d=new Fu("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=A))}Ef(h,t)})}function As(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gi(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=js(e,n),i!=null&&r.unshift(As(e,i,s)),i=js(e,t),i!=null&&r.push(As(e,i,s))),e=e.return}return r}function Xn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zu(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=js(n,i),c!=null&&a.unshift(As(n,c,l))):s||(c=js(n,i),c!=null&&a.push(As(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Dy=/\r\n?/g,Iy=/\u0000|\uFFFD/g;function ed(e){return(typeof e=="string"?e:""+e).replace(Dy,`
`).replace(Iy,"")}function li(e,t,n){if(t=ed(t),ed(e)!==t&&n)throw Error(L(425))}function Ki(){}var il=null,al=null;function ol(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ll=typeof setTimeout=="function"?setTimeout:void 0,Ly=typeof clearTimeout=="function"?clearTimeout:void 0,td=typeof Promise=="function"?Promise:void 0,$y=typeof queueMicrotask=="function"?queueMicrotask:typeof td<"u"?function(e){return td.resolve(null).then(e).catch(My)}:ll;function My(e){setTimeout(function(){throw e})}function fo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Es(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Es(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function nd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Mr=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Mr,Os="__reactProps$"+Mr,Vt="__reactContainer$"+Mr,cl="__reactEvents$"+Mr,Uy="__reactListeners$"+Mr,By="__reactHandles$"+Mr;function Rn(e){var t=e[Rt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vt]||n[Rt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=nd(e);e!==null;){if(n=e[Rt])return n;e=nd(e)}return t}e=n,n=e.parentNode}return null}function qs(e){return e=e[Rt]||e[Vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function Sa(e){return e[Os]||null}var ul=[],mr=-1;function xn(e){return{current:e}}function we(e){0>mr||(e.current=ul[mr],ul[mr]=null,mr--)}function ge(e,t){mr++,ul[mr]=e.current,e.current=t}var wn={},He=xn(wn),tt=xn(!1),Mn=wn;function Cr(e,t){var n=e.type.contextTypes;if(!n)return wn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function nt(e){return e=e.childContextTypes,e!=null}function Qi(){we(tt),we(He)}function rd(e,t,n){if(He.current!==wn)throw Error(L(168));ge(He,t),ge(tt,n)}function Tf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(L(108,jg(e)||"Unknown",s));return je({},n,r)}function Ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wn,Mn=He.current,ge(He,e),ge(tt,tt.current),!0}function sd(e,t,n){var r=e.stateNode;if(!r)throw Error(L(169));n?(e=Tf(e,t,Mn),r.__reactInternalMemoizedMergedChildContext=e,we(tt),we(He),ge(He,e)):we(tt),ge(tt,n)}var Ft=null,ka=!1,po=!1;function Pf(e){Ft===null?Ft=[e]:Ft.push(e)}function Fy(e){ka=!0,Pf(e)}function Sn(){if(!po&&Ft!==null){po=!0;var e=0,t=he;try{var n=Ft;for(he=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ft=null,ka=!1}catch(s){throw Ft!==null&&(Ft=Ft.slice(e+1)),ef(nc,Sn),s}finally{he=t,po=!1}}return null}var gr=[],yr=0,Yi=null,Xi=0,dt=[],ht=0,Un=null,zt=1,qt="";function Tn(e,t){gr[yr++]=Xi,gr[yr++]=Yi,Yi=e,Xi=t}function Af(e,t,n){dt[ht++]=zt,dt[ht++]=qt,dt[ht++]=Un,Un=e;var r=zt;e=qt;var s=32-bt(r)-1;r&=~(1<<s),n+=1;var i=32-bt(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,zt=1<<32-bt(t)+s|n<<s|r,qt=i+e}else zt=1<<i|n<<s|r,qt=e}function dc(e){e.return!==null&&(Tn(e,1),Af(e,1,0))}function hc(e){for(;e===Yi;)Yi=gr[--yr],gr[yr]=null,Xi=gr[--yr],gr[yr]=null;for(;e===Un;)Un=dt[--ht],dt[ht]=null,qt=dt[--ht],dt[ht]=null,zt=dt[--ht],dt[ht]=null}var ot=null,at=null,xe=!1,Nt=null;function Of(e,t){var n=ft(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function id(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ot=e,at=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ot=e,at=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Un!==null?{id:zt,overflow:qt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ft(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ot=e,at=null,!0):!1;default:return!1}}function dl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hl(e){if(xe){var t=at;if(t){var n=t;if(!id(e,t)){if(dl(e))throw Error(L(418));t=fn(n.nextSibling);var r=ot;t&&id(e,t)?Of(r,n):(e.flags=e.flags&-4097|2,xe=!1,ot=e)}}else{if(dl(e))throw Error(L(418));e.flags=e.flags&-4097|2,xe=!1,ot=e}}}function ad(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ot=e}function ci(e){if(e!==ot)return!1;if(!xe)return ad(e),xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ol(e.type,e.memoizedProps)),t&&(t=at)){if(dl(e))throw Rf(),Error(L(418));for(;t;)Of(e,t),t=fn(t.nextSibling)}if(ad(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){at=fn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}at=null}}else at=ot?fn(e.stateNode.nextSibling):null;return!0}function Rf(){for(var e=at;e;)e=fn(e.nextSibling)}function Tr(){at=ot=null,xe=!1}function fc(e){Nt===null?Nt=[e]:Nt.push(e)}var zy=Qt.ReactCurrentBatchConfig;function Yr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,e))}return e}function ui(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function od(e){var t=e._init;return t(e._payload)}function Df(e){function t(m,p){if(e){var y=m.deletions;y===null?(m.deletions=[p],m.flags|=16):y.push(p)}}function n(m,p){if(!e)return null;for(;p!==null;)t(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=yn(m,p),m.index=0,m.sibling=null,m}function i(m,p,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<p?(m.flags|=2,p):y):(m.flags|=2,p)):(m.flags|=1048576,p)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,p,y,x){return p===null||p.tag!==6?(p=xo(y,m.mode,x),p.return=m,p):(p=s(p,y),p.return=m,p)}function c(m,p,y,x){var P=y.type;return P===ur?d(m,p,y.props.children,x,y.key):p!==null&&(p.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===nn&&od(P)===p.type)?(x=s(p,y.props),x.ref=Yr(m,p,y),x.return=m,x):(x=Di(y.type,y.key,y.props,null,m.mode,x),x.ref=Yr(m,p,y),x.return=m,x)}function u(m,p,y,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=So(y,m.mode,x),p.return=m,p):(p=s(p,y.children||[]),p.return=m,p)}function d(m,p,y,x,P){return p===null||p.tag!==7?(p=$n(y,m.mode,x,P),p.return=m,p):(p=s(p,y),p.return=m,p)}function h(m,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=xo(""+p,m.mode,y),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Zs:return y=Di(p.type,p.key,p.props,null,m.mode,y),y.ref=Yr(m,null,p),y.return=m,y;case cr:return p=So(p,m.mode,y),p.return=m,p;case nn:var x=p._init;return h(m,x(p._payload),y)}if(rs(p)||Vr(p))return p=$n(p,m.mode,y,null),p.return=m,p;ui(m,p)}return null}function g(m,p,y,x){var P=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return P!==null?null:l(m,p,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zs:return y.key===P?c(m,p,y,x):null;case cr:return y.key===P?u(m,p,y,x):null;case nn:return P=y._init,g(m,p,P(y._payload),x)}if(rs(y)||Vr(y))return P!==null?null:d(m,p,y,x,null);ui(m,y)}return null}function v(m,p,y,x,P){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(y)||null,l(p,m,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zs:return m=m.get(x.key===null?y:x.key)||null,c(p,m,x,P);case cr:return m=m.get(x.key===null?y:x.key)||null,u(p,m,x,P);case nn:var N=x._init;return v(m,p,y,N(x._payload),P)}if(rs(x)||Vr(x))return m=m.get(y)||null,d(p,m,x,P,null);ui(p,x)}return null}function _(m,p,y,x){for(var P=null,N=null,A=p,C=p=0,q=null;A!==null&&C<y.length;C++){A.index>C?(q=A,A=null):q=A.sibling;var F=g(m,A,y[C],x);if(F===null){A===null&&(A=q);break}e&&A&&F.alternate===null&&t(m,A),p=i(F,p,C),N===null?P=F:N.sibling=F,N=F,A=q}if(C===y.length)return n(m,A),xe&&Tn(m,C),P;if(A===null){for(;C<y.length;C++)A=h(m,y[C],x),A!==null&&(p=i(A,p,C),N===null?P=A:N.sibling=A,N=A);return xe&&Tn(m,C),P}for(A=r(m,A);C<y.length;C++)q=v(A,m,C,y[C],x),q!==null&&(e&&q.alternate!==null&&A.delete(q.key===null?C:q.key),p=i(q,p,C),N===null?P=q:N.sibling=q,N=q);return e&&A.forEach(function(O){return t(m,O)}),xe&&Tn(m,C),P}function S(m,p,y,x){var P=Vr(y);if(typeof P!="function")throw Error(L(150));if(y=P.call(y),y==null)throw Error(L(151));for(var N=P=null,A=p,C=p=0,q=null,F=y.next();A!==null&&!F.done;C++,F=y.next()){A.index>C?(q=A,A=null):q=A.sibling;var O=g(m,A,F.value,x);if(O===null){A===null&&(A=q);break}e&&A&&O.alternate===null&&t(m,A),p=i(O,p,C),N===null?P=O:N.sibling=O,N=O,A=q}if(F.done)return n(m,A),xe&&Tn(m,C),P;if(A===null){for(;!F.done;C++,F=y.next())F=h(m,F.value,x),F!==null&&(p=i(F,p,C),N===null?P=F:N.sibling=F,N=F);return xe&&Tn(m,C),P}for(A=r(m,A);!F.done;C++,F=y.next())F=v(A,m,C,F.value,x),F!==null&&(e&&F.alternate!==null&&A.delete(F.key===null?C:F.key),p=i(F,p,C),N===null?P=F:N.sibling=F,N=F);return e&&A.forEach(function(E){return t(m,E)}),xe&&Tn(m,C),P}function b(m,p,y,x){if(typeof y=="object"&&y!==null&&y.type===ur&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Zs:e:{for(var P=y.key,N=p;N!==null;){if(N.key===P){if(P=y.type,P===ur){if(N.tag===7){n(m,N.sibling),p=s(N,y.props.children),p.return=m,m=p;break e}}else if(N.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===nn&&od(P)===N.type){n(m,N.sibling),p=s(N,y.props),p.ref=Yr(m,N,y),p.return=m,m=p;break e}n(m,N);break}else t(m,N);N=N.sibling}y.type===ur?(p=$n(y.props.children,m.mode,x,y.key),p.return=m,m=p):(x=Di(y.type,y.key,y.props,null,m.mode,x),x.ref=Yr(m,p,y),x.return=m,m=x)}return a(m);case cr:e:{for(N=y.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(m,p.sibling),p=s(p,y.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else t(m,p);p=p.sibling}p=So(y,m.mode,x),p.return=m,m=p}return a(m);case nn:return N=y._init,b(m,p,N(y._payload),x)}if(rs(y))return _(m,p,y,x);if(Vr(y))return S(m,p,y,x);ui(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(m,p.sibling),p=s(p,y),p.return=m,m=p):(n(m,p),p=xo(y,m.mode,x),p.return=m,m=p),a(m)):n(m,p)}return b}var Pr=Df(!0),If=Df(!1),Zi=xn(null),ea=null,vr=null,pc=null;function mc(){pc=vr=ea=null}function gc(e){var t=Zi.current;we(Zi),e._currentValue=t}function fl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Nr(e,t){ea=e,pc=vr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(et=!0),e.firstContext=null)}function gt(e){var t=e._currentValue;if(pc!==e)if(e={context:e,memoizedValue:t,next:null},vr===null){if(ea===null)throw Error(L(308));vr=e,ea.dependencies={lanes:0,firstContext:e}}else vr=vr.next=e;return t}var Dn=null;function yc(e){Dn===null?Dn=[e]:Dn.push(e)}function Lf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,yc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Gt(e,r)}function Gt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var rn=!1;function vc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $f(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Gt(e,n)}return s=r.interleaved,s===null?(t.next=t,yc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Gt(e,n)}function Ci(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rc(e,n)}}function ld(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ta(e,t,n,r){var s=e.updateQueue;rn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var g=l.lane,v=l.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=e,S=l;switch(g=t,v=n,S.tag){case 1:if(_=S.payload,typeof _=="function"){h=_.call(v,h,g);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=S.payload,g=typeof _=="function"?_.call(v,h,g):_,g==null)break e;h=je({},h,g);break e;case 2:rn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else v={eventTime:v,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=v,c=h):d=d.next=v,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Fn|=a,e.lanes=a,e.memoizedState=h}}function cd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(L(191,s));s.call(r)}}}var Ws={},Lt=xn(Ws),Rs=xn(Ws),Ds=xn(Ws);function In(e){if(e===Ws)throw Error(L(174));return e}function wc(e,t){switch(ge(Ds,t),ge(Rs,e),ge(Lt,Ws),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Go(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Go(t,e)}we(Lt),ge(Lt,t)}function Ar(){we(Lt),we(Rs),we(Ds)}function Mf(e){In(Ds.current);var t=In(Lt.current),n=Go(t,e.type);t!==n&&(ge(Rs,e),ge(Lt,n))}function _c(e){Rs.current===e&&(we(Lt),we(Rs))}var Se=xn(0);function na(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mo=[];function xc(){for(var e=0;e<mo.length;e++)mo[e]._workInProgressVersionPrimary=null;mo.length=0}var Ti=Qt.ReactCurrentDispatcher,go=Qt.ReactCurrentBatchConfig,Bn=0,ke=null,De=null,$e=null,ra=!1,hs=!1,Is=0,qy=0;function ze(){throw Error(L(321))}function Sc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ct(e[n],t[n]))return!1;return!0}function kc(e,t,n,r,s,i){if(Bn=i,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ti.current=e===null||e.memoizedState===null?Gy:Ky,e=n(r,s),hs){i=0;do{if(hs=!1,Is=0,25<=i)throw Error(L(301));i+=1,$e=De=null,t.updateQueue=null,Ti.current=Qy,e=n(r,s)}while(hs)}if(Ti.current=sa,t=De!==null&&De.next!==null,Bn=0,$e=De=ke=null,ra=!1,t)throw Error(L(300));return e}function jc(){var e=Is!==0;return Is=0,e}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?ke.memoizedState=$e=e:$e=$e.next=e,$e}function yt(){if(De===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var t=$e===null?ke.memoizedState:$e.next;if(t!==null)$e=t,De=e;else{if(e===null)throw Error(L(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},$e===null?ke.memoizedState=$e=e:$e=$e.next=e}return $e}function Ls(e,t){return typeof t=="function"?t(e):t}function yo(e){var t=yt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=De,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Bn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,ke.lanes|=d,Fn|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Ct(r,t.memoizedState)||(et=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,ke.lanes|=i,Fn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vo(e){var t=yt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Ct(i,t.memoizedState)||(et=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Uf(){}function Bf(e,t){var n=ke,r=yt(),s=t(),i=!Ct(r.memoizedState,s);if(i&&(r.memoizedState=s,et=!0),r=r.queue,Nc(qf.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,$s(9,zf.bind(null,n,r,s,t),void 0,null),Me===null)throw Error(L(349));Bn&30||Ff(n,t,s)}return s}function Ff(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zf(e,t,n,r){t.value=n,t.getSnapshot=r,Wf(t)&&Hf(e)}function qf(e,t,n){return n(function(){Wf(t)&&Hf(e)})}function Wf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ct(e,n)}catch{return!0}}function Hf(e){var t=Gt(e,1);t!==null&&Et(t,e,1,-1)}function ud(e){var t=At();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:e},t.queue=e,e=e.dispatch=Vy.bind(null,ke,e),[t.memoizedState,e]}function $s(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Vf(){return yt().memoizedState}function Pi(e,t,n,r){var s=At();ke.flags|=e,s.memoizedState=$s(1|t,n,void 0,r===void 0?null:r)}function ja(e,t,n,r){var s=yt();r=r===void 0?null:r;var i=void 0;if(De!==null){var a=De.memoizedState;if(i=a.destroy,r!==null&&Sc(r,a.deps)){s.memoizedState=$s(t,n,i,r);return}}ke.flags|=e,s.memoizedState=$s(1|t,n,i,r)}function dd(e,t){return Pi(8390656,8,e,t)}function Nc(e,t){return ja(2048,8,e,t)}function Gf(e,t){return ja(4,2,e,t)}function Kf(e,t){return ja(4,4,e,t)}function Qf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jf(e,t,n){return n=n!=null?n.concat([e]):null,ja(4,4,Qf.bind(null,t,e),n)}function bc(){}function Yf(e,t){var n=yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Sc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xf(e,t){var n=yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Sc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zf(e,t,n){return Bn&21?(Ct(n,t)||(n=rf(),ke.lanes|=n,Fn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,et=!0),e.memoizedState=n)}function Wy(e,t){var n=he;he=n!==0&&4>n?n:4,e(!0);var r=go.transition;go.transition={};try{e(!1),t()}finally{he=n,go.transition=r}}function ep(){return yt().memoizedState}function Hy(e,t,n){var r=gn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tp(e))np(t,n);else if(n=Lf(e,t,n,r),n!==null){var s=Qe();Et(n,e,r,s),rp(n,t,r)}}function Vy(e,t,n){var r=gn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tp(e))np(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ct(l,a)){var c=t.interleaved;c===null?(s.next=s,yc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Lf(e,t,s,r),n!==null&&(s=Qe(),Et(n,e,r,s),rp(n,t,r))}}function tp(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function np(e,t){hs=ra=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rc(e,n)}}var sa={readContext:gt,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},Gy={readContext:gt,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:dd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Pi(4194308,4,Qf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pi(4,2,e,t)},useMemo:function(e,t){var n=At();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=At();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Hy.bind(null,ke,e),[r.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:ud,useDebugValue:bc,useDeferredValue:function(e){return At().memoizedState=e},useTransition:function(){var e=ud(!1),t=e[0];return e=Wy.bind(null,e[1]),At().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ke,s=At();if(xe){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),Me===null)throw Error(L(349));Bn&30||Ff(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,dd(qf.bind(null,r,i,e),[e]),r.flags|=2048,$s(9,zf.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=At(),t=Me.identifierPrefix;if(xe){var n=qt,r=zt;n=(r&~(1<<32-bt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Is++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=qy++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ky={readContext:gt,useCallback:Yf,useContext:gt,useEffect:Nc,useImperativeHandle:Jf,useInsertionEffect:Gf,useLayoutEffect:Kf,useMemo:Xf,useReducer:yo,useRef:Vf,useState:function(){return yo(Ls)},useDebugValue:bc,useDeferredValue:function(e){var t=yt();return Zf(t,De.memoizedState,e)},useTransition:function(){var e=yo(Ls)[0],t=yt().memoizedState;return[e,t]},useMutableSource:Uf,useSyncExternalStore:Bf,useId:ep,unstable_isNewReconciler:!1},Qy={readContext:gt,useCallback:Yf,useContext:gt,useEffect:Nc,useImperativeHandle:Jf,useInsertionEffect:Gf,useLayoutEffect:Kf,useMemo:Xf,useReducer:vo,useRef:Vf,useState:function(){return vo(Ls)},useDebugValue:bc,useDeferredValue:function(e){var t=yt();return De===null?t.memoizedState=e:Zf(t,De.memoizedState,e)},useTransition:function(){var e=vo(Ls)[0],t=yt().memoizedState;return[e,t]},useMutableSource:Uf,useSyncExternalStore:Bf,useId:ep,unstable_isNewReconciler:!1};function St(e,t){if(e&&e.defaultProps){t=je({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function pl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Na={isMounted:function(e){return(e=e._reactInternals)?Wn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Qe(),s=gn(e),i=Wt(r,s);i.payload=t,n!=null&&(i.callback=n),t=pn(e,i,s),t!==null&&(Et(t,e,s,r),Ci(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Qe(),s=gn(e),i=Wt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=pn(e,i,s),t!==null&&(Et(t,e,s,r),Ci(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qe(),r=gn(e),s=Wt(n,r);s.tag=2,t!=null&&(s.callback=t),t=pn(e,s,r),t!==null&&(Et(t,e,r,n),Ci(t,e,r))}};function hd(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Ts(n,r)||!Ts(s,i):!0}function sp(e,t,n){var r=!1,s=wn,i=t.contextType;return typeof i=="object"&&i!==null?i=gt(i):(s=nt(t)?Mn:He.current,r=t.contextTypes,i=(r=r!=null)?Cr(e,s):wn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Na,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function fd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Na.enqueueReplaceState(t,t.state,null)}function ml(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},vc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=gt(i):(i=nt(t)?Mn:He.current,s.context=Cr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(pl(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Na.enqueueReplaceState(s,s.state,null),ta(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Or(e,t){try{var n="",r=t;do n+=kg(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function wo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Jy=typeof WeakMap=="function"?WeakMap:Map;function ip(e,t,n){n=Wt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){aa||(aa=!0,bl=r),gl(e,t)},n}function ap(e,t,n){n=Wt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){gl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gl(e,t),typeof r!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function pd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Jy;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=uv.bind(null,e,t,n),t.then(e,e))}function md(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gd(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Wt(-1,1),t.tag=2,pn(n,t,1))),n.lanes|=1),e)}var Yy=Qt.ReactCurrentOwner,et=!1;function Ke(e,t,n,r){t.child=e===null?If(t,null,n,r):Pr(t,e.child,n,r)}function yd(e,t,n,r,s){n=n.render;var i=t.ref;return Nr(t,s),r=kc(e,t,n,r,i,s),n=jc(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Kt(e,t,s)):(xe&&n&&dc(t),t.flags|=1,Ke(e,t,r,s),t.child)}function vd(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Dc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,op(e,t,i,r,s)):(e=Di(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ts,n(a,r)&&e.ref===t.ref)return Kt(e,t,s)}return t.flags|=1,e=yn(i,r),e.ref=t.ref,e.return=t,t.child=e}function op(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ts(i,r)&&e.ref===t.ref)if(et=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(et=!0);else return t.lanes=e.lanes,Kt(e,t,s)}return yl(e,t,n,r,s)}function lp(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(_r,it),it|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ge(_r,it),it|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(_r,it),it|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ge(_r,it),it|=r;return Ke(e,t,s,n),t.child}function cp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function yl(e,t,n,r,s){var i=nt(n)?Mn:He.current;return i=Cr(t,i),Nr(t,s),n=kc(e,t,n,r,i,s),r=jc(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Kt(e,t,s)):(xe&&r&&dc(t),t.flags|=1,Ke(e,t,n,s),t.child)}function wd(e,t,n,r,s){if(nt(n)){var i=!0;Ji(t)}else i=!1;if(Nr(t,s),t.stateNode===null)Ai(e,t),sp(t,n,r),ml(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=gt(u):(u=nt(n)?Mn:He.current,u=Cr(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&fd(t,a,r,u),rn=!1;var g=t.memoizedState;a.state=g,ta(t,r,a,s),c=t.memoizedState,l!==r||g!==c||tt.current||rn?(typeof d=="function"&&(pl(t,n,d,r),c=t.memoizedState),(l=rn||hd(t,n,l,r,g,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,$f(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:St(t.type,l),a.props=u,h=t.pendingProps,g=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=gt(c):(c=nt(n)?Mn:He.current,c=Cr(t,c));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||g!==c)&&fd(t,a,r,c),rn=!1,g=t.memoizedState,a.state=g,ta(t,r,a,s);var _=t.memoizedState;l!==h||g!==_||tt.current||rn?(typeof v=="function"&&(pl(t,n,v,r),_=t.memoizedState),(u=rn||hd(t,n,u,r,g,_,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,_,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,_,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),a.props=r,a.state=_,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return vl(e,t,n,r,i,s)}function vl(e,t,n,r,s,i){cp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&sd(t,n,!1),Kt(e,t,i);r=t.stateNode,Yy.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Pr(t,e.child,null,i),t.child=Pr(t,null,l,i)):Ke(e,t,l,i),t.memoizedState=r.state,s&&sd(t,n,!0),t.child}function up(e){var t=e.stateNode;t.pendingContext?rd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rd(e,t.context,!1),wc(e,t.containerInfo)}function _d(e,t,n,r,s){return Tr(),fc(s),t.flags|=256,Ke(e,t,n,r),t.child}var wl={dehydrated:null,treeContext:null,retryLane:0};function _l(e){return{baseLanes:e,cachePool:null,transitions:null}}function dp(e,t,n){var r=t.pendingProps,s=Se.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ge(Se,s&1),e===null)return hl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ca(a,r,0,null),e=$n(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=_l(n),t.memoizedState=wl,e):Ec(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Xy(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=yn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=yn(l,i):(i=$n(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?_l(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=wl,r}return i=e.child,e=i.sibling,r=yn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ec(e,t){return t=Ca({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function di(e,t,n,r){return r!==null&&fc(r),Pr(t,e.child,null,n),e=Ec(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xy(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=wo(Error(L(422))),di(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Ca({mode:"visible",children:r.children},s,0,null),i=$n(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Pr(t,e.child,null,a),t.child.memoizedState=_l(a),t.memoizedState=wl,i);if(!(t.mode&1))return di(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(L(419)),r=wo(i,r,void 0),di(e,t,a,r)}if(l=(a&e.childLanes)!==0,et||l){if(r=Me,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gt(e,s),Et(r,e,s,-1))}return Rc(),r=wo(Error(L(421))),di(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=dv.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,at=fn(s.nextSibling),ot=t,xe=!0,Nt=null,e!==null&&(dt[ht++]=zt,dt[ht++]=qt,dt[ht++]=Un,zt=e.id,qt=e.overflow,Un=t),t=Ec(t,r.children),t.flags|=4096,t)}function xd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fl(e.return,t,n)}function _o(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function hp(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ke(e,t,r.children,n),r=Se.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xd(e,n,t);else if(e.tag===19)xd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ge(Se,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&na(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),_o(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&na(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}_o(t,!0,n,null,i);break;case"together":_o(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ai(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=yn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Zy(e,t,n){switch(t.tag){case 3:up(t),Tr();break;case 5:Mf(t);break;case 1:nt(t.type)&&Ji(t);break;case 4:wc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ge(Zi,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ge(Se,Se.current&1),t.flags|=128,null):n&t.child.childLanes?dp(e,t,n):(ge(Se,Se.current&1),e=Kt(e,t,n),e!==null?e.sibling:null);ge(Se,Se.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return hp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Se,Se.current),r)break;return null;case 22:case 23:return t.lanes=0,lp(e,t,n)}return Kt(e,t,n)}var fp,xl,pp,mp;fp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xl=function(){};pp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,In(Lt.current);var i=null;switch(n){case"input":s=qo(e,s),r=qo(e,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=Vo(e,s),r=Vo(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ki)}Ko(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ss.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ss.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ve("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};mp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Xr(e,t){if(!xe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ev(e,t,n){var r=t.pendingProps;switch(hc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return nt(t.type)&&Qi(),qe(t),null;case 3:return r=t.stateNode,Ar(),we(tt),we(He),xc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ci(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Nt!==null&&(Tl(Nt),Nt=null))),xl(e,t),qe(t),null;case 5:_c(t);var s=In(Ds.current);if(n=t.type,e!==null&&t.stateNode!=null)pp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(L(166));return qe(t),null}if(e=In(Lt.current),ci(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Rt]=t,r[Os]=i,e=(t.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<is.length;s++)ve(is[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":Pu(r,i),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ve("invalid",r);break;case"textarea":Ou(r,i),ve("invalid",r)}Ko(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&li(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&li(r.textContent,l,e),s=["children",""+l]):Ss.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ve("scroll",r)}switch(n){case"input":ei(r),Au(r,i,!0);break;case"textarea":ei(r),Ru(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ki)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Rt]=t,e[Os]=r,fp(e,t,!1,!1),t.stateNode=e;e:{switch(a=Qo(n,r),n){case"dialog":ve("cancel",e),ve("close",e),s=r;break;case"iframe":case"object":case"embed":ve("load",e),s=r;break;case"video":case"audio":for(s=0;s<is.length;s++)ve(is[s],e);s=r;break;case"source":ve("error",e),s=r;break;case"img":case"image":case"link":ve("error",e),ve("load",e),s=r;break;case"details":ve("toggle",e),s=r;break;case"input":Pu(e,r),s=qo(e,r),ve("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),ve("invalid",e);break;case"textarea":Ou(e,r),s=Vo(e,r),ve("invalid",e);break;default:s=r}Ko(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Hh(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qh(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ks(e,c):typeof c=="number"&&ks(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ss.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ve("scroll",e):c!=null&&Yl(e,i,c,a))}switch(n){case"input":ei(e),Au(e,r,!1);break;case"textarea":ei(e),Ru(e);break;case"option":r.value!=null&&e.setAttribute("value",""+vn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?xr(e,!!r.multiple,i,!1):r.defaultValue!=null&&xr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ki)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qe(t),null;case 6:if(e&&t.stateNode!=null)mp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(L(166));if(n=In(Ds.current),In(Lt.current),ci(t)){if(r=t.stateNode,n=t.memoizedProps,r[Rt]=t,(i=r.nodeValue!==n)&&(e=ot,e!==null))switch(e.tag){case 3:li(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&li(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rt]=t,t.stateNode=r}return qe(t),null;case 13:if(we(Se),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xe&&at!==null&&t.mode&1&&!(t.flags&128))Rf(),Tr(),t.flags|=98560,i=!1;else if(i=ci(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(L(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Rt]=t}else Tr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qe(t),i=!1}else Nt!==null&&(Tl(Nt),Nt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Se.current&1?Ie===0&&(Ie=3):Rc())),t.updateQueue!==null&&(t.flags|=4),qe(t),null);case 4:return Ar(),xl(e,t),e===null&&Ps(t.stateNode.containerInfo),qe(t),null;case 10:return gc(t.type._context),qe(t),null;case 17:return nt(t.type)&&Qi(),qe(t),null;case 19:if(we(Se),i=t.memoizedState,i===null)return qe(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Xr(i,!1);else{if(Ie!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=na(e),a!==null){for(t.flags|=128,Xr(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ge(Se,Se.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ee()>Rr&&(t.flags|=128,r=!0,Xr(i,!1),t.lanes=4194304)}else{if(!r)if(e=na(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Xr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!xe)return qe(t),null}else 2*Ee()-i.renderingStartTime>Rr&&n!==1073741824&&(t.flags|=128,r=!0,Xr(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ee(),t.sibling=null,n=Se.current,ge(Se,r?n&1|2:n&1),t):(qe(t),null);case 22:case 23:return Oc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?it&1073741824&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function tv(e,t){switch(hc(t),t.tag){case 1:return nt(t.type)&&Qi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ar(),we(tt),we(He),xc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _c(t),null;case 13:if(we(Se),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));Tr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return we(Se),null;case 4:return Ar(),null;case 10:return gc(t.type._context),null;case 22:case 23:return Oc(),null;case 24:return null;default:return null}}var hi=!1,We=!1,nv=typeof WeakSet=="function"?WeakSet:Set,H=null;function wr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(e,t,r)}else n.current=null}function Sl(e,t,n){try{n()}catch(r){Ne(e,t,r)}}var Sd=!1;function rv(e,t){if(il=Hi,e=_f(),uc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,g=null;t:for(;;){for(var v;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==i||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(v=h.firstChild)!==null;)g=h,h=v;for(;;){if(h===e)break t;if(g===n&&++u===s&&(l=a),g===i&&++d===r&&(c=a),(v=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(al={focusedElem:e,selectionRange:n},Hi=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var S=_.memoizedProps,b=_.memoizedState,m=t.stateNode,p=m.getSnapshotBeforeUpdate(t.elementType===t.type?S:St(t.type,S),b);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(x){Ne(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return _=Sd,Sd=!1,_}function fs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Sl(t,n,i)}s=s.next}while(s!==r)}}function ba(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function kl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function gp(e){var t=e.alternate;t!==null&&(e.alternate=null,gp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rt],delete t[Os],delete t[cl],delete t[Uy],delete t[By])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yp(e){return e.tag===5||e.tag===3||e.tag===4}function kd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ki));else if(r!==4&&(e=e.child,e!==null))for(jl(e,t,n),e=e.sibling;e!==null;)jl(e,t,n),e=e.sibling}function Nl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Nl(e,t,n),e=e.sibling;e!==null;)Nl(e,t,n),e=e.sibling}var Ue=null,kt=!1;function Zt(e,t,n){for(n=n.child;n!==null;)vp(e,t,n),n=n.sibling}function vp(e,t,n){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(va,n)}catch{}switch(n.tag){case 5:We||wr(n,t);case 6:var r=Ue,s=kt;Ue=null,Zt(e,t,n),Ue=r,kt=s,Ue!==null&&(kt?(e=Ue,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(kt?(e=Ue,n=n.stateNode,e.nodeType===8?fo(e.parentNode,n):e.nodeType===1&&fo(e,n),Es(e)):fo(Ue,n.stateNode));break;case 4:r=Ue,s=kt,Ue=n.stateNode.containerInfo,kt=!0,Zt(e,t,n),Ue=r,kt=s;break;case 0:case 11:case 14:case 15:if(!We&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Sl(n,t,a),s=s.next}while(s!==r)}Zt(e,t,n);break;case 1:if(!We&&(wr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ne(n,t,l)}Zt(e,t,n);break;case 21:Zt(e,t,n);break;case 22:n.mode&1?(We=(r=We)||n.memoizedState!==null,Zt(e,t,n),We=r):Zt(e,t,n);break;default:Zt(e,t,n)}}function jd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new nv),t.forEach(function(r){var s=hv.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function _t(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ue=l.stateNode,kt=!1;break e;case 3:Ue=l.stateNode.containerInfo,kt=!0;break e;case 4:Ue=l.stateNode.containerInfo,kt=!0;break e}l=l.return}if(Ue===null)throw Error(L(160));vp(i,a,s),Ue=null,kt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ne(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wp(t,e),t=t.sibling}function wp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_t(t,e),Pt(e),r&4){try{fs(3,e,e.return),ba(3,e)}catch(S){Ne(e,e.return,S)}try{fs(5,e,e.return)}catch(S){Ne(e,e.return,S)}}break;case 1:_t(t,e),Pt(e),r&512&&n!==null&&wr(n,n.return);break;case 5:if(_t(t,e),Pt(e),r&512&&n!==null&&wr(n,n.return),e.flags&32){var s=e.stateNode;try{ks(s,"")}catch(S){Ne(e,e.return,S)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Bh(s,i),Qo(l,a);var u=Qo(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?Hh(s,h):d==="dangerouslySetInnerHTML"?qh(s,h):d==="children"?ks(s,h):Yl(s,d,h,u)}switch(l){case"input":Wo(s,i);break;case"textarea":Fh(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?xr(s,!!i.multiple,v,!1):g!==!!i.multiple&&(i.defaultValue!=null?xr(s,!!i.multiple,i.defaultValue,!0):xr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Os]=i}catch(S){Ne(e,e.return,S)}}break;case 6:if(_t(t,e),Pt(e),r&4){if(e.stateNode===null)throw Error(L(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(S){Ne(e,e.return,S)}}break;case 3:if(_t(t,e),Pt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Es(t.containerInfo)}catch(S){Ne(e,e.return,S)}break;case 4:_t(t,e),Pt(e);break;case 13:_t(t,e),Pt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pc=Ee())),r&4&&jd(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(We=(u=We)||d,_t(t,e),We=u):_t(t,e),Pt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(H=e,d=e.child;d!==null;){for(h=H=d;H!==null;){switch(g=H,v=g.child,g.tag){case 0:case 11:case 14:case 15:fs(4,g,g.return);break;case 1:wr(g,g.return);var _=g.stateNode;if(typeof _.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(S){Ne(r,n,S)}}break;case 5:wr(g,g.return);break;case 22:if(g.memoizedState!==null){bd(h);continue}}v!==null?(v.return=g,H=v):bd(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Wh("display",a))}catch(S){Ne(e,e.return,S)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(S){Ne(e,e.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_t(t,e),Pt(e),r&4&&jd(e);break;case 21:break;default:_t(t,e),Pt(e)}}function Pt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(yp(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ks(s,""),r.flags&=-33);var i=kd(e);Nl(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=kd(e);jl(e,l,a);break;default:throw Error(L(161))}}catch(c){Ne(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sv(e,t,n){H=e,_p(e)}function _p(e,t,n){for(var r=(e.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||hi;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||We;l=hi;var u=We;if(hi=a,(We=c)&&!u)for(H=s;H!==null;)a=H,c=a.child,a.tag===22&&a.memoizedState!==null?Ed(s):c!==null?(c.return=a,H=c):Ed(s);for(;i!==null;)H=i,_p(i),i=i.sibling;H=s,hi=l,We=u}Nd(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Nd(e)}}function Nd(e){for(;H!==null;){var t=H;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:We||ba(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!We)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:St(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&cd(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}cd(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Es(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}We||t.flags&512&&kl(t)}catch(g){Ne(t,t.return,g)}}if(t===e){H=null;break}if(n=t.sibling,n!==null){n.return=t.return,H=n;break}H=t.return}}function bd(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var n=t.sibling;if(n!==null){n.return=t.return,H=n;break}H=t.return}}function Ed(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ba(4,t)}catch(c){Ne(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ne(t,s,c)}}var i=t.return;try{kl(t)}catch(c){Ne(t,i,c)}break;case 5:var a=t.return;try{kl(t)}catch(c){Ne(t,a,c)}}}catch(c){Ne(t,t.return,c)}if(t===e){H=null;break}var l=t.sibling;if(l!==null){l.return=t.return,H=l;break}H=t.return}}var iv=Math.ceil,ia=Qt.ReactCurrentDispatcher,Cc=Qt.ReactCurrentOwner,pt=Qt.ReactCurrentBatchConfig,ce=0,Me=null,Pe=null,Be=0,it=0,_r=xn(0),Ie=0,Ms=null,Fn=0,Ea=0,Tc=0,ps=null,Xe=null,Pc=0,Rr=1/0,Ut=null,aa=!1,bl=null,mn=null,fi=!1,cn=null,oa=0,ms=0,El=null,Oi=-1,Ri=0;function Qe(){return ce&6?Ee():Oi!==-1?Oi:Oi=Ee()}function gn(e){return e.mode&1?ce&2&&Be!==0?Be&-Be:zy.transition!==null?(Ri===0&&(Ri=rf()),Ri):(e=he,e!==0||(e=window.event,e=e===void 0?16:df(e.type)),e):1}function Et(e,t,n,r){if(50<ms)throw ms=0,El=null,Error(L(185));Fs(e,n,r),(!(ce&2)||e!==Me)&&(e===Me&&(!(ce&2)&&(Ea|=n),Ie===4&&an(e,Be)),rt(e,r),n===1&&ce===0&&!(t.mode&1)&&(Rr=Ee()+500,ka&&Sn()))}function rt(e,t){var n=e.callbackNode;zg(e,t);var r=Wi(e,e===Me?Be:0);if(r===0)n!==null&&Lu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Lu(n),t===1)e.tag===0?Fy(Cd.bind(null,e)):Pf(Cd.bind(null,e)),$y(function(){!(ce&6)&&Sn()}),n=null;else{switch(sf(r)){case 1:n=nc;break;case 4:n=tf;break;case 16:n=qi;break;case 536870912:n=nf;break;default:n=qi}n=Cp(n,xp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function xp(e,t){if(Oi=-1,Ri=0,ce&6)throw Error(L(327));var n=e.callbackNode;if(br()&&e.callbackNode!==n)return null;var r=Wi(e,e===Me?Be:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=la(e,r);else{t=r;var s=ce;ce|=2;var i=kp();(Me!==e||Be!==t)&&(Ut=null,Rr=Ee()+500,Ln(e,t));do try{lv();break}catch(l){Sp(e,l)}while(!0);mc(),ia.current=i,ce=s,Pe!==null?t=0:(Me=null,Be=0,t=Ie)}if(t!==0){if(t===2&&(s=el(e),s!==0&&(r=s,t=Cl(e,s))),t===1)throw n=Ms,Ln(e,0),an(e,r),rt(e,Ee()),n;if(t===6)an(e,r);else{if(s=e.current.alternate,!(r&30)&&!av(s)&&(t=la(e,r),t===2&&(i=el(e),i!==0&&(r=i,t=Cl(e,i))),t===1))throw n=Ms,Ln(e,0),an(e,r),rt(e,Ee()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(L(345));case 2:Pn(e,Xe,Ut);break;case 3:if(an(e,r),(r&130023424)===r&&(t=Pc+500-Ee(),10<t)){if(Wi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Qe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ll(Pn.bind(null,e,Xe,Ut),t);break}Pn(e,Xe,Ut);break;case 4:if(an(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-bt(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=Ee()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iv(r/1960))-r,10<r){e.timeoutHandle=ll(Pn.bind(null,e,Xe,Ut),r);break}Pn(e,Xe,Ut);break;case 5:Pn(e,Xe,Ut);break;default:throw Error(L(329))}}}return rt(e,Ee()),e.callbackNode===n?xp.bind(null,e):null}function Cl(e,t){var n=ps;return e.current.memoizedState.isDehydrated&&(Ln(e,t).flags|=256),e=la(e,t),e!==2&&(t=Xe,Xe=n,t!==null&&Tl(t)),e}function Tl(e){Xe===null?Xe=e:Xe.push.apply(Xe,e)}function av(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ct(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function an(e,t){for(t&=~Tc,t&=~Ea,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),r=1<<n;e[n]=-1,t&=~r}}function Cd(e){if(ce&6)throw Error(L(327));br();var t=Wi(e,0);if(!(t&1))return rt(e,Ee()),null;var n=la(e,t);if(e.tag!==0&&n===2){var r=el(e);r!==0&&(t=r,n=Cl(e,r))}if(n===1)throw n=Ms,Ln(e,0),an(e,t),rt(e,Ee()),n;if(n===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pn(e,Xe,Ut),rt(e,Ee()),null}function Ac(e,t){var n=ce;ce|=1;try{return e(t)}finally{ce=n,ce===0&&(Rr=Ee()+500,ka&&Sn())}}function zn(e){cn!==null&&cn.tag===0&&!(ce&6)&&br();var t=ce;ce|=1;var n=pt.transition,r=he;try{if(pt.transition=null,he=1,e)return e()}finally{he=r,pt.transition=n,ce=t,!(ce&6)&&Sn()}}function Oc(){it=_r.current,we(_r)}function Ln(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ly(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(hc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qi();break;case 3:Ar(),we(tt),we(He),xc();break;case 5:_c(r);break;case 4:Ar();break;case 13:we(Se);break;case 19:we(Se);break;case 10:gc(r.type._context);break;case 22:case 23:Oc()}n=n.return}if(Me=e,Pe=e=yn(e.current,null),Be=it=t,Ie=0,Ms=null,Tc=Ea=Fn=0,Xe=ps=null,Dn!==null){for(t=0;t<Dn.length;t++)if(n=Dn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Dn=null}return e}function Sp(e,t){do{var n=Pe;try{if(mc(),Ti.current=sa,ra){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ra=!1}if(Bn=0,$e=De=ke=null,hs=!1,Is=0,Cc.current=null,n===null||n.return===null){Ie=1,Ms=t,Pe=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=Be,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=md(a);if(v!==null){v.flags&=-257,gd(v,a,l,i,t),v.mode&1&&pd(i,u,t),t=v,c=u;var _=t.updateQueue;if(_===null){var S=new Set;S.add(c),t.updateQueue=S}else _.add(c);break e}else{if(!(t&1)){pd(i,u,t),Rc();break e}c=Error(L(426))}}else if(xe&&l.mode&1){var b=md(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),gd(b,a,l,i,t),fc(Or(c,l));break e}}i=c=Or(c,l),Ie!==4&&(Ie=2),ps===null?ps=[i]:ps.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=ip(i,c,t);ld(i,m);break e;case 1:l=c;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(mn===null||!mn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=ap(i,l,t);ld(i,x);break e}}i=i.return}while(i!==null)}Np(n)}catch(P){t=P,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(!0)}function kp(){var e=ia.current;return ia.current=sa,e===null?sa:e}function Rc(){(Ie===0||Ie===3||Ie===2)&&(Ie=4),Me===null||!(Fn&268435455)&&!(Ea&268435455)||an(Me,Be)}function la(e,t){var n=ce;ce|=2;var r=kp();(Me!==e||Be!==t)&&(Ut=null,Ln(e,t));do try{ov();break}catch(s){Sp(e,s)}while(!0);if(mc(),ce=n,ia.current=r,Pe!==null)throw Error(L(261));return Me=null,Be=0,Ie}function ov(){for(;Pe!==null;)jp(Pe)}function lv(){for(;Pe!==null&&!Rg();)jp(Pe)}function jp(e){var t=Ep(e.alternate,e,it);e.memoizedProps=e.pendingProps,t===null?Np(e):Pe=t,Cc.current=null}function Np(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=tv(n,t),n!==null){n.flags&=32767,Pe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ie=6,Pe=null;return}}else if(n=ev(n,t,it),n!==null){Pe=n;return}if(t=t.sibling,t!==null){Pe=t;return}Pe=t=e}while(t!==null);Ie===0&&(Ie=5)}function Pn(e,t,n){var r=he,s=pt.transition;try{pt.transition=null,he=1,cv(e,t,n,r)}finally{pt.transition=s,he=r}return null}function cv(e,t,n,r){do br();while(cn!==null);if(ce&6)throw Error(L(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(qg(e,i),e===Me&&(Pe=Me=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fi||(fi=!0,Cp(qi,function(){return br(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=pt.transition,pt.transition=null;var a=he;he=1;var l=ce;ce|=4,Cc.current=null,rv(e,n),wp(n,e),Ty(al),Hi=!!il,al=il=null,e.current=n,sv(n),Dg(),ce=l,he=a,pt.transition=i}else e.current=n;if(fi&&(fi=!1,cn=e,oa=s),i=e.pendingLanes,i===0&&(mn=null),$g(n.stateNode),rt(e,Ee()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(aa)throw aa=!1,e=bl,bl=null,e;return oa&1&&e.tag!==0&&br(),i=e.pendingLanes,i&1?e===El?ms++:(ms=0,El=e):ms=0,Sn(),null}function br(){if(cn!==null){var e=sf(oa),t=pt.transition,n=he;try{if(pt.transition=null,he=16>e?16:e,cn===null)var r=!1;else{if(e=cn,cn=null,oa=0,ce&6)throw Error(L(331));var s=ce;for(ce|=4,H=e.current;H!==null;){var i=H,a=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(H=u;H!==null;){var d=H;switch(d.tag){case 0:case 11:case 15:fs(8,d,i)}var h=d.child;if(h!==null)h.return=d,H=h;else for(;H!==null;){d=H;var g=d.sibling,v=d.return;if(gp(d),d===u){H=null;break}if(g!==null){g.return=v,H=g;break}H=v}}}var _=i.alternate;if(_!==null){var S=_.child;if(S!==null){_.child=null;do{var b=S.sibling;S.sibling=null,S=b}while(S!==null)}}H=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,H=a;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fs(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,H=m;break e}H=i.return}}var p=e.current;for(H=p;H!==null;){a=H;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,H=y;else e:for(a=p;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ba(9,l)}}catch(P){Ne(l,l.return,P)}if(l===a){H=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,H=x;break e}H=l.return}}if(ce=s,Sn(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(va,e)}catch{}r=!0}return r}finally{he=n,pt.transition=t}}return!1}function Td(e,t,n){t=Or(n,t),t=ip(e,t,1),e=pn(e,t,1),t=Qe(),e!==null&&(Fs(e,1,t),rt(e,t))}function Ne(e,t,n){if(e.tag===3)Td(e,e,n);else for(;t!==null;){if(t.tag===3){Td(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mn===null||!mn.has(r))){e=Or(n,e),e=ap(t,e,1),t=pn(t,e,1),e=Qe(),t!==null&&(Fs(t,1,e),rt(t,e));break}}t=t.return}}function uv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Qe(),e.pingedLanes|=e.suspendedLanes&n,Me===e&&(Be&n)===n&&(Ie===4||Ie===3&&(Be&130023424)===Be&&500>Ee()-Pc?Ln(e,0):Tc|=n),rt(e,t)}function bp(e,t){t===0&&(e.mode&1?(t=ri,ri<<=1,!(ri&130023424)&&(ri=4194304)):t=1);var n=Qe();e=Gt(e,t),e!==null&&(Fs(e,t,n),rt(e,n))}function dv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bp(e,n)}function hv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(t),bp(e,n)}var Ep;Ep=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||tt.current)et=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return et=!1,Zy(e,t,n);et=!!(e.flags&131072)}else et=!1,xe&&t.flags&1048576&&Af(t,Xi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ai(e,t),e=t.pendingProps;var s=Cr(t,He.current);Nr(t,n),s=kc(null,t,r,e,s,n);var i=jc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(r)?(i=!0,Ji(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vc(t),s.updater=Na,t.stateNode=s,s._reactInternals=t,ml(t,r,e,n),t=vl(null,t,r,!0,i,n)):(t.tag=0,xe&&i&&dc(t),Ke(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ai(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=pv(r),e=St(r,e),s){case 0:t=yl(null,t,r,e,n);break e;case 1:t=wd(null,t,r,e,n);break e;case 11:t=yd(null,t,r,e,n);break e;case 14:t=vd(null,t,r,St(r.type,e),n);break e}throw Error(L(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),yl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),wd(e,t,r,s,n);case 3:e:{if(up(t),e===null)throw Error(L(387));r=t.pendingProps,i=t.memoizedState,s=i.element,$f(e,t),ta(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Or(Error(L(423)),t),t=_d(e,t,r,n,s);break e}else if(r!==s){s=Or(Error(L(424)),t),t=_d(e,t,r,n,s);break e}else for(at=fn(t.stateNode.containerInfo.firstChild),ot=t,xe=!0,Nt=null,n=If(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tr(),r===s){t=Kt(e,t,n);break e}Ke(e,t,r,n)}t=t.child}return t;case 5:return Mf(t),e===null&&hl(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,ol(r,s)?a=null:i!==null&&ol(r,i)&&(t.flags|=32),cp(e,t),Ke(e,t,a,n),t.child;case 6:return e===null&&hl(t),null;case 13:return dp(e,t,n);case 4:return wc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Pr(t,null,r,n):Ke(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),yd(e,t,r,s,n);case 7:return Ke(e,t,t.pendingProps,n),t.child;case 8:return Ke(e,t,t.pendingProps.children,n),t.child;case 12:return Ke(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,ge(Zi,r._currentValue),r._currentValue=a,i!==null)if(Ct(i.value,a)){if(i.children===s.children&&!tt.current){t=Kt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Wt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),fl(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(L(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),fl(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ke(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Nr(t,n),s=gt(s),r=r(s),t.flags|=1,Ke(e,t,r,n),t.child;case 14:return r=t.type,s=St(r,t.pendingProps),s=St(r.type,s),vd(e,t,r,s,n);case 15:return op(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),Ai(e,t),t.tag=1,nt(r)?(e=!0,Ji(t)):e=!1,Nr(t,n),sp(t,r,s),ml(t,r,s,n),vl(null,t,r,!0,e,n);case 19:return hp(e,t,n);case 22:return lp(e,t,n)}throw Error(L(156,t.tag))};function Cp(e,t){return ef(e,t)}function fv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(e,t,n,r){return new fv(e,t,n,r)}function Dc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pv(e){if(typeof e=="function")return Dc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zl)return 11;if(e===ec)return 14}return 2}function yn(e,t){var n=e.alternate;return n===null?(n=ft(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Di(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")Dc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case ur:return $n(n.children,s,i,t);case Xl:a=8,s|=8;break;case Uo:return e=ft(12,n,t,s|2),e.elementType=Uo,e.lanes=i,e;case Bo:return e=ft(13,n,t,s),e.elementType=Bo,e.lanes=i,e;case Fo:return e=ft(19,n,t,s),e.elementType=Fo,e.lanes=i,e;case $h:return Ca(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ih:a=10;break e;case Lh:a=9;break e;case Zl:a=11;break e;case ec:a=14;break e;case nn:a=16,r=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=ft(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function $n(e,t,n,r){return e=ft(7,e,r,t),e.lanes=n,e}function Ca(e,t,n,r){return e=ft(22,e,r,t),e.elementType=$h,e.lanes=n,e.stateNode={isHidden:!1},e}function xo(e,t,n){return e=ft(6,e,null,t),e.lanes=n,e}function So(e,t,n){return t=ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mv(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=to(0),this.expirationTimes=to(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=to(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ic(e,t,n,r,s,i,a,l,c){return e=new mv(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ft(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vc(i),e}function gv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Tp(e){if(!e)return wn;e=e._reactInternals;e:{if(Wn(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var n=e.type;if(nt(n))return Tf(e,n,t)}return t}function Pp(e,t,n,r,s,i,a,l,c){return e=Ic(n,r,!0,e,s,i,a,l,c),e.context=Tp(null),n=e.current,r=Qe(),s=gn(n),i=Wt(r,s),i.callback=t??null,pn(n,i,s),e.current.lanes=s,Fs(e,s,r),rt(e,r),e}function Ta(e,t,n,r){var s=t.current,i=Qe(),a=gn(s);return n=Tp(n),t.context===null?t.context=n:t.pendingContext=n,t=Wt(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pn(s,t,a),e!==null&&(Et(e,s,a,i),Ci(e,s,a)),a}function ca(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Pd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Lc(e,t){Pd(e,t),(e=e.alternate)&&Pd(e,t)}function yv(){return null}var Ap=typeof reportError=="function"?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}Pa.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));Ta(e,t,null,null)};Pa.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zn(function(){Ta(null,e,null,null)}),t[Vt]=null}};function Pa(e){this._internalRoot=e}Pa.prototype.unstable_scheduleHydration=function(e){if(e){var t=lf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<sn.length&&t!==0&&t<sn[n].priority;n++);sn.splice(n,0,e),n===0&&uf(e)}};function Mc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Aa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ad(){}function vv(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=ca(a);i.call(u)}}var a=Pp(t,r,e,0,null,!1,!1,"",Ad);return e._reactRootContainer=a,e[Vt]=a.current,Ps(e.nodeType===8?e.parentNode:e),zn(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=ca(c);l.call(u)}}var c=Ic(e,0,!1,null,null,!1,!1,"",Ad);return e._reactRootContainer=c,e[Vt]=c.current,Ps(e.nodeType===8?e.parentNode:e),zn(function(){Ta(t,c,n,r)}),c}function Oa(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=ca(a);l.call(c)}}Ta(t,a,e,s)}else a=vv(n,t,e,s,r);return ca(a)}af=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ss(t.pendingLanes);n!==0&&(rc(t,n|1),rt(t,Ee()),!(ce&6)&&(Rr=Ee()+500,Sn()))}break;case 13:zn(function(){var r=Gt(e,1);if(r!==null){var s=Qe();Et(r,e,1,s)}}),Lc(e,1)}};sc=function(e){if(e.tag===13){var t=Gt(e,134217728);if(t!==null){var n=Qe();Et(t,e,134217728,n)}Lc(e,134217728)}};of=function(e){if(e.tag===13){var t=gn(e),n=Gt(e,t);if(n!==null){var r=Qe();Et(n,e,t,r)}Lc(e,t)}};lf=function(){return he};cf=function(e,t){var n=he;try{return he=e,t()}finally{he=n}};Yo=function(e,t,n){switch(t){case"input":if(Wo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Sa(r);if(!s)throw Error(L(90));Uh(r),Wo(r,s)}}}break;case"textarea":Fh(e,n);break;case"select":t=n.value,t!=null&&xr(e,!!n.multiple,t,!1)}};Kh=Ac;Qh=zn;var wv={usingClientEntryPoint:!1,Events:[qs,pr,Sa,Vh,Gh,Ac]},Zr={findFiberByHostInstance:Rn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_v={bundleType:Zr.bundleType,version:Zr.version,rendererPackageName:Zr.rendererPackageName,rendererConfig:Zr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xh(e),e===null?null:e.stateNode},findFiberByHostInstance:Zr.findFiberByHostInstance||yv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pi.isDisabled&&pi.supportsFiber)try{va=pi.inject(_v),It=pi}catch{}}ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wv;ct.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mc(t))throw Error(L(200));return gv(e,t,null,n)};ct.createRoot=function(e,t){if(!Mc(e))throw Error(L(299));var n=!1,r="",s=Ap;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ic(e,1,!1,null,null,n,!1,r,s),e[Vt]=t.current,Ps(e.nodeType===8?e.parentNode:e),new $c(t)};ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=Xh(t),e=e===null?null:e.stateNode,e};ct.flushSync=function(e){return zn(e)};ct.hydrate=function(e,t,n){if(!Aa(t))throw Error(L(200));return Oa(null,e,t,!0,n)};ct.hydrateRoot=function(e,t,n){if(!Mc(e))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Ap;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Pp(t,null,e,1,n??null,s,!1,i,a),e[Vt]=t.current,Ps(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Pa(t)};ct.render=function(e,t,n){if(!Aa(t))throw Error(L(200));return Oa(null,e,t,!1,n)};ct.unmountComponentAtNode=function(e){if(!Aa(e))throw Error(L(40));return e._reactRootContainer?(zn(function(){Oa(null,null,e,!1,function(){e._reactRootContainer=null,e[Vt]=null})}),!0):!1};ct.unstable_batchedUpdates=Ac;ct.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Aa(n))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return Oa(e,t,n,!1,r)};ct.version="18.3.1-next-f1338f8080-20240426";function Op(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Op)}catch(e){console.error(e)}}Op(),Ah.exports=ct;var xv=Ah.exports,Rp,Od=xv;Rp=Od.createRoot,Od.hydrateRoot;var Dp={exports:{}},Sv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kv=Sv,jv=kv;function Ip(){}function Lp(){}Lp.resetWarningCache=Ip;var Nv=function(){function e(r,s,i,a,l,c){if(c!==jv){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Lp,resetWarningCache:Ip};return n.PropTypes=n,n};Dp.exports=Nv();var bv=Dp.exports;const w=Km(bv),Ev="modulepreload",Cv=function(e){return"/pocket-budget/"+e},Rd={},Hs=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(l=>{if(l=Cv(l),l in Rd)return;Rd[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Ev,c||(d.as="script",d.crossOrigin=""),d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,g)=>{d.addEventListener("load",h),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>t()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},Tv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Hs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ur);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Uc extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Pv extends Uc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Dd extends Uc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Id extends Uc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Pl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Pl||(Pl={}));var Av=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class Ov{constructor(t,{headers:n={},customFetch:r,region:s=Pl.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=Tv(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return Av(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(S=>{throw new Pv(S)}),g=h.headers.get("x-relay-error");if(g&&g==="true")throw new Dd(h);if(!h.ok)throw new Id(h);let v=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),_;return v==="application/json"?_=yield h.json():v==="application/octet-stream"?_=yield h.blob():v==="text/event-stream"?_=h:v==="multipart/form-data"?_=yield h.formData():_=yield h.text(),{data:_,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof Id||s instanceof Dd?s.context:void 0}}})}}var Ze={},Bc={},Ra={},Vs={},Da={},Ia={},Rv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")},Dr=Rv();const Dv=Dr.fetch,$p=Dr.fetch.bind(Dr),Mp=Dr.Headers,Iv=Dr.Request,Lv=Dr.Response,Ur=Object.freeze(Object.defineProperty({__proto__:null,Headers:Mp,Request:Iv,Response:Lv,default:$p,fetch:Dv},Symbol.toStringTag,{value:"Module"})),$v=Qm(Ur);var La={};Object.defineProperty(La,"__esModule",{value:!0});let Mv=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};La.default=Mv;var Up=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ia,"__esModule",{value:!0});const Uv=Up($v),Bv=Up(La);let Fv=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Uv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let u=null,d=null,h=null,g=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=m:d=JSON.parse(m))}const S=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");S&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,g=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const S=await i.text();try{u=JSON.parse(S),Array.isArray(u)&&i.status===404&&(d=[],u=null,g=200,v="OK")}catch{i.status===404&&S===""?(g=204,v="No Content"):u={message:S}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,g=200,v="OK"),u&&this.shouldThrowOnError)throw new Bv.default(u)}return{error:u,data:d,count:h,status:g,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Ia.default=Fv;var zv=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Da,"__esModule",{value:!0});const qv=zv(Ia);let Wv=class extends qv.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Da.default=Wv;var Hv=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vs,"__esModule",{value:!0});const Vv=Hv(Da);let Gv=class extends Vv.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Vs.default=Gv;var Kv=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ra,"__esModule",{value:!0});const es=Kv(Vs);let Qv=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new es.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new es.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new es.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new es.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new es.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ra.default=Qv;var $a={},Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.version=void 0;Ma.version="0.0.0-automated";Object.defineProperty($a,"__esModule",{value:!0});$a.DEFAULT_HEADERS=void 0;const Jv=Ma;$a.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Jv.version}`};var Bp=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bc,"__esModule",{value:!0});const Yv=Bp(Ra),Xv=Bp(Vs),Zv=$a;let e0=class Fp{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Zv.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new Yv.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Fp(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(a="POST",c=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Xv.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Bc.default=e0;var Br=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.PostgrestError=Ze.PostgrestBuilder=Ze.PostgrestTransformBuilder=Ze.PostgrestFilterBuilder=Ze.PostgrestQueryBuilder=Ze.PostgrestClient=void 0;const zp=Br(Bc);Ze.PostgrestClient=zp.default;const qp=Br(Ra);Ze.PostgrestQueryBuilder=qp.default;const Wp=Br(Vs);Ze.PostgrestFilterBuilder=Wp.default;const Hp=Br(Da);Ze.PostgrestTransformBuilder=Hp.default;const Vp=Br(Ia);Ze.PostgrestBuilder=Vp.default;const Gp=Br(La);Ze.PostgrestError=Gp.default;var t0=Ze.default={PostgrestClient:zp.default,PostgrestQueryBuilder:qp.default,PostgrestFilterBuilder:Wp.default,PostgrestTransformBuilder:Hp.default,PostgrestBuilder:Vp.default,PostgrestError:Gp.default};const{PostgrestClient:n0,PostgrestQueryBuilder:_x,PostgrestFilterBuilder:xx,PostgrestTransformBuilder:Sx,PostgrestBuilder:kx,PostgrestError:jx}=t0;class r0{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const s0="2.15.1",i0=`realtime-js/${s0}`,a0="1.0.0",Al=1e4,o0=1e3,l0=100;var gs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(gs||(gs={}));var Oe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Oe||(Oe={}));var jt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(jt||(jt={}));var Ol;(function(e){e.websocket="websocket"})(Ol||(Ol={}));var On;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(On||(On={}));class c0{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Kp{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var me;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(me||(me={}));const Ld=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,a)=>(i[a]=u0(a,e,t,s),i),{})},u0=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?Qp(i,a):Rl(a)},Qp=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return p0(t,n)}switch(e){case me.bool:return d0(t);case me.float4:case me.float8:case me.int2:case me.int4:case me.int8:case me.numeric:case me.oid:return h0(t);case me.json:case me.jsonb:return f0(t);case me.timestamp:return m0(t);case me.abstime:case me.date:case me.daterange:case me.int4range:case me.int8range:case me.money:case me.reltime:case me.text:case me.time:case me.timestamptz:case me.timetz:case me.tsrange:case me.tstzrange:return Rl(t);default:return Rl(t)}},Rl=e=>e,d0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},h0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},f0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},p0=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Qp(t,l))}return e},m0=e=>typeof e=="string"?e.replace(" ","T"):e,Jp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ko{constructor(t,n,r={},s=Al){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var $d;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})($d||($d={}));class ys{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ys.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=ys.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ys.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const g=d.map(b=>b.presence_ref),v=h.map(b=>b.presence_ref),_=d.filter(b=>v.indexOf(b.presence_ref)<0),S=h.filter(b=>g.indexOf(b.presence_ref)<0);_.length>0&&(l[u]=_),S.length>0&&(c[u]=S)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(v=>v.presence_ref),g=d.filter(v=>h.indexOf(v.presence_ref)<0);t[l].unshift(...g)}r(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Md;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Md||(Md={}));var vs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vs||(vs={}));var Bt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Bt||(Bt={}));class Fc{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Oe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ko(this,jt.join,this.params,this.timeout),this.rejoinTimer=new Kp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Oe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Oe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ys(this),this.broadcastEndpointURL=Jp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Oe.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[vs.PRESENCE]&&this.bindings[vs.PRESENCE].length>0,d={},h={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(Bt.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(Bt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){t==null||t(Bt.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(v=_==null?void 0:_.length)!==null&&v!==void 0?v:0,b=[];for(let m=0;m<S;m++){const p=_[m],{filter:{event:y,schema:x,table:P,filter:N}}=p,A=g&&g[m];if(A&&A.event===y&&A.schema===x&&A.table===P&&A.filter===N)b.push(Object.assign(Object.assign({},p),{id:A.id}));else{this.unsubscribe(),this.state=Oe.errored,t==null||t(Bt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Bt.SUBSCRIBED);return}}).receive("error",g=>{this.state=Oe.errored,t==null||t(Bt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Bt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Oe.joined&&t===vs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Oe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new ko(this,jt.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Oe.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ko(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>l0){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=jt;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let g=this._onMessage(a,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var _,S,b;return((_=v.filter)===null||_===void 0?void 0:_.event)==="*"||((b=(S=v.filter)===null||S===void 0?void 0:S.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(v=>v.callback(g,r)):(i=this.bindings[a])===null||i===void 0||i.filter(v=>{var _,S,b,m,p,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in v){const x=v.id,P=(_=v.filter)===null||_===void 0?void 0:_.event;return x&&((S=n.ids)===null||S===void 0?void 0:S.includes(x))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const x=(p=(m=v==null?void 0:v.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return x==="*"||x===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===a}).map(v=>{if(typeof g=="object"&&"ids"in g){const _=g.data,{schema:S,table:b,commit_timestamp:m,type:p,errors:y}=_;g=Object.assign(Object.assign({},{schema:S,table:b,commit_timestamp:m,eventType:p,new:{},old:{},errors:y}),this._getPayloadRecords(_))}v.callback(g,r)})}_isClosed(){return this.state===Oe.closed}_isJoined(){return this.state===Oe.joined}_isJoining(){return this.state===Oe.joining}_isLeaving(){return this.state===Oe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Fc.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(jt.close,{},t)}_onError(t){this._on(jt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Oe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ld(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ld(t.columns,t.old_record)),n}}const Ud=()=>{},mi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},g0=[1e3,2e3,5e3,1e4],y0=1e4,v0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class w0{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Al,this.transport=null,this.heartbeatIntervalMs=mi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ud,this.ref=0,this.reconnectTimer=null,this.logger=Ud,this.conn=null,this.sendBuffer=[],this.serializer=new c0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>Hs(async()=>{const{default:l}=await Promise.resolve().then(()=>Ur);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Ol.websocket}`,this.httpEndpoint=Jp(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=r0.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:a0}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case gs.connecting:return On.Connecting;case gs.open:return On.Open;case gs.closing:return On.Closing;default:return On.Closed}}isConnected(){return this.connectionState()===On.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Fc(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(o0,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},mi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(jt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([v0],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:i0};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(jt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Kp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},mi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,a,l,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Al,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:mi.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:d=>g0[d-1]||y0,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(d,h)=>h(JSON.stringify(d)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class zc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Re(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class _0 extends zc{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Dl extends zc{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var x0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Yp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Hs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ur);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},S0=()=>x0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Hs(()=>Promise.resolve().then(()=>Ur),void 0)).Response:Response}),Il=e=>{if(Array.isArray(e))return e.map(n=>Il(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Il(r)}),t},k0=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Hn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const jo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),j0=(e,t,n)=>Hn(void 0,void 0,void 0,function*(){const r=yield S0();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new _0(jo(s),i,a))}).catch(s=>{t(new Dl(jo(s),s))}):t(new Dl(jo(e),e))}),N0=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(k0(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Gs(e,t,n,r,s,i){return Hn(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,N0(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>j0(c,l,r))})})}function ua(e,t,n,r){return Hn(this,void 0,void 0,function*(){return Gs(e,"GET",t,n,r)})}function Ot(e,t,n,r,s){return Hn(this,void 0,void 0,function*(){return Gs(e,"POST",t,r,s,n)})}function Ll(e,t,n,r,s){return Hn(this,void 0,void 0,function*(){return Gs(e,"PUT",t,r,s,n)})}function b0(e,t,n,r){return Hn(this,void 0,void 0,function*(){return Gs(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Xp(e,t,n,r,s){return Hn(this,void 0,void 0,function*(){return Gs(e,"DELETE",t,r,s,n)})}var Ge=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const E0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class C0{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Yp(s)}uploadOrUpdate(t,n,r,s){return Ge(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Bd),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?Ll:Ot)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Re(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Ge(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Bd.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Ll(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(Re(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Ge(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ot(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new zc("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}update(t,n,r){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Ge(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Ge(this,void 0,void 0,function*(){try{return{data:{path:(yield Ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Ge(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Ot(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Ge(this,void 0,void 0,function*(){try{const s=yield Ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}download(t,n){return Ge(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield ua(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Re(l))return{data:null,error:l};throw l}})}info(t){return Ge(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield ua(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Il(r),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}exists(t){return Ge(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield b0(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Re(r)&&r instanceof Dl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Xp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}list(t,n,r){return Ge(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},E0),n),{prefix:t||""});return{data:yield Ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}})}listV2(t,n){return Ge(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Ot(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const T0="2.11.0",P0={"X-Client-Info":`storage-js/${T0}`};var Zn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,[])).next())})};class A0{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},P0),n),this.fetch=Yp(r)}listBuckets(){return Zn(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Re(t))return{data:null,error:t};throw t}})}getBucket(t){return Zn(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Zn(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Zn(this,void 0,void 0,function*(){try{return{data:yield Ll(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Zn(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Zn(this,void 0,void 0,function*(){try{return{data:yield Xp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}}class O0 extends A0{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new C0(this.url,this.headers,t,this.fetch)}}const R0="2.55.0";let as="";typeof Deno<"u"?as="deno":typeof document<"u"?as="web":typeof navigator<"u"&&navigator.product==="ReactNative"?as="react-native":as="node";const D0={"X-Client-Info":`supabase-js-${as}/${R0}`},I0={headers:D0},L0={schema:"public"},$0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},M0={};var U0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const B0=e=>{let t;return e?t=e:typeof fetch>"u"?t=$p:t=fetch,(...n)=>t(...n)},F0=()=>typeof Headers>"u"?Mp:Headers,z0=(e,t,n)=>{const r=B0(n),s=F0();return(i,a)=>U0(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var q0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,[])).next())})};function W0(e){return e.endsWith("/")?e:e+"/"}function H0(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,g={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>q0(this,void 0,void 0,function*(){return""})};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}const Zp="2.71.1",or=30*1e3,$l=3,No=$l*or,V0="http://localhost:9999",G0="supabase.auth.token",K0={"X-Client-Info":`gotrue-js/${Zp}`},Ml="X-Supabase-Api-Version",em={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Q0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,J0=10*60*1e3;class qc extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function re(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Y0 extends qc{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function X0(e){return re(e)&&e.name==="AuthApiError"}class tm extends qc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class kn extends qc{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class tn extends kn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Z0(e){return re(e)&&e.name==="AuthSessionMissingError"}class gi extends kn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yi extends kn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class vi extends kn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ew(e){return re(e)&&e.name==="AuthImplicitGrantRedirectError"}class Fd extends kn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ul extends kn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function bo(e){return re(e)&&e.name==="AuthRetryableFetchError"}class zd extends kn{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Bl extends kn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const da="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qd=` 	
\r=`.split(""),tw=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<qd.length;t+=1)e[qd[t].charCodeAt(0)]=-2;for(let t=0;t<da.length;t+=1)e[da[t].charCodeAt(0)]=t;return e})();function Wd(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(da[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(da[r]),t.queuedBits-=6}}function nm(e,t,n){const r=tw[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Hd(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{sw(a,r,n)};for(let a=0;a<e.length;a+=1)nm(e.charCodeAt(a),s,i);return t.join("")}function nw(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function rw(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}nw(r,t)}}function sw(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function iw(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)nm(e.charCodeAt(s),n,r);return new Uint8Array(t)}function aw(e){const t=[];return rw(e,n=>t.push(n)),new Uint8Array(t)}function ow(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Wd(s,n,r)),Wd(null,n,r),t.join("")}function lw(e){return Math.round(Date.now()/1e3)+e}function cw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const xt=()=>typeof window<"u"&&typeof document<"u",En={tested:!1,writable:!1},rm=()=>{if(!xt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(En.tested)return En.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),En.tested=!0,En.writable=!0}catch{En.tested=!0,En.writable=!1}return En.writable};function uw(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const sm=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Hs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ur);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},dw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",lr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Cn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},en=async(e,t)=>{await e.removeItem(t)};class Ua{constructor(){this.promise=new Ua.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ua.promiseConstructor=Promise;function Eo(e){const t=e.split(".");if(t.length!==3)throw new Bl("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Q0.test(t[r]))throw new Bl("JWT not in base64url format");return{header:JSON.parse(Hd(t[0])),payload:JSON.parse(Hd(t[1])),signature:iw(t[2]),raw:{header:t[0],payload:t[1]}}}async function hw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function fw(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function pw(e){return("0"+e.toString(16)).substr(-2)}function mw(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,pw).join("")}async function gw(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function yw(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await gw(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function er(e,t,n=!1){const r=mw();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await lr(e,`${t}-code-verifier`,s);const i=await yw(r);return[i,r===i?"plain":"s256"]}const vw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ww(e){const t=e.headers.get(Ml);if(!t||!t.match(vw))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function _w(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function xw(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Sw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function tr(e){if(!Sw.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Co(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Vd(e){return JSON.parse(JSON.stringify(e))}var kw=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const An=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jw=[502,503,504];async function Gd(e){var t;if(!dw(e))throw new Ul(An(e),0);if(jw.includes(e.status))throw new Ul(An(e),e.status);let n;try{n=await e.json()}catch(i){throw new tm(An(i),i)}let r;const s=ww(e);if(s&&s.getTime()>=em["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new zd(An(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new tn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new zd(An(n),e.status,n.weak_password.reasons);throw new Y0(An(n),e.status||500,r)}const Nw=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ae(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Ml]||(i[Ml]=em["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await bw(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function bw(e,t,n,r,s,i){const a=Nw(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new Ul(An(c),0)}if(l.ok||await Gd(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Gd(c)}}function Mt(e){var t;let n=null;Pw(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=lw(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Kd(e){const t=Mt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function on(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Ew(e){return{data:e,error:null}}function Cw(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=kw(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Tw(e){return e}function Pw(e){return e.access_token&&e.refresh_token&&e.expires_in}const To=["global","local","others"];var Aw=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class Ow{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=sm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=To[0]){if(To.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${To.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:on})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Aw(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Cw,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:on})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Tw});if(d.error)throw d.error;const h=await d.json(),g=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(_.split(";")[1].split("=")[1]);u[`${b}Page`]=S}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(re(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){tr(t);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:on})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){tr(t);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:on})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){tr(t);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:on})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){tr(t.userId);try{const{data:n,error:r}=await ae(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _deleteFactor(t){tr(t.userId),tr(t.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}}function Qd(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function Rw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const nr={debug:!!(globalThis&&rm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class im extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Dw extends im{}async function Iw(e,t,n){nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),nr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Dw(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(nr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Rw();const Lw={url:V0,storageKey:G0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:K0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jd(e,t,n){return await n()}const rr={};class Us{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Us.nextInstanceID,Us.nextInstanceID+=1,this.instanceID>0&&xt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Lw),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ow({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=sm(s.fetch),this.lock=s.lock||Jd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:xt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Iw:this.lock=Jd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:rm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qd(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Qd(this.memoryStorage)),xt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=rr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){rr[this.storageKey]=Object.assign(Object.assign({},rr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=rr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){rr[this.storageKey]=Object.assign(Object.assign({},rr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=uw(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),xt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ew(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return re(n)?{error:n}:{error:new tm("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Mt}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(re(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:h,options:g}=t;let v=null,_=null;this.flowType==="pkce"&&([v,_]=await er(this.storage,this.storageKey)),i=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:h,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:v,code_challenge_method:_},xform:Mt})}else if("phone"in t){const{phone:d,password:h,options:g}=t;i=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Mt})}else throw new yi("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(re(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Kd})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Kd})}else throw new yi("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new gi}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,a,l,c,u,d,h,g,v;let _,S;if("message"in t)_=t.message,S=t.signature;else{const{chain:b,wallet:m,statement:p,options:y}=t;let x;if(xt())if(typeof m=="object")x=m;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))x=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=m}const P=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const N=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),p?{statement:p}:null));let A;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")A=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)A=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)_=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),S=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${P.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const N=await x.signMessage(new TextEncoder().encode(_),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=N}}try{const{data:b,error:m}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:ow(S)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Mt});if(m)throw m;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new gi}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:m})}catch(b){if(re(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const n=await Cn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Mt});if(await en(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new gi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(re(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Mt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new gi}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await er(this.storage,this.storageKey));const{error:h}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new yi("You must provide either an email or phone number.")}catch(l){if(re(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Mt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(re(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await er(this.storage,this.storageKey)),await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Ew})}catch(i){if(re(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new tn;const{error:s}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(re(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await ae(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new yi("You must provide either an email or phone number and a type")}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Cn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<No:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await Cn(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Co()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:on}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tn}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:on})})}catch(n){if(re(n))return Z0(n)&&(await this._removeSession(),await en(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new tn;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await er(this.storage,this.storageKey));const{data:u,error:d}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:on});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new tn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=Eo(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(re(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new tn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!xt())throw new vi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new vi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Fd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Fd("No code detected.");const{data:p,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new vi("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let g=d+h;c&&(g=parseInt(c));const v=g-d;v*1e3<=or&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const _=g-h;d-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,g,d):d-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,g,d);const{data:S,error:b}=await this._getUser(i);if(b)throw b;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:g,refresh_token:a,token_type:u,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(r){if(re(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Cn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(X0(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await en(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=cw(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await er(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(re(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:g}=i;if(g)throw g;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return xt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(re(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await fw(async s=>(s>0&&await hw(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Mt})),(s,i)=>{const a=200*Math.pow(2,s);return i&&bo(i)&&Date.now()+a-r<or})}catch(r){if(this._debug(n,"error",r),re(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),xt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Cn(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Cn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await lr(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Co()}else if(s&&!s.user&&!s.user){const a=await Cn(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await en(this.storage,this.storageKey+"-user"),await lr(this.storage,this.storageKey,s)):s.user=Co()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<No;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${No}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),bo(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new tn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ua;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new tn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),re(i)){const a={session:null,error:i};return bo(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await lr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Vd(s);await lr(this.storage,this.storageKey,i)}else{const s=Vd(n);await lr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await en(this.storage,this.storageKey),await en(this.storage,this.storageKey+"-code-verifier"),await en(this.storage,this.storageKey+"-user"),this.userStorage&&await en(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&xt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),or);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/or);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${or}ms, refresh threshold is ${$l} ticks`),s<=$l&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof im)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await er(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ae(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:l}=await ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(re(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(re(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Eo(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+J0>s)return r;const{data:i,error:a}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:v,error:_}=await this.getSession();if(_||!v.session)return{data:null,error:_};r=v.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Eo(r);n!=null&&n.allowExpired||_w(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:s,signature:a},error:null}}const d=xw(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,aw(`${l}.${c}`)))throw new Bl("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}}Us.nextInstanceID=0;const $w=Us;class Mw extends $w{constructor(t){super(t)}}var Uw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,[])).next())})};class Bw{constructor(t,n,r){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=W0(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:L0,realtime:M0,auth:Object.assign(Object.assign({},$0),{storageKey:u}),global:I0},h=H0(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=z0(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new n0(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new O0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Ov(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Uw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mw({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new w0(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Fw=(e,t,n)=>new Bw(e,t,n);function zw(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}zw()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");async function Yd(e){var a,l;await new Promise(c=>setTimeout(c,600));const t=qw(e),n=e.last7Days>e.previous7Days?"increasing":"decreasing",r=((a=e.topExpenseCategory)==null?void 0:a[0])||"Uncategorized",s=((l=e.topExpenseCategory)==null?void 0:l[1])||0,i=e.totalExpenses>0?s/e.totalExpenses*100:0;return{healthScore:t,summary:Ww(e,t),strengths:Hw(e),improvements:Vw(e),spendingAnalysis:Gw(e,n,r,i),savingsTips:Kw(e),budgetSuggestions:Qw(e),goals:Jw(e)}}function qw(e){let t=5;return e.savingsRate>20?t+=2:e.savingsRate>10?t+=1:e.savingsRate<0&&(t-=2),e.balance>0?t+=1:t-=1,e.transactionCount>10&&(t+=1),(e.topExpenseCategory?e.topExpenseCategory[1]/e.totalExpenses*100:0)>50&&(t-=1),Math.max(1,Math.min(10,t))}function Ww(e,t){return t>=8?"Excellent financial health! You're demonstrating strong budgeting discipline with healthy savings and balanced spending.":t>=6?"Good financial foundation with room for optimization. A few adjustments could significantly improve your financial position.":t>=4?"Your finances need attention. Focus on increasing income, reducing expenses, or both to improve your financial stability.":"Critical financial situation requiring immediate action. Consider seeking financial counseling and implementing strict budgeting measures."}function Hw(e){const t=[];return e.savingsRate>15&&t.push("Strong savings discipline - you're saving above the recommended 15% rate"),e.transactionCount>15&&t.push("Excellent expense tracking - you're consistently recording transactions"),e.balance>0&&t.push("Positive cash flow - you're living within your means"),Object.keys(e.expensesByCategory).length>=4&&t.push("Diversified spending across multiple categories shows balanced lifestyle"),t.length===0&&t.push("You're taking the first step by tracking your finances - that's commendable!"),t}function Vw(e){const t=[];e.savingsRate<10&&t.push({area:"Increase Savings Rate",suggestion:`Aim to save at least 15-20% of income. Currently at ${e.savingsRate.toFixed(1)}%`,action:"Set up automatic transfers to savings account"}),e.balance<0&&t.push({area:"Address Negative Balance",suggestion:"You're spending more than you earn - immediate action needed",action:"Review and cut non-essential expenses immediately"});const n=e.topExpenseCategory?e.topExpenseCategory[1]/e.totalExpenses*100:0;return n>40&&t.push({area:"Diversify Spending",suggestion:`${e.topExpenseCategory[0]} represents ${n.toFixed(1)}% of expenses`,action:"Look for ways to reduce this dominant expense category"}),e.transactionCount<10&&t.push({area:"Improve Expense Tracking",suggestion:"More consistent transaction recording will provide better insights",action:"Set daily reminders to log expenses"}),t}function Gw(e,t,n,r){return{trend:t==="increasing"?"📈 Spending increased in the last week":"📉 Spending decreased in the last week",topCategory:`🏆 Highest expense category: ${n} (${r.toFixed(1)}% of total)`,avgTransaction:`💳 Average transaction: $${e.avgTransactionAmount.toFixed(2)}`,frequency:`📊 Transaction frequency: ${e.transactionCount} transactions recorded`}}function Kw(e){var n;const t=[];return e.savingsRate<10&&t.push("Automate a 10% transfer from each paycheck to savings"),(n=e.topExpenseCategory)!=null&&n[0]&&t.push(`Set a mini-challenge to cut ${e.topExpenseCategory[0]} spending by 10% next month`),e.avgTransactionAmount>50&&t.push("Review subscriptions and recurring charges for quick wins"),t.push("Allocate unexpected income (refunds, bonuses) directly toward goals"),t.push("Do a weekly 10-minute expense review to stay proactive"),t}function Qw(e){const t=[],n=e.totalIncome||1,r=Math.min(e.totalExpenses,n*.5),s=Math.max(0,e.totalExpenses-r),i=Math.max(0,n-e.totalExpenses);return t.push({rule:"50 / 30 / 20 Check-in",needs:`Needs · $${r.toFixed(2)} (${(r/n*100).toFixed(1)}%)`,wants:`Wants · $${s.toFixed(2)} (${(s/n*100).toFixed(1)}%)`,savings:`Savings · $${i.toFixed(2)} (${(i/n*100).toFixed(1)}%)`}),e.topExpenseCategory&&t.push({category:e.topExpenseCategory[0],current:`$${e.topExpenseCategory[1].toFixed(2)} spent`,suggestion:"Challenge yourself to reduce this category by 5% next cycle"}),t}function Jw(e){const t={shortTerm:[],longTerm:[]};return e.balance>0?t.shortTerm.push("Direct extra cash flow toward your top savings goal this month"):t.shortTerm.push("Pause discretionary spending for one week to rebuild balance"),e.savingsRate<15?t.longTerm.push("Build a 3-month emergency fund by saving a little every paycheck"):t.longTerm.push("Accelerate long-term investing with automated monthly transfers"),t.longTerm.push("Review and refresh your goals quarterly to stay motivated"),t}const Yw=14*24*60*60*1e3,Xw=(e,t=Date.now())=>{if(e==null)return!1;const n=typeof e=="number"?e:Number(e);return Number.isFinite(n)?t-n>Yw:!0};var Zw={VITE_SUPABASE_URL:"https://micbqxkhejumwddmwyxm.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pY2JxeGtoZWp1bXdkZG13eXhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMzQzOTMsImV4cCI6MjA3MDgxMDM5M30.w1Mc6TrXvkRwjqc6gIGA4baVaMuwVHxR76nH5kt8BJg",BASE_URL:"/pocket-budget/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const e_=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"],Xd=e_.filter(e=>!Zw[e]);if(Xd.length)throw new Error(`Missing Supabase environment variables: ${Xd.join(", ")}`);const fe=Fw("https://micbqxkhejumwddmwyxm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pY2JxeGtoZWp1bXdkZG13eXhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMzQzOTMsImV4cCI6MjA3MDgxMDM5M30.w1Mc6TrXvkRwjqc6gIGA4baVaMuwVHxR76nH5kt8BJg",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),Ir=typeof window<"u"?window.localStorage:null,Wc="pb:last-session-timestamp",ha=()=>{Ir&&Ir.setItem(Wc,Date.now().toString())},Fl=()=>{Ir&&Ir.removeItem(Wc)},t_=()=>{if(!Ir)return null;const e=Ir.getItem(Wc);if(!e)return null;const t=Number.parseInt(e,10);return Number.isNaN(t)?null:t},n_=async(e,t)=>{var r;const n=await fe.auth.signUp({email:e,password:t});return!n.error&&((r=n.data)!=null&&r.session)&&ha(),n},r_=async(e,t)=>{var r;const n=await fe.auth.signInWithPassword({email:e,password:t});return!n.error&&((r=n.data)!=null&&r.session)&&ha(),n},s_=async()=>fe.auth.signInWithOAuth({provider:"google",options:{redirectTo:typeof window<"u"?window.location.origin:void 0}}),am=async()=>(Fl(),fe.auth.signOut()),i_=async()=>{const{data:{user:e},error:t}=await fe.auth.getUser();return{user:e,error:t}},a_=async(e,t,n)=>fe.from("user_profiles").insert([{id:e,email:t,full_name:n,created_at:new Date().toISOString()}]).select(),o_=async e=>fe.from("user_profiles").select("*").eq("id",e).single(),Zd=async(e,t)=>{if(!e)return{data:null,error:{message:"User ID is required"}};const n={...t,updated_at:new Date().toISOString()},{data:r,error:s}=await fe.from("user_profiles").update(n).eq("id",e).select("*").single();return{data:r,error:s}},Hc=e=>({...e,amount:Number(e.amount||0),budgeted_amount:e.budgeted_amount??e.budgetedAmount??null,receipt_url:e.receipt_url??e.receipt??null}),Vc=e=>({...e,transactions:(e.transactions||[]).map(Hc)}),l_=async e=>{const{data:t,error:n}=await fe.from("budgets").select("*, transactions (*)").eq("user_id",e).order("created_at",{ascending:!1});return{data:(t||[]).map(Vc),error:n}},eh=async(e,t)=>{const n={user_id:e,name:t.name,category_budgets:t.categoryBudgets||[]},r=await fe.from("budgets").insert([n]).select("*, transactions (*)");if(r.error)return{data:null,error:r.error};let s=r.data||[];if(!s.length){const{data:a,error:l}=await fe.from("budgets").select("*, transactions (*)").eq("user_id",e).order("created_at",{ascending:!1}).limit(1);if(!l&&(a!=null&&a.length))s=a;else{const c=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`temp-budget-${Date.now()}`,u=new Date().toISOString();s=[{id:c,user_id:e,name:t.name,category_budgets:t.categoryBudgets||[],created_at:u,transactions:[],__optimistic:!0}]}}return{data:s.map(a=>{const l={...a};return delete l.__optimistic,Vc(l)}),error:null,optimistic:s.some(a=>a.__optimistic)}},Ii=async(e,t)=>{const n={name:t.name,category_budgets:t.categoryBudgets},{data:r,error:s}=await fe.from("budgets").update(n).eq("id",e).select("*, transactions (*)");return{data:(r||[]).map(Vc),error:s}},c_=async e=>fe.from("budgets").delete().eq("id",e),om=async(e,t)=>{const n={budget_id:e,name:t.name,amount:t.amount,budgeted_amount:t.budgetedAmount??null,category:t.category,type:t.type,date:t.date,receipt_url:t.receipt??null},{data:r,error:s}=await fe.from("transactions").insert([n]).select();return{data:(r||[]).map(Hc),error:s}},u_=async(e,t)=>{const n={name:t.name,amount:t.amount,budgeted_amount:t.budgetedAmount??null,category:t.category,type:t.type,date:t.date,receipt_url:t.receipt??null},r=Object.fromEntries(Object.entries(n).filter(([,a])=>a!==void 0)),{data:s,error:i}=await fe.from("transactions").update(r).eq("id",e).select();return{data:(s||[]).map(Hc),error:i}},d_=async e=>{if(!e)return{data:null,error:{message:"User ID is required"}};const{data:t,error:n}=await fe.rpc("get_cash_burn",{p_user_id:e});return n?{data:null,error:n}:{data:(Array.isArray(t)?t[0]:t)||null,error:null}},h_=async e=>fe.from("user_categories").select("*").eq("user_id",e).single(),f_=async(e,t)=>fe.from("user_categories").upsert([{user_id:e,categories:t}]).select(),lm=[25,50,75,100],p_=e=>({...e,milestones:e.milestones&&e.milestones.length?e.milestones:lm}),Gc=e=>({...p_(e),goal_contributions:(e.goal_contributions||[]).map(t=>({...t,amount:Number(t.amount||0)})).sort((t,n)=>new Date(n.contributed_at)-new Date(t.contributed_at))}),m_=async e=>{const{data:t,error:n}=await fe.from("goals").select("*, goal_contributions (*)").eq("user_id",e).order("created_at",{ascending:!1});return{data:(t||[]).map(Gc),error:n}},g_=async(e,t)=>{const n={user_id:e,name:t.name,target_amount:t.targetAmount,target_date:t.targetDate,status:t.status||"active",milestones:t.milestones||lm,linked_budget_id:t.linkedBudgetId||null,created_at:new Date().toISOString()},{data:r,error:s}=await fe.from("goals").insert([n]).select("*, goal_contributions (*)");return{data:(r||[]).map(Gc),error:s}},y_=async(e,t)=>{const n={name:t.name,target_amount:t.targetAmount,target_date:t.targetDate,status:t.status,milestones:t.milestones,linked_budget_id:t.linkedBudgetId??null},r=Object.fromEntries(Object.entries(n).filter(([,a])=>a!==void 0)),{data:s,error:i}=await fe.from("goals").update(r).eq("id",e).select("*, goal_contributions (*)");return{data:(s||[]).map(Gc),error:i}},v_=async e=>fe.from("goals").delete().eq("id",e),w_=async(e,t)=>{const n={goal_id:e,amount:t.amount,contributed_at:t.date||new Date().toISOString(),note:t.note||null,created_at:new Date().toISOString()},{data:r,error:s}=await fe.from("goal_contributions").insert([n]).select();return{data:r,error:s}},ws=e=>({...e,insights:e.insights||{}}),__=async(e,t,n={})=>{const r=n.limit??10;if(!e||!t)return{data:[],error:null};let s=fe.from("ai_insights").select("*").eq("user_id",e).eq("budget_id",t).order("created_at",{ascending:!1});r&&(s=s.limit(r));const{data:i,error:a}=await s;return{data:(i||[]).map(ws),error:a}},x_=async e=>{if(!e)return{data:null,error:null};const{data:t,error:n}=await fe.from("ai_insights").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(1);if(n)return{data:null,error:n};const r=Array.isArray(t)?t[0]:t;return{data:r?ws(r):null,error:null}},S_=async({userId:e,budgetId:t,metrics:n={}})=>{if(!e||!t)return{data:null,error:{message:"Missing user or budget context"}};const{data:r,error:s}=await fe.functions.invoke("ai-insights",{body:{budgetId:t,userId:e,metrics:n}});if(s)try{const a=await Yd(n);return{data:ws({id:`local-insight-${Date.now()}`,user_id:e,budget_id:t,insights:a,created_at:new Date().toISOString(),tier:"local"}),error:null}}catch(a){return console.error("Failed to generate fallback insight",a),{data:null,error:s}}const i=r!=null&&r.insight?ws(r.insight):null;if(!i){const a=await Yd(n);return{data:ws({id:`local-insight-${Date.now()}`,user_id:e,budget_id:t,insights:a,created_at:new Date().toISOString(),tier:"local"}),error:null}}return{data:i,error:null}},cm=j.createContext(void 0),k_=1e4,j_=1e4,N_=e=>{const t=new Error(e);return t.name="TimeoutError",t},th=(e,t)=>Promise.race([e,new Promise((n,r)=>setTimeout(()=>r(N_(t)),j_))]);function Vn(){const e=j.useContext(cm);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function um({children:e}){const[t,n]=j.useState(null),[r,s]=j.useState(null),[i,a]=j.useState(!0),[l,c]=j.useState(!0),[u,d]=j.useState("checking-session"),h=j.useRef(!0),g=j.useCallback(m=>{h.current&&m()},[]),v=j.useCallback(m=>{g(()=>s(m))},[g]),_=j.useCallback(async m=>{var x;if(!m){v(null);return}let p=!0,y="ready";try{d("loading-profile");const{data:P,error:N}=await th(o_(m.id),"Profile lookup timed out");if(N&&N.code==="PGRST116"){const A=((x=m.user_metadata)==null?void 0:x.full_name)||m.email,{data:C,error:q}=await th(a_(m.id,m.email,A),"Profile creation timed out");if(q){console.error("Error creating profile",q),v(null);return}v((C==null?void 0:C[0])||null);return}if(N){console.error("Error loading profile",N),v(null);return}v(P)}catch(P){if((P==null?void 0:P.name)==="TimeoutError"){console.warn("Supabase did not respond in time while loading the profile. Falling back to signed-out state.",P),v(null),g(()=>a(!1)),d("profile-timeout"),p=!1,y="profile-timeout";return}console.error("Unexpected profile error",P),v(null)}finally{p&&(g(()=>a(!1)),d(y))}},[v,g]),S=j.useCallback(async m=>{g(()=>n(m)),m?(g(()=>a(!0)),await _(m)):(v(null),g(()=>a(!1)),d("signed-out"))},[v,_,g]);j.useEffect(()=>{h.current=!0,(async()=>{try{d("checking-session");const y=t_(),x=y!=null;if(Xw(y)){if(Fl(),x)try{await fe.auth.signOut()}catch(C){console.warn("Failed to clear Supabase session while expiring stored session",C)}if(!h.current)return;g(()=>{n(null),s(null),a(!1)}),d("signed-out");return}const N=new Promise((C,q)=>setTimeout(()=>q(new Error("Session lookup timed out")),k_)),{user:A}=await Promise.race([i_(),N]);if(!h.current)return;A&&ha(),await S(A)}catch(y){if(console.warn("Failed to resolve initial session",y),!h.current)return;g(()=>{n(null),s(null),a(!1)}),d("signed-out")}finally{h.current&&c(!1)}})();const{data:p}=fe.auth.onAuthStateChange(async(y,x)=>{y==="SIGNED_IN"&&ha(),y==="SIGNED_OUT"&&Fl(),h.current&&(d("auth-transition"),await S((x==null?void 0:x.user)??null))});return()=>{h.current=!1,p.subscription.unsubscribe()}},[S,g]);const b=j.useMemo(()=>({user:t,userProfile:r,loading:i,initializing:l,status:u,refreshProfile:async()=>t?_(t):null,setUserProfile:v}),[t,r,i,l,u,_,v]);return o.jsx(cm.Provider,{value:b,children:e})}um.propTypes={children:w.node.isRequired};const b_=24*60*60*1e3,E_={weekly:7,biweekly:14,semimonthly:15,"semi-monthly":15,quarterly:91,yearly:365,annual:365},Po={green:{label:"On Track"},yellow:{label:"Watch"},red:{label:"Over"}},nh=(e="")=>e.toLowerCase().trim(),C_=(e,t,n)=>Math.min(Math.max(e,t),n),ts=e=>{if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t},rh=(e,t)=>{const n=new Date(e);return n.setDate(n.getDate()+t),n},Ao=(e,t)=>{const n=new Date(e);return n.setMonth(n.getMonth()+t),n},T_=e=>(((e==null?void 0:e.cycle)||(e==null?void 0:e.cycleMetadata)||{}).type||(e==null?void 0:e.cycleType)||"monthly").toLowerCase(),P_=(e,t)=>{const n=(e==null?void 0:e.cycle)||(e==null?void 0:e.cycleMetadata)||{};return ts(n.currentStart)||ts(n.startDate)||ts(e==null?void 0:e.cycleStartDate)||ts(e==null?void 0:e.createdAt)||ts(e==null?void 0:e.created_at)||new Date(t)},dm=(e,t)=>{const n=(t==null?void 0:t.cycle)||(t==null?void 0:t.cycleMetadata)||{};return typeof n.lengthDays=="number"?n.lengthDays:typeof n.days=="number"?n.days:e==="custom"&&typeof n.customDays=="number"?n.customDays:e==="per-paycheck"&&typeof n.payFrequencyDays=="number"||e==="per_paycheck"&&typeof n.payFrequencyDays=="number"?n.payFrequencyDays:typeof n.cadenceDays=="number"?n.cadenceDays:typeof n.intervalDays=="number"?n.intervalDays:e==="monthly"?30:e==="biweekly"?14:e==="weekly"?7:e==="per-paycheck"||e==="per_paycheck"?14:e==="custom"?30:E_[e]||30},sh=(e,t,n)=>{const r=(n==null?void 0:n.cycle)||(n==null?void 0:n.cycleMetadata)||{};switch(t){case"monthly":return Ao(e,r.repeatEvery||1);case"quarterly":return Ao(e,3);case"yearly":case"annual":return Ao(e,12);case"semimonthly":case"semi-monthly":{const s=r.days||r.lengthDays||15;return rh(e,s)}default:{const s=dm(t,n);return rh(e,s)}}},A_=(e,t)=>{const n=T_(e);let r=P_(e,t),s=sh(r,n,e),i=0;for(;s&&t>=s&&i<500;)r=s,s=sh(r,n,e),i+=1;const a=s?s.getTime()-r.getTime():dm(n,e)*b_,l=t.getTime()-r.getTime(),c=a>0?C_(l/a,0,1):1;return{cycleType:n,currentStart:r,nextStart:s,totalMs:a,elapsedMs:l,progress:c}},Li=e=>`$${Number.parseFloat(e||0).toFixed(2)}`,O_=(e,t,n,r)=>{const s=Math.round(r*100);return`Spent ${Li(e)} of ${Li(t)} with ${s}% of the cycle elapsed (expected ${Li(n)}).`},ih=(e,t,n)=>{const r=Number.isFinite(t)?t:0,s=Number.isFinite(e)?e:0,i=r*n;if(r<=0){if(s<=0){const d="green";return{status:d,...Po[d],tooltip:"No budget set for this period.",actual:s,budgeted:r,expected:i}}const u="red";return{status:u,...Po[u],tooltip:`Spending ${Li(s)} without a set budget for this cycle.`,actual:s,budgeted:r,expected:i}}const a=s/r,l=.1;let c="green";return a>n+l?c="red":a>n&&(c="yellow"),{status:c,...Po[c],tooltip:O_(s,r,i,n),actual:s,budgeted:r,expected:i}},hm=(e,t=new Date)=>{const n=e||{},r=(n.transactions||[]).filter(g=>g.type==="expense"),s=A_(n,t),i=s.progress??1,l=(n.categoryBudgets||[]).map(g=>{const v=nh(g.category),_=r.filter(m=>nh(m.category)===v).reduce((m,p)=>m+(Number.isFinite(p.amount)?p.amount:0),0),S=Number.isFinite(g.budgetedAmount)?g.budgetedAmount:Number.isFinite(g.amount)?g.amount:0,b=ih(_,S,i);return{name:g.category,key:v,actual:_,budgeted:S,...b}}),c=l.reduce((g,v)=>(v.key&&(g[v.key]=v),g),{}),u=l.reduce((g,v)=>g+v.budgeted,0),d=r.reduce((g,v)=>g+(Number.isFinite(v.amount)?v.amount:0),0),h=ih(d,u,i);return{cycle:{type:s.cycleType,start:s.currentStart,end:s.nextStart,progress:i},categories:l,categoriesByName:c,overall:h}},ah=[{category:"Rent",budgetedAmount:1200},{category:"Groceries",budgetedAmount:450},{category:"Transportation",budgetedAmount:180},{category:"Bills",budgetedAmount:320},{category:"Entertainment",budgetedAmount:150},{category:"Shopping",budgetedAmount:120},{category:"Dining Out",budgetedAmount:160},{category:"Emergency Fund",budgetedAmount:100}],fm=[{type:"monthly",label:"Monthly",description:"Resets on the first of each month."},{type:"per-paycheck",label:"Per-paycheck",description:"Sync budgets to each paycheck."},{type:"custom",label:"Custom",description:"Choose any cycle length you need."}],wi=e=>{const t=fm.find(n=>n.type===e);return t?t.label:e?e.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Monthly"},_i=e=>({name:e===0?"My First Budget":"My Budget",cycleType:"monthly",startDate:new Date().toISOString().split("T")[0],payFrequencyDays:14,customDays:30,includeDefaultCategories:!0}),oh=e=>`$${Number.parseFloat(e||0).toFixed(2)}`;function Kc({budgets:e,setSelectedBudget:t,setViewMode:n,setBudgets:r,userId:s,onMetadataChange:i,onMetadataRemove:a,onDataMutated:l}){const[c,u]=j.useState(null),[d,h]=j.useState(""),[g,v]=j.useState(null),[_,S]=j.useState(!1),[b,m]=j.useState(!1),[p,y]=j.useState(()=>_i(e.length)),x=j.useMemo(()=>e.reduce((E,z)=>{var ee;const Q=((ee=z==null?void 0:z.cycleMetadata)==null?void 0:ee.type)||"monthly";return E[Q]=(E[Q]||0)+1,E},{}),[e]),P=E=>{t(E),n("details")},N=()=>{y(_i(e.length)),m(!1)},A=async()=>{S(!0);try{const E=p.includeDefaultCategories?ah.map(J=>({...J})):[],z={name:p.name.trim()||"My Budget",categoryBudgets:E},{data:Q,error:ee}=await eh(s,z);if(ee)console.error("Error creating budget:",ee),alert("Failed to create budget. Please try again.");else if(Q!=null&&Q[0]){const J=Q[0],le=J.created_at?new Date(J.created_at).toLocaleDateString():new Date().toLocaleDateString(),I={id:J.id,name:J.name,createdAt:le,categoryBudgets:J.category_budgets||E,transactions:(J.transactions||[]).map(Y=>({...Y}))};r(Y=>[I,...Y]);const W=new Date().toISOString(),B={type:p.cycleType,label:wi(p.cycleType),currentStart:p.startDate?new Date(p.startDate).toISOString():W,payFrequencyDays:p.cycleType==="per-paycheck"?Number(p.payFrequencyDays)||14:void 0,customDays:p.cycleType==="custom"?Number(p.customDays)||30:void 0,lastEditedAt:W};i==null||i(I.id,Y=>({...Y,cycle:{...Y.cycle,...B},changeLog:[{at:W,message:`Budget created (${B.label}) with ${E.length||"no"} starter categories`,type:"create"},...Y.changeLog||[]]})),t({...I,cycleMetadata:B}),n("details"),l==null||l()}}catch(E){console.error("Error creating budget:",E),alert("Failed to create budget. Please try again.")}finally{S(!1),N()}},C=async E=>{if(!d.trim()){u(null);return}S(!0);try{const{error:z}=await Ii(E.id,{name:d.trim(),categoryBudgets:E.categoryBudgets});if(z)console.error("Error updating budget:",z),alert("Failed to update budget name. Please try again.");else{r(ee=>ee.map(J=>J.id===E.id?{...J,name:d.trim()}:J));const Q=new Date().toISOString();i==null||i(E.id,ee=>({...ee,changeLog:[{at:Q,message:`Renamed budget to "${d.trim()}"`,type:"rename"},...ee.changeLog||[]]})),l==null||l()}}catch(z){console.error("Error updating budget:",z),alert("Failed to update budget name. Please try again.")}finally{u(null),S(!1)}},q=async E=>{S(!0);try{const z={name:`${E.name} (Copy)`,categoryBudgets:E.categoryBudgets||[]},{data:Q,error:ee}=await eh(s,z);if(ee)console.error("Error duplicating budget:",ee),alert("Failed to duplicate budget. Please try again.");else if(Q!=null&&Q[0]){const J=Q[0],le={id:J.id,name:J.name,createdAt:J.created_at?new Date(J.created_at).toLocaleDateString():new Date().toLocaleDateString(),categoryBudgets:J.category_budgets||[],transactions:(J.transactions||[]).map(B=>({...B}))};r(B=>[le,...B]);const I=new Date().toISOString(),W=E.cycleMetadata||{type:"monthly",label:wi("monthly")};i==null||i(le.id,B=>{var Y,X;return{...B,cycle:{...B.cycle,...W,lastEditedAt:I},insights:{...B.insights,...E.insightsPreferences||{},nudges:{...(Y=B.insights)==null?void 0:Y.nudges,...((X=E.insightsPreferences)==null?void 0:X.nudges)||{}}},changeLog:[{at:I,message:`Duplicated from ${E.name}`,type:"duplicate"},...B.changeLog||[]]}}),l==null||l()}}catch(z){console.error("Error duplicating budget:",z),alert("Failed to duplicate budget. Please try again.")}finally{v(null),S(!1)}},F=async E=>{S(!0);try{const{error:z}=await c_(E);z?(console.error("Error deleting budget:",z),alert("Failed to delete budget. Please try again.")):(r(Q=>Q.filter(ee=>ee.id!==E)),a==null||a(E),l==null||l())}catch(z){console.error("Error deleting budget:",z),alert("Failed to delete budget. Please try again.")}finally{v(null),S(!1)}},O=Object.keys(x);return o.jsxs("div",{children:[o.jsxs("div",{className:"header-section",children:[o.jsx("p",{className:"tagline",children:"Manage your budgets and stay on top of your finances."}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{className:"secondary-button",onClick:()=>n("goals"),children:"View savings goals"})})]}),e.length>0&&o.jsxs("div",{className:"cycle-summary-card",children:[o.jsx("div",{className:"cycle-summary-title",children:"Budget cycles"}),o.jsxs("div",{className:"cycle-summary-stats",children:[O.length===0&&o.jsx("span",{children:"No active budgets yet."}),O.map(E=>o.jsxs("span",{className:`cycle-chip cycle-${E}`,children:[wi(E)," · ",x[E]]},E))]})]}),e.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("p",{children:"Welcome to Pocket Budget! Create your first budget to get started."}),o.jsx("button",{className:"primary-button",onClick:()=>{y(_i(e.length)),m(!0)},disabled:_,children:"Start a Monthly Budget"})]}):e.map(E=>{var G;const z=hm(E),Q=z.overall,ee=(E.transactions||[]).filter(D=>D.type==="income").reduce((D,T)=>D+T.amount,0),J=(E.transactions||[]).filter(D=>D.type==="expense").reduce((D,T)=>D+T.amount,0),le=ee-J,I=(E.categoryBudgets||[]).map(D=>{var te;const T=(E.transactions||[]).filter(se=>se.type==="expense"&&se.category.toLowerCase().trim()===D.category.toLowerCase().trim()).reduce((se,ne)=>se+ne.amount,0),U=T>D.budgetedAmount,Z=((te=D.category)==null?void 0:te.toLowerCase().trim())||"";return{...D,actual:T,isOver:U,pacing:z.categoriesByName[Z]}}),W=I.some(D=>{var T;return D.isOver||((T=D.pacing)==null?void 0:T.status)==="red"}),B=I.reduce((D,T)=>D+(T.budgetedAmount||0),0),Y=I.reduce((D,T)=>D+(T.actual||0),0),X=B-Y,K=((G=E.cycleMetadata)==null?void 0:G.type)||"monthly",$=wi(K);return o.jsx("div",{className:"budgetCard",children:o.jsxs("div",{className:"budgetCard-content",children:[o.jsxs("div",{className:"budgetCard-info",onClick:()=>P(E),children:[o.jsxs("div",{className:"budgetCycleRow",children:[o.jsx("span",{className:`cycle-pill cycle-${K}`,children:$}),o.jsxs("div",{className:`pacing-indicator pacing-${Q.status}`,title:Q.tooltip,role:"status",children:[o.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),o.jsx("span",{className:"pacing-label",children:Q.label})]})]}),c===E.id?o.jsx("input",{className:"input budget-name-input",value:d,onChange:D=>h(D.target.value),onBlur:()=>C(E),onKeyPress:D=>{D.key==="Enter"&&C(E)},autoFocus:!0,disabled:_}):o.jsx("div",{className:"budgetNameRow",children:o.jsxs("div",{className:"budgetName",onClick:D=>{D.stopPropagation(),u(E.id),h(E.name)},children:[E.name,W&&o.jsx("span",{className:"expense",style:{marginLeft:"0.5rem"},children:"🚩"})]})}),o.jsxs("div",{className:"budgetBalance",children:["Balance: ",o.jsxs("span",{className:le>=0?"income":"expense",children:["$",le.toFixed(2)]})]}),o.jsxs("div",{className:"budgetSummaryRow",role:"list",children:[o.jsxs("span",{className:"budgetSummaryItem",role:"listitem",children:["Spent ",o.jsx("strong",{children:oh(Y)})]}),o.jsxs("span",{className:"budgetSummaryItem",role:"listitem",children:["Remaining ",o.jsx("strong",{children:oh(X)})]}),o.jsxs("span",{className:`budgetSummaryItem guardrail-${Q.status}`,role:"listitem",children:["Guardrail ",o.jsx("strong",{children:Q.label})]})]}),o.jsxs("div",{className:"budgetDate",children:["Created: ",E.createdAt]}),I.length>0&&o.jsxs("div",{className:"category-budgets",children:[I.slice(0,3).map(D=>{const T=!!D.budgetedAmount&&D.budgetedAmount>0,U=T?Math.min(D.actual/D.budgetedAmount*100,100):0;return o.jsxs("div",{className:"category-budget-row",children:[o.jsxs("div",{className:"category-budget-header",children:[o.jsxs("div",{className:"category-budget-name",children:[D.category,D.isOver&&o.jsx("span",{className:"expense",style:{marginLeft:"0.3rem"},children:"⚠"})]}),D.pacing&&o.jsxs("div",{className:`pacing-indicator pacing-${D.pacing.status}`,title:D.pacing.tooltip,role:"status","aria-label":`${D.category} pacing is ${D.pacing.label}`,onClick:Z=>Z.stopPropagation(),children:[o.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),o.jsx("span",{className:"pacing-label",children:D.pacing.label})]})]}),o.jsxs("div",{className:"category-budget-amounts",children:["$",D.actual.toFixed(2)," / $",D.budgetedAmount.toFixed(2)]}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:`progress-fill ${D.isOver?"over":""}`,style:{width:`${U}%`},"aria-label":T?void 0:`${D.category} has no budget set`})})]},D.category)}),I.length>3&&o.jsxs("div",{className:"category-budget-more",children:["+",I.length-3," more categories"]})]})]}),o.jsxs("div",{className:"menuContainer",children:[o.jsx("button",{className:"menuButton",onClick:D=>{D.stopPropagation(),v(g===E.id?null:E.id)},title:"More options",disabled:_,children:"⋮"}),g===E.id&&o.jsxs("div",{className:"dropdownMenu",children:[o.jsx("button",{className:"dropdownItem",onClick:D=>{D.stopPropagation(),q(E)},disabled:_,children:"Copy Budget"}),o.jsx("button",{className:"dropdownItem delete",onClick:D=>{D.stopPropagation(),confirm(`Are you sure you want to delete "${E.name}"?`)&&F(E.id)},disabled:_,children:"Delete Budget"})]})]})]})},E.id)}),e.length>0&&o.jsxs("div",{className:"budget-actions",children:[o.jsx("button",{className:"addButton primary-button",onClick:()=>{y(_i(e.length)),m(!0)},disabled:_,children:"New Budget"}),o.jsx("button",{className:"cancelButton secondary-button cate-btn",onClick:()=>n("categories"),children:"Manage Categories"})]}),b&&o.jsx("div",{className:"modalBackdrop",children:o.jsxs("div",{className:"modalContent enhanced-modal",children:[o.jsx("h2",{className:"header modal-header",children:"Create a budget"}),o.jsx("label",{className:"input-label",htmlFor:"new-budget-name",children:"Budget name"}),o.jsx("input",{id:"new-budget-name",className:"input",placeholder:"My Budget",value:p.name,onChange:E=>y(z=>({...z,name:E.target.value}))}),o.jsxs("div",{className:"cycle-option-group",children:[o.jsx("span",{className:"input-label",children:"Cycle"}),o.jsx("div",{className:"cycle-option-grid",children:fm.map(E=>{const z=p.cycleType===E.type;return o.jsxs("button",{type:"button",className:`cycle-option ${z?"selected":""}`,onClick:()=>{y(Q=>({...Q,cycleType:E.type}))},children:[o.jsx("div",{className:"cycle-option-title",children:E.label}),o.jsx("div",{className:"cycle-option-description",children:E.description})]},E.type)})})]}),p.cycleType==="per-paycheck"&&o.jsxs("div",{className:"cycle-config-row",children:[o.jsx("label",{className:"input-label",htmlFor:"cycle-pay-frequency",children:"Paycheck frequency (days)"}),o.jsx("input",{id:"cycle-pay-frequency",type:"number",className:"input",min:"7",max:"45",value:p.payFrequencyDays,onChange:E=>y(z=>({...z,payFrequencyDays:E.target.value}))})]}),p.cycleType==="custom"&&o.jsxs("div",{className:"cycle-config-row",children:[o.jsx("label",{className:"input-label",htmlFor:"cycle-custom-length",children:"Cycle length (days)"}),o.jsx("input",{id:"cycle-custom-length",type:"number",className:"input",min:"5",max:"120",value:p.customDays,onChange:E=>y(z=>({...z,customDays:E.target.value}))})]}),o.jsxs("div",{className:"cycle-config-row",children:[o.jsx("label",{className:"input-label",htmlFor:"cycle-start-date",children:"Cycle start date"}),o.jsx("input",{id:"cycle-start-date",type:"date",className:"input",value:p.startDate,onChange:E=>y(z=>({...z,startDate:E.target.value}))})]}),o.jsxs("label",{className:"checkbox-row",children:[o.jsx("input",{type:"checkbox",checked:p.includeDefaultCategories,onChange:E=>y(z=>({...z,includeDefaultCategories:E.target.checked}))}),o.jsxs("span",{children:["Include starter categories (",ah.length,")"]})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{className:"addButton primary-button",onClick:A,disabled:_,children:_?"Creating...":"Create budget"}),o.jsx("button",{className:"cancelButton secondary-button",onClick:N,disabled:_,children:"Cancel"})]})]})})]})}const R_=w.shape({id:w.string.isRequired,name:w.string.isRequired,amount:w.number.isRequired,budgetedAmount:w.number,category:w.string.isRequired,type:w.oneOf(["income","expense"]).isRequired,date:w.string.isRequired,receipt:w.string}),D_=w.shape({category:w.string.isRequired,budgetedAmount:w.number.isRequired});Kc.propTypes={budgets:w.arrayOf(w.shape({id:w.string.isRequired,name:w.string.isRequired,createdAt:w.string.isRequired,transactions:w.arrayOf(R_),categoryBudgets:w.arrayOf(D_),cycleMetadata:w.object})).isRequired,setSelectedBudget:w.func.isRequired,setViewMode:w.func.isRequired,setBudgets:w.func.isRequired,userId:w.string.isRequired,onMetadataChange:w.func,onMetadataRemove:w.func,onDataMutated:w.func};Kc.defaultProps={onMetadataChange:void 0,onMetadataRemove:void 0,onDataMutated:void 0};const pm=[{type:"monthly",label:"Monthly"},{type:"per-paycheck",label:"Per-paycheck"},{type:"custom",label:"Custom"}],Oo=e=>{const t=pm.find(n=>n.type===e);return t?t.label:e?e.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Monthly"},Ro=["▁","▂","▃","▄","▅","▆","▇","█"],I_=e=>{if(!(e!=null&&e.length))return"▁▁▁▁▁▁";const t=Math.max(...e);return t<=0?"▁".repeat(e.length):e.map(n=>{const r=Math.max(0,n)/t,s=Math.min(Ro.length-1,Math.round(r*(Ro.length-1)));return Ro[s]}).join("")},lh={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},sr=e=>`$${Number.parseFloat(e||0).toFixed(2)}`,zl=()=>new Date().toISOString().split("T")[0],xi=(e,t)=>{if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const n=e?new Date(e):null;if(n&&!Number.isNaN(n.getTime()))return n.toISOString().split("T")[0];if(t!==void 0){if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const r=t?new Date(t):null;if(r&&!Number.isNaN(r.getTime()))return r.toISOString().split("T")[0]}return zl()},L_=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleDateString()};function Qc({budget:e,categories:t,setViewMode:n,setBudgets:r,budgets:s,setSelectedBudget:i,onMetadataChange:a,onDataMutated:l}){var xu,Su,ku;const{user:c}=Vn(),u=j.useMemo(()=>e.metadata||{},[e.metadata]),d=j.useMemo(()=>e.insightsPreferences||u.insights||{},[e.insightsPreferences,u.insights]),h=j.useMemo(()=>e.changeLog||u.changeLog||[],[e.changeLog,u.changeLog]),[g,v]=j.useState("expenses"),[_,S]=j.useState(!1),[b,m]=j.useState(null),[p,y]=j.useState(1),[x,P]=j.useState(!1),[N,A]=j.useState({name:"",amount:"",budgetedAmount:"",category:"",date:zl(),type:"expense",receipt:null}),[C,q]=j.useState(null),[F,O]=j.useState(e.name||""),[E,z]=j.useState(()=>(e.categoryBudgets||[]).map(f=>({...f}))),[Q,ee]=j.useState(!1),[J,le]=j.useState(null),[I,W]=j.useState(!1),[B,Y]=j.useState(!1),[X,K]=j.useState(null),[$,G]=j.useState(null),[D,T]=j.useState(null),[U,Z]=j.useState(()=>new Set(d.trackedCategories||[])),[te,se]=j.useState(()=>{var f,k;return{day:((f=d.reportSchedule)==null?void 0:f.day)||"sunday",time:((k=d.reportSchedule)==null?void 0:k.time)||"08:00"}}),[ne,Ve]=j.useState(()=>{var f,k,R,M;return{enabled:!!((f=d.nudges)!=null&&f.enabled),threshold:((k=d.nudges)==null?void 0:k.threshold)||.8,quietStart:((R=d.quietHours)==null?void 0:R.start)??21,quietEnd:((M=d.quietHours)==null?void 0:M.end)??7}}),[de,Tt]=j.useState(()=>{var f,k,R,M,V,ie;return{type:((f=e.cycleMetadata)==null?void 0:f.type)||"monthly",startDate:(k=e.cycleMetadata)!=null&&k.currentStart?new Date(e.cycleMetadata.currentStart).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],payFrequencyDays:((R=e.cycleMetadata)==null?void 0:R.payFrequencyDays)||14,customDays:((M=e.cycleMetadata)==null?void 0:M.customDays)||((V=e.cycleMetadata)==null?void 0:V.lengthDays)||((ie=e.cycleMetadata)==null?void 0:ie.cycleLength)||30}}),[Gn,st]=j.useState(!1),[Nm,Ba]=j.useState(!1),[nu,Fa]=j.useState(""),[ru,za]=j.useState(""),[Jt,qa]=j.useState(null),[su,Wa]=j.useState(null),[iu,au]=j.useState(!1),Ae=j.useMemo(()=>(e.transactions||[]).map(f=>({...f,date:xi(f.date)})),[e.transactions]),bm=j.useMemo(()=>({...e,transactions:Ae}),[e,Ae]);j.useEffect(()=>{z((e.categoryBudgets||[]).map(f=>({...f}))),ee(!1)},[e.id,e.categoryBudgets]),j.useEffect(()=>{O(e.name||"")},[e.id,e.name]),j.useEffect(()=>{var f,k,R,M,V,ie,_e,pe,ue,Ce,ye,Le;Z(new Set(d.trackedCategories||[])),se({day:((f=d.reportSchedule)==null?void 0:f.day)||"sunday",time:((k=d.reportSchedule)==null?void 0:k.time)||"08:00"}),Ve({enabled:!!((R=d.nudges)!=null&&R.enabled),threshold:((M=d.nudges)==null?void 0:M.threshold)||.8,quietStart:((V=d.quietHours)==null?void 0:V.start)??21,quietEnd:((ie=d.quietHours)==null?void 0:ie.end)??7}),Tt({type:((_e=e.cycleMetadata)==null?void 0:_e.type)||"monthly",startDate:(pe=e.cycleMetadata)!=null&&pe.currentStart?new Date(e.cycleMetadata.currentStart).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],payFrequencyDays:((ue=e.cycleMetadata)==null?void 0:ue.payFrequencyDays)||14,customDays:((Ce=e.cycleMetadata)==null?void 0:Ce.customDays)||((ye=e.cycleMetadata)==null?void 0:ye.lengthDays)||((Le=e.cycleMetadata)==null?void 0:Le.cycleLength)||30}),st(!1)},[e.id,e.cycleMetadata,d]);const Ha=7,jn=j.useCallback(f=>{a&&a(e.id,f)},[a,e.id]),Em=(f,k)=>{const R=Number.parseFloat(k);z(M=>M.map(V=>V.category===f?{...V,budgetedAmount:Number.isFinite(R)?R:0}:V)),ee(!0)},Cm=()=>{const f=nu.trim();f&&(z(k=>{if(k.some(V=>V.category.toLowerCase()===f.toLowerCase()))return k;const R=Number.parseFloat(ru),M={category:f,budgetedAmount:Number.isFinite(R)?R:0};return ee(!0),[...k,M]}),Fa(""),za(""),Ba(!1))},Tm=()=>{Ba(!1),Fa(""),za("")},Pm=f=>{const k=Ae.filter(M=>M.type==="expense"&&M.category===f.category).reduce((M,V)=>M+V.amount,0),R=Math.max(0,Number(f.budgetedAmount||0)-k);K({...f,remaining:R,actual:k,reallocateTo:""})},Am=()=>{if(!X)return;const{category:f,remaining:k,reallocateTo:R}=X;if(k>0&&!R){alert("Please choose a category to reallocate the remaining budget.");return}z(M=>{const V=M.filter(ie=>ie.category!==f);return k>0&&R?V.map(ie=>ie.category===R?{...ie,budgetedAmount:Number(ie.budgetedAmount||0)+k}:ie):V}),ee(!0),K(null)},Om=()=>{K(null)},ou=f=>{r(k=>k.map(R=>R.id===e.id?f:R)),i(f)},Rm=async f=>{if(f)try{P(!0);const{error:k}=await Ii(e.id,{name:e.name,categoryBudgets:f});if(k){console.error("Error undoing allocations:",k),alert("Failed to undo allocation change. Please try again.");return}const R={...e,categoryBudgets:f};ou(R),z(f.map(M=>({...M}))),ee(!1),jn(M=>({...M,changeLog:[{at:new Date().toISOString(),message:"Reverted allocation change",type:"undo"},...M.changeLog||[]]})),l==null||l()}finally{P(!1),le(null)}},Dm=async()=>{const f=E.map(k=>({category:k.category,budgetedAmount:Number.isFinite(Number(k.budgetedAmount))?Number(k.budgetedAmount):0}));P(!0);try{const{error:k}=await Ii(e.id,{name:e.name,categoryBudgets:f});if(k){console.error("Error saving allocations:",k),alert("Failed to save category allocations.");return}const R=e.categoryBudgets||[],M={...e,categoryBudgets:f};ou(M),ee(!1);const V=new Date().toISOString();jn(ie=>({...ie,changeLog:[{at:V,message:"Updated category allocations",type:"allocation"},...ie.changeLog||[]]})),l==null||l(),le({message:"Allocations updated",actionLabel:"Undo",action:()=>Rm(R)})}finally{P(!1)}},lu=()=>le(null),Im=()=>{const f=new Date().toISOString();jn(k=>{var R;return{...k,cycle:{...k.cycle,type:de.type,label:Oo(de.type),currentStart:de.startDate?new Date(de.startDate).toISOString():(R=k.cycle)==null?void 0:R.currentStart,payFrequencyDays:de.type==="per-paycheck"?Number(de.payFrequencyDays)||14:void 0,customDays:de.type==="custom"?Number(de.customDays)||30:void 0,lastEditedAt:f},changeLog:[{at:f,message:`Updated cycle to ${Oo(de.type)}`,type:"cycle"},...k.changeLog||[]]}}),Y(!1)},Lm=f=>{Z(k=>{const R=new Set(k);return R.has(f)?R.delete(f):R.add(f),st(!0),R})},cu=(f,k)=>{se(R=>({...R,[f]:k})),st(!0)},Ks=f=>{Ve(k=>({...k,...f})),st(!0)};j.useEffect(()=>{if(!Gn)return;const f=Array.from(U);jn(k=>{var R,M,V;return{...k,insights:{...k.insights||{},trackedCategories:f,reportSchedule:{...(R=k.insights)==null?void 0:R.reportSchedule,...te},quietHours:{...((M=k.insights)==null?void 0:M.quietHours)||{},start:Number(ne.quietStart)??21,end:Number(ne.quietEnd)??7},nudges:{...((V=k.insights)==null?void 0:V.nudges)||{},enabled:!!ne.enabled,threshold:Number(ne.threshold)||.8}}}}),st(!1)},[Gn,U,te,ne,jn]);const uu=j.useMemo(()=>{if(U.size)return Array.from(U);const f={};Ae.filter(M=>M.type==="expense").forEach(M=>{f[M.category]=(f[M.category]||0)+M.amount});const k=Object.entries(f).sort((M,V)=>V[1]-M[1]).map(([M])=>M),R=(e.categoryBudgets||[]).map(M=>M.category);return Array.from(new Set([...k,...R])).slice(0,6)},[U,Ae,e.categoryBudgets]),du=j.useMemo(()=>{const f=new Set((e.categoryBudgets||[]).map(k=>k.category));return(t.expense||[]).forEach(k=>f.add(k.name)),Array.from(f).sort((k,R)=>k.localeCompare(R))},[e.categoryBudgets,t.expense]),hu=j.useCallback(f=>{const[k="08",R="00"]=(f||"08:00").split(":"),M=Number.parseInt(k,10),V=Number.parseInt(R,10);return{hours:Number.isFinite(M)?M:8,minutes:Number.isFinite(V)?V:0}},[]),fu=j.useCallback(f=>{const k=new Date(f),R=String(te.day||"sunday").toLowerCase(),M=lh[R]??0,V=(k.getDay()-M+7)%7;k.setDate(k.getDate()-V);const{hours:ie,minutes:_e}=hu(te.time);return k.setHours(ie,_e,0,0),k},[te.day,te.time,hu]),Fr=j.useMemo(()=>{const k=fu(new Date),R=new Date(k);R.setDate(R.getDate()+7);const M=new Date(k);M.setDate(M.getDate()-7);const V=new Date(k),ie=(pe,ue,Ce)=>Ae.filter(ye=>ye.type==="expense"&&ye.category===pe).filter(ye=>{const Le=new Date(ye.date);return Le>=ue&&Le<Ce}).reduce((ye,Le)=>ye+Le.amount,0),_e=uu.map(pe=>{var Ka;const ue=ie(pe,k,R),Ce=ie(pe,M,V),ye=ue-Ce,Le=Ce>0?ye/Ce*100:ue>0?100:0,be=pe.toLowerCase().trim(),Te=(Ka=$t.categoriesByName)==null?void 0:Ka[be],bn=[];for(let Xt=5;Xt>=0;Xt-=1){const wt=new Date(R);wt.setDate(wt.getDate()-7*Xt);const Qa=new Date(wt);Qa.setDate(Qa.getDate()-7),bn.push(ie(pe,Qa,wt))}return{category:pe,current:ue,previous:Ce,delta:ye,pctChange:Le,status:(Te==null?void 0:Te.status)||"green",statusLabel:(Te==null?void 0:Te.label)||"On Track",trend:bn}}).sort((pe,ue)=>ue.current-pe.current);return{cards:_e,topCards:_e.slice(0,3),trends:_e.reduce((pe,ue)=>({...pe,[ue.category]:ue.trend}),{}),currentStart:k,currentEnd:R}},[Ae,uu,$t,fu]),Kn=Number(ne.quietStart)??21,Qn=Number(ne.quietEnd)??7,pu=j.useCallback(f=>{const k=f.getHours();return Kn===Qn?!1:Kn<Qn?k>=Kn&&k<Qn:k>=Kn||k<Qn},[Kn,Qn]);j.useEffect(()=>{var ie,_e,pe,ue,Ce;if(!ne.enabled||pu(new Date))return;const f=(_e=(ie=u.insights)==null?void 0:ie.nudges)==null?void 0:_e.snoozedUntil;if(f&&new Date(f)>new Date)return;const k=Number(ne.threshold)||.8,R=(pe=e.cycleMetadata)!=null&&pe.currentStart?new Date(e.cycleMetadata.currentStart).toISOString():e.id,M=((Ce=(ue=u.insights)==null?void 0:ue.nudges)==null?void 0:Ce.acknowledged)||{},V=($t.categories||[]).find(ye=>{if(!ye||!Number.isFinite(ye.budgeted)||ye.budgeted<=0)return!1;const Le=ye.actual/ye.budgeted,be=`${R}:${ye.name}`.toLowerCase();return Le>=k&&!M[be]});V&&!D&&T({category:V.name,ratio:V.actual/(V.budgeted||1),actual:V.actual,budgeted:V.budgeted})},[ne,u.insights,e.cycleMetadata,e.id,$t.categories,D,pu]);const $m=f=>{var M;const R=`${(M=e.cycleMetadata)!=null&&M.currentStart?new Date(e.cycleMetadata.currentStart).toISOString():e.id}:${f}`.toLowerCase();jn(V=>{var ie,_e,pe;return{...V,insights:{...V.insights||{},nudges:{...((ie=V.insights)==null?void 0:ie.nudges)||{},acknowledged:{...((pe=(_e=V.insights)==null?void 0:_e.nudges)==null?void 0:pe.acknowledged)||{},[R]:new Date().toISOString()}}}}}),T(null)},Mm=(f=6)=>{const k=new Date;k.setHours(k.getHours()+f),jn(R=>{var M;return{...R,insights:{...R.insights||{},nudges:{...((M=R.insights)==null?void 0:M.nudges)||{},snoozedUntil:k.toISOString()}}}}),T(null)},Jn=f=>f==="income"||f==="expense"?f:f==="expenses"?"expense":"income",mu=f=>{const k=Jn(f||g);A({name:"",amount:"",budgetedAmount:"",category:"",date:zl(),type:k,receipt:null}),m(null),S(!0)},Um=f=>{A({...f,date:xi(f.date),budgetedAmount:f.budgetedAmount||""}),m(f),S(!0)},Bm=async()=>{const f=N.name.trim(),k=N.category.trim(),R=String(N.amount??"").trim(),M=Number.parseFloat(R),V=R!==""&&Number.isFinite(M),ie=N.budgetedAmount===null||N.budgetedAmount===void 0?"":String(N.budgetedAmount).trim(),_e=ie===""?null:Number.parseFloat(ie),pe=_e===null||Number.isFinite(_e);if(!f||!V||!k||!pe){alert("Please fill in all required fields with valid numbers where applicable.");return}P(!0);try{const ue={name:f,amount:M,budgetedAmount:_e,category:k,type:Jn(N.type),date:xi(N.date),receipt:N.receipt};let Ce;if(b){const{error:be}=await u_(b.id,ue);if(be){console.error("Error updating transaction:",be),alert("Failed to update transaction. Please try again.");return}Ce=Ae.map(Te=>Te.id===b.id?{...ue,id:b.id}:Te)}else{const{data:be,error:Te}=await om(e.id,ue);if(Te){console.error("Error creating transaction:",Te),alert("Failed to create transaction. Please try again.");return}const bn={...ue,id:be[0].id};Ce=[...Ae,bn]}const ye={...e,transactions:Ce},Le=s.map(be=>be.id===e.id?ye:be);r(Le),i(Le.find(be=>be.id===e.id)),l==null||l(),S(!1),m(null)}catch(ue){console.error("Error saving transaction:",ue),alert("Failed to save transaction. Please try again.")}finally{P(!1)}},Fm=async()=>{const f=F.trim();if(!f){O(e.name||"");return}if(f===(e.name||"").trim()){O(e.name||"");return}try{const{error:k}=await Ii(e.id,{name:f,categoryBudgets:e.categoryBudgets});if(k){console.error("Error updating budget name:",k),O(e.name||"");return}let R={...e,name:f};r(M=>M.map(V=>V.id!==e.id?V:(R={...V,...e,name:f},R))),i(M=>(M==null?void 0:M.id)===e.id?R:M),O(f),l==null||l()}catch(k){console.error("Error updating budget name:",k),O(e.name||"")}},zr=Ae.filter(f=>f.type==="income").reduce((f,k)=>f+k.amount,0),Nn=Ae.filter(f=>f.type==="expense").reduce((f,k)=>f+k.amount,0),gu=Ae.filter(f=>f.type==="expense"&&f.budgetedAmount).reduce((f,k)=>f+k.budgetedAmount,0),Qs=zr-Nn,Js=j.useMemo(()=>Ae.filter(f=>f.type==="expense"),[Ae]),Va=j.useMemo(()=>{if(Js.length===0)return{burnPerDay:0,burnPerWeek:0,burnPerMonth:0,daysLeft:null,projectionDate:null,status:"safe",badgeLabel:"Safe Zone"};const f=1e3*60*60*24,k=new Date;k.setDate(k.getDate()-30);const R=Js.filter(Xt=>{const wt=new Date(Xt.date);return!Number.isNaN(wt.getTime())&&wt>=k}),M=R.length?R:Js;let V=Number.POSITIVE_INFINITY,ie=0,_e=0;if(M.forEach(Xt=>{const wt=new Date(Xt.date).getTime();Number.isFinite(wt)&&(V=Math.min(V,wt),ie=Math.max(ie,wt),_e+=Xt.amount)}),!Number.isFinite(V)||!Number.isFinite(ie))return{burnPerDay:0,burnPerWeek:0,burnPerMonth:0,daysLeft:null,projectionDate:null,status:"safe",badgeLabel:"Safe Zone"};const pe=Math.max(1,Math.round((ie-V)/f)+1),ue=_e/pe,Ce=ue*7,ye=ue*30,Le=Math.max(0,Qs),be=ue>0?Math.floor(Le/ue):null,Te=typeof be=="number"?new Date(Date.now()+be*f):null,bn=typeof be=="number"&&be<15?"critical":"safe";return{burnPerDay:ue,burnPerWeek:Ce,burnPerMonth:ye,daysLeft:be,projectionDate:Te,status:bn,badgeLabel:bn==="critical"?"Critical Burn":"Safe Zone"}},[Js,Qs]);j.useEffect(()=>{if(!(c!=null&&c.id))return;let f=!0;return(async()=>{au(!0);try{const{data:R,error:M}=await d_(c.id);if(!f)return;if(M){console.error("Failed to fetch cash burn",M),Wa(M.message||"Unable to sync burn metrics"),qa(null);return}Wa(null),qa(R||null)}catch(R){if(!f)return;console.error("Unexpected cash burn error",R),Wa(R.message||"Unable to sync burn metrics"),qa(null)}finally{f&&au(!1)}})(),()=>{f=!1}},[c==null?void 0:c.id,e.id,Ae.length]);const vt=j.useMemo(()=>{if(!Jt)return Va;const f=Jt.projectionDate instanceof Date||Jt.projectionDate===null?Jt.projectionDate:Jt.projectionDate?new Date(Jt.projectionDate):null;return{...Va,...Jt,projectionDate:f}},[Va,Jt]),$t=hm(bm),yu=((xu=e.cycleMetadata)==null?void 0:xu.type)||"monthly",zm=Oo(yu),vu=(Su=e.cycleMetadata)!=null&&Su.currentStart?new Date(e.cycleMetadata.currentStart):null,qm=vu?vu.toLocaleDateString():e.createdAt,Wm=E.reduce((f,k)=>f+(Number(k.budgetedAmount)||0),0),Hm=Ae.filter(f=>f.type==="expense").reduce((f,k)=>(f[k.category]=(f[k.category]||0)+k.amount,f),{}),Yn=Object.entries(Hm).map(([f,k])=>{var R;return{category:f,amount:k,percentage:Nn>0?k/Nn*100:0,icon:((R=t.expense.find(M=>M.name===f))==null?void 0:R.icon)||"💰"}}).sort((f,k)=>k.amount-f.amount).slice(0,5);j.useEffect(()=>{C!==null&&(Yn[C]||q(null))},[e.id,Yn.length,C]);const qr=C!==null?Yn[C]:null,Ys=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#ec4899"],Wr=Ae.filter(f=>f.type===Jn(g)).sort((f,k)=>new Date(k.date)-new Date(f.date)),Yt=Math.ceil(Wr.length/Ha),Ga=(p-1)*Ha,wu=Ga+Ha,Vm=Wr.slice(Ga,wu),_u=f=>{v(f),y(1)},Hr=f=>{y(f)},Gm=()=>{if(Yt<=1)return null;const f=[],k=5;let R=Math.max(1,p-Math.floor(k/2));const M=Math.min(Yt,R+k-1);M-R+1<k&&(R=Math.max(1,M-k+1)),p>1&&f.push(o.jsx("button",{className:"pagination-button",onClick:()=>Hr(p-1),children:"←"},"prev")),R>1&&(f.push(o.jsx("button",{className:"pagination-button",onClick:()=>Hr(1),children:"1"},1)),R>2&&f.push(o.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis1")));for(let V=R;V<=M;V++)f.push(o.jsx("button",{className:`pagination-button ${p===V?"active":""}`,onClick:()=>Hr(V),children:V},V));return M<Yt&&(M<Yt-1&&f.push(o.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis2")),f.push(o.jsx("button",{className:"pagination-button",onClick:()=>Hr(Yt),children:Yt},Yt))),p<Yt&&f.push(o.jsx("button",{className:"pagination-button",onClick:()=>Hr(p+1),children:"→"},"next")),o.jsxs("div",{className:"pagination-container",children:[o.jsxs("div",{className:"pagination-info",children:["Showing ",Ga+1,"-",Math.min(wu,Wr.length)," of ",Wr.length," transactions"]}),o.jsx("div",{className:"pagination-controls",children:f})]})};return o.jsxs("div",{children:[o.jsxs("div",{className:"header-nav",children:[o.jsx("button",{className:"cancelButton secondary-button",onClick:()=>n("budgets"),children:"← Back"}),o.jsx("button",{className:"ai-insights-button primary-button",onClick:()=>n("ai"),children:"🧠 AI Finance Report"})]}),o.jsx("input",{className:"input budget-title-input no-border",value:F,onChange:f=>O(f.target.value),onBlur:Fm,onKeyDown:f=>{f.key==="Enter"&&(f.preventDefault(),f.currentTarget.blur())},placeholder:"Budget Name"}),o.jsxs("div",{className:"budget-cycle-banner",children:[o.jsx("div",{className:`cycle-pill cycle-${yu}`,children:zm}),o.jsxs("div",{className:"cycle-meta",children:[o.jsxs("span",{children:["Started ",qm]}),o.jsxs("div",{className:`pacing-indicator pacing-${$t.overall.status}`,title:$t.overall.tooltip,role:"status",children:[o.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),o.jsx("span",{className:"pacing-label",children:$t.overall.label})]})]}),o.jsxs("div",{className:"cycle-actions",children:[o.jsx("button",{className:"secondary-button",onClick:()=>Y(!0),children:"Edit cycle"}),o.jsx("button",{className:"link-button",onClick:()=>W(!0),children:"Change log"})]})]}),o.jsxs("div",{className:"category-allocation-card",id:"allocations",children:[o.jsxs("div",{className:"allocation-header",children:[o.jsx("h3",{children:"Category allocations"}),o.jsxs("div",{className:"allocation-header-actions",children:[o.jsxs("span",{className:"allocation-total",children:["Total ",sr(Wm)]}),o.jsx("button",{className:"secondary-button",onClick:()=>Ba(!0),children:"Add category"})]})]}),E.length===0?o.jsx("div",{className:"empty-state small",children:"No allocations yet. Add your first category to plan this cycle."}):o.jsx("div",{className:"allocation-table",children:E.map(f=>o.jsxs("div",{className:"allocation-row",children:[o.jsx("div",{className:"allocation-name",children:f.category}),o.jsx("input",{type:"number",className:"input allocation-input",value:f.budgetedAmount,onChange:k=>Em(f.category,k.target.value),min:"0",step:"0.01"}),o.jsx("button",{className:"allocation-delete",type:"button",onClick:k=>{k.stopPropagation(),Pm(f)},children:"Remove"})]},f.category))}),o.jsx("div",{className:"allocation-footer",children:o.jsx("button",{className:"primary-button",onClick:Dm,disabled:!Q||x,children:x?"Saving...":"Save allocations"})})]}),Nm&&o.jsx("div",{className:"modalBackdrop",children:o.jsxs("div",{className:"modalContent small-modal",children:[o.jsx("h3",{className:"header modal-header",children:"Add category"}),o.jsx("label",{className:"input-label",htmlFor:"new-category-name",children:"Name"}),o.jsx("input",{id:"new-category-name",className:"input",value:nu,onChange:f=>Fa(f.target.value),placeholder:"Category name"}),o.jsx("label",{className:"input-label",htmlFor:"new-category-amount",children:"Allocation amount"}),o.jsx("input",{id:"new-category-amount",className:"input",type:"number",step:"0.01",min:"0",value:ru,onChange:f=>za(f.target.value)}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{className:"addButton primary-button",onClick:Cm,children:"Add"}),o.jsx("button",{className:"cancelButton secondary-button",onClick:Tm,children:"Cancel"})]})]})}),o.jsxs("div",{className:"budget-overview-card",children:[o.jsx("h3",{className:"overview-title",children:"Budget Overview"}),o.jsxs("div",{className:"overview-content",children:[o.jsxs("div",{className:"overview-stats",children:[o.jsxs("div",{className:"stat-item",children:[o.jsx("div",{className:"stat-label",children:"Total Income"}),o.jsxs("div",{className:"stat-value income",children:["$",zr.toFixed(2)]})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("div",{className:"stat-label",children:"Total Spent"}),o.jsxs("div",{className:"stat-value expense",children:["$",Nn.toFixed(2)]})]}),gu>0&&o.jsxs("div",{className:"stat-item stat-item-full-width",children:[o.jsx("div",{className:"stat-label",children:"Total Budgeted"}),o.jsxs("div",{className:"stat-value",children:["$",gu.toFixed(2)]})]})]}),o.jsxs("div",{className:"balance-display",children:[o.jsx("div",{className:"balance-label",children:"Remaining Balance"}),o.jsxs("div",{className:`balance-amount ${Qs>=0?"income":"expense"}`,children:["$",Qs.toFixed(2)]})]}),Yn.length>0&&o.jsxs("div",{className:"category-chart-section",children:[o.jsx("h4",{className:"chart-section-title",children:"Spending Breakdown"}),o.jsxs("div",{className:"chart-container-centered",children:[o.jsx("div",{className:"pie-chart-wrapper",children:o.jsxs("svg",{className:"pie-chart",viewBox:"0 0 200 200",width:"200",height:"200",onClick:f=>{(f.target.tagName==="svg"||f.target.tagName==="circle"||f.target.tagName==="text")&&q(null)},children:[Yn.map((f,k)=>{let R=0;for(let Te=0;Te<k;Te++)R+=Yn[Te].percentage;const M=R/100*360,V=(R+f.percentage)/100*360,ie=f.percentage>50?1:0,_e=M*Math.PI/180,pe=V*Math.PI/180,ue=100+80*Math.cos(_e),Ce=100+80*Math.sin(_e),ye=100+80*Math.cos(pe),Le=100+80*Math.sin(pe),be=["M 100 100",`L ${ue} ${Ce}`,`A 80 80 0 ${ie} 1 ${ye} ${Le}`,"Z"].join(" ");return o.jsx("path",{d:be,fill:Ys[k%Ys.length],stroke:"white",strokeWidth:"2",className:`pie-slice ${C===k?"selected":""}`,onClick:Te=>{Te.stopPropagation(),q(C===k?null:k)}},f.category)}),o.jsx("circle",{cx:"100",cy:"100",r:"35",fill:"white"}),o.jsx("text",{x:"100",y:"95",textAnchor:"middle",className:"chart-center-text",fontSize:"12",fill:"#6b7280",children:"Total"}),o.jsxs("text",{x:"100",y:"110",textAnchor:"middle",className:"chart-center-amount",fontSize:"14",fontWeight:"600",fill:"#374151",children:["$",Nn.toFixed(0)]})]})}),qr&&o.jsx("div",{className:"slice-details",children:o.jsxs("div",{className:"slice-details-content",children:[o.jsxs("div",{className:"slice-header",children:[o.jsx("div",{className:"slice-color-dot",style:{backgroundColor:Ys[C%Ys.length]}}),o.jsx("span",{className:"slice-icon",children:qr.icon}),o.jsx("span",{className:"slice-category",children:qr.category})]}),o.jsxs("div",{className:"slice-amount",children:["$",qr.amount.toFixed(2)]}),o.jsxs("div",{className:"slice-percentage",children:[qr.percentage.toFixed(1),"% of total spending"]})]})})]})]})]}),o.jsxs("div",{className:"budget-progress",children:[o.jsxs("div",{className:"progress-labels",children:[o.jsxs("span",{className:"income",children:["Income: $",zr.toFixed(2)]}),o.jsxs("span",{className:"expense",children:["Spent: $",Nn.toFixed(2)]})]}),o.jsx("div",{className:"progress-bar-container",children:o.jsx("div",{className:"income-bar",children:zr>0&&o.jsx("div",{className:"expense-overlay",style:{width:`${Math.min(Nn/zr*100,100)}%`}})})})]})]}),$t.categories.length>0&&o.jsxs("div",{className:"category-budget-list-card",children:[o.jsx("h3",{className:"category-budget-list-title",children:"Category Pacing"}),o.jsx("div",{className:"category-budget-list",children:$t.categories.map(f=>{const k=f.budgeted>0?Math.min(f.actual/f.budgeted*100,100):f.actual>0?100:0;return o.jsxs("div",{className:"category-budget-list-row",children:[o.jsxs("div",{className:"category-budget-header",children:[o.jsx("div",{className:"category-budget-name",children:f.name||"Uncategorized"}),o.jsxs("div",{className:`pacing-indicator pacing-${f.status}`,title:f.tooltip,role:"status","aria-label":`${f.name||"Uncategorized"} pacing is ${f.label}`,children:[o.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),o.jsx("span",{className:"pacing-label",children:f.label})]})]}),o.jsxs("div",{className:"category-budget-amounts",children:["$",f.actual.toFixed(2)," / $",f.budgeted.toFixed(2)]}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:`progress-fill ${f.actual>f.budgeted&&f.budgeted>0?"over":""}`,style:{width:`${k}%`}})})]},f.key||f.name)})})]}),o.jsxs("div",{className:"cashburn-section",children:[o.jsxs("div",{className:"cashburn-header",children:[o.jsx("h3",{children:"Cash burn insights"}),o.jsxs("span",{className:"cashburn-subtitle",children:["Weekly digest · next drop ",Fr.currentEnd?new Date(Fr.currentEnd).toLocaleString([],{dateStyle:"medium",timeStyle:"short"}):"soon"]})]}),o.jsxs("div",{className:"cashburn-summary-grid",children:[o.jsx("div",{className:`cashburn-status-badge status-${vt.status}`,children:vt.badgeLabel}),o.jsxs("div",{className:"cashburn-metric",children:[o.jsx("span",{className:"cashburn-metric-label",children:"Daily burn"}),o.jsx("span",{className:"cashburn-metric-value",children:sr(vt.burnPerDay)})]}),o.jsxs("div",{className:"cashburn-metric",children:[o.jsx("span",{className:"cashburn-metric-label",children:"Weekly burn"}),o.jsx("span",{className:"cashburn-metric-value",children:sr(vt.burnPerWeek)})]}),o.jsxs("div",{className:"cashburn-metric",children:[o.jsx("span",{className:"cashburn-metric-label",children:"Monthly burn"}),o.jsx("span",{className:"cashburn-metric-value",children:sr(vt.burnPerMonth)})]}),o.jsxs("div",{className:"cashburn-metric projection",children:[o.jsx("span",{className:"cashburn-metric-label",children:"Days left"}),o.jsx("span",{className:"cashburn-metric-value",children:typeof vt.daysLeft=="number"?`${Math.max(0,vt.daysLeft)} ${vt.daysLeft===1?"day":"days"}`:vt.burnPerDay===0?"Not burning":"—"}),vt.projectionDate&&o.jsxs("span",{className:"cashburn-projection-date",children:["until ",vt.projectionDate.toLocaleDateString([],{dateStyle:"medium"})]})]})]}),iu&&o.jsx("div",{className:"cashburn-sync-status",role:"status",children:"Syncing latest burn metrics…"}),su&&!iu&&o.jsxs("div",{className:"cashburn-sync-status error",role:"status",children:["Using local estimate — ",su]}),o.jsxs("div",{className:"cashburn-card-grid",children:[Fr.topCards.length===0&&o.jsx("div",{className:"empty-state small",children:"Track spending this week to unlock leak insights."}),Fr.topCards.map(f=>o.jsxs("button",{type:"button",className:`cashburn-card pacing-${f.status}`,onClick:()=>G(k=>k===f.category?null:f.category),children:[o.jsxs("div",{className:"cashburn-card-header",children:[o.jsx("span",{className:"cashburn-category",children:f.category}),o.jsxs("div",{className:`pacing-indicator pacing-${f.status}`,children:[o.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),o.jsx("span",{className:"pacing-label",children:f.statusLabel})]})]}),o.jsxs("div",{className:"cashburn-amount-row",children:[o.jsx("span",{className:"cashburn-amount",children:sr(f.current)}),o.jsxs("span",{className:`cashburn-delta ${f.delta>=0?"expense":"income"}`,children:[f.delta>=0?"+":"-","$",Math.abs(f.delta).toFixed(2)," vs last week"]})]}),o.jsxs("div",{className:"cashburn-change",children:["Change ",f.pctChange.toFixed(0),"%"]}),$===f.category&&o.jsxs("div",{className:"cashburn-trend",children:[o.jsx("div",{className:"sparkline",children:I_(Fr.trends[f.category])}),o.jsx("div",{className:"sparkline-label",children:"Last 6 weeks"})]})]},f.category))]}),o.jsxs("div",{className:"cashburn-settings",children:[o.jsxs("div",{className:"settings-row",children:[o.jsx("label",{children:"Report schedule"}),o.jsxs("div",{className:"settings-inputs",children:[o.jsx("select",{value:te.day,onChange:f=>cu("day",f.target.value),children:Object.keys(lh).map(f=>o.jsx("option",{value:f,children:f.charAt(0).toUpperCase()+f.slice(1)},f))}),o.jsx("input",{type:"time",value:te.time,onChange:f=>cu("time",f.target.value)})]})]}),o.jsxs("div",{className:"settings-row",children:[o.jsx("label",{children:"Tracked categories"}),o.jsxs("div",{className:"tracked-category-grid",children:[du.map(f=>{const k=U.has(f);return o.jsxs("label",{className:`tracked-chip ${k?"selected":""}`,children:[o.jsx("input",{type:"checkbox",checked:k,onChange:()=>Lm(f)}),o.jsx("span",{children:f})]},f)}),du.length===0&&o.jsx("span",{children:"No categories yet."})]})]}),o.jsxs("div",{className:"settings-row",children:[o.jsx("label",{children:"Real-time nudges"}),o.jsxs("div",{className:"nudge-config",children:[o.jsxs("label",{className:"checkbox-row",children:[o.jsx("input",{type:"checkbox",checked:ne.enabled,onChange:f=>Ks({enabled:f.target.checked})}),o.jsxs("span",{children:["Notify me when a category hits ",Math.round((Number(ne.threshold)||.8)*100),"% of budget"]})]}),o.jsxs("div",{className:"nudge-threshold",children:[o.jsx("input",{type:"range",min:"0.5",max:"1",step:"0.05",value:Number(ne.threshold)||.8,onChange:f=>Ks({threshold:Number(f.target.value)})}),o.jsxs("span",{children:[Math.round((Number(ne.threshold)||.8)*100),"%"]})]}),o.jsxs("div",{className:"quiet-hours-controls",children:[o.jsx("span",{children:"Quiet hours"}),o.jsxs("div",{className:"settings-inputs",children:[o.jsx("input",{type:"number",min:"0",max:"23",value:Kn,onChange:f=>Ks({quietStart:Number(f.target.value)})}),o.jsx("span",{children:"to"}),o.jsx("input",{type:"number",min:"0",max:"23",value:Qn,onChange:f=>Ks({quietEnd:Number(f.target.value)})})]})]})]})]})]})]}),o.jsxs("div",{className:"transactions-section",children:[o.jsxs("div",{className:"tabRow",children:[o.jsxs("button",{className:g==="expenses"?"tabActive":"tabInactive",onClick:()=>_u("expenses"),children:["Expenses (",Ae.filter(f=>f.type==="expense").length,")"]}),o.jsxs("button",{className:g==="income"?"tabActive":"tabInactive",onClick:()=>_u("income"),children:["Income (",Ae.filter(f=>f.type==="income").length,")"]})]}),Wr.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsxs("p",{children:["No ",Jn(g)," transactions yet."]}),o.jsxs("button",{className:"primary-button",onClick:()=>mu(g),children:["Add Your First ",Jn(g)==="expense"?"Expense":"Income"]})]}):o.jsxs(o.Fragment,{children:[Vm.map(f=>{var k;return o.jsx("div",{className:"transaction enhanced-transaction",onClick:()=>Um(f),children:o.jsx("div",{className:"transaction-info",children:o.jsxs("div",{className:"transaction-main",children:[o.jsx("span",{className:"transaction-icon",children:((k=t[f.type].find(R=>R.name===f.category))==null?void 0:k.icon)||"💰"}),o.jsxs("div",{className:"transaction-details-main",children:[o.jsx("span",{className:"transaction-name",children:f.name}),o.jsxs("div",{className:"transaction-meta",children:[f.category," • ",L_(f.date),f.receipt&&o.jsx("span",{className:"receipt-indicator",children:"📎"})]})]}),o.jsxs("div",{className:"transaction-amounts",children:[o.jsxs("span",{className:`transaction-amount ${f.type}`,children:[f.type==="income"?"+":"-","$",f.amount.toFixed(2)]}),f.budgetedAmount&&o.jsxs("span",{className:"budgeted-amount",children:["Budget: $",f.budgetedAmount.toFixed(2)]})]})]})})},f.id)}),Gm()]})]}),o.jsx("button",{className:"fab",onClick:()=>mu(g),children:"+"}),_&&o.jsx("div",{className:"modalBackdrop",children:o.jsxs("div",{className:"modalContent enhanced-modal",children:[o.jsx("h2",{className:"header modal-header",children:b?"Edit Transaction":`Add ${N.type==="expense"?"Expense":"Income"}`}),o.jsx("input",{className:"input",placeholder:"Description",value:N.name,onChange:f=>A({...N,name:f.target.value}),disabled:x}),o.jsx("input",{className:"input",placeholder:"Amount",type:"number",step:"0.01",value:N.amount,onChange:f=>A({...N,amount:f.target.value}),disabled:x}),o.jsx("input",{className:"input",type:"date",value:N.date,onChange:f=>A(k=>({...k,date:xi(f.target.value,k.date)})),disabled:x}),N.type==="expense"&&o.jsx("input",{className:"input",placeholder:"Budgeted amount (optional)",type:"number",step:"0.01",value:N.budgetedAmount,onChange:f=>A({...N,budgetedAmount:f.target.value}),disabled:x}),o.jsxs("select",{className:"input",value:N.category,onChange:f=>A({...N,category:f.target.value}),disabled:x,children:[o.jsx("option",{value:"",children:"Select Category"}),(ku=t[Jn(N.type)])==null?void 0:ku.map(f=>o.jsxs("option",{value:f.name,children:[f.icon," ",f.name]},f.name))]}),o.jsxs("div",{className:"receipt-upload-section",children:[o.jsx("label",{className:"receipt-upload-label",children:"📎 Attach Receipt (Optional)"}),o.jsx("input",{type:"file",accept:"image/*",className:"receipt-input",onChange:f=>{const k=f.target.files[0];if(k){const R=new FileReader;R.onloadend=()=>{A({...N,receipt:R.result})},R.readAsDataURL(k)}},disabled:x}),N.receipt&&o.jsxs("div",{className:"receipt-preview",children:[o.jsx("img",{src:N.receipt||"/placeholder.svg",alt:"Receipt preview",className:"receipt-preview-img"}),o.jsx("button",{type:"button",className:"remove-receipt",onClick:()=>A({...N,receipt:null}),disabled:x,children:"Remove"})]})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsxs("button",{className:"addButton primary-button",onClick:Bm,disabled:x,children:[x?"Saving...":b?"Update":"Add"," Transaction"]}),o.jsx("button",{className:"cancelButton secondary-button",onClick:()=>{S(!1),m(null)},disabled:x,children:"Cancel"})]})]})}),X&&o.jsx("div",{className:"modalBackdrop",children:o.jsxs("div",{className:"modalContent small-modal",children:[o.jsxs("h3",{className:"header modal-header",children:["Remove ",X.category]}),X.remaining>0?o.jsxs(o.Fragment,{children:[o.jsxs("p",{children:["Reallocate ",sr(X.remaining)," from ",X.category," before deleting."]}),o.jsxs("select",{className:"input",value:X.reallocateTo,onChange:f=>K(k=>({...k,reallocateTo:f.target.value})),children:[o.jsx("option",{value:"",children:"Choose category"}),E.filter(f=>f.category!==X.category).map(f=>o.jsx("option",{value:f.category,children:f.category},f.category))]})]}):o.jsxs("p",{children:["Delete ",X.category," from this cycle?"]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{className:"addButton primary-button",onClick:Am,disabled:X.remaining>0&&!X.reallocateTo,children:"Confirm"}),o.jsx("button",{className:"cancelButton secondary-button",onClick:Om,children:"Cancel"})]})]})}),I&&o.jsx("div",{className:"modalBackdrop",children:o.jsxs("div",{className:"modalContent large-modal",children:[o.jsx("h3",{className:"header modal-header",children:"Change log"}),h.length===0?o.jsx("div",{className:"empty-state small",children:"No changes recorded yet."}):o.jsx("ul",{className:"change-log-list",children:h.map((f,k)=>{const R=(f==null?void 0:f.at)||(f==null?void 0:f.timestamp),M=R?new Date(R).toLocaleString():"Recent";return o.jsxs("li",{className:"change-log-item",children:[o.jsx("span",{className:"change-log-time",children:M}),o.jsx("span",{className:"change-log-message",children:(f==null?void 0:f.message)||"Updated budget"})]},`${M}-${k}`)})}),o.jsx("div",{className:"modal-actions",children:o.jsx("button",{className:"cancelButton secondary-button",onClick:()=>W(!1),children:"Close"})})]})}),B&&o.jsx("div",{className:"modalBackdrop",children:o.jsxs("div",{className:"modalContent enhanced-modal",children:[o.jsx("h3",{className:"header modal-header",children:"Edit cycle"}),o.jsx("div",{className:"cycle-option-grid",children:pm.map(f=>{const k=de.type===f.type;return o.jsxs("button",{type:"button",className:`cycle-option ${k?"selected":""}`,onClick:()=>Tt(R=>({...R,type:f.type})),children:[o.jsx("div",{className:"cycle-option-title",children:f.label}),o.jsx("div",{className:"cycle-option-description",children:"Choose the cadence that fits this budget."})]},f.type)})}),de.type==="per-paycheck"&&o.jsxs("div",{className:"cycle-config-row",children:[o.jsx("label",{className:"input-label",htmlFor:"edit-pay-frequency",children:"Paycheck frequency (days)"}),o.jsx("input",{id:"edit-pay-frequency",type:"number",className:"input",min:"7",max:"45",value:de.payFrequencyDays,onChange:f=>Tt(k=>({...k,payFrequencyDays:f.target.value}))})]}),de.type==="custom"&&o.jsxs("div",{className:"cycle-config-row",children:[o.jsx("label",{className:"input-label",htmlFor:"edit-cycle-length",children:"Cycle length (days)"}),o.jsx("input",{id:"edit-cycle-length",type:"number",className:"input",min:"5",max:"120",value:de.customDays,onChange:f=>Tt(k=>({...k,customDays:f.target.value}))})]}),o.jsxs("div",{className:"cycle-config-row",children:[o.jsx("label",{className:"input-label",htmlFor:"edit-cycle-start",children:"Cycle start date"}),o.jsx("input",{id:"edit-cycle-start",type:"date",className:"input",value:de.startDate,onChange:f=>Tt(k=>({...k,startDate:f.target.value}))})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{className:"addButton primary-button",onClick:Im,children:"Save cycle"}),o.jsx("button",{className:"cancelButton secondary-button",onClick:()=>Y(!1),children:"Cancel"})]})]})}),J&&o.jsxs("div",{className:"snackbar",children:[o.jsx("span",{children:J.message}),J.action&&o.jsx("button",{className:"link-button",onClick:()=>{J.action(),lu()},children:J.actionLabel||"Undo"}),o.jsx("button",{className:"link-button",onClick:lu,children:"Dismiss"})]}),D&&o.jsxs("div",{className:"nudge-toast",role:"status",children:[o.jsxs("div",{className:"nudge-copy",children:[o.jsx("strong",{children:D.category})," is at ",(D.ratio*100).toFixed(0),"% of its budget."]}),o.jsxs("div",{className:"nudge-actions",children:[o.jsx("button",{className:"link-button",onClick:()=>{var f;$m(D.category),(f=document.getElementById("allocations"))==null||f.scrollIntoView({behavior:"smooth"})},children:"Adjust budget"}),o.jsx("button",{className:"link-button",onClick:()=>Mm(),children:"Snooze"})]})]})]})}const ch=w.shape({id:w.string.isRequired,name:w.string.isRequired,amount:w.number.isRequired,budgetedAmount:w.number,category:w.string.isRequired,type:w.oneOf(["income","expense"]).isRequired,date:w.string.isRequired,receipt:w.string}),uh=w.shape({name:w.string.isRequired,icon:w.string.isRequired});Qc.propTypes={budget:w.shape({id:w.string.isRequired,name:w.string.isRequired,transactions:w.arrayOf(ch),categoryBudgets:w.arrayOf(w.shape({category:w.string.isRequired,budgetedAmount:w.number.isRequired})),metadata:w.object,insightsPreferences:w.shape({trackedCategories:w.arrayOf(w.string),reportSchedule:w.shape({day:w.string,time:w.string}),nudges:w.shape({enabled:w.bool,threshold:w.number})}),changeLog:w.arrayOf(w.shape({at:w.string,message:w.string,type:w.string})),cycleMetadata:w.shape({type:w.string,currentStart:w.string,payFrequencyDays:w.number,customDays:w.number,lengthDays:w.number,cycleLength:w.number}),createdAt:w.string}).isRequired,categories:w.shape({income:w.arrayOf(uh).isRequired,expense:w.arrayOf(uh).isRequired}).isRequired,setViewMode:w.func.isRequired,setBudgets:w.func.isRequired,budgets:w.arrayOf(w.shape({id:w.string.isRequired,name:w.string.isRequired,transactions:w.arrayOf(ch)})).isRequired,setSelectedBudget:w.func.isRequired,onMetadataChange:w.func,onDataMutated:w.func};Qc.defaultProps={onMetadataChange:void 0,onDataMutated:void 0};function mm({categories:e,setCategories:t,budgets:n,setViewMode:r}){const[s,i]=j.useState("expense"),[a,l]=j.useState(!1),[c,u]=j.useState({name:"",icon:"💲"}),[d,h]=j.useState(null),g=["💲","💰","💳","🏦","🍔","🍽️","☕","🛒","🚗","⛽","✈️","🚌","🏠","💡","📱","💻","🎮","🎬","📚","🏥","💊","🛍️","👕","🎁","💼","📈","🔧","🎯","🧾","⭐","🎉","📄"],v=()=>{if(!c.name.trim())return;if(e[s].some(p=>p.name===c.name.trim())){alert("Category already exists!");return}const m={...e,[s]:[...e[s],{name:c.name.trim(),icon:c.icon}]};t(m),l(!1),u({name:"",icon:"💲"})},_=m=>{h({...m,originalName:m.name})},S=()=>{if(!d.name.trim())return;const m={...e,[s]:e[s].map(p=>p.name===d.originalName?{name:d.name.trim(),icon:d.icon}:p)};t(m),h(null)},b=m=>{if(n.some(x=>x.transactions.some(P=>P.category===m&&P.type===s))){alert("Cannot delete category in use.");return}const y={...e,[s]:e[s].filter(x=>x.name!==m)};t(y)};return o.jsxs("div",{children:[o.jsx("button",{className:"cancelButton secondary-button",onClick:()=>r("budgets"),children:"← Back to Budgets"}),o.jsx("h1",{className:"header",children:"Manage Categories"}),o.jsxs("div",{className:"tabRow",children:[o.jsx("button",{className:s==="expense"?"tabActive":"tabInactive",onClick:()=>i("expense"),children:"Expenses"}),o.jsx("button",{className:s==="income"?"tabActive":"tabInactive",onClick:()=>i("income"),children:"Income"})]}),o.jsxs("button",{className:"addButton primary-button",onClick:()=>l(!0),children:["Add ",s.charAt(0).toUpperCase()+s.slice(1)," Category"]}),e[s].length===0?o.jsxs("p",{className:"empty-state",children:["No ",s," categories yet."]}):e[s].map(m=>o.jsx("div",{className:"transaction category-item",children:d&&d.originalName===m.name?o.jsxs("div",{className:"category-edit",children:[o.jsx("input",{className:"input",value:d.name,onChange:p=>h({...d,name:p.target.value})}),o.jsx("div",{className:"icon-selector",children:g.map(p=>o.jsx("button",{className:`icon-button ${d.icon===p?"selected":""}`,onClick:()=>h({...d,icon:p}),children:p},p))}),o.jsxs("div",{className:"category-actions",children:[o.jsx("button",{className:"addButton primary-button",onClick:S,children:"Save"}),o.jsx("button",{className:"cancelButton secondary-button",onClick:()=>h(null),children:"Cancel"})]})]}):o.jsxs("div",{className:"category-display",children:[o.jsxs("span",{className:"category-info",children:[m.icon," ",m.name]}),o.jsxs("div",{className:"category-actions",children:[o.jsx("button",{className:"action-button",onClick:()=>_(m),children:"Edit"}),o.jsx("button",{className:"action-button delete",onClick:()=>b(m.name),children:"Delete"})]})]})},m.name)),a&&o.jsx("div",{className:"modalBackdrop",children:o.jsxs("div",{className:"modalContent",children:[o.jsxs("h2",{className:"header modal-header",children:["Add ",s.charAt(0).toUpperCase()+s.slice(1)," Category"]}),o.jsx("input",{className:"input",placeholder:"Category Name",value:c.name,onChange:m=>u({...c,name:m.target.value})}),o.jsx("div",{className:"icon-selector",children:g.map(m=>o.jsx("button",{className:`icon-button ${c.icon===m?"selected":""}`,onClick:()=>u({...c,icon:m}),children:m},m))}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{className:"addButton primary-button",onClick:v,children:"Add"}),o.jsx("button",{className:"cancelButton secondary-button",onClick:()=>l(!1),children:"Cancel"})]})]})})]})}const $_=w.shape({id:w.string.isRequired,name:w.string.isRequired,amount:w.number.isRequired,budgetedAmount:w.number,category:w.string.isRequired,type:w.oneOf(["income","expense"]).isRequired,date:w.string.isRequired,receipt:w.string}),dh=w.shape({name:w.string.isRequired,icon:w.string.isRequired});mm.propTypes={categories:w.shape({income:w.arrayOf(dh).isRequired,expense:w.arrayOf(dh).isRequired}).isRequired,setCategories:w.func.isRequired,budgets:w.arrayOf(w.shape({id:w.string.isRequired,transactions:w.arrayOf($_).isRequired})).isRequired,setViewMode:w.func.isRequired};const $i=[25,50,75,100],M_=1e3*60*60*24,Do=M_*7,ir=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(e||0)),gm=e=>({...e,amount:Number(e.amount||0),contributed_at:e.contributed_at||e.date||e.created_at||new Date().toISOString()}),Si=e=>{const t=(e.goal_contributions||e.contributions||[]).map(gm);return t.sort((n,r)=>new Date(r.contributed_at)-new Date(n.contributed_at)),{...e,targetAmount:Number(e.target_amount??e.targetAmount??0),targetDate:e.target_date||e.targetDate||null,status:e.status||"active",milestones:Array.isArray(e.milestones)&&e.milestones.length?e.milestones:$i,linked_budget_id:e.linked_budget_id||e.linkedBudgetId||null,goal_contributions:t}},U_=e=>{const t=e.created_at||e.createdAt,r=e.start_date||e.startDate||t,s=r?new Date(r):new Date;return Number.isNaN(s.getTime())?new Date:s},B_=e=>{if(!e.targetDate)return null;const t=new Date(e.targetDate);return Number.isNaN(t.getTime())?null:t},F_=e=>{const t=new Date(e),n=t.getDay(),r=t.getDate()-n+(n===0?-6:1),s=new Date(t.setDate(r));return s.setHours(0,0,0,0),s},ar=e=>{const t=new Date,n=e.goal_contributions||[],r=n.reduce((P,N)=>P+Number(N.amount||0),0),s=Number(e.targetAmount||0),i=s>0?Math.min(100,r/s*100):0,a=U_(e),l=B_(e);let c=l?l.getTime()-a.getTime():null;c!==null&&c<=0&&(c=Do);const u=Math.max(0,t.getTime()-a.getTime()),d=c&&c>0?Math.min(1,Math.max(0,u/c)):1,h=s*d,g=c?Math.max(1,Math.ceil(c/Do)):1,v=g>0?s/g:s,_=F_(t),S=new Date(_.getTime()+Do),b=n.filter(P=>{const N=new Date(P.contributed_at);return N>=_&&N<S}).reduce((P,N)=>P+Number(N.amount||0),0),m=s*.02,p=r-h;let y="on-track";p>m?y="ahead":p<-m&&(y="behind");const x=Math.max(0,v-b);return{totalContributed:r,progress:i,weeklyTarget:v,contributedThisWeek:b,guidanceShortfall:x,pace:y,plannedTotal:h,totalWeeks:g}};function Jc({setViewMode:e,budgets:t=[],setBudgets:n,onDataMutated:r}){const{user:s}=Vn(),[i,a]=j.useState([]),[l,c]=j.useState(!0),[u,d]=j.useState(null),[h,g]=j.useState(!1),[v,_]=j.useState({name:"",targetAmount:"",targetDate:"",linkedBudgetId:""}),[S,b]=j.useState(!1),[m,p]=j.useState(""),[y,x]=j.useState(""),[P,N]=j.useState(""),[A,C]=j.useState(null),[q,F]=j.useState(null),O=j.useRef({}),[E,z]=j.useState(!1),[Q,ee]=j.useState(!1),J=j.useCallback(async()=>{if(s){c(!0),d(null);try{const{data:T,error:U}=await m_(s.id);if(U){console.error("Error loading goals:",U),d(U.message||"Failed to load goals");return}const Z=(T||[]).map(se=>Si(se));a(Z);const te={};Z.forEach(se=>{te[se.id]=ar(se).progress}),O.current=te,Z.length&&p(se=>se||Z[0].id)}catch(T){console.error("Unexpected error loading goals:",T),d(T.message||"Unexpected error loading goals")}finally{c(!1)}}},[s]);j.useEffect(()=>{s&&J()},[s,J]);const le=async T=>{if(T.preventDefault(),!s)return;const U=parseFloat(v.targetAmount);if(!v.name.trim()||Number.isNaN(U)||U<=0){alert("Please provide a goal name and a positive target amount.");return}z(!0);try{const{data:Z,error:te}=await g_(s.id,{name:v.name.trim(),targetAmount:U,targetDate:v.targetDate?new Date(v.targetDate).toISOString():null,milestones:$i,status:"active",linkedBudgetId:v.linkedBudgetId||null});if(te){console.error("Error creating goal:",te),alert(te.message||"Failed to create goal");return}const se=Z==null?void 0:Z[0];if(se){const ne=Si(se);a(Ve=>[ne,...Ve]),O.current[ne.id]=ar(ne).progress,p(ne.id)}_({name:"",targetAmount:"",targetDate:"",linkedBudgetId:""}),g(!1)}catch(Z){console.error("Unexpected error creating goal:",Z),alert("Unexpected error creating goal. Please try again.")}finally{z(!1)}},I=async T=>{if(confirm("Delete this goal? Contributions will remain recorded."))try{const{error:U}=await v_(T);if(U){console.error("Error deleting goal:",U),alert(U.message||"Failed to delete goal");return}a(te=>{const se=te.filter(ne=>ne.id!==T);return se.length===0?p(""):T===m&&p(se[0].id),se});const Z={...O.current};delete Z[T],O.current=Z}catch(U){console.error("Unexpected error deleting goal:",U),alert("Unexpected error deleting goal")}},W=async(T,U)=>{try{const{data:Z,error:te}=await y_(T.id,{linkedBudgetId:U||null});if(te){console.error("Error linking budget:",te),alert(te.message||"Failed to link budget");return}if(Z!=null&&Z[0]){const se=Si(Z[0]);a(ne=>ne.map(Ve=>Ve.id===T.id?se:Ve))}else a(se=>se.map(ne=>ne.id===T.id?{...ne,linked_budget_id:U||null}:ne))}catch(Z){console.error("Unexpected error linking budget:",Z),alert("Unexpected error while linking budget")}},B=()=>{b(!1),x(""),N("")},Y=T=>{x(U=>T==="←"?U.slice(0,-1):T==="."&&U.includes(".")?U:`${U}${T}`)},X=async()=>{const T=parseFloat(y);if(!m||Number.isNaN(T)||T<=0){alert("Enter a valid contribution amount");return}const U=i.find(te=>te.id===m);if(!U){alert("Select a goal");return}ee(!0);const Z=new Date().toISOString();try{const te=O.current[U.id]??ar(U).progress,{data:se,error:ne}=await w_(U.id,{amount:T,date:Z,note:P});if(ne){console.error("Error logging contribution:",ne),alert(ne.message||"Failed to log contribution");return}const Ve=(se||[]).map(gm);if(Ve.length){const de=Si({...U,goal_contributions:[...Ve,...U.goal_contributions||[]]}),Tt=ar(de).progress;K(de,te,Tt),O.current[U.id]=Tt,a(Gn=>Gn.map(st=>st.id===U.id?de:st)),await $(U,T,Z)}B()}catch(te){console.error("Unexpected error adding contribution:",te),alert("Unexpected error adding contribution")}finally{ee(!1)}},K=(T,U,Z)=>{const se=(T.milestones||$i).slice().sort((ne,Ve)=>ne-Ve).find(ne=>U<ne&&Z>=ne);se!==void 0&&(C(T.id),F({goalName:T.name,milestone:se}),setTimeout(()=>{C(null),F(null)},4e3))},$=async(T,U,Z)=>{if(!(!T.linked_budget_id||!n||!t.find(se=>se.id===T.linked_budget_id)))try{const se={name:`Goal Contribution - ${T.name}`,amount:U,budgetedAmount:0,category:"Savings Goals",type:"expense",date:Z,receipt:null},{data:ne,error:Ve}=await om(T.linked_budget_id,se);if(Ve){console.error("Failed to sync contribution to budget:",Ve);return}const de=ne==null?void 0:ne[0],Tt=de?{id:de.id,name:de.name,amount:de.amount,budgetedAmount:de.budgeted_amount,category:de.category,type:de.type,date:de.date,receipt:de.receipt_url}:{id:`goal-sync-${Date.now()}`,...se};n(Gn=>Gn.map(st=>st.id===T.linked_budget_id?{...st,transactions:[...st.transactions||[],Tt]}:st)),r==null||r()}catch(se){console.error("Unexpected error syncing contribution to budget:",se)}},G=T=>{const U=ar(T);return(T.milestones||$i).filter(te=>U.progress>=te)},D=j.useMemo(()=>[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","←"]],[]);return o.jsxs("div",{className:"goals-screen",children:[o.jsxs("div",{className:"goals-header",children:[o.jsx("button",{className:"ghost-button",onClick:()=>e("budgets"),children:"← Budgets"}),o.jsx("h2",{children:"Savings Goals"}),o.jsx("p",{className:"tagline",children:"Track milestones, weekly pace, and stay motivated."})]}),u&&o.jsx("div",{className:"error-banner",children:u}),l?o.jsx("div",{className:"loading-goals",children:"Loading goals…"}):i.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("p",{children:"Start a new savings goal to build momentum."}),o.jsx("button",{className:"primary-button",onClick:()=>g(!0),children:"Create your first goal"})]}):i.map(T=>{const U=ar(T),Z=G(T);return o.jsxs("div",{className:"goal-card",children:[o.jsxs("div",{className:"goal-card-header",children:[o.jsxs("div",{children:[o.jsx("h3",{children:T.name}),o.jsx("span",{className:`goal-pace-badge ${U.pace}`,children:U.pace.replace("-"," ")}),U.progress>=100&&o.jsx("span",{className:"goal-complete",children:"🎉 Complete"})]}),o.jsx("button",{className:"icon-button",onClick:()=>I(T.id),title:"Delete goal",children:"🗑️"})]}),o.jsx("div",{className:"goal-progress-bar",children:o.jsx("div",{className:"goal-progress",style:{width:`${U.progress}%`}})}),o.jsxs("div",{className:"goal-progress-meta",children:[o.jsxs("span",{children:[ir(U.totalContributed)," saved"]}),o.jsxs("span",{children:["Target ",ir(T.targetAmount)]})]}),o.jsxs("div",{className:"goal-meta-grid",children:[o.jsxs("div",{children:[o.jsx("p",{className:"meta-label",children:"Weekly target"}),o.jsx("p",{className:"meta-value",children:ir(U.weeklyTarget)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"meta-label",children:"This week"}),o.jsx("p",{className:"meta-value",children:ir(U.contributedThisWeek)})]}),T.targetDate&&o.jsxs("div",{children:[o.jsx("p",{className:"meta-label",children:"Target date"}),o.jsx("p",{className:"meta-value",children:new Date(T.targetDate).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("p",{className:"meta-label",children:"Milestones"}),o.jsx("p",{className:"meta-value",children:Z.length>0?`${Z.join("% • ")}%`:"—"})]})]}),U.pace==="behind"&&U.guidanceShortfall>0&&o.jsxs("div",{className:"goal-guidance",children:["Add ",ir(U.guidanceShortfall)," this week to catch up."]}),o.jsx("div",{className:"goal-budget-link",children:o.jsxs("label",{children:["Sync with budget",o.jsxs("select",{value:T.linked_budget_id||"",onChange:te=>W(T,te.target.value),children:[o.jsx("option",{value:"",children:"Not linked"}),t.map(te=>o.jsx("option",{value:te.id,children:te.name},te.id))]})]})}),T.goal_contributions&&T.goal_contributions.length>0&&o.jsxs("div",{className:"goal-contributions",children:[o.jsx("h4",{children:"Recent contributions"}),o.jsx("ul",{children:T.goal_contributions.slice(0,4).map(te=>o.jsxs("li",{children:[o.jsx("span",{children:new Date(te.contributed_at).toLocaleDateString()}),o.jsx("span",{children:ir(te.amount)})]},te.id))})]})]},T.id)}),o.jsx("button",{className:"fab",onClick:()=>{if(!i.length){g(!0);return}!m&&i.length&&p(i[0].id),b(!0)},title:"Log contribution",children:"➕"}),o.jsx("button",{className:"secondary-button",onClick:()=>g(!0),style:{width:"100%",marginTop:"1rem"},children:"New goal"}),h&&o.jsx("div",{className:"modal-backdrop",children:o.jsxs("div",{className:"modal",children:[o.jsx("h3",{children:"Create goal"}),o.jsxs("form",{onSubmit:le,className:"goal-form",children:[o.jsxs("fieldset",{children:[o.jsxs("label",{children:["Goal name",o.jsx("input",{type:"text",value:v.name,onChange:T=>_(U=>({...U,name:T.target.value})),placeholder:"Emergency fund",required:!0})]}),o.jsxs("label",{children:["Target amount",o.jsx("input",{type:"number",min:"0",step:"0.01",value:v.targetAmount,onChange:T=>_(U=>({...U,targetAmount:T.target.value})),placeholder:"5000",required:!0})]}),o.jsxs("label",{children:["Target date",o.jsx("input",{type:"date",value:v.targetDate,onChange:T=>_(U=>({...U,targetDate:T.target.value}))})]}),o.jsxs("label",{children:["Link to budget",o.jsxs("select",{value:v.linkedBudgetId,onChange:T=>_(U=>({...U,linkedBudgetId:T.target.value})),children:[o.jsx("option",{value:"",children:"Not linked"}),t.map(T=>o.jsx("option",{value:T.id,children:T.name},T.id))]})]})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{type:"button",className:"ghost-button",onClick:()=>g(!1),children:"Cancel"}),o.jsx("button",{type:"submit",className:"primary-button",disabled:E,children:E?"Saving…":"Create"})]})]})]})}),S&&o.jsx("div",{className:"modal-backdrop",children:o.jsxs("div",{className:"modal keypad-modal",children:[o.jsx("h3",{children:"Log contribution"}),o.jsxs("fieldset",{children:[o.jsxs("label",{children:["Choose goal",o.jsx("select",{value:m,onChange:T=>p(T.target.value),children:i.map(T=>o.jsx("option",{value:T.id,children:T.name},T.id))})]}),o.jsx("div",{className:"keypad-display",children:y||"0"}),o.jsx("div",{className:"numeric-keypad",children:D.map((T,U)=>o.jsx("div",{className:"keypad-row",children:T.map(Z=>o.jsx("button",{type:"button",onClick:()=>Y(Z),children:Z},Z))},U))}),o.jsxs("label",{children:["Note (optional)",o.jsx("input",{type:"text",value:P,onChange:T=>N(T.target.value),placeholder:"Paycheck transfer"})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{type:"button",className:"ghost-button",onClick:B,children:"Cancel"}),o.jsx("button",{type:"button",className:"primary-button",onClick:X,disabled:Q,children:Q?"Saving…":"Log"})]})]})]})}),A&&o.jsx("div",{className:"confetti-overlay",children:Array.from({length:60}).map((T,U)=>o.jsx("span",{className:"confetti-piece",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*1.5}s`},children:"🎉"},U))}),q&&o.jsxs("div",{className:"milestone-banner",children:[o.jsx("strong",{children:q.goalName})," reached ",q.milestone,"% of the goal!"]})]})}Jc.propTypes={setViewMode:w.func.isRequired,budgets:w.arrayOf(w.shape({id:w.oneOfType([w.string,w.number]).isRequired,name:w.string.isRequired,transactions:w.arrayOf(w.shape({id:w.oneOfType([w.string,w.number]),name:w.string.isRequired,amount:w.number.isRequired,budgetedAmount:w.number,category:w.string.isRequired,type:w.string.isRequired,date:w.string.isRequired,receipt:w.string}))})),setBudgets:w.func.isRequired,onDataMutated:w.func};Jc.defaultProps={onDataMutated:void 0};function ym({budget:e,setViewMode:t}){var P,N,A,C,q,F;const{user:n}=Vn(),r=n==null?void 0:n.id,[s,i]=j.useState([]),[a,l]=j.useState(null),[c,u]=j.useState(!0),[d,h]=j.useState(!1),[g,v]=j.useState(null),_=j.useCallback(()=>{const O=e.transactions||[],E=G=>{if(typeof G=="number"&&Number.isFinite(G))return G;const D=Number.parseFloat(G);return Number.isFinite(D)?D:0},z=G=>O.filter(D=>D.type===G).reduce((D,T)=>D+E(T.amount),0),Q=z("income"),ee=z("expense"),J=Q-ee,le=Q>0?J/Q*100:0,I={};O.filter(G=>G.type==="expense").forEach(G=>{var U;const D=E(G.amount),T=((U=G.category)==null?void 0:U.trim())||"Uncategorized";I[T]=(I[T]||0)+D});const W=Object.entries(I).sort(([,G],[,D])=>D-G)[0],B=new Date,Y=(G,D)=>O.filter(T=>{if(T.type!=="expense")return!1;const U=new Date(T.date);if(Number.isNaN(U.getTime()))return!1;const Z=(B-U)/(1e3*60*60*24);return Z>=G&&Z<D}).reduce((T,U)=>T+E(U.amount),0),X=Y(0,7),K=Y(7,14),$=O.reduce((G,D)=>G+Math.abs(E(D.amount)),0);return{totalIncome:Q,totalExpenses:ee,balance:J,savingsRate:le,expensesByCategory:I,topExpenseCategory:W,last7Days:X,previous7Days:K,transactionCount:O.length,avgTransactionAmount:O.length>0?$/O.length:0}},[e]),S=j.useMemo(()=>{if(!s.length)return null;if(a){const O=s.find(E=>E.id===a);if(O)return O}return s[0]},[s,a]),b=(S==null?void 0:S.insights)||null,m=j.useMemo(()=>!!(((b==null?void 0:b.budgetSuggestions)||[]).length||((b==null?void 0:b.strengths)||[]).length||((b==null?void 0:b.improvements)||[]).length),[b]),p=j.useCallback(async()=>{if(r){u(!0);try{const{data:O,error:E}=await __(r,e.id,{limit:10});if(E){console.error("Failed to load AI insights",E),v(E.message||"Unable to load AI insights"),i([]),l(null);return}i(O||[]),l(z=>O!=null&&O.length?z&&O.some(Q=>Q.id===z)?z:O[0].id:null),v(null)}catch(O){console.error("Unexpected error loading insights",O),v(O.message||"Unexpected error loading insights"),i([]),l(null)}finally{u(!1)}}},[r,e.id]);j.useEffect(()=>{p()},[p]);const y=j.useCallback(async()=>{if(r){h(!0),v(null);try{const O=_(),{data:E,error:z}=await S_({userId:r,budgetId:e.id,metrics:O});if(z){console.error("Failed to generate AI insight",z),v(z.message||"Failed to generate insight");return}E&&(i(Q=>{const ee=Q.filter(J=>J.id!==E.id);return[E,...ee]}),l(E.id))}catch(O){console.error("Unexpected error generating insights",O),v(O.message||"Unexpected error generating insights")}finally{h(!1),u(!1)}}},[r,e.id,_]);if(c&&!s.length)return o.jsxs("div",{children:[o.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:"← Back to Details"}),o.jsx("h1",{className:"header",children:"AI Financial Report"}),o.jsxs("div",{className:"ai-loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Analyzing your financial data..."}),o.jsx("p",{className:"loading-subtext",children:"Generating personalized insights and recommendations"})]})]});if(!c&&!s.length)return o.jsxs("div",{children:[o.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:"← Back to Details"}),o.jsx("h1",{className:"header",children:"AI Financial Report"}),o.jsxs("div",{className:"empty-state",children:[o.jsx("p",{children:"Run your first AI analysis to unlock a personalized report for this budget."}),o.jsx("button",{className:"primary-button",onClick:y,disabled:d,children:d?"Generating...":"Generate AI Report"}),g&&o.jsx("p",{className:"error-message",children:g})]})]});if(g&&!d&&!b)return o.jsxs("div",{children:[o.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:"← Back to Details"}),o.jsx("h1",{className:"header",children:"AI Financial Report"}),o.jsxs("div",{className:"error-state",children:[o.jsx("p",{className:"error-message",children:g}),o.jsx("button",{className:"primary-button",onClick:p,children:"Try Again"})]})]});const x=S!=null&&S.created_at?new Date(S.created_at).toLocaleString([],{dateStyle:"medium",timeStyle:"short"}):"";return o.jsxs("div",{children:[o.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:"← Back to Details"}),o.jsx("h1",{className:"header",children:"AI Financial Report"}),o.jsxs("div",{className:"insight-run-meta",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"insight-run-time",children:["Generated ",x||"recently"]}),o.jsx("div",{className:`insight-tier-badge tier-${m?"full":"summary"}`,children:m?"Detailed guidance":"Summary insight"})]}),s.length>1&&o.jsxs("label",{className:"history-selector",children:[o.jsx("span",{children:"Previous reports"}),o.jsx("select",{value:(S==null?void 0:S.id)||"",onChange:O=>l(O.target.value),children:s.map(O=>o.jsx("option",{value:O.id,children:new Date(O.created_at).toLocaleString([],{dateStyle:"medium",timeStyle:"short"})},O.id))})]})]}),g&&!d&&o.jsx("p",{className:"error-message",role:"alert",children:g}),b&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"compact-health-score",children:[o.jsxs("div",{className:"health-score-content",children:[o.jsxs("div",{className:"health-score-number",children:[b.healthScore,"/10"]}),o.jsx("div",{className:"health-score-label",children:"Financial Health"})]}),o.jsx("div",{className:"health-score-bar",children:o.jsx("div",{className:"health-score-fill",style:{width:`${Math.min(Number(b.healthScore||0)/10*100,100)}%`}})})]}),o.jsxs("div",{className:"summary-callout",children:[o.jsx("div",{className:"callout-icon",children:"💡"}),o.jsxs("div",{className:"callout-content",children:[o.jsx("h3",{className:"callout-title",children:"Financial Overview"}),o.jsx("p",{className:"callout-text",children:b.summary})]})]}),o.jsxs("div",{className:"report-section",children:[o.jsx("h2",{className:"section-title",children:"📈 Spending Insights"}),o.jsxs("div",{className:"analysis-grid-compact",children:[o.jsx("div",{className:"analysis-item-compact",children:(P=b.spendingAnalysis)==null?void 0:P.trend}),o.jsx("div",{className:"analysis-item-compact",children:(N=b.spendingAnalysis)==null?void 0:N.topCategory}),o.jsx("div",{className:"analysis-item-compact",children:(A=b.spendingAnalysis)==null?void 0:A.avgTransaction}),o.jsx("div",{className:"analysis-item-compact",children:(C=b.spendingAnalysis)==null?void 0:C.frequency})]})]}),!m&&o.jsx("div",{className:"empty-state small",children:"Log more activity to unlock personalized recommendations."}),m&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"report-section",children:[o.jsx("h2",{className:"section-title",children:"📋 Budget Optimization"}),(b.budgetSuggestions||[]).map((O,E)=>o.jsxs("div",{className:"budget-suggestion",children:[O.rule&&o.jsxs("div",{className:"budget-rule",children:[o.jsx("h3",{children:O.rule}),o.jsxs("div",{className:"budget-breakdown",children:[o.jsx("div",{children:O.needs}),o.jsx("div",{children:O.wants}),o.jsx("div",{children:O.savings})]})]}),O.category&&o.jsxs("div",{className:"category-suggestion",children:[o.jsxs("strong",{children:[O.category,":"]})," Currently ",O.current," - ",O.suggestion]})]},E))]}),o.jsxs("div",{className:"report-section",children:[o.jsx("h2",{className:"section-title",children:"⚖️ Strengths & Areas for Growth"}),o.jsxs("div",{className:"strengths-improvements-grid",children:[o.jsxs("div",{className:"strengths-column",children:[o.jsx("h3",{className:"column-title",children:"✅ Your Strengths"}),(b.strengths||[]).map((O,E)=>o.jsxs("div",{className:"strength-item-compact",children:[o.jsx("span",{className:"strength-icon",children:"✓"}),o.jsx("span",{children:O})]},E))]}),o.jsxs("div",{className:"improvements-column",children:[o.jsx("h3",{className:"column-title",children:"🎯 Growth Areas"}),(b.improvements||[]).map((O,E)=>o.jsxs("div",{className:"improvement-item-compact",children:[o.jsx("div",{className:"improvement-title-compact",children:O.area}),o.jsx("div",{className:"improvement-action-compact",children:O.action})]},E))]})]})]}),o.jsxs("div",{className:"report-section",children:[o.jsx("h2",{className:"section-title",children:"💡 Quick Savings Tips"}),o.jsx("div",{className:"tips-grid",children:(b.savingsTips||[]).slice(0,4).map((O,E)=>o.jsx("div",{className:"tip-item-compact",children:O},E))})]}),o.jsxs("div",{className:"report-section",children:[o.jsx("h2",{className:"section-title",children:"🎯 Recommended Goals"}),o.jsxs("div",{className:"goals-container-compact",children:[o.jsxs("div",{className:"goals-column",children:[o.jsx("h3",{children:"Next 3 Months"}),(((q=b.goals)==null?void 0:q.shortTerm)||[]).slice(0,3).map((O,E)=>o.jsxs("div",{className:"goal-item-compact short-term",children:[o.jsx("span",{children:"📅"}),O]},E))]}),o.jsxs("div",{className:"goals-column",children:[o.jsx("h3",{children:"6+ Months"}),(((F=b.goals)==null?void 0:F.longTerm)||[]).slice(0,3).map((O,E)=>o.jsxs("div",{className:"goal-item-compact long-term",children:[o.jsx("span",{children:"📆"}),O]},E))]})]})]})]})]}),o.jsx("div",{className:"report-actions",children:o.jsx("button",{className:"primary-button",onClick:y,disabled:d,children:d?"Generating...":"🔄 Generate New Report"})})]})}const z_=w.shape({id:w.string.isRequired,name:w.string.isRequired,amount:w.number.isRequired,budgetedAmount:w.number,category:w.string.isRequired,type:w.oneOf(["income","expense"]).isRequired,date:w.string.isRequired,receipt:w.string});ym.propTypes={budget:w.shape({id:w.string.isRequired,name:w.string.isRequired,transactions:w.arrayOf(z_)}).isRequired,setViewMode:w.func.isRequired};const _s=24*60*60*1e3,vm=e=>{if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t},fa=e=>{const t=new Date(e);return t.setHours(0,0,0,0),t},pa=e=>{const t=new Date(e);return t.setHours(23,59,59,999),t},wm=(e=[])=>e.flatMap(t=>(t.transactions||[]).map(n=>({...n,amount:Number.isFinite(n.amount)?n.amount:Number.parseFloat(n.amount)||0,budgetId:t.id,budgetName:t.name}))),ql=(e="week",t=new Date)=>{const n=pa(t);if(e==="month"){const s=new Date(n.getFullYear(),n.getMonth(),1),i=pa(new Date(n.getFullYear(),n.getMonth()+1,0)),a=Math.max(1,Math.round((i-s)/_s)+1);return{period:e,start:s,end:i,days:a,label:s.toLocaleDateString(void 0,{month:"long",year:"numeric"})}}if(e==="custom"){const s=fa(new Date(n.getTime()-13*_s));return{period:e,start:s,end:n,days:14,label:"Last 14 days"}}return{period:"week",start:fa(new Date(n.getTime()-6*_s)),end:n,days:7,label:"Last 7 days"}},q_=e=>{if(!e)return null;const{period:t,start:n,days:r}=e;if(t==="month"){const a=new Date(n.getFullYear(),n.getMonth()-1,1),l=pa(new Date(n.getFullYear(),n.getMonth(),0)),c=Math.max(1,Math.round((l-a)/_s)+1);return{period:t,start:fa(a),end:l,days:c,label:a.toLocaleDateString(void 0,{month:"long",year:"numeric"})}}const s=pa(new Date(n.getTime()-1)),i=fa(new Date(s.getTime()-(r-1)*_s));return{period:t,start:i,end:s,days:r,label:"Previous period"}},ma=(e,t)=>t?e.filter(n=>{const r=vm(n.date);return r?r>=t.start&&r<=t.end:!1}):[],hh=(e,t)=>e.filter(n=>n.type===t).reduce((n,r)=>n+(Number.isFinite(r.amount)?r.amount:0),0),Wl=e=>{if(!e.length)return[];const t=e.reduce((r,s)=>{var u;const i=(s.category||"Uncategorized").trim().toLowerCase(),a=((u=s.category)==null?void 0:u.trim())||"Uncategorized",l=Number.isFinite(s.amount)?s.amount:0,c=r.get(i)||{key:i,label:a,amount:0};return c.amount+=l,r.set(i,c),r},new Map),n=Array.from(t.values()).reduce((r,s)=>r+s.amount,0);return n<=0?Array.from(t.values()).map(r=>({...r,percent:0})):Array.from(t.values()).map(r=>({...r,percent:r.amount/n*100})).sort((r,s)=>s.amount-r.amount)},W_=e=>{const t=[],n=new Date(e.start);for(;n<=e.end;)t.push(new Date(n)),n.setDate(n.getDate()+1);return t},H_=(e,t)=>W_(t).map(r=>{const s=r.toISOString().split("T")[0],i=e.reduce((a,l)=>{const c=vm(l.date);if(!c||c.toISOString().split("T")[0]!==s)return a;const u=Number.isFinite(l.amount)?l.amount:0;return l.type==="income"?a.income+=u:l.type==="expense"&&(a.expense+=u),a},{income:0,expense:0});return{date:r,label:t.period==="month"?r.getDate().toString():r.toLocaleDateString(void 0,{weekday:"short"}),...i}}),V_=(e,t,n)=>{if(!t||!n)return[];const r=Wl(ma(e.filter(a=>a.type==="expense"),t)),s=Wl(ma(e.filter(a=>a.type==="expense"),n)),i=new Map(s.map(a=>[a.key,a]));return r.map(a=>{const l=i.get(a.key),c=(l==null?void 0:l.amount)??0,u=a.amount-c,d=c>0?u/c*100:a.amount>0?100:0;return{...a,previousAmount:c,change:u,percentChange:d}}).filter(a=>Number.isFinite(a.percentChange)).sort((a,l)=>Math.abs(l.percentChange)-Math.abs(a.percentChange))},G_=(e,t,n)=>{const r=e.reduce((d,h)=>d+(h.categoryBudgets||[]).reduce((g,v)=>g+(Number(v.budgetedAmount)||0),0),0),i=ma(t.filter(d=>d.type==="expense"),n).reduce((d,h)=>d+(Number.isFinite(h.amount)?h.amount:0),0),a=n.days>0?i/n.days:0,l=Math.max(0,r-i),c=a>0?l/a:null,u=r>0?Math.min(1,i/r):0;return{totalBudgeted:r,spent:i,remaining:l,avgDailySpend:a,projectedDaysLeft:c,progress:u}},fh=(e,t="week",n=new Date)=>{const r=wm(e),s=ql(t,n),i=q_(s),a=ma(r,s),l=hh(a,"income"),c=hh(a,"expense"),u=s.days>0?c/s.days:0,d=l-c,h=Wl(a.filter(S=>S.type==="expense")),g=H_(a,s),v=V_(r,s,i),_=G_(e,r,ql("month",n));return{range:s,previousRange:i,totalIncome:l,totalExpenses:c,avgDailySpend:u,balance:d,categoryBreakdown:h,incomeExpenseSeries:g,cashBurn:_,trends:v}},Dt=(e,t="USD")=>{try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t}).format(Number.isFinite(e)?e:0)}catch{return`$${Number(e||0).toFixed(2)}`}},Io=(e,t="USD")=>{if(!Number.isFinite(e))return Dt(0,t);const n=Math.abs(e);return n>=1e9?`${e<0?"-":""}${Dt(n/1e9,t)}B`:n>=1e6?`${e<0?"-":""}${Dt(n/1e6,t)}M`:n>=1e3?`${e<0?"-":""}${Dt(n/1e3,t)}K`:Dt(e,t)},ph=[{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"custom",label:"Custom"}],ga=["#5B8DEF","#3ED1B7","#FF9F43","#FF6B6B","#9D7DFF","#54D3FF","#FFB8D2"],K_=(e,t)=>{if(!e)return"💸";const n=e.trim().toLowerCase(),r=[(t==null?void 0:t.expense)||[],(t==null?void 0:t.income)||[]];for(const s of r){const i=s.find(a=>{var l;return((l=a.name)==null?void 0:l.trim().toLowerCase())===n});if(i!=null&&i.icon)return i.icon}return"💸"},Q_=e=>{if(!(e!=null&&e.length))return"conic-gradient(#E5E7EB 0deg 360deg)";let t=0;return`conic-gradient(${e.map((r,s)=>{const i=r.percent/100*360,a=t+i,c=`${ga[s%ga.length]} ${t}deg ${a}deg`;return t=a,c}).join(", ")})`},mh=(e,t,n,r)=>{if(!(e!=null&&e.length))return"";const s=Math.max(1,...e.map(a=>Math.max(0,Number.isFinite(a[t])?a[t]:0))),i=e.length>1?n/(e.length-1):n;return e.map((a,l)=>{const c=Math.round(l*i),d=(Number.isFinite(a[t])?Math.max(0,a[t]):0)/s,h=Math.round(r-d*r);return`${c},${h}`}).join(" ")},J_=e=>{if(!(e!=null&&e.length))return[];const t=Math.max(1,Math.floor(e.length/6));return e.map((n,r)=>({label:n.label,index:r})).filter((n,r)=>r%t===0)};function Yc({budgets:e,categories:t,onViewInsights:n}){var I,W,B,Y,X,K;const{userProfile:r,user:s}=Vn(),[i,a]=j.useState("week"),[l,c]=j.useState("week"),[u,d]=j.useState(null),[h,g]=j.useState(!1),[v,_]=j.useState(null),S=((I=r==null?void 0:r.preferences)==null?void 0:I.currency)||"USD",b=j.useMemo(()=>fh(e,i),[e,i]),m=j.useMemo(()=>l===i?b.incomeExpenseSeries:fh(e,l).incomeExpenseSeries,[e,l,i,b.incomeExpenseSeries]),p=j.useMemo(()=>ql(l),[l]),y=j.useMemo(()=>wm(e),[e]);j.useEffect(()=>{if(!(s!=null&&s.id))return;let $=!0;return g(!0),_(null),(async()=>{try{const{data:D,error:T}=await x_(s.id);if(!$)return;if(T){console.error("Failed to load AI insights",T),_(T.message||"Unable to load insights"),d(null);return}d(D||null)}catch(D){if(!$)return;console.error("Unexpected AI insight error",D),_(D.message||"Unable to load insights"),d(null)}finally{$&&g(!1)}})(),()=>{$=!1}},[s==null?void 0:s.id]),j.useEffect(()=>{c(i)},[i]);const x=()=>{if(!u){n==null||n(null);return}n==null||n(u.budget_id||null)},P=b.categoryBreakdown,N=b.cashBurn,A=b.trends.slice(0,3),C=360,q=160,F=mh(m,"income",C,q),O=mh(m,"expense",C,q),E=J_(m),z=(W=u==null?void 0:u.insights)==null?void 0:W.summary,Q=j.useMemo(()=>{if(!(u!=null&&u.budget_id))return null;const $=e.find(G=>G.id===u.budget_id);return($==null?void 0:$.name)||u.budget_id},[e,u==null?void 0:u.budget_id]),ee=A.length?A.map($=>{const G=$.percentChange<0?"less":"more",D=Math.abs($.percentChange);return`You spent ${Number.isFinite(D)?D.toFixed(1):"0"}% ${G} on ${$.label}.`}):["We need a bit more data to highlight category trends. Keep logging transactions!"],J=((B=b.range)==null?void 0:B.label)||"",le=y.length;return o.jsxs("div",{className:"reports-screen",children:[o.jsxs("header",{className:"reports-header",children:[o.jsxs("div",{children:[o.jsx("h1",{children:"Reports"}),o.jsxs("p",{className:"reports-subtitle",children:["Explore spending patterns, cash burn, and income trends for ",J.toLowerCase(),"."]})]}),o.jsxs("label",{className:"reports-period-select",children:[o.jsx("span",{className:"sr-only",children:"Select reporting period"}),o.jsx("select",{value:i,onChange:$=>a($.target.value),children:ph.map($=>o.jsx("option",{value:$.value,children:$.label},$.value))})]})]}),le===0&&o.jsx("div",{className:"report-empty",children:o.jsx("p",{children:"We'll start charting insights as soon as you add transactions to your budgets. Create a budget and begin tracking spending to unlock detailed analytics."})}),o.jsxs("div",{className:"reports-layout",children:[o.jsxs("div",{className:"reports-group reports-summary",children:[o.jsxs("section",{className:"report-grid",children:[o.jsxs("article",{className:"report-card",children:[o.jsxs("header",{children:[o.jsx("h2",{children:"Average Daily Spend"}),o.jsx("span",{className:"metric-tag",children:(Y=b.range)==null?void 0:Y.label})]}),o.jsx("p",{className:"metric-value",children:Dt(b.avgDailySpend,S)}),o.jsx("p",{className:"metric-subtext",children:"Across all logged expenses"})]}),o.jsxs("article",{className:"report-card",children:[o.jsxs("header",{children:[o.jsx("h2",{children:"Total Expenses"}),o.jsx("span",{className:"metric-tag",children:(X=b.range)==null?void 0:X.label})]}),o.jsx("p",{className:"metric-value expense",children:Io(b.totalExpenses,S)}),o.jsxs("p",{className:"metric-subtext",children:["Income: ",o.jsx("strong",{children:Io(b.totalIncome,S)})]})]}),o.jsxs("article",{className:"report-card",children:[o.jsxs("header",{children:[o.jsx("h2",{children:"Net Balance"}),o.jsx("span",{className:`metric-tag ${b.balance>=0?"success":"warning"}`,children:b.balance>=0?"Surplus":"Deficit"})]}),o.jsx("p",{className:`metric-value ${b.balance>=0?"income":"expense"}`,children:Io(b.balance,S)}),o.jsx("p",{className:"metric-subtext",children:b.balance>=0?"Great job staying ahead":"Review discretionary categories"})]})]}),o.jsxs("section",{className:"report-card cash-burn-card",children:[o.jsxs("header",{children:[o.jsxs("div",{children:[o.jsx("h2",{children:"Cash Burn"}),o.jsx("p",{className:"metric-subtext",children:"Monitoring current month budgets"})]}),o.jsx("span",{className:"metric-tag accent",children:N.projectedDaysLeft?`${Math.floor(N.projectedDaysLeft)} days left`:"Stable"})]}),o.jsxs("div",{className:"cash-burn-body",children:[o.jsx("div",{className:"cash-burn-number",children:Dt(N.avgDailySpend,S)}),o.jsx("div",{className:"cash-burn-label",children:"Average daily spend"}),o.jsxs("div",{className:"progress-bar",children:[o.jsx("div",{className:"progress-bar__track","aria-hidden":"true",children:o.jsx("div",{className:"progress-bar__fill",style:{width:`${Math.min(100,Math.round((N.progress||0)*100))}%`}})}),o.jsxs("div",{className:"progress-bar__legend",children:[o.jsxs("span",{children:["Spent ",Dt(N.spent,S)]}),o.jsxs("span",{children:["Budgeted ",Dt(N.totalBudgeted,S)]})]})]})]})]})]}),o.jsxs("div",{className:"reports-group reports-charts",children:[o.jsxs("section",{className:"report-card category-card",children:[o.jsxs("header",{children:[o.jsx("h2",{children:"Category Breakdown"}),o.jsxs("p",{className:"metric-subtext",children:["Expense mix for ",(K=b.range)==null?void 0:K.label]})]}),o.jsxs("div",{className:"category-content",children:[o.jsx("div",{className:"category-pie",style:{background:Q_(P)},"aria-hidden":"true"}),o.jsx("ul",{className:"category-list",children:P.length?P.map(($,G)=>o.jsxs("li",{children:[o.jsx("span",{className:"category-icon","aria-hidden":"true",children:K_($.label,t)}),o.jsxs("div",{className:"category-info",children:[o.jsx("span",{className:"category-name",children:$.label}),o.jsx("span",{className:"category-amount",children:Dt($.amount,S)})]}),o.jsxs("span",{className:"category-percent",children:[$.percent.toFixed(1),"%"]}),o.jsx("span",{className:"category-color","aria-hidden":"true",style:{backgroundColor:ga[G%ga.length]}})]},$.key)):o.jsx("li",{className:"category-empty",children:"Log expenses to populate category analytics."})})]})]}),o.jsxs("section",{className:"report-card chart-card",children:[o.jsxs("header",{className:"chart-header",children:[o.jsxs("div",{children:[o.jsx("h2",{children:"Income vs Expenses"}),o.jsxs("p",{className:"metric-subtext",children:["Daily totals (",p.label.toLowerCase(),")"]})]}),o.jsx("div",{className:"chart-toggle",role:"group","aria-label":"Select chart period",children:ph.filter($=>$.value!=="custom").map($=>o.jsx("button",{type:"button",className:l===$.value?"is-active":"",onClick:()=>c($.value),children:$.label},$.value))})]}),o.jsx("div",{className:"chart-wrapper",role:"img","aria-label":"Line chart comparing income and expenses",children:m.length?o.jsxs("svg",{viewBox:`0 0 ${C} ${q}`,preserveAspectRatio:"none",children:[o.jsx("polyline",{points:F,fill:"none",stroke:"#3ED1B7",strokeWidth:"3"}),o.jsx("polyline",{points:O,fill:"none",stroke:"#FF6B6B",strokeWidth:"3"})]}):o.jsx("div",{className:"chart-empty",children:"Add income and expenses to unlock the comparison chart."})}),m.length>0&&o.jsxs("div",{className:"chart-legend",children:[o.jsxs("span",{children:[o.jsx("span",{className:"legend-dot",style:{backgroundColor:"#3ED1B7"}})," Income"]}),o.jsxs("span",{children:[o.jsx("span",{className:"legend-dot",style:{backgroundColor:"#FF6B6B"}})," Expenses"]})]}),m.length>0&&o.jsx("div",{className:"chart-axis",children:E.map($=>o.jsx("span",{children:$.label},`${$.label}-${$.index}`))})]})]}),o.jsxs("div",{className:"reports-group reports-insights",children:[o.jsxs("section",{className:"report-card trends-card",children:[o.jsxs("header",{children:[o.jsx("h2",{children:"Trends & Insights"}),o.jsx("p",{className:"metric-subtext",children:"Week-over-week category shifts"})]}),o.jsx("ul",{className:"trends-list",children:ee.map(($,G)=>o.jsxs("li",{className:G===0?"highlight":"",children:[o.jsx("span",{className:"trend-icon","aria-hidden":"true",children:G===0?"📈":"🧭"}),o.jsx("span",{children:$})]},$))})]}),o.jsxs("section",{className:"report-card ai-card",children:[o.jsx("header",{children:o.jsxs("div",{children:[o.jsxs("h2",{children:[o.jsx("span",{"aria-hidden":"true",className:"ai-icon",children:"⚡"}),"AI Insights Preview"]}),o.jsx("p",{className:"metric-subtext",children:"Latest recommendations generated for your budgets"})]})}),o.jsxs("div",{className:"ai-body",children:[h?o.jsx("p",{className:"ai-status",children:"Gathering the latest insight..."}):v?o.jsx("p",{className:"ai-status error",children:v}):u?o.jsxs(o.Fragment,{children:[Q&&o.jsx("p",{className:"ai-budget",children:Q}),o.jsx("p",{className:"ai-summary",children:z||"Your AI co-pilot is ready with fresh guidance."})]}):o.jsx("p",{className:"ai-status",children:"Generate an AI report from any budget to see a personalized preview here."}),o.jsx("button",{type:"button",className:"primary-button",onClick:x,disabled:h,children:"View Full AI Insights"})]})]})]})]})]})}Yc.propTypes={budgets:w.arrayOf(w.shape({id:w.oneOfType([w.string,w.number]),name:w.string,transactions:w.arrayOf(w.shape({id:w.oneOfType([w.string,w.number]),amount:w.number,category:w.string,type:w.string,date:w.string})),categoryBudgets:w.arrayOf(w.shape({category:w.string,budgetedAmount:w.oneOfType([w.string,w.number])}))})),categories:w.shape({income:w.array,expense:w.array}),onViewInsights:w.func};Yc.defaultProps={budgets:[],categories:{income:[],expense:[]},onViewInsights:void 0};const Lo="pb:theme-preference",Y_=()=>typeof window>"u"?"light":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",X_=()=>{const[e,t]=j.useState(()=>typeof window>"u"?"system":localStorage.getItem(Lo)||"system"),[n,r]=j.useState(Y_);return j.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const s=window.matchMedia("(prefers-color-scheme: dark)"),i=a=>r(a.matches?"dark":"light");return s.addEventListener?s.addEventListener("change",i):s.addListener&&s.addListener(i),()=>{s.removeEventListener?s.removeEventListener("change",i):s.removeListener&&s.removeListener(i)}},[]),j.useEffect(()=>{typeof window>"u"||(e==="system"?localStorage.removeItem(Lo):localStorage.setItem(Lo,e))},[e]),j.useEffect(()=>{if(typeof document>"u")return;const s=e==="system"?n:e;document.documentElement.dataset.theme=s},[e,n]),{preference:e,systemTheme:n,effectiveTheme:e==="system"?n:e,setThemePreference:t,resetToSystem:()=>t("system")}},Mi={budgetStyle:"zero-based",currency:"USD",notifications:{weeklyReports:!0,aiNudges:!0}},Z_=(e,t)=>e!=null&&e.trim()?e.trim().split(" ").slice(0,2).map(r=>r.charAt(0).toUpperCase()).join(""):t?t.charAt(0).toUpperCase():"U",ex=e=>e?{...Mi,...e,notifications:{...Mi.notifications,...e.notifications||{}}}:Mi,tx=["USD","EUR","GBP","AUD","CAD","JPY","INR"];function Xc({user:e,categories:t,budgets:n,onManageCategories:r}){var Y,X;const{userProfile:s,refreshProfile:i,setUserProfile:a}=Vn(),[l,c]=j.useState(!1),[u,d]=j.useState({name:"",email:""}),[h,g]=j.useState(null),[v,_]=j.useState(Mi),[S,b]=j.useState(null),[m,p]=j.useState(null),[y,x]=j.useState(null),[P,N]=j.useState(!1),{preference:A,effectiveTheme:C,setThemePreference:q,resetToSystem:F}=X_();j.useEffect(()=>{d({name:(s==null?void 0:s.full_name)||"",email:(s==null?void 0:s.email)||(e==null?void 0:e.email)||""})},[e==null?void 0:e.email,s==null?void 0:s.email,s==null?void 0:s.full_name]),j.useEffect(()=>{_(ex(s==null?void 0:s.preferences))},[s==null?void 0:s.preferences]);const O=async()=>{confirm("Are you sure you want to sign out?")&&await am()},E=j.useMemo(()=>{const K=(s==null?void 0:s.tier)||(s==null?void 0:s.subscription_tier);return K?K.charAt(0).toUpperCase()+K.slice(1):"Free"},[s==null?void 0:s.subscription_tier,s==null?void 0:s.tier]),z=j.useMemo(()=>S==="saving",[S]),Q=async K=>{if(!(e!=null&&e.id))return;b("saving"),p(null),x(null);const $=typeof K=="function"?K(v):K;_($);try{const{data:G,error:D}=await Zd(e.id,{preferences:$});if(D){p(D.message||"Unable to save preferences"),b("error");return}G?a==null||a(G):await(i==null?void 0:i()),b("saved")}catch(G){console.error("Failed to update preferences",G),p(G.message||"Unexpected error saving preferences"),b("error")}},ee=async K=>{if(K.preventDefault(),!!(e!=null&&e.id)){g("saving");try{const{data:$,error:G}=await Zd(e.id,{full_name:u.name,email:u.email});if(G){g(G.message||"Unable to update profile");return}$?a==null||a($):await(i==null?void 0:i()),g("Profile updated"),c(!1)}catch($){console.error("Failed to update profile",$),g($.message||"Unexpected error updating profile")}}},J=()=>{if(A==="system"){q(C==="dark"?"light":"dark");return}q(C==="dark"?"light":"dark")},le=()=>{const K={exportedAt:new Date().toISOString(),user:{id:e==null?void 0:e.id,email:e==null?void 0:e.email},profile:s,categories:t,budgets:(n||[]).map(T=>({id:T.id,name:T.name,categoryBudgets:T.categoryBudgets,transactions:T.transactions}))},$=new Blob([JSON.stringify(K,null,2)],{type:"application/json"}),G=URL.createObjectURL($),D=document.createElement("a");D.href=G,D.download=`pocket-budget-export-${new Date().toISOString().split("T")[0]}.json`,D.click(),URL.revokeObjectURL(G),x("Data exported successfully")},I=async()=>{if(!(typeof window>"u")){N(!0),x(null);try{const K=[];for(let $=0;$<localStorage.length;$+=1){const G=localStorage.key($);G&&(G.startsWith("pb:")||G.includes("budgets_")||G.includes("transactions_")||G.includes("mock"))&&K.push(G)}if(K.forEach($=>localStorage.removeItem($)),window.caches){const $=await window.caches.keys();await Promise.all($.map(G=>window.caches.delete(G)))}x("Local cache cleared")}catch(K){console.error("Failed to clear cache",K),x(K.message||"Unable to clear cache")}finally{N(!1)}}},W=((Y=t==null?void 0:t.income)==null?void 0:Y.length)||0,B=((X=t==null?void 0:t.expense)==null?void 0:X.length)||0;return o.jsxs("div",{className:"settings-screen",children:[o.jsxs("section",{className:"settings-section",children:[o.jsx("h2",{children:"Profile & Account"}),o.jsxs("div",{className:"settings-card profile-card",children:[o.jsxs("div",{className:"profile-header",children:[o.jsx("div",{className:"avatar","aria-hidden":"true",children:Z_(s==null?void 0:s.full_name,e==null?void 0:e.email)}),o.jsxs("div",{children:[o.jsx("p",{className:"settings-name",children:(s==null?void 0:s.full_name)||(e==null?void 0:e.email)}),o.jsx("p",{className:"settings-email",children:(s==null?void 0:s.email)||(e==null?void 0:e.email)})]})]}),o.jsxs("div",{className:"profile-actions",children:[o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>c(!0),children:"Edit profile"}),o.jsx("button",{type:"button",className:"link-button",onClick:O,children:"Log out"})]}),typeof h=="string"&&h!=="saving"&&o.jsx("p",{className:"status-text",children:h})]})]}),o.jsxs("section",{className:"settings-section",children:[o.jsx("h2",{children:"Subscription & Billing"}),o.jsxs("div",{className:"settings-card subscription-card",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"subscription-tier",children:["Current plan: ",E]}),o.jsx("p",{className:"settings-description",children:"Unlock unlimited AI reports, sharing, and premium widgets with Pocket Budget Pro."})]}),o.jsx("button",{type:"button",className:"primary-button",children:E.toLowerCase()==="pro"?"Manage plan":"Upgrade to Pro"})]})]}),o.jsxs("section",{className:"settings-section",children:[o.jsx("h2",{children:"Preferences"}),o.jsxs("div",{className:"settings-card",children:[o.jsxs("div",{className:"settings-row",children:[o.jsxs("div",{children:[o.jsx("h3",{children:"Budget style"}),o.jsx("p",{className:"settings-description",children:"Choose how Pocket Budget frames your envelopes."})]}),o.jsx("div",{className:"segmented-control",role:"group","aria-label":"Budget style",children:[{value:"zero-based",label:"Zero-based"},{value:"envelope",label:"Envelope"}].map(K=>o.jsx("button",{type:"button",className:v.budgetStyle===K.value?"is-active":"",onClick:()=>Q($=>({...$,budgetStyle:K.value})),disabled:z,children:K.label},K.value))})]}),o.jsxs("div",{className:"settings-row",children:[o.jsxs("div",{children:[o.jsx("h3",{children:"Currency"}),o.jsx("p",{className:"settings-description",children:"Display budgets and reports in your preferred currency."})]}),o.jsx("select",{value:v.currency,onChange:K=>Q($=>({...$,currency:K.target.value})),disabled:z,children:tx.map(K=>o.jsx("option",{value:K,children:K},K))})]}),o.jsxs("div",{className:"settings-row",children:[o.jsxs("div",{children:[o.jsx("h3",{children:"Notifications"}),o.jsx("p",{className:"settings-description",children:"Stay on top of weekly digests and AI nudges."})]}),o.jsxs("div",{className:"toggle-group",children:[o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:!!v.notifications.weeklyReports,onChange:K=>Q($=>({...$,notifications:{...$.notifications,weeklyReports:K.target.checked}}))}),"Weekly reports"]}),o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:!!v.notifications.aiNudges,onChange:K=>Q($=>({...$,notifications:{...$.notifications,aiNudges:K.target.checked}}))}),"AI nudges"]})]})]}),S==="saved"&&o.jsx("p",{className:"status-text",children:"Preferences saved"}),S==="error"&&o.jsx("p",{className:"status-text error",children:m})]})]}),o.jsxs("section",{className:"settings-section",children:[o.jsx("h2",{children:"App Settings"}),o.jsxs("div",{className:"settings-card",children:[o.jsxs("div",{className:"settings-row",children:[o.jsxs("div",{children:[o.jsx("h3",{children:"Dark mode"}),o.jsx("p",{className:"settings-description",children:"Pocket Budget follows your system theme automatically."})]}),o.jsxs("div",{className:"theme-toggle",children:[o.jsx("button",{type:"button",className:C==="dark"?"is-active":"",onClick:J,children:C==="dark"?"Dark":"Light"}),o.jsx("button",{type:"button",className:"link-button",onClick:F,children:"Use system default"})]})]}),o.jsxs("div",{className:"settings-row",children:[o.jsxs("div",{children:[o.jsx("h3",{children:"Export data"}),o.jsx("p",{className:"settings-description",children:"Download a copy of your budgets and transaction history."})]}),o.jsx("button",{type:"button",className:"secondary-button",onClick:le,children:"Export JSON"})]}),o.jsxs("div",{className:"settings-row",children:[o.jsxs("div",{children:[o.jsx("h3",{children:"Clear cache"}),o.jsx("p",{className:"settings-description",children:"Remove stored sessions and offline data."})]}),o.jsx("button",{type:"button",className:"link-button",onClick:I,disabled:P,children:P?"Clearing…":"Clear cache"})]}),y&&o.jsx("p",{className:"status-text",children:y})]})]}),o.jsxs("section",{className:"settings-section",children:[o.jsx("h2",{children:"Categories"}),o.jsxs("div",{className:"settings-card",children:[o.jsxs("p",{className:"settings-description",children:["You have ",W," income categories and ",B," expense categories configured."]}),o.jsx("button",{type:"button",className:"primary-button",onClick:r,children:"Manage categories"})]})]}),o.jsxs("section",{className:"settings-section",children:[o.jsx("h2",{children:"About Pocket Budget"}),o.jsxs("div",{className:"settings-card about-card",children:[o.jsx("p",{children:"Version 1.0.0"}),o.jsxs("p",{children:[o.jsx("a",{href:"https://pocketbudget.app/privacy",target:"_blank",rel:"noreferrer",children:"Privacy Policy"}),o.jsx("span",{"aria-hidden":"true",children:" · "}),o.jsx("a",{href:"https://pocketbudget.app/terms",target:"_blank",rel:"noreferrer",children:"Terms of Service"})]})]})]}),l&&o.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true",children:o.jsxs("form",{className:"modal",onSubmit:ee,children:[o.jsx("h2",{children:"Edit profile"}),o.jsxs("label",{children:["Full name",o.jsx("input",{className:"input",value:u.name,onChange:K=>d($=>({...$,name:K.target.value}))})]}),o.jsxs("label",{children:["Email",o.jsx("input",{className:"input",type:"email",value:u.email,onChange:K=>d($=>({...$,email:K.target.value}))})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>c(!1),children:"Cancel"}),o.jsx("button",{type:"submit",className:"primary-button",children:"Save changes"})]}),h==="saving"&&o.jsx("p",{className:"status-text",children:"Saving…"})]})})]})}Xc.propTypes={user:w.shape({id:w.string,email:w.string}),categories:w.shape({income:w.array,expense:w.array}),budgets:w.arrayOf(w.shape({id:w.oneOfType([w.string,w.number]),name:w.string,categoryBudgets:w.array,transactions:w.array})),onManageCategories:w.func};Xc.defaultProps={user:null,categories:{income:[],expense:[]},budgets:[],onManageCategories:void 0};function Ui({message:e="Loading"}){return o.jsx("div",{className:"loading-screen",children:o.jsxs("div",{className:"loading-content",children:[o.jsx("h1",{className:"header",children:"Pocket Budget"}),o.jsx("div",{className:"loading-spinner-large"}),o.jsxs("p",{className:"loading-text",children:[e,"..."]})]})})}Ui.propTypes={message:w.string};function nx(){const[e,t]=j.useState(!1),[n,r]=j.useState(""),[s,i]=j.useState(""),[a,l]=j.useState(""),[c,u]=j.useState(!1),[d,h]=j.useState(""),g=async _=>{_.preventDefault(),u(!0),h("");try{if(e){if(s!==a){h("Passwords do not match"),u(!1);return}if(s.length<6){h("Password must be at least 6 characters"),u(!1);return}const{error:S}=await n_(n,s);S?h(S.message):(h(""),t(!1),i(""),l(""))}else{const{error:S}=await r_(n,s);S&&h(S.message)}}catch(S){h("An unexpected error occurred"),console.error("Auth error:",S)}finally{u(!1)}},v=async()=>{u(!0),h("");try{const{error:_}=await s_();_&&h(_.message)}catch(_){h("Failed to sign in with Google"),console.error("Google auth error:",_)}finally{u(!1)}};return o.jsx("div",{className:"login-container",children:o.jsxs("div",{className:"login-content",children:[o.jsxs("div",{className:"login-header",children:[o.jsx("h1",{className:"login-title",children:"Pocket Budget"}),o.jsx("p",{className:"login-subtitle",children:e?"Create your account to get started":"Welcome back! Sign in to continue"})]}),o.jsxs("div",{className:"login-form-container",children:[d&&o.jsx("div",{className:"error-message",children:d}),o.jsxs("form",{onSubmit:g,className:"login-form",children:[o.jsx("input",{type:"email",placeholder:"Email address",value:n,onChange:_=>r(_.target.value),className:"input login-input",required:!0,disabled:c}),o.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:_=>i(_.target.value),className:"input login-input",required:!0,disabled:c,minLength:6}),e&&o.jsx("input",{type:"password",placeholder:"Confirm password",value:a,onChange:_=>l(_.target.value),className:"input login-input",required:!0,disabled:c,minLength:6}),o.jsx("button",{type:"submit",className:"primary-button login-button",disabled:c,children:c?"Please wait...":e?"Create Account":"Sign In"})]}),o.jsx("div",{className:"login-divider",children:o.jsx("span",{children:"or"})}),o.jsxs("button",{onClick:v,className:"google-button",disabled:c,children:[o.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),o.jsx("div",{className:"login-switch",children:o.jsxs("p",{children:[e?"Already have an account?":"Don't have an account?"," ",o.jsx("button",{type:"button",onClick:()=>{t(!e),h(""),r(""),i(""),l("")},className:"login-switch-button",disabled:c,children:e?"Sign In":"Sign Up"})]})})]})]})})}function _m({title:e,showLogout:t=!1}){const{user:n,userProfile:r}=Vn(),s=async()=>{confirm("Are you sure you want to sign out?")&&await am()};return o.jsx("div",{className:"app-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("h1",{className:"header-title",children:e}),t&&n&&o.jsxs("div",{className:"header-user",children:[o.jsx("span",{className:"user-email",children:(r==null?void 0:r.full_name)||n.email}),o.jsx("button",{onClick:s,className:"logout-button",title:"Sign out",children:"🚪"})]})]})})}_m.propTypes={title:w.string.isRequired,showLogout:w.bool};const xm="installPromptDismissedUntil",rx=7*24*60*60*1e3,gh=()=>typeof window>"u"?!1:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,yh=()=>{const e=Date.now()+rx;return localStorage.setItem(xm,e.toString()),e},sx=()=>{const e=localStorage.getItem(xm);if(!e)return!1;const t=Number.parseInt(e,10);return Number.isFinite(t)&&Date.now()<t};function vh(){const[e,t]=j.useState(null),[n,r]=j.useState(!1),[s,i]=j.useState(()=>gh());j.useEffect(()=>{const c=u=>{if(u.preventDefault(),s||sx()){t(null),r(!1);return}t(u),r(!0)};return window.addEventListener("beforeinstallprompt",c),()=>window.removeEventListener("beforeinstallprompt",c)},[s]),j.useEffect(()=>{const c=()=>{i(!0),r(!1),t(null)},u=window.matchMedia("(display-mode: standalone)"),d=()=>{const h=gh();i(h),h&&(r(!1),t(null))};return d(),typeof u.addEventListener=="function"?u.addEventListener("change",d):typeof u.addListener=="function"&&u.addListener(d),window.addEventListener("appinstalled",c),()=>{typeof u.removeEventListener=="function"?u.removeEventListener("change",d):typeof u.removeListener=="function"&&u.removeListener(d),window.removeEventListener("appinstalled",c)}},[]);const a=async()=>{if(!e)return;e.prompt();const{outcome:c}=await e.userChoice;t(null),r(!1),c==="accepted"?console.log("User accepted the install prompt"):(console.log("User dismissed the install prompt"),yh())},l=()=>{r(!1),t(null),yh()};return!n||s?null:o.jsx("div",{className:"install-prompt",children:o.jsxs("div",{className:"install-prompt-content",children:[o.jsx("div",{className:"install-prompt-icon",children:"📱"}),o.jsxs("div",{className:"install-prompt-text",children:[o.jsx("h3",{children:"Install Pocket Budget"}),o.jsx("p",{children:"Add to your home screen for a better experience!"})]}),o.jsxs("div",{className:"install-prompt-actions",children:[o.jsx("button",{onClick:a,className:"install-button",children:"Install"}),o.jsx("button",{onClick:l,className:"dismiss-button",children:"✕"})]})]})})}const ix=[{key:"home",label:"Home",icon:"🏠"},{key:"goals",label:"Goals",icon:"🎯"},{key:"reports",label:"Reports",icon:"📊"},{key:"settings",label:"Settings",icon:"⚙️"}],ax={home:"budgets",goals:"goals",reports:"reports",settings:"settings"},ox=e=>{if(!e)return"home";switch(e){case"budgets":case"details":case"categories":return"home";case"goals":return"goals";case"ai":case"reports":return"reports";case"settings":case"profile":return"settings";default:return e}};function Zc({viewMode:e,setViewMode:t,onSelect:n}){const r=ox(e),s=i=>{if(n==null||n(i),t){const a=ax[i]||i;t(a)}};return o.jsx("nav",{className:"bottom-nav","aria-label":"Primary navigation",children:ix.map(i=>{const a=i.key===r;return o.jsxs("button",{type:"button",className:`bottom-nav__item${a?" is-active":""}`,onClick:()=>s(i.key),"aria-pressed":a,children:[o.jsx("span",{className:"bottom-nav__icon","aria-hidden":"true",children:i.icon}),o.jsx("span",{className:"bottom-nav__label",children:i.label})]},i.key)})})}Zc.propTypes={viewMode:w.string,setViewMode:w.func,onSelect:w.func};Zc.defaultProps={viewMode:"budgets",setViewMode:void 0,onSelect:void 0};const Sm="pb:budget-metadata:v1",km=typeof window<"u"&&typeof window.localStorage<"u",eu=()=>{if(!km)return{};try{const e=window.localStorage.getItem(Sm);if(!e)return{};const t=JSON.parse(e);return t&&typeof t=="object"?t:{}}catch(e){return console.warn("Failed to parse budget metadata",e),{}}},tu=e=>{if(km)try{window.localStorage.setItem(Sm,JSON.stringify(e))}catch(t){console.warn("Failed to persist budget metadata",t)}},xs=()=>{const e=new Date().toISOString();return{cycle:{type:"monthly",label:"Monthly",currentStart:e,payFrequencyDays:30,createdAt:e,lastEditedAt:null},changeLog:[],insights:{trackedCategories:[],reportSchedule:{day:"sunday",time:"08:00"},quietHours:{start:21,end:7},nudges:{enabled:!1,threshold:.8,snoozedUntil:null,acknowledged:{}}},dismissals:{summary:{},recommendations:{}}}},jm=e=>{if(!e)return xs();const t=eu();return t[e]||(t[e]=xs(),tu(t)),{...xs(),...t[e]}},lx=(e,t)=>{if(!e)return t;const n=eu();return n[e]={...xs(),...t},tu(n),n[e]},cx=(e,t)=>{const n=jm(e),r=typeof t=="function"?t(n):{...n,...t};return lx(e,r)},ux=e=>{if(!e)return;const t=eu();t[e]&&(delete t[e],tu(t))},wh={income:[{name:"Salary",icon:"💼"},{name:"Freelance",icon:"💻"},{name:"Investment",icon:"📈"},{name:"Business",icon:"🏢"},{name:"Gift",icon:"🎁"}],expense:[{name:"Groceries",icon:"🛒"},{name:"Rent",icon:"🏠"},{name:"Transportation",icon:"🚗"},{name:"Entertainment",icon:"🎮"},{name:"Bills",icon:"🧾"},{name:"Shopping",icon:"🛍️"}]},$o=()=>({income:wh.income.map(e=>({...e})),expense:wh.expense.map(e=>({...e}))});function dx(){const{user:e,loading:t,initializing:n,status:r}=Vn(),[s,i]=j.useState([]),[a,l]=j.useState($o),[c,u]=j.useState(null),[d,h]=j.useState("budgets"),[g,v]=j.useState("idle"),_=j.useRef(null),S=n||t||r==="auth-transition",b=j.useCallback(()=>{e!=null&&e.id&&(_.current=null)},[e==null?void 0:e.id]),m=j.useCallback((C,q)=>{var z;if(!(C!=null&&C.id))return C;const F=q||C.metadata||jm(C.id),O=xs(),E={...O,...F,cycle:{...O.cycle,...(F==null?void 0:F.cycle)||{}},insights:{...O.insights,...(F==null?void 0:F.insights)||{},nudges:{...O.insights.nudges,...((z=F==null?void 0:F.insights)==null?void 0:z.nudges)||{}}},dismissals:{...O.dismissals,...(F==null?void 0:F.dismissals)||{}}};return{...C,metadata:E,cycleMetadata:E.cycle,changeLog:E.changeLog||[],insightsPreferences:E.insights,dismissedInsights:E.dismissals}},[]),p=j.useCallback(C=>{i(q=>{const F=typeof C=="function"?C(q):C;return Array.isArray(F)?F.map(O=>m(O,O==null?void 0:O.metadata)):q})},[m]);j.useEffect(()=>{e||(p([]),l($o()),u(null),h("budgets"),v("idle"),_.current=null)},[e,p]),j.useEffect(()=>{if(!e||t||n||_.current===e.id)return;const C=e.id;_.current=C;let q=!0;v("loading");const F=l_(C),O=h_(C);return Promise.allSettled([F,O]).then(E=>{if(!q)return;const[z,Q]=E;let ee=!1;if(z.status==="fulfilled"){const{data:J,error:le}=z.value;le&&(console.error("Error loading budgets:",le),ee=!0);const I=(J||[]).map(W=>({id:W.id,name:W.name,createdAt:new Date(W.created_at).toLocaleDateString(),categoryBudgets:W.category_budgets||[],transactions:(W.transactions||[]).map(B=>({id:B.id,name:B.name,amount:Number(B.amount||0),budgetedAmount:B.budgeted_amount??null,category:B.category,type:B.type,date:B.date,receipt:B.receipt_url??null}))}));p(I.map(W=>m(W)))}else console.error("Unexpected error resolving budgets:",z.reason),ee=!0;if(Q.status==="fulfilled"){const{data:J,error:le}=Q.value;le&&le.code!=="PGRST116"&&(console.error("Error loading categories:",le),ee=!0),J!=null&&J.categories?l(J.categories):(le==null?void 0:le.code)==="PGRST116"&&l($o())}else console.error("Unexpected error resolving categories:",Q.reason),ee=!0;ee?_.current=null:_.current=C,v("ready")}),()=>{q=!1}},[e,t,n,p,m]);const y=async C=>{if(l(C),!!e)try{const{error:q}=await f_(e.id,C);q||b()}catch(q){console.error("Error updating categories:",q)}},x=j.useCallback((C,q)=>{if(!C)return;const F=cx(C,q);p(O=>O.map(E=>E.id===C?m({...E},F):E)),u(O=>!O||O.id!==C?O:m({...O},F))},[m,p]),P=j.useCallback(C=>{C&&(ux(C),u(q=>(q==null?void 0:q.id)===C?null:q))},[]),N=j.useMemo(()=>s.find(C=>C.id===(c==null?void 0:c.id))||c,[s,c]),A=j.useCallback(C=>{if(C){const q=s.find(F=>F.id===C);q&&u(q)}else!c&&s.length>0&&u(s[0]);h("ai")},[s,c,u,h]);return j.useEffect(()=>{(d==="details"||d==="ai")&&!N&&(s.length>0?u(s[0]):d!=="budgets"&&h("budgets"))},[d,N,s,u]),j.useEffect(()=>{if(!(c!=null&&c.id))return;s.some(q=>q.id===c.id)||(s.length>0?u(s[0]):(u(null),h("budgets")))},[s,c,u,h]),n?o.jsx(Ui,{message:"Checking your account"}):!e&&!t?o.jsxs(o.Fragment,{children:[o.jsx(nx,{}),o.jsx(vh,{})]}):S?o.jsx(Ui,{message:"Preparing your experience"}):e&&g!=="ready"?o.jsx(Ui,{message:g==="loading"?"Loading your budgets":"Setting things up"}):o.jsxs("div",{className:"container",children:[o.jsx(_m,{title:"Pocket Budget",showLogout:d!=="ai"}),o.jsx(vh,{}),d==="budgets"&&o.jsx(Kc,{budgets:s,setSelectedBudget:u,setViewMode:h,setBudgets:p,userId:e.id,onMetadataChange:x,onMetadataRemove:P,onDataMutated:b}),d==="goals"&&o.jsx(Jc,{setViewMode:h,budgets:s,setBudgets:p,onDataMutated:b}),d==="details"&&N&&o.jsx(Qc,{budget:N,categories:a,setViewMode:h,setBudgets:p,budgets:s,setSelectedBudget:u,onMetadataChange:x,onDataMutated:b}),d==="details"&&!N&&s.length===0&&o.jsxs("div",{className:"empty-state",children:[o.jsx("p",{children:"Create a budget to see its details."}),o.jsx("button",{className:"primary-button",onClick:()=>h("budgets"),children:"Go to Home"})]}),d==="categories"&&o.jsx(mm,{categories:a,setCategories:y,budgets:s,setViewMode:h}),d==="reports"&&o.jsx(Yc,{budgets:s,categories:a,onViewInsights:A}),d==="ai"&&N&&o.jsx(ym,{budget:N,setViewMode:h}),d==="ai"&&!N&&o.jsxs("div",{className:"empty-state",children:[o.jsx("p",{children:"Select a budget to generate a report."}),o.jsx("button",{className:"primary-button",onClick:()=>h("budgets"),children:"Browse budgets"})]}),d==="settings"&&o.jsx(Xc,{user:e,categories:a,budgets:s,onManageCategories:()=>h("categories")}),o.jsx(Zc,{viewMode:d,setViewMode:h})]})}function hx(){return o.jsx(um,{children:o.jsx(dx,{})})}const fx=document.getElementById("root"),px=Rp(fx);px.render(o.jsx(hx,{}));

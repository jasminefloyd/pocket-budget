(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Cm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Tm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var nh={exports:{}},lo={},rh={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $s=Symbol.for("react.element"),Pm=Symbol.for("react.portal"),Am=Symbol.for("react.fragment"),Om=Symbol.for("react.strict_mode"),Rm=Symbol.for("react.profiler"),Im=Symbol.for("react.provider"),Dm=Symbol.for("react.context"),$m=Symbol.for("react.forward_ref"),Lm=Symbol.for("react.suspense"),Um=Symbol.for("react.memo"),Mm=Symbol.for("react.lazy"),du=Symbol.iterator;function Bm(e){return e===null||typeof e!="object"?null:(e=du&&e[du]||e["@@iterator"],typeof e=="function"?e:null)}var sh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ih=Object.assign,oh={};function Ir(e,t,n){this.props=e,this.context=t,this.refs=oh,this.updater=n||sh}Ir.prototype.isReactComponent={};Ir.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ir.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ah(){}ah.prototype=Ir.prototype;function Ol(e,t,n){this.props=e,this.context=t,this.refs=oh,this.updater=n||sh}var Rl=Ol.prototype=new ah;Rl.constructor=Ol;ih(Rl,Ir.prototype);Rl.isPureReactComponent=!0;var hu=Array.isArray,lh=Object.prototype.hasOwnProperty,Il={current:null},ch={key:!0,ref:!0,__self:!0,__source:!0};function uh(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)lh.call(t,r)&&!ch.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:$s,type:e,key:i,ref:o,props:s,_owner:Il.current}}function Fm(e,t){return{$$typeof:$s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Dl(e){return typeof e=="object"&&e!==null&&e.$$typeof===$s}function zm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var fu=/\/+/g;function zo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zm(""+e.key):t.toString(36)}function wi(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case $s:case Pm:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+zo(o,0):r,hu(s)?(n="",e!=null&&(n=e.replace(fu,"$&/")+"/"),wi(s,t,n,"",function(u){return u})):s!=null&&(Dl(s)&&(s=Fm(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fu,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",hu(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+zo(i,l);o+=wi(i,t,n,c,s)}else if(c=Bm(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+zo(i,l++),o+=wi(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ks(e,t,n){if(e==null)return e;var r=[],s=0;return wi(e,r,"","",function(i){return t.call(n,i,s++)}),r}function qm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ge={current:null},_i={transition:null},Wm={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:_i,ReactCurrentOwner:Il};function dh(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Ks,forEach:function(e,t,n){Ks(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ks(e,function(){t++}),t},toArray:function(e){return Ks(e,function(t){return t})||[]},only:function(e){if(!Dl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};se.Component=Ir;se.Fragment=Am;se.Profiler=Rm;se.PureComponent=Ol;se.StrictMode=Om;se.Suspense=Lm;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wm;se.act=dh;se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ih({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Il.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)lh.call(t,c)&&!ch.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:$s,type:e.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(e){return e={$$typeof:Dm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Im,_context:e},e.Consumer=e};se.createElement=uh;se.createFactory=function(e){var t=uh.bind(null,e);return t.type=e,t};se.createRef=function(){return{current:null}};se.forwardRef=function(e){return{$$typeof:$m,render:e}};se.isValidElement=Dl;se.lazy=function(e){return{$$typeof:Mm,_payload:{_status:-1,_result:e},_init:qm}};se.memo=function(e,t){return{$$typeof:Um,type:e,compare:t===void 0?null:t}};se.startTransition=function(e){var t=_i.transition;_i.transition={};try{e()}finally{_i.transition=t}};se.unstable_act=dh;se.useCallback=function(e,t){return Ge.current.useCallback(e,t)};se.useContext=function(e){return Ge.current.useContext(e)};se.useDebugValue=function(){};se.useDeferredValue=function(e){return Ge.current.useDeferredValue(e)};se.useEffect=function(e,t){return Ge.current.useEffect(e,t)};se.useId=function(){return Ge.current.useId()};se.useImperativeHandle=function(e,t,n){return Ge.current.useImperativeHandle(e,t,n)};se.useInsertionEffect=function(e,t){return Ge.current.useInsertionEffect(e,t)};se.useLayoutEffect=function(e,t){return Ge.current.useLayoutEffect(e,t)};se.useMemo=function(e,t){return Ge.current.useMemo(e,t)};se.useReducer=function(e,t,n){return Ge.current.useReducer(e,t,n)};se.useRef=function(e){return Ge.current.useRef(e)};se.useState=function(e){return Ge.current.useState(e)};se.useSyncExternalStore=function(e,t,n){return Ge.current.useSyncExternalStore(e,t,n)};se.useTransition=function(){return Ge.current.useTransition()};se.version="18.3.1";rh.exports=se;var b=rh.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm=b,Vm=Symbol.for("react.element"),Gm=Symbol.for("react.fragment"),Km=Object.prototype.hasOwnProperty,Qm=Hm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jm={key:!0,ref:!0,__self:!0,__source:!0};function hh(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Km.call(t,r)&&!Jm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Vm,type:e,key:i,ref:o,props:s,_owner:Qm.current}}lo.Fragment=Gm;lo.jsx=hh;lo.jsxs=hh;nh.exports=lo;var a=nh.exports,fh={exports:{}},lt={},ph={exports:{}},mh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,z){var L=I.length;I.push(z);e:for(;0<L;){var V=L-1>>>1,Y=I[V];if(0<s(Y,z))I[V]=z,I[L]=Y,L=V;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var z=I[0],L=I.pop();if(L!==z){I[0]=L;e:for(var V=0,Y=I.length,Qe=Y>>>1;V<Qe;){var nt=2*(V+1)-1,Ct=I[nt],B=nt+1,A=I[B];if(0>s(Ct,L))B<Y&&0>s(A,Ct)?(I[V]=A,I[B]=L,V=B):(I[V]=Ct,I[nt]=L,V=nt);else if(B<Y&&0>s(A,L))I[V]=A,I[B]=L,V=B;else break e}}return z}function s(I,z){var L=I.sortIndex-z.sortIndex;return L!==0?L:I.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,g=3,v=!1,w=!1,x=!1,O=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(I){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=I)r(u),z.sortIndex=z.expirationTime,t(c,z);else break;z=n(u)}}function S(I){if(x=!1,y(I),!w)if(n(c)!==null)w=!0,G(C);else{var z=n(u);z!==null&&xe(S,z.startTime-I)}}function C(I,z){w=!1,x&&(x=!1,m(R),R=-1),v=!0;var L=g;try{for(y(z),f=n(c);f!==null&&(!(f.expirationTime>z)||I&&!M());){var V=f.callback;if(typeof V=="function"){f.callback=null,g=f.priorityLevel;var Y=V(f.expirationTime<=z);z=e.unstable_now(),typeof Y=="function"?f.callback=Y:f===n(c)&&r(c),y(z)}else r(c);f=n(c)}if(f!==null)var Qe=!0;else{var nt=n(u);nt!==null&&xe(S,nt.startTime-z),Qe=!1}return Qe}finally{f=null,g=L,v=!1}}var j=!1,N=null,R=-1,H=5,E=-1;function M(){return!(e.unstable_now()-E<H)}function T(){if(N!==null){var I=e.unstable_now();E=I;var z=!0;try{z=N(!0,I)}finally{z?W():(j=!1,N=null)}}else j=!1}var W;if(typeof p=="function")W=function(){p(T)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Q=J.port2;J.port1.onmessage=T,W=function(){Q.postMessage(null)}}else W=function(){O(T,0)};function G(I){N=I,j||(j=!0,W())}function xe(I,z){R=O(function(){I(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,G(C))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(I){switch(g){case 1:case 2:case 3:var z=3;break;default:z=g}var L=g;g=z;try{return I()}finally{g=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var L=g;g=I;try{return z()}finally{g=L}},e.unstable_scheduleCallback=function(I,z,L){var V=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?V+L:V):L=V,I){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=L+Y,I={id:d++,callback:z,priorityLevel:I,startTime:L,expirationTime:Y,sortIndex:-1},L>V?(I.sortIndex=L,t(u,I),n(c)===null&&I===n(u)&&(x?(m(R),R=-1):x=!0,xe(S,L-V))):(I.sortIndex=Y,t(c,I),w||v||(w=!0,G(C))),I},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(I){var z=g;return function(){var L=g;g=z;try{return I.apply(this,arguments)}finally{g=L}}}})(mh);ph.exports=mh;var Ym=ph.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm=b,at=Ym;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gh=new Set,vs={};function qn(e,t){Nr(e,t),Nr(e+"Capture",t)}function Nr(e,t){for(vs[e]=t,e=0;e<t.length;e++)gh.add(t[e])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ea=Object.prototype.hasOwnProperty,Zm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pu={},mu={};function eg(e){return Ea.call(mu,e)?!0:Ea.call(pu,e)?!1:Zm.test(e)?mu[e]=!0:(pu[e]=!0,!1)}function tg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ng(e,t,n,r){if(t===null||typeof t>"u"||tg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ke(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ue[e]=new Ke(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ue[t]=new Ke(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ue[e]=new Ke(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ue[e]=new Ke(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ue[e]=new Ke(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ue[e]=new Ke(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ue[e]=new Ke(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ue[e]=new Ke(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ue[e]=new Ke(e,5,!1,e.toLowerCase(),null,!1,!1)});var $l=/[\-:]([a-z])/g;function Ll(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($l,Ll);Ue[t]=new Ke(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($l,Ll);Ue[t]=new Ke(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($l,Ll);Ue[t]=new Ke(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ue[e]=new Ke(e,1,!1,e.toLowerCase(),null,!1,!1)});Ue.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ue[e]=new Ke(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ul(e,t,n,r){var s=Ue.hasOwnProperty(t)?Ue[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ng(t,n,s,r)&&(n=null),r||s===null?eg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Kt=Xm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qs=Symbol.for("react.element"),ar=Symbol.for("react.portal"),lr=Symbol.for("react.fragment"),Ml=Symbol.for("react.strict_mode"),Ca=Symbol.for("react.profiler"),yh=Symbol.for("react.provider"),vh=Symbol.for("react.context"),Bl=Symbol.for("react.forward_ref"),Ta=Symbol.for("react.suspense"),Pa=Symbol.for("react.suspense_list"),Fl=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),wh=Symbol.for("react.offscreen"),gu=Symbol.iterator;function Wr(e){return e===null||typeof e!="object"?null:(e=gu&&e[gu]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,qo;function es(e){if(qo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qo=t&&t[1]||""}return`
`+qo+e}var Wo=!1;function Ho(e,t){if(!e||Wo)return"";Wo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Wo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?es(e):""}function rg(e){switch(e.tag){case 5:return es(e.type);case 16:return es("Lazy");case 13:return es("Suspense");case 19:return es("SuspenseList");case 0:case 2:case 15:return e=Ho(e.type,!1),e;case 11:return e=Ho(e.type.render,!1),e;case 1:return e=Ho(e.type,!0),e;default:return""}}function Aa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case lr:return"Fragment";case ar:return"Portal";case Ca:return"Profiler";case Ml:return"StrictMode";case Ta:return"Suspense";case Pa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vh:return(e.displayName||"Context")+".Consumer";case yh:return(e._context.displayName||"Context")+".Provider";case Bl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fl:return t=e.displayName||null,t!==null?t:Aa(e.type)||"Memo";case tn:t=e._payload,e=e._init;try{return Aa(e(t))}catch{}}return null}function sg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Aa(t);case 8:return t===Ml?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _h(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ig(e){var t=_h(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Js(e){e._valueTracker||(e._valueTracker=ig(e))}function xh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_h(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function $i(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Oa(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function yu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sh(e,t){t=t.checked,t!=null&&Ul(e,"checked",t,!1)}function Ra(e,t){Sh(e,t);var n=yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ia(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ia(e,t.type,yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ia(e,t,n){(t!=="number"||$i(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ts=Array.isArray;function wr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Da(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(ts(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yn(n)}}function kh(e,t){var n=yn(t.value),r=yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _u(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $a(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ys,Nh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ys=Ys||document.createElement("div"),Ys.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ys.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ws(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var is={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},og=["Webkit","ms","Moz","O"];Object.keys(is).forEach(function(e){og.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),is[t]=is[e]})});function bh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||is.hasOwnProperty(e)&&is[e]?(""+t).trim():t+"px"}function Eh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=bh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ag=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function La(e,t){if(t){if(ag[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Ua(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ma=null;function zl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ba=null,_r=null,xr=null;function xu(e){if(e=Ms(e)){if(typeof Ba!="function")throw Error(D(280));var t=e.stateNode;t&&(t=po(t),Ba(e.stateNode,e.type,t))}}function Ch(e){_r?xr?xr.push(e):xr=[e]:_r=e}function Th(){if(_r){var e=_r,t=xr;if(xr=_r=null,xu(e),t)for(e=0;e<t.length;e++)xu(t[e])}}function Ph(e,t){return e(t)}function Ah(){}var Vo=!1;function Oh(e,t,n){if(Vo)return e(t,n);Vo=!0;try{return Ph(e,t,n)}finally{Vo=!1,(_r!==null||xr!==null)&&(Ah(),Th())}}function _s(e,t){var n=e.stateNode;if(n===null)return null;var r=po(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var Fa=!1;if(Wt)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){Fa=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{Fa=!1}function lg(e,t,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var os=!1,Li=null,Ui=!1,za=null,cg={onError:function(e){os=!0,Li=e}};function ug(e,t,n,r,s,i,o,l,c){os=!1,Li=null,lg.apply(cg,arguments)}function dg(e,t,n,r,s,i,o,l,c){if(ug.apply(this,arguments),os){if(os){var u=Li;os=!1,Li=null}else throw Error(D(198));Ui||(Ui=!0,za=u)}}function Wn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Rh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Su(e){if(Wn(e)!==e)throw Error(D(188))}function hg(e){var t=e.alternate;if(!t){if(t=Wn(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Su(s),e;if(i===r)return Su(s),t;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Ih(e){return e=hg(e),e!==null?Dh(e):null}function Dh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Dh(e);if(t!==null)return t;e=e.sibling}return null}var $h=at.unstable_scheduleCallback,ku=at.unstable_cancelCallback,fg=at.unstable_shouldYield,pg=at.unstable_requestPaint,je=at.unstable_now,mg=at.unstable_getCurrentPriorityLevel,ql=at.unstable_ImmediatePriority,Lh=at.unstable_UserBlockingPriority,Mi=at.unstable_NormalPriority,gg=at.unstable_LowPriority,Uh=at.unstable_IdlePriority,co=null,It=null;function yg(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(co,e,void 0,(e.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:_g,vg=Math.log,wg=Math.LN2;function _g(e){return e>>>=0,e===0?32:31-(vg(e)/wg|0)|0}var Xs=64,Zs=4194304;function ns(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ns(l):(i&=o,i!==0&&(r=ns(i)))}else o=n&~s,o!==0?r=ns(o):i!==0&&(r=ns(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Nt(t),s=1<<n,r|=e[n],t&=~s;return r}function xg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Nt(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=xg(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function qa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Mh(){var e=Xs;return Xs<<=1,!(Xs&4194240)&&(Xs=64),e}function Go(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ls(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nt(t),e[t]=n}function kg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Nt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Wl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Nt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var le=0;function Bh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Fh,Hl,zh,qh,Wh,Wa=!1,ei=[],cn=null,un=null,dn=null,xs=new Map,Ss=new Map,rn=[],jg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ju(e,t){switch(e){case"focusin":case"focusout":cn=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":xs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(t.pointerId)}}function Vr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ms(t),t!==null&&Hl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Ng(e,t,n,r,s){switch(t){case"focusin":return cn=Vr(cn,e,t,n,r,s),!0;case"dragenter":return un=Vr(un,e,t,n,r,s),!0;case"mouseover":return dn=Vr(dn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return xs.set(i,Vr(xs.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ss.set(i,Vr(Ss.get(i)||null,e,t,n,r,s)),!0}return!1}function Hh(e){var t=Rn(e.target);if(t!==null){var n=Wn(t);if(n!==null){if(t=n.tag,t===13){if(t=Rh(n),t!==null){e.blockedOn=t,Wh(e.priority,function(){zh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ha(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ma=r,n.target.dispatchEvent(r),Ma=null}else return t=Ms(n),t!==null&&Hl(t),e.blockedOn=n,!1;t.shift()}return!0}function Nu(e,t,n){xi(e)&&n.delete(t)}function bg(){Wa=!1,cn!==null&&xi(cn)&&(cn=null),un!==null&&xi(un)&&(un=null),dn!==null&&xi(dn)&&(dn=null),xs.forEach(Nu),Ss.forEach(Nu)}function Gr(e,t){e.blockedOn===t&&(e.blockedOn=null,Wa||(Wa=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,bg)))}function ks(e){function t(s){return Gr(s,e)}if(0<ei.length){Gr(ei[0],e);for(var n=1;n<ei.length;n++){var r=ei[n];r.blockedOn===e&&(r.blockedOn=null)}}for(cn!==null&&Gr(cn,e),un!==null&&Gr(un,e),dn!==null&&Gr(dn,e),xs.forEach(t),Ss.forEach(t),n=0;n<rn.length;n++)r=rn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<rn.length&&(n=rn[0],n.blockedOn===null);)Hh(n),n.blockedOn===null&&rn.shift()}var Sr=Kt.ReactCurrentBatchConfig,Fi=!0;function Eg(e,t,n,r){var s=le,i=Sr.transition;Sr.transition=null;try{le=1,Vl(e,t,n,r)}finally{le=s,Sr.transition=i}}function Cg(e,t,n,r){var s=le,i=Sr.transition;Sr.transition=null;try{le=4,Vl(e,t,n,r)}finally{le=s,Sr.transition=i}}function Vl(e,t,n,r){if(Fi){var s=Ha(e,t,n,r);if(s===null)ra(e,t,r,zi,n),ju(e,r);else if(Ng(s,e,t,n,r))r.stopPropagation();else if(ju(e,r),t&4&&-1<jg.indexOf(e)){for(;s!==null;){var i=Ms(s);if(i!==null&&Fh(i),i=Ha(e,t,n,r),i===null&&ra(e,t,r,zi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ra(e,t,r,null,n)}}var zi=null;function Ha(e,t,n,r){if(zi=null,e=zl(r),e=Rn(e),e!==null)if(t=Wn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Rh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zi=e,null}function Vh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mg()){case ql:return 1;case Lh:return 4;case Mi:case gg:return 16;case Uh:return 536870912;default:return 16}default:return 16}}var an=null,Gl=null,Si=null;function Gh(){if(Si)return Si;var e,t=Gl,n=t.length,r,s="value"in an?an.value:an.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Si=s.slice(e,1<r?1-r:void 0)}function ki(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ti(){return!0}function bu(){return!1}function ct(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ti:bu,this.isPropagationStopped=bu,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),t}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kl=ct(Dr),Us=_e({},Dr,{view:0,detail:0}),Tg=ct(Us),Ko,Qo,Kr,uo=_e({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ql,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kr&&(Kr&&e.type==="mousemove"?(Ko=e.screenX-Kr.screenX,Qo=e.screenY-Kr.screenY):Qo=Ko=0,Kr=e),Ko)},movementY:function(e){return"movementY"in e?e.movementY:Qo}}),Eu=ct(uo),Pg=_e({},uo,{dataTransfer:0}),Ag=ct(Pg),Og=_e({},Us,{relatedTarget:0}),Jo=ct(Og),Rg=_e({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ig=ct(Rg),Dg=_e({},Dr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$g=ct(Dg),Lg=_e({},Dr,{data:0}),Cu=ct(Lg),Ug={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Bg[e])?!!t[e]:!1}function Ql(){return Fg}var zg=_e({},Us,{key:function(e){if(e.key){var t=Ug[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ki(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ql,charCode:function(e){return e.type==="keypress"?ki(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ki(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qg=ct(zg),Wg=_e({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tu=ct(Wg),Hg=_e({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ql}),Vg=ct(Hg),Gg=_e({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kg=ct(Gg),Qg=_e({},uo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jg=ct(Qg),Yg=[9,13,27,32],Jl=Wt&&"CompositionEvent"in window,as=null;Wt&&"documentMode"in document&&(as=document.documentMode);var Xg=Wt&&"TextEvent"in window&&!as,Kh=Wt&&(!Jl||as&&8<as&&11>=as),Pu=" ",Au=!1;function Qh(e,t){switch(e){case"keyup":return Yg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cr=!1;function Zg(e,t){switch(e){case"compositionend":return Jh(t);case"keypress":return t.which!==32?null:(Au=!0,Pu);case"textInput":return e=t.data,e===Pu&&Au?null:e;default:return null}}function ey(e,t){if(cr)return e==="compositionend"||!Jl&&Qh(e,t)?(e=Gh(),Si=Gl=an=null,cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Kh&&t.locale!=="ko"?null:t.data;default:return null}}var ty={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ou(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ty[e.type]:t==="textarea"}function Yh(e,t,n,r){Ch(r),t=qi(t,"onChange"),0<t.length&&(n=new Kl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ls=null,js=null;function ny(e){cf(e,0)}function ho(e){var t=hr(e);if(xh(t))return e}function ry(e,t){if(e==="change")return t}var Xh=!1;if(Wt){var Yo;if(Wt){var Xo="oninput"in document;if(!Xo){var Ru=document.createElement("div");Ru.setAttribute("oninput","return;"),Xo=typeof Ru.oninput=="function"}Yo=Xo}else Yo=!1;Xh=Yo&&(!document.documentMode||9<document.documentMode)}function Iu(){ls&&(ls.detachEvent("onpropertychange",Zh),js=ls=null)}function Zh(e){if(e.propertyName==="value"&&ho(js)){var t=[];Yh(t,js,e,zl(e)),Oh(ny,t)}}function sy(e,t,n){e==="focusin"?(Iu(),ls=t,js=n,ls.attachEvent("onpropertychange",Zh)):e==="focusout"&&Iu()}function iy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ho(js)}function oy(e,t){if(e==="click")return ho(t)}function ay(e,t){if(e==="input"||e==="change")return ho(t)}function ly(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Et=typeof Object.is=="function"?Object.is:ly;function Ns(e,t){if(Et(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ea.call(t,s)||!Et(e[s],t[s]))return!1}return!0}function Du(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $u(e,t){var n=Du(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Du(n)}}function ef(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ef(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tf(){for(var e=window,t=$i();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$i(e.document)}return t}function Yl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cy(e){var t=tf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ef(n.ownerDocument.documentElement,n)){if(r!==null&&Yl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=$u(n,i);var o=$u(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uy=Wt&&"documentMode"in document&&11>=document.documentMode,ur=null,Va=null,cs=null,Ga=!1;function Lu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ga||ur==null||ur!==$i(r)||(r=ur,"selectionStart"in r&&Yl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cs&&Ns(cs,r)||(cs=r,r=qi(Va,"onSelect"),0<r.length&&(t=new Kl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ur)))}function ni(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionend:ni("Transition","TransitionEnd")},Zo={},nf={};Wt&&(nf=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function fo(e){if(Zo[e])return Zo[e];if(!dr[e])return e;var t=dr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in nf)return Zo[e]=t[n];return e}var rf=fo("animationend"),sf=fo("animationiteration"),of=fo("animationstart"),af=fo("transitionend"),lf=new Map,Uu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(e,t){lf.set(e,t),qn(t,[e])}for(var ea=0;ea<Uu.length;ea++){var ta=Uu[ea],dy=ta.toLowerCase(),hy=ta[0].toUpperCase()+ta.slice(1);wn(dy,"on"+hy)}wn(rf,"onAnimationEnd");wn(sf,"onAnimationIteration");wn(of,"onAnimationStart");wn("dblclick","onDoubleClick");wn("focusin","onFocus");wn("focusout","onBlur");wn(af,"onTransitionEnd");Nr("onMouseEnter",["mouseout","mouseover"]);Nr("onMouseLeave",["mouseout","mouseover"]);Nr("onPointerEnter",["pointerout","pointerover"]);Nr("onPointerLeave",["pointerout","pointerover"]);qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qn("onBeforeInput",["compositionend","keypress","textInput","paste"]);qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fy=new Set("cancel close invalid load scroll toggle".split(" ").concat(rs));function Mu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,dg(r,t,void 0,e),e.currentTarget=null}function cf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Mu(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Mu(s,l,u),i=c}}}if(Ui)throw e=za,Ui=!1,za=null,e}function pe(e,t){var n=t[Xa];n===void 0&&(n=t[Xa]=new Set);var r=e+"__bubble";n.has(r)||(uf(t,e,2,!1),n.add(r))}function na(e,t,n){var r=0;t&&(r|=4),uf(n,e,r,t)}var ri="_reactListening"+Math.random().toString(36).slice(2);function bs(e){if(!e[ri]){e[ri]=!0,gh.forEach(function(n){n!=="selectionchange"&&(fy.has(n)||na(n,!1,e),na(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ri]||(t[ri]=!0,na("selectionchange",!1,t))}}function uf(e,t,n,r){switch(Vh(t)){case 1:var s=Eg;break;case 4:s=Cg;break;default:s=Vl}n=s.bind(null,t,n,e),s=void 0,!Fa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ra(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Rn(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Oh(function(){var u=i,d=zl(n),f=[];e:{var g=lf.get(e);if(g!==void 0){var v=Kl,w=e;switch(e){case"keypress":if(ki(n)===0)break e;case"keydown":case"keyup":v=qg;break;case"focusin":w="focus",v=Jo;break;case"focusout":w="blur",v=Jo;break;case"beforeblur":case"afterblur":v=Jo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Ag;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Vg;break;case rf:case sf:case of:v=Ig;break;case af:v=Kg;break;case"scroll":v=Tg;break;case"wheel":v=Jg;break;case"copy":case"cut":case"paste":v=$g;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Tu}var x=(t&4)!==0,O=!x&&e==="scroll",m=x?g!==null?g+"Capture":null:g;x=[];for(var p=u,y;p!==null;){y=p;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,m!==null&&(S=_s(p,m),S!=null&&x.push(Es(p,S,y)))),O)break;p=p.return}0<x.length&&(g=new v(g,w,null,n,d),f.push({event:g,listeners:x}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==Ma&&(w=n.relatedTarget||n.fromElement)&&(Rn(w)||w[Ht]))break e;if((v||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=u,w=w?Rn(w):null,w!==null&&(O=Wn(w),w!==O||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=u),v!==w)){if(x=Eu,S="onMouseLeave",m="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(x=Tu,S="onPointerLeave",m="onPointerEnter",p="pointer"),O=v==null?g:hr(v),y=w==null?g:hr(w),g=new x(S,p+"leave",v,n,d),g.target=O,g.relatedTarget=y,S=null,Rn(d)===u&&(x=new x(m,p+"enter",w,n,d),x.target=y,x.relatedTarget=O,S=x),O=S,v&&w)t:{for(x=v,m=w,p=0,y=x;y;y=Jn(y))p++;for(y=0,S=m;S;S=Jn(S))y++;for(;0<p-y;)x=Jn(x),p--;for(;0<y-p;)m=Jn(m),y--;for(;p--;){if(x===m||m!==null&&x===m.alternate)break t;x=Jn(x),m=Jn(m)}x=null}else x=null;v!==null&&Bu(f,g,v,x,!1),w!==null&&O!==null&&Bu(f,O,w,x,!0)}}e:{if(g=u?hr(u):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var C=ry;else if(Ou(g))if(Xh)C=ay;else{C=iy;var j=sy}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(C=oy);if(C&&(C=C(e,u))){Yh(f,C,n,d);break e}j&&j(e,g,u),e==="focusout"&&(j=g._wrapperState)&&j.controlled&&g.type==="number"&&Ia(g,"number",g.value)}switch(j=u?hr(u):window,e){case"focusin":(Ou(j)||j.contentEditable==="true")&&(ur=j,Va=u,cs=null);break;case"focusout":cs=Va=ur=null;break;case"mousedown":Ga=!0;break;case"contextmenu":case"mouseup":case"dragend":Ga=!1,Lu(f,n,d);break;case"selectionchange":if(uy)break;case"keydown":case"keyup":Lu(f,n,d)}var N;if(Jl)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else cr?Qh(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Kh&&n.locale!=="ko"&&(cr||R!=="onCompositionStart"?R==="onCompositionEnd"&&cr&&(N=Gh()):(an=d,Gl="value"in an?an.value:an.textContent,cr=!0)),j=qi(u,R),0<j.length&&(R=new Cu(R,e,null,n,d),f.push({event:R,listeners:j}),N?R.data=N:(N=Jh(n),N!==null&&(R.data=N)))),(N=Xg?Zg(e,n):ey(e,n))&&(u=qi(u,"onBeforeInput"),0<u.length&&(d=new Cu("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=N))}cf(f,t)})}function Es(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_s(e,n),i!=null&&r.unshift(Es(e,i,s)),i=_s(e,t),i!=null&&r.push(Es(e,i,s))),e=e.return}return r}function Jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Bu(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=_s(n,i),c!=null&&o.unshift(Es(n,c,l))):s||(c=_s(n,i),c!=null&&o.push(Es(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var py=/\r\n?/g,my=/\u0000|\uFFFD/g;function Fu(e){return(typeof e=="string"?e:""+e).replace(py,`
`).replace(my,"")}function si(e,t,n){if(t=Fu(t),Fu(e)!==t&&n)throw Error(D(425))}function Wi(){}var Ka=null,Qa=null;function Ja(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ya=typeof setTimeout=="function"?setTimeout:void 0,gy=typeof clearTimeout=="function"?clearTimeout:void 0,zu=typeof Promise=="function"?Promise:void 0,yy=typeof queueMicrotask=="function"?queueMicrotask:typeof zu<"u"?function(e){return zu.resolve(null).then(e).catch(vy)}:Ya;function vy(e){setTimeout(function(){throw e})}function sa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ks(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ks(t)}function hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $r=Math.random().toString(36).slice(2),Rt="__reactFiber$"+$r,Cs="__reactProps$"+$r,Ht="__reactContainer$"+$r,Xa="__reactEvents$"+$r,wy="__reactListeners$"+$r,_y="__reactHandles$"+$r;function Rn(e){var t=e[Rt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ht]||n[Rt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qu(e);e!==null;){if(n=e[Rt])return n;e=qu(e)}return t}e=n,n=e.parentNode}return null}function Ms(e){return e=e[Rt]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function po(e){return e[Cs]||null}var Za=[],fr=-1;function _n(e){return{current:e}}function me(e){0>fr||(e.current=Za[fr],Za[fr]=null,fr--)}function de(e,t){fr++,Za[fr]=e.current,e.current=t}var vn={},ze=_n(vn),Ze=_n(!1),Un=vn;function br(e,t){var n=e.type.contextTypes;if(!n)return vn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function et(e){return e=e.childContextTypes,e!=null}function Hi(){me(Ze),me(ze)}function Wu(e,t,n){if(ze.current!==vn)throw Error(D(168));de(ze,t),de(Ze,n)}function df(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,sg(e)||"Unknown",s));return _e({},n,r)}function Vi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vn,Un=ze.current,de(ze,e),de(Ze,Ze.current),!0}function Hu(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=df(e,t,Un),r.__reactInternalMemoizedMergedChildContext=e,me(Ze),me(ze),de(ze,e)):me(Ze),de(Ze,n)}var Bt=null,mo=!1,ia=!1;function hf(e){Bt===null?Bt=[e]:Bt.push(e)}function xy(e){mo=!0,hf(e)}function xn(){if(!ia&&Bt!==null){ia=!0;var e=0,t=le;try{var n=Bt;for(le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Bt=null,mo=!1}catch(s){throw Bt!==null&&(Bt=Bt.slice(e+1)),$h(ql,xn),s}finally{le=t,ia=!1}}return null}var pr=[],mr=0,Gi=null,Ki=0,ut=[],dt=0,Mn=null,Ft=1,zt="";function Tn(e,t){pr[mr++]=Ki,pr[mr++]=Gi,Gi=e,Ki=t}function ff(e,t,n){ut[dt++]=Ft,ut[dt++]=zt,ut[dt++]=Mn,Mn=e;var r=Ft;e=zt;var s=32-Nt(r)-1;r&=~(1<<s),n+=1;var i=32-Nt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ft=1<<32-Nt(t)+s|n<<s|r,zt=i+e}else Ft=1<<i|n<<s|r,zt=e}function Xl(e){e.return!==null&&(Tn(e,1),ff(e,1,0))}function Zl(e){for(;e===Gi;)Gi=pr[--mr],pr[mr]=null,Ki=pr[--mr],pr[mr]=null;for(;e===Mn;)Mn=ut[--dt],ut[dt]=null,zt=ut[--dt],ut[dt]=null,Ft=ut[--dt],ut[dt]=null}var ot=null,it=null,ye=!1,jt=null;function pf(e,t){var n=ht(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Vu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ot=e,it=hn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ot=e,it=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Mn!==null?{id:Ft,overflow:zt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ht(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ot=e,it=null,!0):!1;default:return!1}}function el(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tl(e){if(ye){var t=it;if(t){var n=t;if(!Vu(e,t)){if(el(e))throw Error(D(418));t=hn(n.nextSibling);var r=ot;t&&Vu(e,t)?pf(r,n):(e.flags=e.flags&-4097|2,ye=!1,ot=e)}}else{if(el(e))throw Error(D(418));e.flags=e.flags&-4097|2,ye=!1,ot=e}}}function Gu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ot=e}function ii(e){if(e!==ot)return!1;if(!ye)return Gu(e),ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ja(e.type,e.memoizedProps)),t&&(t=it)){if(el(e))throw mf(),Error(D(418));for(;t;)pf(e,t),t=hn(t.nextSibling)}if(Gu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){it=hn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}it=null}}else it=ot?hn(e.stateNode.nextSibling):null;return!0}function mf(){for(var e=it;e;)e=hn(e.nextSibling)}function Er(){it=ot=null,ye=!1}function ec(e){jt===null?jt=[e]:jt.push(e)}var Sy=Kt.ReactCurrentBatchConfig;function Qr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function oi(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ku(e){var t=e._init;return t(e._payload)}function gf(e){function t(m,p){if(e){var y=m.deletions;y===null?(m.deletions=[p],m.flags|=16):y.push(p)}}function n(m,p){if(!e)return null;for(;p!==null;)t(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=gn(m,p),m.index=0,m.sibling=null,m}function i(m,p,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<p?(m.flags|=2,p):y):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,p,y,S){return p===null||p.tag!==6?(p=ha(y,m.mode,S),p.return=m,p):(p=s(p,y),p.return=m,p)}function c(m,p,y,S){var C=y.type;return C===lr?d(m,p,y.props.children,S,y.key):p!==null&&(p.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===tn&&Ku(C)===p.type)?(S=s(p,y.props),S.ref=Qr(m,p,y),S.return=m,S):(S=Pi(y.type,y.key,y.props,null,m.mode,S),S.ref=Qr(m,p,y),S.return=m,S)}function u(m,p,y,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=fa(y,m.mode,S),p.return=m,p):(p=s(p,y.children||[]),p.return=m,p)}function d(m,p,y,S,C){return p===null||p.tag!==7?(p=Ln(y,m.mode,S,C),p.return=m,p):(p=s(p,y),p.return=m,p)}function f(m,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=ha(""+p,m.mode,y),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Qs:return y=Pi(p.type,p.key,p.props,null,m.mode,y),y.ref=Qr(m,null,p),y.return=m,y;case ar:return p=fa(p,m.mode,y),p.return=m,p;case tn:var S=p._init;return f(m,S(p._payload),y)}if(ts(p)||Wr(p))return p=Ln(p,m.mode,y,null),p.return=m,p;oi(m,p)}return null}function g(m,p,y,S){var C=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return C!==null?null:l(m,p,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qs:return y.key===C?c(m,p,y,S):null;case ar:return y.key===C?u(m,p,y,S):null;case tn:return C=y._init,g(m,p,C(y._payload),S)}if(ts(y)||Wr(y))return C!==null?null:d(m,p,y,S,null);oi(m,y)}return null}function v(m,p,y,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(y)||null,l(p,m,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Qs:return m=m.get(S.key===null?y:S.key)||null,c(p,m,S,C);case ar:return m=m.get(S.key===null?y:S.key)||null,u(p,m,S,C);case tn:var j=S._init;return v(m,p,y,j(S._payload),C)}if(ts(S)||Wr(S))return m=m.get(y)||null,d(p,m,S,C,null);oi(p,S)}return null}function w(m,p,y,S){for(var C=null,j=null,N=p,R=p=0,H=null;N!==null&&R<y.length;R++){N.index>R?(H=N,N=null):H=N.sibling;var E=g(m,N,y[R],S);if(E===null){N===null&&(N=H);break}e&&N&&E.alternate===null&&t(m,N),p=i(E,p,R),j===null?C=E:j.sibling=E,j=E,N=H}if(R===y.length)return n(m,N),ye&&Tn(m,R),C;if(N===null){for(;R<y.length;R++)N=f(m,y[R],S),N!==null&&(p=i(N,p,R),j===null?C=N:j.sibling=N,j=N);return ye&&Tn(m,R),C}for(N=r(m,N);R<y.length;R++)H=v(N,m,R,y[R],S),H!==null&&(e&&H.alternate!==null&&N.delete(H.key===null?R:H.key),p=i(H,p,R),j===null?C=H:j.sibling=H,j=H);return e&&N.forEach(function(M){return t(m,M)}),ye&&Tn(m,R),C}function x(m,p,y,S){var C=Wr(y);if(typeof C!="function")throw Error(D(150));if(y=C.call(y),y==null)throw Error(D(151));for(var j=C=null,N=p,R=p=0,H=null,E=y.next();N!==null&&!E.done;R++,E=y.next()){N.index>R?(H=N,N=null):H=N.sibling;var M=g(m,N,E.value,S);if(M===null){N===null&&(N=H);break}e&&N&&M.alternate===null&&t(m,N),p=i(M,p,R),j===null?C=M:j.sibling=M,j=M,N=H}if(E.done)return n(m,N),ye&&Tn(m,R),C;if(N===null){for(;!E.done;R++,E=y.next())E=f(m,E.value,S),E!==null&&(p=i(E,p,R),j===null?C=E:j.sibling=E,j=E);return ye&&Tn(m,R),C}for(N=r(m,N);!E.done;R++,E=y.next())E=v(N,m,R,E.value,S),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?R:E.key),p=i(E,p,R),j===null?C=E:j.sibling=E,j=E);return e&&N.forEach(function(T){return t(m,T)}),ye&&Tn(m,R),C}function O(m,p,y,S){if(typeof y=="object"&&y!==null&&y.type===lr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Qs:e:{for(var C=y.key,j=p;j!==null;){if(j.key===C){if(C=y.type,C===lr){if(j.tag===7){n(m,j.sibling),p=s(j,y.props.children),p.return=m,m=p;break e}}else if(j.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===tn&&Ku(C)===j.type){n(m,j.sibling),p=s(j,y.props),p.ref=Qr(m,j,y),p.return=m,m=p;break e}n(m,j);break}else t(m,j);j=j.sibling}y.type===lr?(p=Ln(y.props.children,m.mode,S,y.key),p.return=m,m=p):(S=Pi(y.type,y.key,y.props,null,m.mode,S),S.ref=Qr(m,p,y),S.return=m,m=S)}return o(m);case ar:e:{for(j=y.key;p!==null;){if(p.key===j)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(m,p.sibling),p=s(p,y.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else t(m,p);p=p.sibling}p=fa(y,m.mode,S),p.return=m,m=p}return o(m);case tn:return j=y._init,O(m,p,j(y._payload),S)}if(ts(y))return w(m,p,y,S);if(Wr(y))return x(m,p,y,S);oi(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(m,p.sibling),p=s(p,y),p.return=m,m=p):(n(m,p),p=ha(y,m.mode,S),p.return=m,m=p),o(m)):n(m,p)}return O}var Cr=gf(!0),yf=gf(!1),Qi=_n(null),Ji=null,gr=null,tc=null;function nc(){tc=gr=Ji=null}function rc(e){var t=Qi.current;me(Qi),e._currentValue=t}function nl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function kr(e,t){Ji=e,tc=gr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xe=!0),e.firstContext=null)}function mt(e){var t=e._currentValue;if(tc!==e)if(e={context:e,memoizedValue:t,next:null},gr===null){if(Ji===null)throw Error(D(308));gr=e,Ji.dependencies={lanes:0,firstContext:e}}else gr=gr.next=e;return t}var In=null;function sc(e){In===null?In=[e]:In.push(e)}function vf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,sc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Vt(e,r)}function Vt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var nn=!1;function ic(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Vt(e,n)}return s=r.interleaved,s===null?(t.next=t,sc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Vt(e,n)}function ji(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wl(e,n)}}function Qu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yi(e,t,n,r){var s=e.updateQueue;nn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,l=i;do{var g=l.lane,v=l.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,x=l;switch(g=t,v=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){f=w.call(v,f,g);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,g=typeof w=="function"?w.call(v,f,g):w,g==null)break e;f=_e({},f,g);break e;case 2:nn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else v={eventTime:v,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=v,c=f):d=d.next=v,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Fn|=o,e.lanes=o,e.memoizedState=f}}function Ju(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var Bs={},Dt=_n(Bs),Ts=_n(Bs),Ps=_n(Bs);function Dn(e){if(e===Bs)throw Error(D(174));return e}function oc(e,t){switch(de(Ps,t),de(Ts,e),de(Dt,Bs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$a(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$a(t,e)}me(Dt),de(Dt,t)}function Tr(){me(Dt),me(Ts),me(Ps)}function _f(e){Dn(Ps.current);var t=Dn(Dt.current),n=$a(t,e.type);t!==n&&(de(Ts,e),de(Dt,n))}function ac(e){Ts.current===e&&(me(Dt),me(Ts))}var ve=_n(0);function Xi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oa=[];function lc(){for(var e=0;e<oa.length;e++)oa[e]._workInProgressVersionPrimary=null;oa.length=0}var Ni=Kt.ReactCurrentDispatcher,aa=Kt.ReactCurrentBatchConfig,Bn=0,we=null,Ae=null,Ie=null,Zi=!1,us=!1,As=0,ky=0;function Me(){throw Error(D(321))}function cc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Et(e[n],t[n]))return!1;return!0}function uc(e,t,n,r,s,i){if(Bn=i,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ni.current=e===null||e.memoizedState===null?Ey:Cy,e=n(r,s),us){i=0;do{if(us=!1,As=0,25<=i)throw Error(D(301));i+=1,Ie=Ae=null,t.updateQueue=null,Ni.current=Ty,e=n(r,s)}while(us)}if(Ni.current=eo,t=Ae!==null&&Ae.next!==null,Bn=0,Ie=Ae=we=null,Zi=!1,t)throw Error(D(300));return e}function dc(){var e=As!==0;return As=0,e}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?we.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function gt(){if(Ae===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Ae.next;var t=Ie===null?we.memoizedState:Ie.next;if(t!==null)Ie=t,Ae=e;else{if(e===null)throw Error(D(310));Ae=e,e={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},Ie===null?we.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function Os(e,t){return typeof t=="function"?t(e):t}function la(e){var t=gt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=Ae,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Bn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,we.lanes|=d,Fn|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,Et(r,t.memoizedState)||(Xe=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,we.lanes|=i,Fn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ca(e){var t=gt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Et(i,t.memoizedState)||(Xe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function xf(){}function Sf(e,t){var n=we,r=gt(),s=t(),i=!Et(r.memoizedState,s);if(i&&(r.memoizedState=s,Xe=!0),r=r.queue,hc(Nf.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,Rs(9,jf.bind(null,n,r,s,t),void 0,null),De===null)throw Error(D(349));Bn&30||kf(n,t,s)}return s}function kf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function jf(e,t,n,r){t.value=n,t.getSnapshot=r,bf(t)&&Ef(e)}function Nf(e,t,n){return n(function(){bf(t)&&Ef(e)})}function bf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Et(e,n)}catch{return!0}}function Ef(e){var t=Vt(e,1);t!==null&&bt(t,e,1,-1)}function Yu(e){var t=At();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:e},t.queue=e,e=e.dispatch=by.bind(null,we,e),[t.memoizedState,e]}function Rs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Cf(){return gt().memoizedState}function bi(e,t,n,r){var s=At();we.flags|=e,s.memoizedState=Rs(1|t,n,void 0,r===void 0?null:r)}function go(e,t,n,r){var s=gt();r=r===void 0?null:r;var i=void 0;if(Ae!==null){var o=Ae.memoizedState;if(i=o.destroy,r!==null&&cc(r,o.deps)){s.memoizedState=Rs(t,n,i,r);return}}we.flags|=e,s.memoizedState=Rs(1|t,n,i,r)}function Xu(e,t){return bi(8390656,8,e,t)}function hc(e,t){return go(2048,8,e,t)}function Tf(e,t){return go(4,2,e,t)}function Pf(e,t){return go(4,4,e,t)}function Af(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Of(e,t,n){return n=n!=null?n.concat([e]):null,go(4,4,Af.bind(null,t,e),n)}function fc(){}function Rf(e,t){var n=gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function If(e,t){var n=gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Df(e,t,n){return Bn&21?(Et(n,t)||(n=Mh(),we.lanes|=n,Fn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xe=!0),e.memoizedState=n)}function jy(e,t){var n=le;le=n!==0&&4>n?n:4,e(!0);var r=aa.transition;aa.transition={};try{e(!1),t()}finally{le=n,aa.transition=r}}function $f(){return gt().memoizedState}function Ny(e,t,n){var r=mn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lf(e))Uf(t,n);else if(n=vf(e,t,n,r),n!==null){var s=Ve();bt(n,e,r,s),Mf(n,t,r)}}function by(e,t,n){var r=mn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lf(e))Uf(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Et(l,o)){var c=t.interleaved;c===null?(s.next=s,sc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=vf(e,t,s,r),n!==null&&(s=Ve(),bt(n,e,r,s),Mf(n,t,r))}}function Lf(e){var t=e.alternate;return e===we||t!==null&&t===we}function Uf(e,t){us=Zi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Mf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wl(e,n)}}var eo={readContext:mt,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useInsertionEffect:Me,useLayoutEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useMutableSource:Me,useSyncExternalStore:Me,useId:Me,unstable_isNewReconciler:!1},Ey={readContext:mt,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:Xu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,bi(4194308,4,Af.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bi(4194308,4,e,t)},useInsertionEffect:function(e,t){return bi(4,2,e,t)},useMemo:function(e,t){var n=At();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=At();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ny.bind(null,we,e),[r.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:Yu,useDebugValue:fc,useDeferredValue:function(e){return At().memoizedState=e},useTransition:function(){var e=Yu(!1),t=e[0];return e=jy.bind(null,e[1]),At().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=we,s=At();if(ye){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),De===null)throw Error(D(349));Bn&30||kf(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Xu(Nf.bind(null,r,i,e),[e]),r.flags|=2048,Rs(9,jf.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=At(),t=De.identifierPrefix;if(ye){var n=zt,r=Ft;n=(r&~(1<<32-Nt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=As++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ky++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Cy={readContext:mt,useCallback:Rf,useContext:mt,useEffect:hc,useImperativeHandle:Of,useInsertionEffect:Tf,useLayoutEffect:Pf,useMemo:If,useReducer:la,useRef:Cf,useState:function(){return la(Os)},useDebugValue:fc,useDeferredValue:function(e){var t=gt();return Df(t,Ae.memoizedState,e)},useTransition:function(){var e=la(Os)[0],t=gt().memoizedState;return[e,t]},useMutableSource:xf,useSyncExternalStore:Sf,useId:$f,unstable_isNewReconciler:!1},Ty={readContext:mt,useCallback:Rf,useContext:mt,useEffect:hc,useImperativeHandle:Of,useInsertionEffect:Tf,useLayoutEffect:Pf,useMemo:If,useReducer:ca,useRef:Cf,useState:function(){return ca(Os)},useDebugValue:fc,useDeferredValue:function(e){var t=gt();return Ae===null?t.memoizedState=e:Df(t,Ae.memoizedState,e)},useTransition:function(){var e=ca(Os)[0],t=gt().memoizedState;return[e,t]},useMutableSource:xf,useSyncExternalStore:Sf,useId:$f,unstable_isNewReconciler:!1};function xt(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function rl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return(e=e._reactInternals)?Wn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ve(),s=mn(e),i=qt(r,s);i.payload=t,n!=null&&(i.callback=n),t=fn(e,i,s),t!==null&&(bt(t,e,s,r),ji(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ve(),s=mn(e),i=qt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=fn(e,i,s),t!==null&&(bt(t,e,s,r),ji(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ve(),r=mn(e),s=qt(n,r);s.tag=2,t!=null&&(s.callback=t),t=fn(e,s,r),t!==null&&(bt(t,e,r,n),ji(t,e,r))}};function Zu(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ns(n,r)||!Ns(s,i):!0}function Bf(e,t,n){var r=!1,s=vn,i=t.contextType;return typeof i=="object"&&i!==null?i=mt(i):(s=et(t)?Un:ze.current,r=t.contextTypes,i=(r=r!=null)?br(e,s):vn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ed(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function sl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ic(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=mt(i):(i=et(t)?Un:ze.current,s.context=br(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(rl(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&yo.enqueueReplaceState(s,s.state,null),Yi(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Pr(e,t){try{var n="",r=t;do n+=rg(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function il(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Py=typeof WeakMap=="function"?WeakMap:Map;function Ff(e,t,n){n=qt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){no||(no=!0,ml=r),il(e,t)},n}function zf(e,t,n){n=qt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){il(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){il(e,t),typeof r!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function td(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Py;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Wy.bind(null,e,t,n),t.then(e,e))}function nd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function rd(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qt(-1,1),t.tag=2,fn(n,t,1))),n.lanes|=1),e)}var Ay=Kt.ReactCurrentOwner,Xe=!1;function He(e,t,n,r){t.child=e===null?yf(t,null,n,r):Cr(t,e.child,n,r)}function sd(e,t,n,r,s){n=n.render;var i=t.ref;return kr(t,s),r=uc(e,t,n,r,i,s),n=dc(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Gt(e,t,s)):(ye&&n&&Xl(t),t.flags|=1,He(e,t,r,s),t.child)}function id(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!xc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,qf(e,t,i,r,s)):(e=Pi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ns,n(o,r)&&e.ref===t.ref)return Gt(e,t,s)}return t.flags|=1,e=gn(i,r),e.ref=t.ref,e.return=t,t.child=e}function qf(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ns(i,r)&&e.ref===t.ref)if(Xe=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Xe=!0);else return t.lanes=e.lanes,Gt(e,t,s)}return ol(e,t,n,r,s)}function Wf(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(vr,st),st|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(vr,st),st|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,de(vr,st),st|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,de(vr,st),st|=r;return He(e,t,s,n),t.child}function Hf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ol(e,t,n,r,s){var i=et(n)?Un:ze.current;return i=br(t,i),kr(t,s),n=uc(e,t,n,r,i,s),r=dc(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Gt(e,t,s)):(ye&&r&&Xl(t),t.flags|=1,He(e,t,n,s),t.child)}function od(e,t,n,r,s){if(et(n)){var i=!0;Vi(t)}else i=!1;if(kr(t,s),t.stateNode===null)Ei(e,t),Bf(t,n,r),sl(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=mt(u):(u=et(n)?Un:ze.current,u=br(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&ed(t,o,r,u),nn=!1;var g=t.memoizedState;o.state=g,Yi(t,r,o,s),c=t.memoizedState,l!==r||g!==c||Ze.current||nn?(typeof d=="function"&&(rl(t,n,d,r),c=t.memoizedState),(l=nn||Zu(t,n,l,r,g,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,wf(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:xt(t.type,l),o.props=u,f=t.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=mt(c):(c=et(n)?Un:ze.current,c=br(t,c));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||g!==c)&&ed(t,o,r,c),nn=!1,g=t.memoizedState,o.state=g,Yi(t,r,o,s);var w=t.memoizedState;l!==f||g!==w||Ze.current||nn?(typeof v=="function"&&(rl(t,n,v,r),w=t.memoizedState),(u=nn||Zu(t,n,u,r,g,w,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return al(e,t,n,r,i,s)}function al(e,t,n,r,s,i){Hf(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Hu(t,n,!1),Gt(e,t,i);r=t.stateNode,Ay.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Cr(t,e.child,null,i),t.child=Cr(t,null,l,i)):He(e,t,l,i),t.memoizedState=r.state,s&&Hu(t,n,!0),t.child}function Vf(e){var t=e.stateNode;t.pendingContext?Wu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Wu(e,t.context,!1),oc(e,t.containerInfo)}function ad(e,t,n,r,s){return Er(),ec(s),t.flags|=256,He(e,t,n,r),t.child}var ll={dehydrated:null,treeContext:null,retryLane:0};function cl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gf(e,t,n){var r=t.pendingProps,s=ve.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),de(ve,s&1),e===null)return tl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_o(o,r,0,null),e=Ln(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=cl(n),t.memoizedState=ll,e):pc(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Oy(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=gn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=gn(l,i):(i=Ln(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?cl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ll,r}return i=e.child,e=i.sibling,r=gn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function pc(e,t){return t=_o({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ai(e,t,n,r){return r!==null&&ec(r),Cr(t,e.child,null,n),e=pc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Oy(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=ua(Error(D(422))),ai(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=_o({mode:"visible",children:r.children},s,0,null),i=Ln(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Cr(t,e.child,null,o),t.child.memoizedState=cl(o),t.memoizedState=ll,i);if(!(t.mode&1))return ai(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(D(419)),r=ua(i,r,void 0),ai(e,t,o,r)}if(l=(o&e.childLanes)!==0,Xe||l){if(r=De,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vt(e,s),bt(r,e,s,-1))}return _c(),r=ua(Error(D(421))),ai(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Hy.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,it=hn(s.nextSibling),ot=t,ye=!0,jt=null,e!==null&&(ut[dt++]=Ft,ut[dt++]=zt,ut[dt++]=Mn,Ft=e.id,zt=e.overflow,Mn=t),t=pc(t,r.children),t.flags|=4096,t)}function ld(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),nl(e.return,t,n)}function da(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Kf(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(He(e,t,r.children,n),r=ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ld(e,n,t);else if(e.tag===19)ld(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(de(ve,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Xi(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),da(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Xi(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}da(t,!0,n,null,i);break;case"together":da(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ei(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ry(e,t,n){switch(t.tag){case 3:Vf(t),Er();break;case 5:_f(t);break;case 1:et(t.type)&&Vi(t);break;case 4:oc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;de(Qi,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(de(ve,ve.current&1),t.flags|=128,null):n&t.child.childLanes?Gf(e,t,n):(de(ve,ve.current&1),e=Gt(e,t,n),e!==null?e.sibling:null);de(ve,ve.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Kf(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(ve,ve.current),r)break;return null;case 22:case 23:return t.lanes=0,Wf(e,t,n)}return Gt(e,t,n)}var Qf,ul,Jf,Yf;Qf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ul=function(){};Jf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Dn(Dt.current);var i=null;switch(n){case"input":s=Oa(e,s),r=Oa(e,r),i=[];break;case"select":s=_e({},s,{value:void 0}),r=_e({},r,{value:void 0}),i=[];break;case"textarea":s=Da(e,s),r=Da(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Wi)}La(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(vs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(vs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&pe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Yf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Jr(e,t){if(!ye)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Be(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Iy(e,t,n){var r=t.pendingProps;switch(Zl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(t),null;case 1:return et(t.type)&&Hi(),Be(t),null;case 3:return r=t.stateNode,Tr(),me(Ze),me(ze),lc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ii(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,jt!==null&&(vl(jt),jt=null))),ul(e,t),Be(t),null;case 5:ac(t);var s=Dn(Ps.current);if(n=t.type,e!==null&&t.stateNode!=null)Jf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return Be(t),null}if(e=Dn(Dt.current),ii(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Rt]=t,r[Cs]=i,e=(t.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(s=0;s<rs.length;s++)pe(rs[s],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":yu(r,i),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pe("invalid",r);break;case"textarea":wu(r,i),pe("invalid",r)}La(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&si(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&si(r.textContent,l,e),s=["children",""+l]):vs.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":Js(r),vu(r,i,!0);break;case"textarea":Js(r),_u(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Wi)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Rt]=t,e[Cs]=r,Qf(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ua(n,r),n){case"dialog":pe("cancel",e),pe("close",e),s=r;break;case"iframe":case"object":case"embed":pe("load",e),s=r;break;case"video":case"audio":for(s=0;s<rs.length;s++)pe(rs[s],e);s=r;break;case"source":pe("error",e),s=r;break;case"img":case"image":case"link":pe("error",e),pe("load",e),s=r;break;case"details":pe("toggle",e),s=r;break;case"input":yu(e,r),s=Oa(e,r),pe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=_e({},r,{value:void 0}),pe("invalid",e);break;case"textarea":wu(e,r),s=Da(e,r),pe("invalid",e);break;default:s=r}La(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Eh(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Nh(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ws(e,c):typeof c=="number"&&ws(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&pe("scroll",e):c!=null&&Ul(e,i,c,o))}switch(n){case"input":Js(e),vu(e,r,!1);break;case"textarea":Js(e),_u(e);break;case"option":r.value!=null&&e.setAttribute("value",""+yn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?wr(e,!!r.multiple,i,!1):r.defaultValue!=null&&wr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Wi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Be(t),null;case 6:if(e&&t.stateNode!=null)Yf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=Dn(Ps.current),Dn(Dt.current),ii(t)){if(r=t.stateNode,n=t.memoizedProps,r[Rt]=t,(i=r.nodeValue!==n)&&(e=ot,e!==null))switch(e.tag){case 3:si(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&si(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rt]=t,t.stateNode=r}return Be(t),null;case 13:if(me(ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ye&&it!==null&&t.mode&1&&!(t.flags&128))mf(),Er(),t.flags|=98560,i=!1;else if(i=ii(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Rt]=t}else Er(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Be(t),i=!1}else jt!==null&&(vl(jt),jt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ve.current&1?Oe===0&&(Oe=3):_c())),t.updateQueue!==null&&(t.flags|=4),Be(t),null);case 4:return Tr(),ul(e,t),e===null&&bs(t.stateNode.containerInfo),Be(t),null;case 10:return rc(t.type._context),Be(t),null;case 17:return et(t.type)&&Hi(),Be(t),null;case 19:if(me(ve),i=t.memoizedState,i===null)return Be(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Jr(i,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Xi(e),o!==null){for(t.flags|=128,Jr(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return de(ve,ve.current&1|2),t.child}e=e.sibling}i.tail!==null&&je()>Ar&&(t.flags|=128,r=!0,Jr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Xi(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Jr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ye)return Be(t),null}else 2*je()-i.renderingStartTime>Ar&&n!==1073741824&&(t.flags|=128,r=!0,Jr(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=je(),t.sibling=null,n=ve.current,de(ve,r?n&1|2:n&1),t):(Be(t),null);case 22:case 23:return wc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?st&1073741824&&(Be(t),t.subtreeFlags&6&&(t.flags|=8192)):Be(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Dy(e,t){switch(Zl(t),t.tag){case 1:return et(t.type)&&Hi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tr(),me(Ze),me(ze),lc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ac(t),null;case 13:if(me(ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Er()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(ve),null;case 4:return Tr(),null;case 10:return rc(t.type._context),null;case 22:case 23:return wc(),null;case 24:return null;default:return null}}var li=!1,Fe=!1,$y=typeof WeakSet=="function"?WeakSet:Set,F=null;function yr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(e,t,r)}else n.current=null}function dl(e,t,n){try{n()}catch(r){Se(e,t,r)}}var cd=!1;function Ly(e,t){if(Ka=Fi,e=tf(),Yl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,g=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)g=f,f=v;for(;;){if(f===e)break t;if(g===n&&++u===s&&(l=o),g===i&&++d===r&&(c=o),(v=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qa={focusedElem:e,selectionRange:n},Fi=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,O=w.memoizedState,m=t.stateNode,p=m.getSnapshotBeforeUpdate(t.elementType===t.type?x:xt(t.type,x),O);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(S){Se(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return w=cd,cd=!1,w}function ds(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&dl(t,n,i)}s=s.next}while(s!==r)}}function vo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Xf(e){var t=e.alternate;t!==null&&(e.alternate=null,Xf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rt],delete t[Cs],delete t[Xa],delete t[wy],delete t[_y])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zf(e){return e.tag===5||e.tag===3||e.tag===4}function ud(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Wi));else if(r!==4&&(e=e.child,e!==null))for(fl(e,t,n),e=e.sibling;e!==null;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(pl(e,t,n),e=e.sibling;e!==null;)pl(e,t,n),e=e.sibling}var $e=null,St=!1;function Xt(e,t,n){for(n=n.child;n!==null;)ep(e,t,n),n=n.sibling}function ep(e,t,n){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(co,n)}catch{}switch(n.tag){case 5:Fe||yr(n,t);case 6:var r=$e,s=St;$e=null,Xt(e,t,n),$e=r,St=s,$e!==null&&(St?(e=$e,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(St?(e=$e,n=n.stateNode,e.nodeType===8?sa(e.parentNode,n):e.nodeType===1&&sa(e,n),ks(e)):sa($e,n.stateNode));break;case 4:r=$e,s=St,$e=n.stateNode.containerInfo,St=!0,Xt(e,t,n),$e=r,St=s;break;case 0:case 11:case 14:case 15:if(!Fe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&dl(n,t,o),s=s.next}while(s!==r)}Xt(e,t,n);break;case 1:if(!Fe&&(yr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Se(n,t,l)}Xt(e,t,n);break;case 21:Xt(e,t,n);break;case 22:n.mode&1?(Fe=(r=Fe)||n.memoizedState!==null,Xt(e,t,n),Fe=r):Xt(e,t,n);break;default:Xt(e,t,n)}}function dd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new $y),t.forEach(function(r){var s=Vy.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function wt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:$e=l.stateNode,St=!1;break e;case 3:$e=l.stateNode.containerInfo,St=!0;break e;case 4:$e=l.stateNode.containerInfo,St=!0;break e}l=l.return}if($e===null)throw Error(D(160));ep(i,o,s),$e=null,St=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Se(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tp(t,e),t=t.sibling}function tp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wt(t,e),Pt(e),r&4){try{ds(3,e,e.return),vo(3,e)}catch(x){Se(e,e.return,x)}try{ds(5,e,e.return)}catch(x){Se(e,e.return,x)}}break;case 1:wt(t,e),Pt(e),r&512&&n!==null&&yr(n,n.return);break;case 5:if(wt(t,e),Pt(e),r&512&&n!==null&&yr(n,n.return),e.flags&32){var s=e.stateNode;try{ws(s,"")}catch(x){Se(e,e.return,x)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Sh(s,i),Ua(l,o);var u=Ua(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?Eh(s,f):d==="dangerouslySetInnerHTML"?Nh(s,f):d==="children"?ws(s,f):Ul(s,d,f,u)}switch(l){case"input":Ra(s,i);break;case"textarea":kh(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?wr(s,!!i.multiple,v,!1):g!==!!i.multiple&&(i.defaultValue!=null?wr(s,!!i.multiple,i.defaultValue,!0):wr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Cs]=i}catch(x){Se(e,e.return,x)}}break;case 6:if(wt(t,e),Pt(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){Se(e,e.return,x)}}break;case 3:if(wt(t,e),Pt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ks(t.containerInfo)}catch(x){Se(e,e.return,x)}break;case 4:wt(t,e),Pt(e);break;case 13:wt(t,e),Pt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(yc=je())),r&4&&dd(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Fe=(u=Fe)||d,wt(t,e),Fe=u):wt(t,e),Pt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(F=e,d=e.child;d!==null;){for(f=F=d;F!==null;){switch(g=F,v=g.child,g.tag){case 0:case 11:case 14:case 15:ds(4,g,g.return);break;case 1:yr(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(x){Se(r,n,x)}}break;case 5:yr(g,g.return);break;case 22:if(g.memoizedState!==null){fd(f);continue}}v!==null?(v.return=g,F=v):fd(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=bh("display",o))}catch(x){Se(e,e.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){Se(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:wt(t,e),Pt(e),r&4&&dd(e);break;case 21:break;default:wt(t,e),Pt(e)}}function Pt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Zf(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ws(s,""),r.flags&=-33);var i=ud(e);pl(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ud(e);fl(e,l,o);break;default:throw Error(D(161))}}catch(c){Se(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uy(e,t,n){F=e,np(e)}function np(e,t,n){for(var r=(e.mode&1)!==0;F!==null;){var s=F,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||li;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Fe;l=li;var u=Fe;if(li=o,(Fe=c)&&!u)for(F=s;F!==null;)o=F,c=o.child,o.tag===22&&o.memoizedState!==null?pd(s):c!==null?(c.return=o,F=c):pd(s);for(;i!==null;)F=i,np(i),i=i.sibling;F=s,li=l,Fe=u}hd(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,F=i):hd(e)}}function hd(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fe||vo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Fe)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:xt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ju(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ju(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ks(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Fe||t.flags&512&&hl(t)}catch(g){Se(t,t.return,g)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function fd(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function pd(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vo(4,t)}catch(c){Se(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Se(t,s,c)}}var i=t.return;try{hl(t)}catch(c){Se(t,i,c)}break;case 5:var o=t.return;try{hl(t)}catch(c){Se(t,o,c)}}}catch(c){Se(t,t.return,c)}if(t===e){F=null;break}var l=t.sibling;if(l!==null){l.return=t.return,F=l;break}F=t.return}}var My=Math.ceil,to=Kt.ReactCurrentDispatcher,mc=Kt.ReactCurrentOwner,ft=Kt.ReactCurrentBatchConfig,ie=0,De=null,Ee=null,Le=0,st=0,vr=_n(0),Oe=0,Is=null,Fn=0,wo=0,gc=0,hs=null,Je=null,yc=0,Ar=1/0,Ut=null,no=!1,ml=null,pn=null,ci=!1,ln=null,ro=0,fs=0,gl=null,Ci=-1,Ti=0;function Ve(){return ie&6?je():Ci!==-1?Ci:Ci=je()}function mn(e){return e.mode&1?ie&2&&Le!==0?Le&-Le:Sy.transition!==null?(Ti===0&&(Ti=Mh()),Ti):(e=le,e!==0||(e=window.event,e=e===void 0?16:Vh(e.type)),e):1}function bt(e,t,n,r){if(50<fs)throw fs=0,gl=null,Error(D(185));Ls(e,n,r),(!(ie&2)||e!==De)&&(e===De&&(!(ie&2)&&(wo|=n),Oe===4&&sn(e,Le)),tt(e,r),n===1&&ie===0&&!(t.mode&1)&&(Ar=je()+500,mo&&xn()))}function tt(e,t){var n=e.callbackNode;Sg(e,t);var r=Bi(e,e===De?Le:0);if(r===0)n!==null&&ku(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ku(n),t===1)e.tag===0?xy(md.bind(null,e)):hf(md.bind(null,e)),yy(function(){!(ie&6)&&xn()}),n=null;else{switch(Bh(r)){case 1:n=ql;break;case 4:n=Lh;break;case 16:n=Mi;break;case 536870912:n=Uh;break;default:n=Mi}n=up(n,rp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rp(e,t){if(Ci=-1,Ti=0,ie&6)throw Error(D(327));var n=e.callbackNode;if(jr()&&e.callbackNode!==n)return null;var r=Bi(e,e===De?Le:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=so(e,r);else{t=r;var s=ie;ie|=2;var i=ip();(De!==e||Le!==t)&&(Ut=null,Ar=je()+500,$n(e,t));do try{zy();break}catch(l){sp(e,l)}while(!0);nc(),to.current=i,ie=s,Ee!==null?t=0:(De=null,Le=0,t=Oe)}if(t!==0){if(t===2&&(s=qa(e),s!==0&&(r=s,t=yl(e,s))),t===1)throw n=Is,$n(e,0),sn(e,r),tt(e,je()),n;if(t===6)sn(e,r);else{if(s=e.current.alternate,!(r&30)&&!By(s)&&(t=so(e,r),t===2&&(i=qa(e),i!==0&&(r=i,t=yl(e,i))),t===1))throw n=Is,$n(e,0),sn(e,r),tt(e,je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Pn(e,Je,Ut);break;case 3:if(sn(e,r),(r&130023424)===r&&(t=yc+500-je(),10<t)){if(Bi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ve(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ya(Pn.bind(null,e,Je,Ut),t);break}Pn(e,Je,Ut);break;case 4:if(sn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Nt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*My(r/1960))-r,10<r){e.timeoutHandle=Ya(Pn.bind(null,e,Je,Ut),r);break}Pn(e,Je,Ut);break;case 5:Pn(e,Je,Ut);break;default:throw Error(D(329))}}}return tt(e,je()),e.callbackNode===n?rp.bind(null,e):null}function yl(e,t){var n=hs;return e.current.memoizedState.isDehydrated&&($n(e,t).flags|=256),e=so(e,t),e!==2&&(t=Je,Je=n,t!==null&&vl(t)),e}function vl(e){Je===null?Je=e:Je.push.apply(Je,e)}function By(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Et(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sn(e,t){for(t&=~gc,t&=~wo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nt(t),r=1<<n;e[n]=-1,t&=~r}}function md(e){if(ie&6)throw Error(D(327));jr();var t=Bi(e,0);if(!(t&1))return tt(e,je()),null;var n=so(e,t);if(e.tag!==0&&n===2){var r=qa(e);r!==0&&(t=r,n=yl(e,r))}if(n===1)throw n=Is,$n(e,0),sn(e,t),tt(e,je()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pn(e,Je,Ut),tt(e,je()),null}function vc(e,t){var n=ie;ie|=1;try{return e(t)}finally{ie=n,ie===0&&(Ar=je()+500,mo&&xn())}}function zn(e){ln!==null&&ln.tag===0&&!(ie&6)&&jr();var t=ie;ie|=1;var n=ft.transition,r=le;try{if(ft.transition=null,le=1,e)return e()}finally{le=r,ft.transition=n,ie=t,!(ie&6)&&xn()}}function wc(){st=vr.current,me(vr)}function $n(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,gy(n)),Ee!==null)for(n=Ee.return;n!==null;){var r=n;switch(Zl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hi();break;case 3:Tr(),me(Ze),me(ze),lc();break;case 5:ac(r);break;case 4:Tr();break;case 13:me(ve);break;case 19:me(ve);break;case 10:rc(r.type._context);break;case 22:case 23:wc()}n=n.return}if(De=e,Ee=e=gn(e.current,null),Le=st=t,Oe=0,Is=null,gc=wo=Fn=0,Je=hs=null,In!==null){for(t=0;t<In.length;t++)if(n=In[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}In=null}return e}function sp(e,t){do{var n=Ee;try{if(nc(),Ni.current=eo,Zi){for(var r=we.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zi=!1}if(Bn=0,Ie=Ae=we=null,us=!1,As=0,mc.current=null,n===null||n.return===null){Oe=1,Is=t,Ee=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Le,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=nd(o);if(v!==null){v.flags&=-257,rd(v,o,l,i,t),v.mode&1&&td(i,u,t),t=v,c=u;var w=t.updateQueue;if(w===null){var x=new Set;x.add(c),t.updateQueue=x}else w.add(c);break e}else{if(!(t&1)){td(i,u,t),_c();break e}c=Error(D(426))}}else if(ye&&l.mode&1){var O=nd(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),rd(O,o,l,i,t),ec(Pr(c,l));break e}}i=c=Pr(c,l),Oe!==4&&(Oe=2),hs===null?hs=[i]:hs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=Ff(i,c,t);Qu(i,m);break e;case 1:l=c;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(pn===null||!pn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=zf(i,l,t);Qu(i,S);break e}}i=i.return}while(i!==null)}ap(n)}catch(C){t=C,Ee===n&&n!==null&&(Ee=n=n.return);continue}break}while(!0)}function ip(){var e=to.current;return to.current=eo,e===null?eo:e}function _c(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),De===null||!(Fn&268435455)&&!(wo&268435455)||sn(De,Le)}function so(e,t){var n=ie;ie|=2;var r=ip();(De!==e||Le!==t)&&(Ut=null,$n(e,t));do try{Fy();break}catch(s){sp(e,s)}while(!0);if(nc(),ie=n,to.current=r,Ee!==null)throw Error(D(261));return De=null,Le=0,Oe}function Fy(){for(;Ee!==null;)op(Ee)}function zy(){for(;Ee!==null&&!fg();)op(Ee)}function op(e){var t=cp(e.alternate,e,st);e.memoizedProps=e.pendingProps,t===null?ap(e):Ee=t,mc.current=null}function ap(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Dy(n,t),n!==null){n.flags&=32767,Ee=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Ee=null;return}}else if(n=Iy(n,t,st),n!==null){Ee=n;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);Oe===0&&(Oe=5)}function Pn(e,t,n){var r=le,s=ft.transition;try{ft.transition=null,le=1,qy(e,t,n,r)}finally{ft.transition=s,le=r}return null}function qy(e,t,n,r){do jr();while(ln!==null);if(ie&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(kg(e,i),e===De&&(Ee=De=null,Le=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ci||(ci=!0,up(Mi,function(){return jr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ft.transition,ft.transition=null;var o=le;le=1;var l=ie;ie|=4,mc.current=null,Ly(e,n),tp(n,e),cy(Qa),Fi=!!Ka,Qa=Ka=null,e.current=n,Uy(n),pg(),ie=l,le=o,ft.transition=i}else e.current=n;if(ci&&(ci=!1,ln=e,ro=s),i=e.pendingLanes,i===0&&(pn=null),yg(n.stateNode),tt(e,je()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(no)throw no=!1,e=ml,ml=null,e;return ro&1&&e.tag!==0&&jr(),i=e.pendingLanes,i&1?e===gl?fs++:(fs=0,gl=e):fs=0,xn(),null}function jr(){if(ln!==null){var e=Bh(ro),t=ft.transition,n=le;try{if(ft.transition=null,le=16>e?16:e,ln===null)var r=!1;else{if(e=ln,ln=null,ro=0,ie&6)throw Error(D(331));var s=ie;for(ie|=4,F=e.current;F!==null;){var i=F,o=i.child;if(F.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(F=u;F!==null;){var d=F;switch(d.tag){case 0:case 11:case 15:ds(8,d,i)}var f=d.child;if(f!==null)f.return=d,F=f;else for(;F!==null;){d=F;var g=d.sibling,v=d.return;if(Xf(d),d===u){F=null;break}if(g!==null){g.return=v,F=g;break}F=v}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var O=x.sibling;x.sibling=null,x=O}while(x!==null)}}F=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,F=o;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ds(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,F=m;break e}F=i.return}}var p=e.current;for(F=p;F!==null;){o=F;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,F=y;else e:for(o=p;F!==null;){if(l=F,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vo(9,l)}}catch(C){Se(l,l.return,C)}if(l===o){F=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,F=S;break e}F=l.return}}if(ie=s,xn(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(co,e)}catch{}r=!0}return r}finally{le=n,ft.transition=t}}return!1}function gd(e,t,n){t=Pr(n,t),t=Ff(e,t,1),e=fn(e,t,1),t=Ve(),e!==null&&(Ls(e,1,t),tt(e,t))}function Se(e,t,n){if(e.tag===3)gd(e,e,n);else for(;t!==null;){if(t.tag===3){gd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pn===null||!pn.has(r))){e=Pr(n,e),e=zf(t,e,1),t=fn(t,e,1),e=Ve(),t!==null&&(Ls(t,1,e),tt(t,e));break}}t=t.return}}function Wy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ve(),e.pingedLanes|=e.suspendedLanes&n,De===e&&(Le&n)===n&&(Oe===4||Oe===3&&(Le&130023424)===Le&&500>je()-yc?$n(e,0):gc|=n),tt(e,t)}function lp(e,t){t===0&&(e.mode&1?(t=Zs,Zs<<=1,!(Zs&130023424)&&(Zs=4194304)):t=1);var n=Ve();e=Vt(e,t),e!==null&&(Ls(e,t,n),tt(e,n))}function Hy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lp(e,n)}function Vy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),lp(e,n)}var cp;cp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ze.current)Xe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Xe=!1,Ry(e,t,n);Xe=!!(e.flags&131072)}else Xe=!1,ye&&t.flags&1048576&&ff(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ei(e,t),e=t.pendingProps;var s=br(t,ze.current);kr(t,n),s=uc(null,t,r,e,s,n);var i=dc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,et(r)?(i=!0,Vi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ic(t),s.updater=yo,t.stateNode=s,s._reactInternals=t,sl(t,r,e,n),t=al(null,t,r,!0,i,n)):(t.tag=0,ye&&i&&Xl(t),He(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ei(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Ky(r),e=xt(r,e),s){case 0:t=ol(null,t,r,e,n);break e;case 1:t=od(null,t,r,e,n);break e;case 11:t=sd(null,t,r,e,n);break e;case 14:t=id(null,t,r,xt(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xt(r,s),ol(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xt(r,s),od(e,t,r,s,n);case 3:e:{if(Vf(t),e===null)throw Error(D(387));r=t.pendingProps,i=t.memoizedState,s=i.element,wf(e,t),Yi(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Pr(Error(D(423)),t),t=ad(e,t,r,n,s);break e}else if(r!==s){s=Pr(Error(D(424)),t),t=ad(e,t,r,n,s);break e}else for(it=hn(t.stateNode.containerInfo.firstChild),ot=t,ye=!0,jt=null,n=yf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Er(),r===s){t=Gt(e,t,n);break e}He(e,t,r,n)}t=t.child}return t;case 5:return _f(t),e===null&&tl(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ja(r,s)?o=null:i!==null&&Ja(r,i)&&(t.flags|=32),Hf(e,t),He(e,t,o,n),t.child;case 6:return e===null&&tl(t),null;case 13:return Gf(e,t,n);case 4:return oc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Cr(t,null,r,n):He(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xt(r,s),sd(e,t,r,s,n);case 7:return He(e,t,t.pendingProps,n),t.child;case 8:return He(e,t,t.pendingProps.children,n),t.child;case 12:return He(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,de(Qi,r._currentValue),r._currentValue=o,i!==null)if(Et(i.value,o)){if(i.children===s.children&&!Ze.current){t=Gt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=qt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),nl(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),nl(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}He(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,kr(t,n),s=mt(s),r=r(s),t.flags|=1,He(e,t,r,n),t.child;case 14:return r=t.type,s=xt(r,t.pendingProps),s=xt(r.type,s),id(e,t,r,s,n);case 15:return qf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xt(r,s),Ei(e,t),t.tag=1,et(r)?(e=!0,Vi(t)):e=!1,kr(t,n),Bf(t,r,s),sl(t,r,s,n),al(null,t,r,!0,e,n);case 19:return Kf(e,t,n);case 22:return Wf(e,t,n)}throw Error(D(156,t.tag))};function up(e,t){return $h(e,t)}function Gy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(e,t,n,r){return new Gy(e,t,n,r)}function xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ky(e){if(typeof e=="function")return xc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Bl)return 11;if(e===Fl)return 14}return 2}function gn(e,t){var n=e.alternate;return n===null?(n=ht(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pi(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")xc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case lr:return Ln(n.children,s,i,t);case Ml:o=8,s|=8;break;case Ca:return e=ht(12,n,t,s|2),e.elementType=Ca,e.lanes=i,e;case Ta:return e=ht(13,n,t,s),e.elementType=Ta,e.lanes=i,e;case Pa:return e=ht(19,n,t,s),e.elementType=Pa,e.lanes=i,e;case wh:return _o(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yh:o=10;break e;case vh:o=9;break e;case Bl:o=11;break e;case Fl:o=14;break e;case tn:o=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=ht(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Ln(e,t,n,r){return e=ht(7,e,r,t),e.lanes=n,e}function _o(e,t,n,r){return e=ht(22,e,r,t),e.elementType=wh,e.lanes=n,e.stateNode={isHidden:!1},e}function ha(e,t,n){return e=ht(6,e,null,t),e.lanes=n,e}function fa(e,t,n){return t=ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qy(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Go(0),this.expirationTimes=Go(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Go(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sc(e,t,n,r,s,i,o,l,c){return e=new Qy(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ht(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ic(i),e}function Jy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ar,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function dp(e){if(!e)return vn;e=e._reactInternals;e:{if(Wn(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(et(n))return df(e,n,t)}return t}function hp(e,t,n,r,s,i,o,l,c){return e=Sc(n,r,!0,e,s,i,o,l,c),e.context=dp(null),n=e.current,r=Ve(),s=mn(n),i=qt(r,s),i.callback=t??null,fn(n,i,s),e.current.lanes=s,Ls(e,s,r),tt(e,r),e}function xo(e,t,n,r){var s=t.current,i=Ve(),o=mn(s);return n=dp(n),t.context===null?t.context=n:t.pendingContext=n,t=qt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=fn(s,t,o),e!==null&&(bt(e,s,o,i),ji(e,s,o)),o}function io(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function kc(e,t){yd(e,t),(e=e.alternate)&&yd(e,t)}function Yy(){return null}var fp=typeof reportError=="function"?reportError:function(e){console.error(e)};function jc(e){this._internalRoot=e}So.prototype.render=jc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));xo(e,t,null,null)};So.prototype.unmount=jc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zn(function(){xo(null,e,null,null)}),t[Ht]=null}};function So(e){this._internalRoot=e}So.prototype.unstable_scheduleHydration=function(e){if(e){var t=qh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<rn.length&&t!==0&&t<rn[n].priority;n++);rn.splice(n,0,e),n===0&&Hh(e)}};function Nc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ko(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vd(){}function Xy(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=io(o);i.call(u)}}var o=hp(t,r,e,0,null,!1,!1,"",vd);return e._reactRootContainer=o,e[Ht]=o.current,bs(e.nodeType===8?e.parentNode:e),zn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=io(c);l.call(u)}}var c=Sc(e,0,!1,null,null,!1,!1,"",vd);return e._reactRootContainer=c,e[Ht]=c.current,bs(e.nodeType===8?e.parentNode:e),zn(function(){xo(t,c,n,r)}),c}function jo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=io(o);l.call(c)}}xo(t,o,e,s)}else o=Xy(n,t,e,s,r);return io(o)}Fh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ns(t.pendingLanes);n!==0&&(Wl(t,n|1),tt(t,je()),!(ie&6)&&(Ar=je()+500,xn()))}break;case 13:zn(function(){var r=Vt(e,1);if(r!==null){var s=Ve();bt(r,e,1,s)}}),kc(e,1)}};Hl=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var n=Ve();bt(t,e,134217728,n)}kc(e,134217728)}};zh=function(e){if(e.tag===13){var t=mn(e),n=Vt(e,t);if(n!==null){var r=Ve();bt(n,e,t,r)}kc(e,t)}};qh=function(){return le};Wh=function(e,t){var n=le;try{return le=e,t()}finally{le=n}};Ba=function(e,t,n){switch(t){case"input":if(Ra(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=po(r);if(!s)throw Error(D(90));xh(r),Ra(r,s)}}}break;case"textarea":kh(e,n);break;case"select":t=n.value,t!=null&&wr(e,!!n.multiple,t,!1)}};Ph=vc;Ah=zn;var Zy={usingClientEntryPoint:!1,Events:[Ms,hr,po,Ch,Th,vc]},Yr={findFiberByHostInstance:Rn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ev={bundleType:Yr.bundleType,version:Yr.version,rendererPackageName:Yr.rendererPackageName,rendererConfig:Yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ih(e),e===null?null:e.stateNode},findFiberByHostInstance:Yr.findFiberByHostInstance||Yy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ui=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ui.isDisabled&&ui.supportsFiber)try{co=ui.inject(ev),It=ui}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zy;lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nc(t))throw Error(D(200));return Jy(e,t,null,n)};lt.createRoot=function(e,t){if(!Nc(e))throw Error(D(299));var n=!1,r="",s=fp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Sc(e,1,!1,null,null,n,!1,r,s),e[Ht]=t.current,bs(e.nodeType===8?e.parentNode:e),new jc(t)};lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Ih(t),e=e===null?null:e.stateNode,e};lt.flushSync=function(e){return zn(e)};lt.hydrate=function(e,t,n){if(!ko(t))throw Error(D(200));return jo(null,e,t,!0,n)};lt.hydrateRoot=function(e,t,n){if(!Nc(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=fp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=hp(t,null,e,1,n??null,s,!1,i,o),e[Ht]=t.current,bs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new So(t)};lt.render=function(e,t,n){if(!ko(t))throw Error(D(200));return jo(null,e,t,!1,n)};lt.unmountComponentAtNode=function(e){if(!ko(e))throw Error(D(40));return e._reactRootContainer?(zn(function(){jo(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1};lt.unstable_batchedUpdates=vc;lt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ko(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return jo(e,t,n,!1,r)};lt.version="18.3.1-next-f1338f8080-20240426";function pp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pp)}catch(e){console.error(e)}}pp(),fh.exports=lt;var tv=fh.exports,mp,wd=tv;mp=wd.createRoot,wd.hydrateRoot;var gp={exports:{}},nv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rv=nv,sv=rv;function yp(){}function vp(){}vp.resetWarningCache=yp;var iv=function(){function e(r,s,i,o,l,c){if(c!==sv){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:vp,resetWarningCache:yp};return n.PropTypes=n,n};gp.exports=iv();var ov=gp.exports;const k=Cm(ov),av="modulepreload",lv=function(e){return"/pocket-budget/"+e},_d={},Fs=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(l=>{if(l=lv(l),l in _d)return;_d[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":av,c||(d.as="script",d.crossOrigin=""),d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},cv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fs(async()=>{const{default:r}=await Promise.resolve().then(()=>Lr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class bc extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class uv extends bc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class xd extends bc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Sd extends bc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var wl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(wl||(wl={}));var dv=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class hv{constructor(t,{headers:n={},customFetch:r,region:s=wl.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=cv(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return dv(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(x=>{throw new uv(x)}),g=f.headers.get("x-relay-error");if(g&&g==="true")throw new xd(f);if(!f.ok)throw new Sd(f);let v=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),w;return v==="application/json"?w=yield f.json():v==="application/octet-stream"?w=yield f.blob():v==="text/event-stream"?w=f:v==="multipart/form-data"?w=yield f.formData():w=yield f.text(),{data:w,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof Sd||s instanceof xd?s.context:void 0}}})}}var Ye={},Ec={},No={},zs={},bo={},Eo={},fv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")},Or=fv();const pv=Or.fetch,wp=Or.fetch.bind(Or),_p=Or.Headers,mv=Or.Request,gv=Or.Response,Lr=Object.freeze(Object.defineProperty({__proto__:null,Headers:_p,Request:mv,Response:gv,default:wp,fetch:pv},Symbol.toStringTag,{value:"Module"})),yv=Tm(Lr);var Co={};Object.defineProperty(Co,"__esModule",{value:!0});let vv=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Co.default=vv;var xp=pt&&pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eo,"__esModule",{value:!0});const wv=xp(yv),_v=xp(Co);let xv=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=wv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,f=null,g=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=m:d=JSON.parse(m))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),O=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&O&&O.length>1&&(f=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,g=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{u=JSON.parse(x),Array.isArray(u)&&i.status===404&&(d=[],u=null,g=200,v="OK")}catch{i.status===404&&x===""?(g=204,v="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,g=200,v="OK"),u&&this.shouldThrowOnError)throw new _v.default(u)}return{error:u,data:d,count:f,status:g,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Eo.default=xv;var Sv=pt&&pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bo,"__esModule",{value:!0});const kv=Sv(Eo);let jv=class extends kv.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};bo.default=jv;var Nv=pt&&pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zs,"__esModule",{value:!0});const bv=Nv(bo);let Ev=class extends bv.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};zs.default=Ev;var Cv=pt&&pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(No,"__esModule",{value:!0});const Xr=Cv(zs);let Tv=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Xr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Xr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Xr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Xr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Xr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};No.default=Tv;var To={},Po={};Object.defineProperty(Po,"__esModule",{value:!0});Po.version=void 0;Po.version="0.0.0-automated";Object.defineProperty(To,"__esModule",{value:!0});To.DEFAULT_HEADERS=void 0;const Pv=Po;To.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Pv.version}`};var Sp=pt&&pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ec,"__esModule",{value:!0});const Av=Sp(No),Ov=Sp(zs),Rv=To;let Iv=class kp{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Rv.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new Av.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new kp(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Ov.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Ec.default=Iv;var Ur=pt&&pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.PostgrestError=Ye.PostgrestBuilder=Ye.PostgrestTransformBuilder=Ye.PostgrestFilterBuilder=Ye.PostgrestQueryBuilder=Ye.PostgrestClient=void 0;const jp=Ur(Ec);Ye.PostgrestClient=jp.default;const Np=Ur(No);Ye.PostgrestQueryBuilder=Np.default;const bp=Ur(zs);Ye.PostgrestFilterBuilder=bp.default;const Ep=Ur(bo);Ye.PostgrestTransformBuilder=Ep.default;const Cp=Ur(Eo);Ye.PostgrestBuilder=Cp.default;const Tp=Ur(Co);Ye.PostgrestError=Tp.default;var Dv=Ye.default={PostgrestClient:jp.default,PostgrestQueryBuilder:Np.default,PostgrestFilterBuilder:bp.default,PostgrestTransformBuilder:Ep.default,PostgrestBuilder:Cp.default,PostgrestError:Tp.default};const{PostgrestClient:$v,PostgrestQueryBuilder:B_,PostgrestFilterBuilder:F_,PostgrestTransformBuilder:z_,PostgrestBuilder:q_,PostgrestError:W_}=Dv;class Lv{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Uv="2.15.1",Mv=`realtime-js/${Uv}`,Bv="1.0.0",_l=1e4,Fv=1e3,zv=100;var ps;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ps||(ps={}));var Te;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Te||(Te={}));var kt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(kt||(kt={}));var xl;(function(e){e.websocket="websocket"})(xl||(xl={}));var On;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(On||(On={}));class qv{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+s));o=o+s;const c=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Pp{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ue;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ue||(ue={}));const kd=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=Wv(o,e,t,s),i),{})},Wv=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?Ap(i,o):Sl(o)},Ap=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Kv(t,n)}switch(e){case ue.bool:return Hv(t);case ue.float4:case ue.float8:case ue.int2:case ue.int4:case ue.int8:case ue.numeric:case ue.oid:return Vv(t);case ue.json:case ue.jsonb:return Gv(t);case ue.timestamp:return Qv(t);case ue.abstime:case ue.date:case ue.daterange:case ue.int4range:case ue.int8range:case ue.money:case ue.reltime:case ue.text:case ue.time:case ue.timestamptz:case ue.timetz:case ue.tsrange:case ue.tstzrange:return Sl(t);default:return Sl(t)}},Sl=e=>e,Hv=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Vv=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Gv=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Kv=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Ap(t,l))}return e},Qv=e=>typeof e=="string"?e.replace(" ","T"):e,Op=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class pa{constructor(t,n,r={},s=_l){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var jd;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(jd||(jd={}));class ms{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ms.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=ms.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ms.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const g=d.map(O=>O.presence_ref),v=f.map(O=>O.presence_ref),w=d.filter(O=>v.indexOf(O.presence_ref)<0),x=f.filter(O=>g.indexOf(O.presence_ref)<0);w.length>0&&(l[u]=w),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(v=>v.presence_ref),g=d.filter(v=>f.indexOf(v.presence_ref)<0);t[l].unshift(...g)}r(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nd;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Nd||(Nd={}));var gs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gs||(gs={}));var Mt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Mt||(Mt={}));class Cc{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new pa(this,kt.join,this.params,this.timeout),this.rejoinTimer=new Pp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Te.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ms(this),this.broadcastEndpointURL=Op(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Te.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[gs.PRESENCE]&&this.bindings[gs.PRESENCE].length>0,d={},f={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(Mt.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(Mt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){t==null||t(Mt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,x=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,O=[];for(let m=0;m<x;m++){const p=w[m],{filter:{event:y,schema:S,table:C,filter:j}}=p,N=g&&g[m];if(N&&N.event===y&&N.schema===S&&N.table===C&&N.filter===j)O.push(Object.assign(Object.assign({},p),{id:N.id}));else{this.unsubscribe(),this.state=Te.errored,t==null||t(Mt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,t&&t(Mt.SUBSCRIBED);return}}).receive("error",g=>{this.state=Te.errored,t==null||t(Mt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Mt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Te.joined&&t===gs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Te.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new pa(this,kt.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Te.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new pa(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>zv){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=kt;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var w,x,O;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((O=(x=v.filter)===null||x===void 0?void 0:x.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===o}).map(v=>v.callback(g,r)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var w,x,O,m,p,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const S=v.id,C=(w=v.filter)===null||w===void 0?void 0:w.event;return S&&((x=n.ids)===null||x===void 0?void 0:x.includes(S))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((O=n.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{const S=(p=(m=v==null?void 0:v.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return S==="*"||S===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof g=="object"&&"ids"in g){const w=g.data,{schema:x,table:O,commit_timestamp:m,type:p,errors:y}=w;g=Object.assign(Object.assign({},{schema:x,table:O,commit_timestamp:m,eventType:p,new:{},old:{},errors:y}),this._getPayloadRecords(w))}v.callback(g,r)})}_isClosed(){return this.state===Te.closed}_isJoined(){return this.state===Te.joined}_isJoining(){return this.state===Te.joining}_isLeaving(){return this.state===Te.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Cc.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(kt.close,{},t)}_onError(t){this._on(kt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Te.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=kd(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=kd(t.columns,t.old_record)),n}}const bd=()=>{},di={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Jv=[1e3,2e3,5e3,1e4],Yv=1e4,Xv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Zv{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_l,this.transport=null,this.heartbeatIntervalMs=di.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bd,this.ref=0,this.reconnectTimer=null,this.logger=bd,this.conn=null,this.sendBuffer=[],this.serializer=new qv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Fs(async()=>{const{default:l}=await Promise.resolve().then(()=>Lr);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${xl.websocket}`,this.httpEndpoint=Op(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Lv.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Bv}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ps.connecting:return On.Connecting;case ps.open:return On.Open;case ps.closing:return On.Closing;default:return On.Closed}}isConnected(){return this.connectionState()===On.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Cc(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Fv,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},di.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(kt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Xv],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Mv};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(kt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Pp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},di.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,l,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:_l,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:di.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:d=>Jv[d-1]||Yv,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(d,f)=>f(JSON.stringify(d)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Tc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Pe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class e0 extends Tc{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kl extends Tc{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var t0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Rp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fs(async()=>{const{default:r}=await Promise.resolve().then(()=>Lr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},n0=()=>t0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fs(()=>Promise.resolve().then(()=>Lr),void 0)).Response:Response}),jl=e=>{if(Array.isArray(e))return e.map(n=>jl(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=jl(r)}),t},r0=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Hn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const ma=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),s0=(e,t,n)=>Hn(void 0,void 0,void 0,function*(){const r=yield n0();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new e0(ma(s),i,o))}).catch(s=>{t(new kl(ma(s),s))}):t(new kl(ma(e),e))}),i0=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(r0(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function qs(e,t,n,r,s,i){return Hn(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,i0(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>s0(c,l,r))})})}function oo(e,t,n,r){return Hn(this,void 0,void 0,function*(){return qs(e,"GET",t,n,r)})}function Ot(e,t,n,r,s){return Hn(this,void 0,void 0,function*(){return qs(e,"POST",t,r,s,n)})}function Nl(e,t,n,r,s){return Hn(this,void 0,void 0,function*(){return qs(e,"PUT",t,r,s,n)})}function o0(e,t,n,r){return Hn(this,void 0,void 0,function*(){return qs(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ip(e,t,n,r,s){return Hn(this,void 0,void 0,function*(){return qs(e,"DELETE",t,r,s,n)})}var We=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const a0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ed={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class l0{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Rp(s)}uploadOrUpdate(t,n,r,s){return We(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ed),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield(t=="PUT"?Nl:Ot)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(Pe(i))return{data:null,error:i};throw i}})}upload(t,n,r){return We(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return We(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Ed.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Nl(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(Pe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return We(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ot(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Tc("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}update(t,n,r){return We(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return We(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}copy(t,n,r){return We(this,void 0,void 0,function*(){try{return{data:{path:(yield Ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return We(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Ot(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return We(this,void 0,void 0,function*(){try{const s=yield Ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}download(t,n){return We(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield oo(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Pe(l))return{data:null,error:l};throw l}})}info(t){return We(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield oo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:jl(r),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}exists(t){return We(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield o0(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Pe(r)&&r instanceof kl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return We(this,void 0,void 0,function*(){try{return{data:yield Ip(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}list(t,n,r){return We(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},a0),n),{prefix:t||""});return{data:yield Ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}listV2(t,n){return We(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Ot(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const c0="2.11.0",u0={"X-Client-Info":`storage-js/${c0}`};var Yn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,[])).next())})};class d0{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},u0),n),this.fetch=Rp(r)}listBuckets(){return Yn(this,void 0,void 0,function*(){try{return{data:yield oo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Pe(t))return{data:null,error:t};throw t}})}getBucket(t){return Yn(this,void 0,void 0,function*(){try{return{data:yield oo(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Yn(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Yn(this,void 0,void 0,function*(){try{return{data:yield Nl(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Yn(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Yn(this,void 0,void 0,function*(){try{return{data:yield Ip(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}}class h0 extends d0{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new l0(this.url,this.headers,t,this.fetch)}}const f0="2.55.0";let ss="";typeof Deno<"u"?ss="deno":typeof document<"u"?ss="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ss="react-native":ss="node";const p0={"X-Client-Info":`supabase-js-${ss}/${f0}`},m0={headers:p0},g0={schema:"public"},y0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},v0={};var w0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const _0=e=>{let t;return e?t=e:typeof fetch>"u"?t=wp:t=fetch,(...n)=>t(...n)},x0=()=>typeof Headers>"u"?_p:Headers,S0=(e,t,n)=>{const r=_0(n),s=x0();return(i,o)=>w0(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var k0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,[])).next())})};function j0(e){return e.endsWith("/")?e:e+"/"}function N0(e,t){var n,r;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,g={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>k0(this,void 0,void 0,function*(){return""})};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}const Dp="2.71.1",ir=30*1e3,bl=3,ga=bl*ir,b0="http://localhost:9999",E0="supabase.auth.token",C0={"X-Client-Info":`gotrue-js/${Dp}`},El="X-Supabase-Api-Version",$p={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},T0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,P0=10*60*1e3;class Pc extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ee(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class A0 extends Pc{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function O0(e){return ee(e)&&e.name==="AuthApiError"}class Lp extends Pc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Sn extends Pc{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class en extends Sn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function R0(e){return ee(e)&&e.name==="AuthSessionMissingError"}class hi extends Sn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fi extends Sn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class pi extends Sn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function I0(e){return ee(e)&&e.name==="AuthImplicitGrantRedirectError"}class Cd extends Sn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Cl extends Sn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ya(e){return ee(e)&&e.name==="AuthRetryableFetchError"}class Td extends Sn{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Tl extends Sn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pd=` 	
\r=`.split(""),D0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Pd.length;t+=1)e[Pd[t].charCodeAt(0)]=-2;for(let t=0;t<ao.length;t+=1)e[ao[t].charCodeAt(0)]=t;return e})();function Ad(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ao[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ao[r]),t.queuedBits-=6}}function Up(e,t,n){const r=D0[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Od(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{U0(o,r,n)};for(let o=0;o<e.length;o+=1)Up(e.charCodeAt(o),s,i);return t.join("")}function $0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function L0(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}$0(r,t)}}function U0(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function M0(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Up(e.charCodeAt(s),n,r);return new Uint8Array(t)}function B0(e){const t=[];return L0(e,n=>t.push(n)),new Uint8Array(t)}function F0(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Ad(s,n,r)),Ad(null,n,r),t.join("")}function z0(e){return Math.round(Date.now()/1e3)+e}function q0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const _t=()=>typeof window<"u"&&typeof document<"u",En={tested:!1,writable:!1},Mp=()=>{if(!_t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(En.tested)return En.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),En.tested=!0,En.writable=!0}catch{En.tested=!0,En.writable=!1}return En.writable};function W0(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Bp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fs(async()=>{const{default:r}=await Promise.resolve().then(()=>Lr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},H0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",or=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Cn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Zt=async(e,t)=>{await e.removeItem(t)};class Ao{constructor(){this.promise=new Ao.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ao.promiseConstructor=Promise;function va(e){const t=e.split(".");if(t.length!==3)throw new Tl("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!T0.test(t[r]))throw new Tl("JWT not in base64url format");return{header:JSON.parse(Od(t[0])),payload:JSON.parse(Od(t[1])),signature:M0(t[2]),raw:{header:t[0],payload:t[1]}}}async function V0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function G0(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function K0(e){return("0"+e.toString(16)).substr(-2)}function Q0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,K0).join("")}async function J0(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Y0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await J0(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xn(e,t,n=!1){const r=Q0();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await or(e,`${t}-code-verifier`,s);const i=await Y0(r);return[i,r===i?"plain":"s256"]}const X0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Z0(e){const t=e.headers.get(El);if(!t||!t.match(X0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ew(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function tw(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zn(e){if(!nw.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wa(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Rd(e){return JSON.parse(JSON.stringify(e))}var rw=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const An=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),sw=[502,503,504];async function Id(e){var t;if(!H0(e))throw new Cl(An(e),0);if(sw.includes(e.status))throw new Cl(An(e),e.status);let n;try{n=await e.json()}catch(i){throw new Lp(An(i),i)}let r;const s=Z0(e);if(s&&s.getTime()>=$p["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Td(An(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new en}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Td(An(n),e.status,n.weak_password.reasons);throw new A0(An(n),e.status||500,r)}const iw=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function re(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[El]||(i[El]=$p["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await ow(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function ow(e,t,n,r,s,i){const o=iw(t,r,s,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new Cl(An(c),0)}if(l.ok||await Id(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Id(c)}}function Lt(e){var t;let n=null;uw(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=z0(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Dd(e){const t=Lt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function on(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function aw(e){return{data:e,error:null}}function lw(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=rw(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function cw(e){return e}function uw(e){return e.access_token&&e.refresh_token&&e.expires_in}const _a=["global","local","others"];var dw=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class hw{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Bp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=_a[0]){if(_a.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_a.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:on})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=dw(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:lw,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ee(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:on})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:cw});if(d.error)throw d.error;const f=await d.json(),g=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(w.split(";")[1].split("=")[1]);u[`${O}Page`]=x}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ee(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Zn(t);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:on})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Zn(t);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:on})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Zn(t);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:on})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Zn(t.userId);try{const{data:n,error:r}=await re(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Zn(t.userId),Zn(t.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}}}function $d(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function fw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const er={debug:!!(globalThis&&Mp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Fp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class pw extends Fp{}async function mw(e,t,n){er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),er.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{er.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw er.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new pw(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(er.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}fw();const gw={url:b0,storageKey:E0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:C0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ld(e,t,n){return await n()}const tr={};class Ds{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ds.nextInstanceID,Ds.nextInstanceID+=1,this.instanceID>0&&_t()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},gw),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new hw({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Bp(s.fetch),this.lock=s.lock||Ld,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:_t()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=mw:this.lock=Ld,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Mp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$d(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=$d(this.memoryStorage)),_t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=tr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){tr[this.storageKey]=Object.assign(Object.assign({},tr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=tr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){tr[this.storageKey]=Object.assign(Object.assign({},tr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Dp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=W0(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),_t()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),I0(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ee(n)?{error:n}:{error:new Lp("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Lt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ee(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:f,options:g}=t;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await Xn(this.storage,this.storageKey)),i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:f,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:v,code_challenge_method:w},xform:Lt})}else if("phone"in t){const{phone:d,password:f,options:g}=t;i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Lt})}else throw new fi("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ee(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Dd})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Dd})}else throw new fi("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new hi}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,l,c,u,d,f,g,v;let w,x;if("message"in t)w=t.message,x=t.signature;else{const{chain:O,wallet:m,statement:p,options:y}=t;let S;if(_t())if(typeof m=="object")S=m;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))S=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=m}const C=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const j=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),p?{statement:p}:null));let N;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")N=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)N=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)w=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),x=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${C.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((f=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...y.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const j=await S.signMessage(new TextEncoder().encode(w),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=j}}try{const{data:O,error:m}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:F0(x)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Lt});if(m)throw m;return!O||!O.session||!O.user?{data:{user:null,session:null},error:new hi}:(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),{data:Object.assign({},O),error:m})}catch(O){if(ee(O))return{data:{user:null,session:null},error:O};throw O}}async _exchangeCodeForSession(t){const n=await Cn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Lt});if(await Zt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new hi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ee(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,l=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Lt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new hi}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Xn(this.storage,this.storageKey));const{error:f}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new fi("You must provide either an email or phone number.")}catch(l){if(ee(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Lt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Xn(this.storage,this.storageKey)),await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:aw})}catch(i){if(ee(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new en;const{error:s}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(ee(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await re(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:l}=await re(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new fi("You must provide either an email or phone number and a type")}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Cn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<ga:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Cn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=wa()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:on}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new en}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:on})})}catch(n){if(ee(n))return R0(n)&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new en;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Xn(this.storage,this.storageKey));const{data:u,error:d}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:on});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new en;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=va(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ee(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new en;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!_t())throw new pi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new pi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Cd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Cd("No code detected.");const{data:p,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new pi("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let g=d+f;c&&(g=parseInt(c));const v=g-d;v*1e3<=ir&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const w=g-f;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,g,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,g,d);const{data:x,error:O}=await this._getUser(i);if(O)throw O;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:g,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(r){if(ee(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Cn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(O0(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=q0(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Xn(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ee(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:g}=i;if(g)throw g;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return _t()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ee(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await G0(async s=>(s>0&&await V0(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Lt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ya(i)&&Date.now()+o-r<ir})}catch(r){if(this._debug(n,"error",r),ee(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),_t()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Cn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Cn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await or(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:wa()}else if(s&&!s.user&&!s.user){const o=await Cn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Zt(this.storage,this.storageKey+"-user"),await or(this.storage,this.storageKey,s)):s.user=wa()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ga;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${ga}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ya(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new en;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ao;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new en;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),ee(i)){const o={session:null,error:i};return ya(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await or(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Rd(s);await or(this.storage,this.storageKey,i)}else{const s=Rd(n);await or(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Zt(this.storage,this.storageKey),await Zt(this.storage,this.storageKey+"-code-verifier"),await Zt(this.storage,this.storageKey+"-user"),this.userStorage&&await Zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&_t()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ir);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/ir);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ir}ms, refresh threshold is ${bl} ticks`),s<=bl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Fp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_t()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Xn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await re(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await re(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(ee(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ee(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=va(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+P0>s)return r;const{data:i,error:o}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:v,error:w}=await this.getSession();if(w||!v.session)return{data:null,error:w};r=v.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=va(r);n!=null&&n.allowExpired||ew(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:s,signature:o},error:null}}const d=tw(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,B0(`${l}.${c}`)))throw new Tl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}}Ds.nextInstanceID=0;const yw=Ds;class vw extends yw{constructor(t){super(t)}}var ww=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,[])).next())})};class _w{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=j0(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:g0,realtime:v0,auth:Object.assign(Object.assign({},y0),{storageKey:u}),global:m0},f=N0(r??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=S0(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new $v(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new h0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new hv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return ww(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vw({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Zv(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xw=(e,t,n)=>new _w(e,t,n);function Sw(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Sw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");async function Ud(e){var o,l;await new Promise(c=>setTimeout(c,600));const t=kw(e),n=e.last7Days>e.previous7Days?"increasing":"decreasing",r=((o=e.topExpenseCategory)==null?void 0:o[0])||"Uncategorized",s=((l=e.topExpenseCategory)==null?void 0:l[1])||0,i=e.totalExpenses>0?s/e.totalExpenses*100:0;return{healthScore:t,summary:jw(e,t),strengths:Nw(e),improvements:bw(e),spendingAnalysis:Ew(e,n,r,i),savingsTips:Cw(e),budgetSuggestions:Tw(e),goals:Pw(e)}}function kw(e){let t=5;return e.savingsRate>20?t+=2:e.savingsRate>10?t+=1:e.savingsRate<0&&(t-=2),e.balance>0?t+=1:t-=1,e.transactionCount>10&&(t+=1),(e.topExpenseCategory?e.topExpenseCategory[1]/e.totalExpenses*100:0)>50&&(t-=1),Math.max(1,Math.min(10,t))}function jw(e,t){return t>=8?"Excellent financial health! You're demonstrating strong budgeting discipline with healthy savings and balanced spending.":t>=6?"Good financial foundation with room for optimization. A few adjustments could significantly improve your financial position.":t>=4?"Your finances need attention. Focus on increasing income, reducing expenses, or both to improve your financial stability.":"Critical financial situation requiring immediate action. Consider seeking financial counseling and implementing strict budgeting measures."}function Nw(e){const t=[];return e.savingsRate>15&&t.push("Strong savings discipline - you're saving above the recommended 15% rate"),e.transactionCount>15&&t.push("Excellent expense tracking - you're consistently recording transactions"),e.balance>0&&t.push("Positive cash flow - you're living within your means"),Object.keys(e.expensesByCategory).length>=4&&t.push("Diversified spending across multiple categories shows balanced lifestyle"),t.length===0&&t.push("You're taking the first step by tracking your finances - that's commendable!"),t}function bw(e){const t=[];e.savingsRate<10&&t.push({area:"Increase Savings Rate",suggestion:`Aim to save at least 15-20% of income. Currently at ${e.savingsRate.toFixed(1)}%`,action:"Set up automatic transfers to savings account"}),e.balance<0&&t.push({area:"Address Negative Balance",suggestion:"You're spending more than you earn - immediate action needed",action:"Review and cut non-essential expenses immediately"});const n=e.topExpenseCategory?e.topExpenseCategory[1]/e.totalExpenses*100:0;return n>40&&t.push({area:"Diversify Spending",suggestion:`${e.topExpenseCategory[0]} represents ${n.toFixed(1)}% of expenses`,action:"Look for ways to reduce this dominant expense category"}),e.transactionCount<10&&t.push({area:"Improve Expense Tracking",suggestion:"More consistent transaction recording will provide better insights",action:"Set daily reminders to log expenses"}),t}function Ew(e,t,n,r){return{trend:t==="increasing"?" Spending increased in the last week":" Spending decreased in the last week",topCategory:` Highest expense category: ${n} (${r.toFixed(1)}% of total)`,avgTransaction:` Average transaction: $${e.avgTransactionAmount.toFixed(2)}`,frequency:` Transaction frequency: ${e.transactionCount} transactions recorded`}}function Cw(e){var n;const t=[];return e.savingsRate<10&&t.push("Automate a 10% transfer from each paycheck to savings"),(n=e.topExpenseCategory)!=null&&n[0]&&t.push(`Set a mini-challenge to cut ${e.topExpenseCategory[0]} spending by 10% next month`),e.avgTransactionAmount>50&&t.push("Review subscriptions and recurring charges for quick wins"),t.push("Allocate unexpected income (refunds, bonuses) directly toward goals"),t.push("Do a weekly 10-minute expense review to stay proactive"),t}function Tw(e){const t=[],n=e.totalIncome||1,r=Math.min(e.totalExpenses,n*.5),s=Math.max(0,e.totalExpenses-r),i=Math.max(0,n-e.totalExpenses);return t.push({rule:"50 / 30 / 20 Check-in",needs:`Needs  $${r.toFixed(2)} (${(r/n*100).toFixed(1)}%)`,wants:`Wants  $${s.toFixed(2)} (${(s/n*100).toFixed(1)}%)`,savings:`Savings  $${i.toFixed(2)} (${(i/n*100).toFixed(1)}%)`}),e.topExpenseCategory&&t.push({category:e.topExpenseCategory[0],current:`$${e.topExpenseCategory[1].toFixed(2)} spent`,suggestion:"Challenge yourself to reduce this category by 5% next cycle"}),t}function Pw(e){const t={shortTerm:[],longTerm:[]};return e.balance>0?t.shortTerm.push("Direct extra cash flow toward your top savings goal this month"):t.shortTerm.push("Pause discretionary spending for one week to rebuild balance"),e.savingsRate<15?t.longTerm.push("Build a 3-month emergency fund by saving a little every paycheck"):t.longTerm.push("Accelerate long-term investing with automated monthly transfers"),t.longTerm.push("Review and refresh your goals quarterly to stay motivated"),t}const Aw=14*24*60*60*1e3,Ow=(e,t=Date.now())=>e?t-e>Aw:!0;var Rw={VITE_SUPABASE_URL:"https://micbqxkhejumwddmwyxm.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pY2JxeGtoZWp1bXdkZG13eXhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMzQzOTMsImV4cCI6MjA3MDgxMDM5M30.w1Mc6TrXvkRwjqc6gIGA4baVaMuwVHxR76nH5kt8BJg",BASE_URL:"/pocket-budget/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Iw=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"],Md=Iw.filter(e=>!Rw[e]);if(Md.length)throw new Error(`Missing Supabase environment variables: ${Md.join(", ")}`);const he=xw("https://micbqxkhejumwddmwyxm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pY2JxeGtoZWp1bXdkZG13eXhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMzQzOTMsImV4cCI6MjA3MDgxMDM5M30.w1Mc6TrXvkRwjqc6gIGA4baVaMuwVHxR76nH5kt8BJg",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),Rr=typeof window<"u"?window.localStorage:null,Ac="pb:last-session-timestamp",Oc=()=>{Rr&&Rr.setItem(Ac,Date.now().toString())},Pl=()=>{Rr&&Rr.removeItem(Ac)},Dw=()=>{if(!Rr)return null;const e=Rr.getItem(Ac);if(!e)return null;const t=Number.parseInt(e,10);return Number.isNaN(t)?null:t},$w=async(e,t)=>{var r;const n=await he.auth.signUp({email:e,password:t});return!n.error&&((r=n.data)!=null&&r.session)&&Oc(),n},Lw=async(e,t)=>{var r;const n=await he.auth.signInWithPassword({email:e,password:t});return!n.error&&((r=n.data)!=null&&r.session)&&Oc(),n},Uw=async()=>he.auth.signInWithOAuth({provider:"google",options:{redirectTo:typeof window<"u"?window.location.origin:void 0}}),zp=async()=>(Pl(),he.auth.signOut()),Mw=async()=>{const{data:{user:e},error:t}=await he.auth.getUser();return{user:e,error:t}},Bw=async(e,t,n)=>he.from("user_profiles").insert([{id:e,email:t,full_name:n,created_at:new Date().toISOString()}]).select(),Fw=async e=>he.from("user_profiles").select("*").eq("id",e).single(),Rc=e=>({...e,amount:Number(e.amount||0),budgeted_amount:e.budgeted_amount??e.budgetedAmount??null,receipt_url:e.receipt_url??e.receipt??null}),Ic=e=>({...e,transactions:(e.transactions||[]).map(Rc)}),zw=async e=>{const{data:t,error:n}=await he.from("budgets").select("*, transactions (*)").eq("user_id",e).order("created_at",{ascending:!1});return{data:(t||[]).map(Ic),error:n}},Bd=async(e,t)=>{const n={user_id:e,name:t.name,category_budgets:t.categoryBudgets||[]},r=await he.from("budgets").insert([n]).select("*, transactions (*)");if(r.error)return{data:null,error:r.error};let s=r.data||[];if(!s.length){const{data:o,error:l}=await he.from("budgets").select("*, transactions (*)").eq("user_id",e).order("created_at",{ascending:!1}).limit(1);if(!l&&(o!=null&&o.length))s=o;else{const c=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`temp-budget-${Date.now()}`,u=new Date().toISOString();s=[{id:c,user_id:e,name:t.name,category_budgets:t.categoryBudgets||[],created_at:u,transactions:[],__optimistic:!0}]}}return{data:s.map(o=>{const l={...o};return delete l.__optimistic,Ic(l)}),error:null,optimistic:s.some(o=>o.__optimistic)}},Ai=async(e,t)=>{const n={name:t.name,category_budgets:t.categoryBudgets},{data:r,error:s}=await he.from("budgets").update(n).eq("id",e).select("*, transactions (*)");return{data:(r||[]).map(Ic),error:s}},qw=async e=>he.from("budgets").delete().eq("id",e),qp=async(e,t)=>{const n={budget_id:e,name:t.name,amount:t.amount,budgeted_amount:t.budgetedAmount??null,category:t.category,type:t.type,date:t.date,receipt_url:t.receipt??null},{data:r,error:s}=await he.from("transactions").insert([n]).select();return{data:(r||[]).map(Rc),error:s}},Ww=async(e,t)=>{const n={name:t.name,amount:t.amount,budgeted_amount:t.budgetedAmount??null,category:t.category,type:t.type,date:t.date,receipt_url:t.receipt??null},r=Object.fromEntries(Object.entries(n).filter(([,o])=>o!==void 0)),{data:s,error:i}=await he.from("transactions").update(r).eq("id",e).select();return{data:(s||[]).map(Rc),error:i}},Hw=async e=>{if(!e)return{data:null,error:{message:"User ID is required"}};const{data:t,error:n}=await he.rpc("get_cash_burn",{p_user_id:e});return n?{data:null,error:n}:{data:(Array.isArray(t)?t[0]:t)||null,error:null}},Vw=async e=>he.from("user_categories").select("*").eq("user_id",e).single(),Gw=async(e,t)=>he.from("user_categories").upsert([{user_id:e,categories:t}]).select(),Wp=[25,50,75,100],Kw=e=>({...e,milestones:e.milestones&&e.milestones.length?e.milestones:Wp}),Dc=e=>({...Kw(e),goal_contributions:(e.goal_contributions||[]).map(t=>({...t,amount:Number(t.amount||0)})).sort((t,n)=>new Date(n.contributed_at)-new Date(t.contributed_at))}),Qw=async e=>{const{data:t,error:n}=await he.from("goals").select("*, goal_contributions (*)").eq("user_id",e).order("created_at",{ascending:!1});return{data:(t||[]).map(Dc),error:n}},Jw=async(e,t)=>{const n={user_id:e,name:t.name,target_amount:t.targetAmount,target_date:t.targetDate,status:t.status||"active",milestones:t.milestones||Wp,linked_budget_id:t.linkedBudgetId||null,created_at:new Date().toISOString()},{data:r,error:s}=await he.from("goals").insert([n]).select("*, goal_contributions (*)");return{data:(r||[]).map(Dc),error:s}},Yw=async(e,t)=>{const n={name:t.name,target_amount:t.targetAmount,target_date:t.targetDate,status:t.status,milestones:t.milestones,linked_budget_id:t.linkedBudgetId??null},r=Object.fromEntries(Object.entries(n).filter(([,o])=>o!==void 0)),{data:s,error:i}=await he.from("goals").update(r).eq("id",e).select("*, goal_contributions (*)");return{data:(s||[]).map(Dc),error:i}},Xw=async e=>he.from("goals").delete().eq("id",e),Zw=async(e,t)=>{const n={goal_id:e,amount:t.amount,contributed_at:t.date||new Date().toISOString(),note:t.note||null,created_at:new Date().toISOString()},{data:r,error:s}=await he.from("goal_contributions").insert([n]).select();return{data:r,error:s}},Oi=e=>({...e,insights:e.insights||{}}),e_=async(e,t,n={})=>{const r=n.limit??10;if(!e||!t)return{data:[],error:null};let s=he.from("ai_insights").select("*").eq("user_id",e).eq("budget_id",t).order("created_at",{ascending:!1});r&&(s=s.limit(r));const{data:i,error:o}=await s;return{data:(i||[]).map(Oi),error:o}},t_=async({userId:e,budgetId:t,metrics:n={}})=>{if(!e||!t)return{data:null,error:{message:"Missing user or budget context"}};const{data:r,error:s}=await he.functions.invoke("ai-insights",{body:{budgetId:t,userId:e,metrics:n}});if(s)try{const o=await Ud(n);return{data:Oi({id:`local-insight-${Date.now()}`,user_id:e,budget_id:t,insights:o,created_at:new Date().toISOString(),tier:"local"}),error:null}}catch(o){return console.error("Failed to generate fallback insight",o),{data:null,error:s}}const i=r!=null&&r.insight?Oi(r.insight):null;if(!i){const o=await Ud(n);return{data:Oi({id:`local-insight-${Date.now()}`,user_id:e,budget_id:t,insights:o,created_at:new Date().toISOString(),tier:"local"}),error:null}}return{data:i,error:null}},Hp=b.createContext(void 0),n_=1e4,r_=1e4,s_=e=>{const t=new Error(e);return t.name="TimeoutError",t},Fd=(e,t)=>Promise.race([e,new Promise((n,r)=>setTimeout(()=>r(s_(t)),r_))]);function Mr(){const e=b.useContext(Hp);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function Vp({children:e}){const[t,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(!0),[l,c]=b.useState(!0),[u,d]=b.useState("checking-session"),f=b.useRef(!0),g=b.useCallback(m=>{f.current&&m()},[]),v=b.useCallback(m=>{g(()=>s(m))},[g]),w=b.useCallback(async m=>{var S;if(!m){v(null);return}let p=!0,y="ready";try{d("loading-profile");const{data:C,error:j}=await Fd(Fw(m.id),"Profile lookup timed out");if(j&&j.code==="PGRST116"){const N=((S=m.user_metadata)==null?void 0:S.full_name)||m.email,{data:R,error:H}=await Fd(Bw(m.id,m.email,N),"Profile creation timed out");if(H){console.error("Error creating profile",H),v(null);return}v((R==null?void 0:R[0])||null);return}if(j){console.error("Error loading profile",j),v(null);return}v(C)}catch(C){if((C==null?void 0:C.name)==="TimeoutError"){console.warn("Supabase did not respond in time while loading the profile. Falling back to signed-out state.",C),v(null),g(()=>o(!1)),d("profile-timeout"),p=!1,y="profile-timeout";return}console.error("Unexpected profile error",C),v(null)}finally{p&&(g(()=>o(!1)),d(y))}},[v,g]),x=b.useCallback(async m=>{g(()=>n(m)),m?(g(()=>o(!0)),await w(m)):(v(null),g(()=>o(!1)),d("signed-out"))},[v,w,g]);b.useEffect(()=>{f.current=!0,(async()=>{try{d("checking-session");const y=Dw();if(Ow(y)){Pl();try{await he.auth.signOut()}catch(N){console.warn("Failed to clear Supabase session while expiring stored session",N)}if(!f.current)return;g(()=>{n(null),s(null),o(!1)}),d("signed-out");return}const C=new Promise((N,R)=>setTimeout(()=>R(new Error("Session lookup timed out")),n_)),{user:j}=await Promise.race([Mw(),C]);if(!f.current)return;await x(j)}catch(y){if(console.warn("Failed to resolve initial session",y),!f.current)return;g(()=>{n(null),s(null),o(!1)}),d("signed-out")}finally{f.current&&c(!1)}})();const{data:p}=he.auth.onAuthStateChange(async(y,S)=>{y==="SIGNED_IN"&&Oc(),y==="SIGNED_OUT"&&Pl(),f.current&&(d("auth-transition"),await x((S==null?void 0:S.user)??null))});return()=>{f.current=!1,p.subscription.unsubscribe()}},[x,g]);const O=b.useMemo(()=>({user:t,userProfile:r,loading:i,initializing:l,status:u}),[t,r,i,l,u]);return a.jsx(Hp.Provider,{value:O,children:e})}Vp.propTypes={children:k.node.isRequired};const i_=24*60*60*1e3,o_={weekly:7,biweekly:14,semimonthly:15,"semi-monthly":15,quarterly:91,yearly:365,annual:365},xa={green:{label:"On Track"},yellow:{label:"Watch"},red:{label:"Over"}},zd=(e="")=>e.toLowerCase().trim(),a_=(e,t,n)=>Math.min(Math.max(e,t),n),Zr=e=>{if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t},qd=(e,t)=>{const n=new Date(e);return n.setDate(n.getDate()+t),n},Sa=(e,t)=>{const n=new Date(e);return n.setMonth(n.getMonth()+t),n},l_=e=>(((e==null?void 0:e.cycle)||(e==null?void 0:e.cycleMetadata)||{}).type||(e==null?void 0:e.cycleType)||"monthly").toLowerCase(),c_=(e,t)=>{const n=(e==null?void 0:e.cycle)||(e==null?void 0:e.cycleMetadata)||{};return Zr(n.currentStart)||Zr(n.startDate)||Zr(e==null?void 0:e.cycleStartDate)||Zr(e==null?void 0:e.createdAt)||Zr(e==null?void 0:e.created_at)||new Date(t)},Gp=(e,t)=>{const n=(t==null?void 0:t.cycle)||(t==null?void 0:t.cycleMetadata)||{};return typeof n.lengthDays=="number"?n.lengthDays:typeof n.days=="number"?n.days:e==="custom"&&typeof n.customDays=="number"?n.customDays:e==="per-paycheck"&&typeof n.payFrequencyDays=="number"||e==="per_paycheck"&&typeof n.payFrequencyDays=="number"?n.payFrequencyDays:typeof n.cadenceDays=="number"?n.cadenceDays:typeof n.intervalDays=="number"?n.intervalDays:e==="monthly"?30:e==="biweekly"?14:e==="weekly"?7:e==="per-paycheck"||e==="per_paycheck"?14:e==="custom"?30:o_[e]||30},Wd=(e,t,n)=>{const r=(n==null?void 0:n.cycle)||(n==null?void 0:n.cycleMetadata)||{};switch(t){case"monthly":return Sa(e,r.repeatEvery||1);case"quarterly":return Sa(e,3);case"yearly":case"annual":return Sa(e,12);case"semimonthly":case"semi-monthly":{const s=r.days||r.lengthDays||15;return qd(e,s)}default:{const s=Gp(t,n);return qd(e,s)}}},u_=(e,t)=>{const n=l_(e);let r=c_(e,t),s=Wd(r,n,e),i=0;for(;s&&t>=s&&i<500;)r=s,s=Wd(r,n,e),i+=1;const o=s?s.getTime()-r.getTime():Gp(n,e)*i_,l=t.getTime()-r.getTime(),c=o>0?a_(l/o,0,1):1;return{cycleType:n,currentStart:r,nextStart:s,totalMs:o,elapsedMs:l,progress:c}},Ri=e=>`$${Number.parseFloat(e||0).toFixed(2)}`,d_=(e,t,n,r)=>{const s=Math.round(r*100);return`Spent ${Ri(e)} of ${Ri(t)} with ${s}% of the cycle elapsed (expected ${Ri(n)}).`},Hd=(e,t,n)=>{const r=Number.isFinite(t)?t:0,s=Number.isFinite(e)?e:0,i=r*n;if(r<=0){if(s<=0){const d="green";return{status:d,...xa[d],tooltip:"No budget set for this period.",actual:s,budgeted:r,expected:i}}const u="red";return{status:u,...xa[u],tooltip:`Spending ${Ri(s)} without a set budget for this cycle.`,actual:s,budgeted:r,expected:i}}const o=s/r,l=.1;let c="green";return o>n+l?c="red":o>n&&(c="yellow"),{status:c,...xa[c],tooltip:d_(s,r,i,n),actual:s,budgeted:r,expected:i}},Kp=(e,t=new Date)=>{const n=e||{},r=(n.transactions||[]).filter(g=>g.type==="expense"),s=u_(n,t),i=s.progress??1,l=(n.categoryBudgets||[]).map(g=>{const v=zd(g.category),w=r.filter(m=>zd(m.category)===v).reduce((m,p)=>m+(Number.isFinite(p.amount)?p.amount:0),0),x=Number.isFinite(g.budgetedAmount)?g.budgetedAmount:Number.isFinite(g.amount)?g.amount:0,O=Hd(w,x,i);return{name:g.category,key:v,actual:w,budgeted:x,...O}}),c=l.reduce((g,v)=>(v.key&&(g[v.key]=v),g),{}),u=l.reduce((g,v)=>g+v.budgeted,0),d=r.reduce((g,v)=>g+(Number.isFinite(v.amount)?v.amount:0),0),f=Hd(d,u,i);return{cycle:{type:s.cycleType,start:s.currentStart,end:s.nextStart,progress:i},categories:l,categoriesByName:c,overall:f}},Vd=[{category:"Rent",budgetedAmount:1200},{category:"Groceries",budgetedAmount:450},{category:"Transportation",budgetedAmount:180},{category:"Bills",budgetedAmount:320},{category:"Entertainment",budgetedAmount:150},{category:"Shopping",budgetedAmount:120},{category:"Dining Out",budgetedAmount:160},{category:"Emergency Fund",budgetedAmount:100}],Qp=[{type:"monthly",label:"Monthly",description:"Resets on the first of each month."},{type:"per-paycheck",label:"Per-paycheck",description:"Sync budgets to each paycheck."},{type:"custom",label:"Custom",description:"Choose any cycle length you need."}],mi=e=>{const t=Qp.find(n=>n.type===e);return t?t.label:e?e.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Monthly"},gi=e=>({name:e===0?"My First Budget":"My Budget",cycleType:"monthly",startDate:new Date().toISOString().split("T")[0],payFrequencyDays:14,customDays:30,includeDefaultCategories:!0}),Gd=e=>`$${Number.parseFloat(e||0).toFixed(2)}`;function $c({budgets:e,setSelectedBudget:t,setViewMode:n,setBudgets:r,userId:s,onMetadataChange:i,onMetadataRemove:o,onDataMutated:l}){const[c,u]=b.useState(null),[d,f]=b.useState(""),[g,v]=b.useState(null),[w,x]=b.useState(!1),[O,m]=b.useState(!1),[p,y]=b.useState(()=>gi(e.length)),S=b.useMemo(()=>e.reduce((T,W)=>{var Q;const J=((Q=W==null?void 0:W.cycleMetadata)==null?void 0:Q.type)||"monthly";return T[J]=(T[J]||0)+1,T},{}),[e]),C=T=>{t(T),n("details")},j=()=>{y(gi(e.length)),m(!1)},N=async()=>{x(!0);try{const T=p.includeDefaultCategories?Vd.map(G=>({...G})):[],W={name:p.name.trim()||"My Budget",categoryBudgets:T},{data:J,error:Q}=await Bd(s,W);if(Q)console.error("Error creating budget:",Q),alert("Failed to create budget. Please try again.");else if(J!=null&&J[0]){const G=J[0],xe=G.created_at?new Date(G.created_at).toLocaleDateString():new Date().toLocaleDateString(),I={id:G.id,name:G.name,createdAt:xe,categoryBudgets:G.category_budgets||T,transactions:(G.transactions||[]).map(V=>({...V}))};r(V=>[I,...V]);const z=new Date().toISOString(),L={type:p.cycleType,label:mi(p.cycleType),currentStart:p.startDate?new Date(p.startDate).toISOString():z,payFrequencyDays:p.cycleType==="per-paycheck"?Number(p.payFrequencyDays)||14:void 0,customDays:p.cycleType==="custom"?Number(p.customDays)||30:void 0,lastEditedAt:z};i==null||i(I.id,V=>({...V,cycle:{...V.cycle,...L},changeLog:[{at:z,message:`Budget created (${L.label}) with ${T.length||"no"} starter categories`,type:"create"},...V.changeLog||[]]})),t({...I,cycleMetadata:L}),n("details"),l==null||l()}}catch(T){console.error("Error creating budget:",T),alert("Failed to create budget. Please try again.")}finally{x(!1),j()}},R=async T=>{if(!d.trim()){u(null);return}x(!0);try{const{error:W}=await Ai(T.id,{name:d.trim(),categoryBudgets:T.categoryBudgets});if(W)console.error("Error updating budget:",W),alert("Failed to update budget name. Please try again.");else{r(Q=>Q.map(G=>G.id===T.id?{...G,name:d.trim()}:G));const J=new Date().toISOString();i==null||i(T.id,Q=>({...Q,changeLog:[{at:J,message:`Renamed budget to "${d.trim()}"`,type:"rename"},...Q.changeLog||[]]})),l==null||l()}}catch(W){console.error("Error updating budget:",W),alert("Failed to update budget name. Please try again.")}finally{u(null),x(!1)}},H=async T=>{x(!0);try{const W={name:`${T.name} (Copy)`,categoryBudgets:T.categoryBudgets||[]},{data:J,error:Q}=await Bd(s,W);if(Q)console.error("Error duplicating budget:",Q),alert("Failed to duplicate budget. Please try again.");else if(J!=null&&J[0]){const G=J[0],xe={id:G.id,name:G.name,createdAt:G.created_at?new Date(G.created_at).toLocaleDateString():new Date().toLocaleDateString(),categoryBudgets:G.category_budgets||[],transactions:(G.transactions||[]).map(L=>({...L}))};r(L=>[xe,...L]);const I=new Date().toISOString(),z=T.cycleMetadata||{type:"monthly",label:mi("monthly")};i==null||i(xe.id,L=>{var V,Y;return{...L,cycle:{...L.cycle,...z,lastEditedAt:I},insights:{...L.insights,...T.insightsPreferences||{},nudges:{...(V=L.insights)==null?void 0:V.nudges,...((Y=T.insightsPreferences)==null?void 0:Y.nudges)||{}}},changeLog:[{at:I,message:`Duplicated from ${T.name}`,type:"duplicate"},...L.changeLog||[]]}}),l==null||l()}}catch(W){console.error("Error duplicating budget:",W),alert("Failed to duplicate budget. Please try again.")}finally{v(null),x(!1)}},E=async T=>{x(!0);try{const{error:W}=await qw(T);W?(console.error("Error deleting budget:",W),alert("Failed to delete budget. Please try again.")):(r(J=>J.filter(Q=>Q.id!==T)),o==null||o(T),l==null||l())}catch(W){console.error("Error deleting budget:",W),alert("Failed to delete budget. Please try again.")}finally{v(null),x(!1)}},M=Object.keys(S);return a.jsxs("div",{children:[a.jsxs("div",{className:"header-section",children:[a.jsx("p",{className:"tagline",children:"Manage your budgets and stay on top of your finances."}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{className:"secondary-button",onClick:()=>n("goals"),children:"View savings goals"})})]}),e.length>0&&a.jsxs("div",{className:"cycle-summary-card",children:[a.jsx("div",{className:"cycle-summary-title",children:"Budget cycles"}),a.jsxs("div",{className:"cycle-summary-stats",children:[M.length===0&&a.jsx("span",{children:"No active budgets yet."}),M.map(T=>a.jsxs("span",{className:`cycle-chip cycle-${T}`,children:[mi(T),"  ",S[T]]},T))]})]}),e.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("p",{children:"Welcome to Pocket Budget! Create your first budget to get started."}),a.jsx("button",{className:"primary-button",onClick:()=>{y(gi(e.length)),m(!0)},disabled:w,children:"Start a Monthly Budget"})]}):e.map(T=>{var Ct;const W=Kp(T),J=W.overall,Q=(T.transactions||[]).filter(B=>B.type==="income").reduce((B,A)=>B+A.amount,0),G=(T.transactions||[]).filter(B=>B.type==="expense").reduce((B,A)=>B+A.amount,0),xe=Q-G,I=(T.categoryBudgets||[]).map(B=>{var K;const A=(T.transactions||[]).filter(te=>te.type==="expense"&&te.category.toLowerCase().trim()===B.category.toLowerCase().trim()).reduce((te,Z)=>te+Z.amount,0),U=A>B.budgetedAmount,X=((K=B.category)==null?void 0:K.toLowerCase().trim())||"";return{...B,actual:A,isOver:U,pacing:W.categoriesByName[X]}}),z=I.some(B=>{var A;return B.isOver||((A=B.pacing)==null?void 0:A.status)==="red"}),L=I.reduce((B,A)=>B+(A.budgetedAmount||0),0),V=I.reduce((B,A)=>B+(A.actual||0),0),Y=L-V,Qe=((Ct=T.cycleMetadata)==null?void 0:Ct.type)||"monthly",nt=mi(Qe);return a.jsx("div",{className:"budgetCard",children:a.jsxs("div",{className:"budgetCard-content",children:[a.jsxs("div",{className:"budgetCard-info",onClick:()=>C(T),children:[a.jsxs("div",{className:"budgetCycleRow",children:[a.jsx("span",{className:`cycle-pill cycle-${Qe}`,children:nt}),a.jsxs("div",{className:`pacing-indicator pacing-${J.status}`,title:J.tooltip,role:"status",children:[a.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),a.jsx("span",{className:"pacing-label",children:J.label})]})]}),c===T.id?a.jsx("input",{className:"input budget-name-input",value:d,onChange:B=>f(B.target.value),onBlur:()=>R(T),onKeyPress:B=>{B.key==="Enter"&&R(T)},autoFocus:!0,disabled:w}):a.jsx("div",{className:"budgetNameRow",children:a.jsxs("div",{className:"budgetName",onClick:B=>{B.stopPropagation(),u(T.id),f(T.name)},children:[T.name,z&&a.jsx("span",{className:"expense",style:{marginLeft:"0.5rem"},children:""})]})}),a.jsxs("div",{className:"budgetBalance",children:["Balance: ",a.jsxs("span",{className:xe>=0?"income":"expense",children:["$",xe.toFixed(2)]})]}),a.jsxs("div",{className:"budgetSummaryRow",role:"list",children:[a.jsxs("span",{className:"budgetSummaryItem",role:"listitem",children:["Spent ",a.jsx("strong",{children:Gd(V)})]}),a.jsxs("span",{className:"budgetSummaryItem",role:"listitem",children:["Remaining ",a.jsx("strong",{children:Gd(Y)})]}),a.jsxs("span",{className:`budgetSummaryItem guardrail-${J.status}`,role:"listitem",children:["Guardrail ",a.jsx("strong",{children:J.label})]})]}),a.jsxs("div",{className:"budgetDate",children:["Created: ",T.createdAt]}),I.length>0&&a.jsxs("div",{className:"category-budgets",children:[I.slice(0,3).map(B=>{const A=!!B.budgetedAmount&&B.budgetedAmount>0,U=A?Math.min(B.actual/B.budgetedAmount*100,100):0;return a.jsxs("div",{className:"category-budget-row",children:[a.jsxs("div",{className:"category-budget-header",children:[a.jsxs("div",{className:"category-budget-name",children:[B.category,B.isOver&&a.jsx("span",{className:"expense",style:{marginLeft:"0.3rem"},children:""})]}),B.pacing&&a.jsxs("div",{className:`pacing-indicator pacing-${B.pacing.status}`,title:B.pacing.tooltip,role:"status","aria-label":`${B.category} pacing is ${B.pacing.label}`,onClick:X=>X.stopPropagation(),children:[a.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),a.jsx("span",{className:"pacing-label",children:B.pacing.label})]})]}),a.jsxs("div",{className:"category-budget-amounts",children:["$",B.actual.toFixed(2)," / $",B.budgetedAmount.toFixed(2)]}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:`progress-fill ${B.isOver?"over":""}`,style:{width:`${U}%`},"aria-label":A?void 0:`${B.category} has no budget set`})})]},B.category)}),I.length>3&&a.jsxs("div",{className:"category-budget-more",children:["+",I.length-3," more categories"]})]})]}),a.jsxs("div",{className:"menuContainer",children:[a.jsx("button",{className:"menuButton",onClick:B=>{B.stopPropagation(),v(g===T.id?null:T.id)},title:"More options",disabled:w,children:""}),g===T.id&&a.jsxs("div",{className:"dropdownMenu",children:[a.jsx("button",{className:"dropdownItem",onClick:B=>{B.stopPropagation(),H(T)},disabled:w,children:"Copy Budget"}),a.jsx("button",{className:"dropdownItem delete",onClick:B=>{B.stopPropagation(),confirm(`Are you sure you want to delete "${T.name}"?`)&&E(T.id)},disabled:w,children:"Delete Budget"})]})]})]})},T.id)}),e.length>0&&a.jsxs("div",{className:"budget-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:()=>{y(gi(e.length)),m(!0)},disabled:w,children:"New Budget"}),a.jsx("button",{className:"cancelButton secondary-button cate-btn",onClick:()=>n("categories"),children:"Manage Categories"})]}),O&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent enhanced-modal",children:[a.jsx("h2",{className:"header modal-header",children:"Create a budget"}),a.jsx("label",{className:"input-label",htmlFor:"new-budget-name",children:"Budget name"}),a.jsx("input",{id:"new-budget-name",className:"input",placeholder:"My Budget",value:p.name,onChange:T=>y(W=>({...W,name:T.target.value}))}),a.jsxs("div",{className:"cycle-option-group",children:[a.jsx("span",{className:"input-label",children:"Cycle"}),a.jsx("div",{className:"cycle-option-grid",children:Qp.map(T=>{const W=p.cycleType===T.type;return a.jsxs("button",{type:"button",className:`cycle-option ${W?"selected":""}`,onClick:()=>{y(J=>({...J,cycleType:T.type}))},children:[a.jsx("div",{className:"cycle-option-title",children:T.label}),a.jsx("div",{className:"cycle-option-description",children:T.description})]},T.type)})})]}),p.cycleType==="per-paycheck"&&a.jsxs("div",{className:"cycle-config-row",children:[a.jsx("label",{className:"input-label",htmlFor:"cycle-pay-frequency",children:"Paycheck frequency (days)"}),a.jsx("input",{id:"cycle-pay-frequency",type:"number",className:"input",min:"7",max:"45",value:p.payFrequencyDays,onChange:T=>y(W=>({...W,payFrequencyDays:T.target.value}))})]}),p.cycleType==="custom"&&a.jsxs("div",{className:"cycle-config-row",children:[a.jsx("label",{className:"input-label",htmlFor:"cycle-custom-length",children:"Cycle length (days)"}),a.jsx("input",{id:"cycle-custom-length",type:"number",className:"input",min:"5",max:"120",value:p.customDays,onChange:T=>y(W=>({...W,customDays:T.target.value}))})]}),a.jsxs("div",{className:"cycle-config-row",children:[a.jsx("label",{className:"input-label",htmlFor:"cycle-start-date",children:"Cycle start date"}),a.jsx("input",{id:"cycle-start-date",type:"date",className:"input",value:p.startDate,onChange:T=>y(W=>({...W,startDate:T.target.value}))})]}),a.jsxs("label",{className:"checkbox-row",children:[a.jsx("input",{type:"checkbox",checked:p.includeDefaultCategories,onChange:T=>y(W=>({...W,includeDefaultCategories:T.target.checked}))}),a.jsxs("span",{children:["Include starter categories (",Vd.length,")"]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:N,disabled:w,children:w?"Creating...":"Create budget"}),a.jsx("button",{className:"cancelButton secondary-button",onClick:j,disabled:w,children:"Cancel"})]})]})})]})}const h_=k.shape({id:k.string.isRequired,name:k.string.isRequired,amount:k.number.isRequired,budgetedAmount:k.number,category:k.string.isRequired,type:k.oneOf(["income","expense"]).isRequired,date:k.string.isRequired,receipt:k.string}),f_=k.shape({category:k.string.isRequired,budgetedAmount:k.number.isRequired});$c.propTypes={budgets:k.arrayOf(k.shape({id:k.string.isRequired,name:k.string.isRequired,createdAt:k.string.isRequired,transactions:k.arrayOf(h_),categoryBudgets:k.arrayOf(f_),cycleMetadata:k.object})).isRequired,setSelectedBudget:k.func.isRequired,setViewMode:k.func.isRequired,setBudgets:k.func.isRequired,userId:k.string.isRequired,onMetadataChange:k.func,onMetadataRemove:k.func,onDataMutated:k.func};$c.defaultProps={onMetadataChange:void 0,onMetadataRemove:void 0,onDataMutated:void 0};const Jp=[{type:"monthly",label:"Monthly"},{type:"per-paycheck",label:"Per-paycheck"},{type:"custom",label:"Custom"}],ka=e=>{const t=Jp.find(n=>n.type===e);return t?t.label:e?e.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Monthly"},ja=["","","","","","","",""],p_=e=>{if(!(e!=null&&e.length))return"";const t=Math.max(...e);return t<=0?"".repeat(e.length):e.map(n=>{const r=Math.max(0,n)/t,s=Math.min(ja.length-1,Math.round(r*(ja.length-1)));return ja[s]}).join("")},Kd={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},nr=e=>`$${Number.parseFloat(e||0).toFixed(2)}`,Al=()=>new Date().toISOString().split("T")[0],yi=(e,t)=>{if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const n=e?new Date(e):null;if(n&&!Number.isNaN(n.getTime()))return n.toISOString().split("T")[0];if(t!==void 0){if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const r=t?new Date(t):null;if(r&&!Number.isNaN(r.getTime()))return r.toISOString().split("T")[0]}return Al()},m_=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleDateString()};function Lc({budget:e,categories:t,setViewMode:n,setBudgets:r,budgets:s,setSelectedBudget:i,onMetadataChange:o,onDataMutated:l}){var lu,cu,uu;const{user:c}=Mr(),u=b.useMemo(()=>e.metadata||{},[e.metadata]),d=b.useMemo(()=>e.insightsPreferences||u.insights||{},[e.insightsPreferences,u.insights]),f=b.useMemo(()=>e.changeLog||u.changeLog||[],[e.changeLog,u.changeLog]),[g,v]=b.useState("expenses"),[w,x]=b.useState(!1),[O,m]=b.useState(null),[p,y]=b.useState(1),[S,C]=b.useState(!1),[j,N]=b.useState({name:"",amount:"",budgetedAmount:"",category:"",date:Al(),type:"expense",receipt:null}),[R,H]=b.useState(null),[E,M]=b.useState(e.name||""),[T,W]=b.useState(()=>(e.categoryBudgets||[]).map(h=>({...h}))),[J,Q]=b.useState(!1),[G,xe]=b.useState(null),[I,z]=b.useState(!1),[L,V]=b.useState(!1),[Y,Qe]=b.useState(null),[nt,Ct]=b.useState(null),[B,A]=b.useState(null),[U,X]=b.useState(()=>new Set(d.trackedCategories||[])),[K,te]=b.useState(()=>{var h,_;return{day:((h=d.reportSchedule)==null?void 0:h.day)||"sunday",time:((_=d.reportSchedule)==null?void 0:_.time)||"08:00"}}),[Z,qe]=b.useState(()=>{var h,_,P,$;return{enabled:!!((h=d.nudges)!=null&&h.enabled),threshold:((_=d.nudges)==null?void 0:_.threshold)||.8,quietStart:((P=d.quietHours)==null?void 0:P.start)??21,quietEnd:(($=d.quietHours)==null?void 0:$.end)??7}}),[ae,Tt]=b.useState(()=>{var h,_,P,$,q,ne;return{type:((h=e.cycleMetadata)==null?void 0:h.type)||"monthly",startDate:(_=e.cycleMetadata)!=null&&_.currentStart?new Date(e.cycleMetadata.currentStart).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],payFrequencyDays:((P=e.cycleMetadata)==null?void 0:P.payFrequencyDays)||14,customDays:(($=e.cycleMetadata)==null?void 0:$.customDays)||((q=e.cycleMetadata)==null?void 0:q.lengthDays)||((ne=e.cycleMetadata)==null?void 0:ne.cycleLength)||30}}),[Vn,rt]=b.useState(!1),[im,Oo]=b.useState(!1),[qc,Ro]=b.useState(""),[Wc,Io]=b.useState(""),[Qt,Do]=b.useState(null),[Hc,$o]=b.useState(null),[Vc,Gc]=b.useState(!1),Ce=b.useMemo(()=>(e.transactions||[]).map(h=>({...h,date:yi(h.date)})),[e.transactions]),om=b.useMemo(()=>({...e,transactions:Ce}),[e,Ce]);b.useEffect(()=>{W((e.categoryBudgets||[]).map(h=>({...h}))),Q(!1)},[e.id,e.categoryBudgets]),b.useEffect(()=>{M(e.name||"")},[e.id,e.name]),b.useEffect(()=>{var h,_,P,$,q,ne,ge,ce,oe,Ne,fe,Re;X(new Set(d.trackedCategories||[])),te({day:((h=d.reportSchedule)==null?void 0:h.day)||"sunday",time:((_=d.reportSchedule)==null?void 0:_.time)||"08:00"}),qe({enabled:!!((P=d.nudges)!=null&&P.enabled),threshold:(($=d.nudges)==null?void 0:$.threshold)||.8,quietStart:((q=d.quietHours)==null?void 0:q.start)??21,quietEnd:((ne=d.quietHours)==null?void 0:ne.end)??7}),Tt({type:((ge=e.cycleMetadata)==null?void 0:ge.type)||"monthly",startDate:(ce=e.cycleMetadata)!=null&&ce.currentStart?new Date(e.cycleMetadata.currentStart).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],payFrequencyDays:((oe=e.cycleMetadata)==null?void 0:oe.payFrequencyDays)||14,customDays:((Ne=e.cycleMetadata)==null?void 0:Ne.customDays)||((fe=e.cycleMetadata)==null?void 0:fe.lengthDays)||((Re=e.cycleMetadata)==null?void 0:Re.cycleLength)||30}),rt(!1)},[e.id,e.cycleMetadata,d]);const Lo=7,kn=b.useCallback(h=>{o&&o(e.id,h)},[o,e.id]),am=(h,_)=>{const P=Number.parseFloat(_);W($=>$.map(q=>q.category===h?{...q,budgetedAmount:Number.isFinite(P)?P:0}:q)),Q(!0)},lm=()=>{const h=qc.trim();h&&(W(_=>{if(_.some(q=>q.category.toLowerCase()===h.toLowerCase()))return _;const P=Number.parseFloat(Wc),$={category:h,budgetedAmount:Number.isFinite(P)?P:0};return Q(!0),[..._,$]}),Ro(""),Io(""),Oo(!1))},cm=()=>{Oo(!1),Ro(""),Io("")},um=h=>{const _=Ce.filter($=>$.type==="expense"&&$.category===h.category).reduce(($,q)=>$+q.amount,0),P=Math.max(0,Number(h.budgetedAmount||0)-_);Qe({...h,remaining:P,actual:_,reallocateTo:""})},dm=()=>{if(!Y)return;const{category:h,remaining:_,reallocateTo:P}=Y;if(_>0&&!P){alert("Please choose a category to reallocate the remaining budget.");return}W($=>{const q=$.filter(ne=>ne.category!==h);return _>0&&P?q.map(ne=>ne.category===P?{...ne,budgetedAmount:Number(ne.budgetedAmount||0)+_}:ne):q}),Q(!0),Qe(null)},hm=()=>{Qe(null)},Kc=h=>{r(_=>_.map(P=>P.id===e.id?h:P)),i(h)},fm=async h=>{if(h)try{C(!0);const{error:_}=await Ai(e.id,{name:e.name,categoryBudgets:h});if(_){console.error("Error undoing allocations:",_),alert("Failed to undo allocation change. Please try again.");return}const P={...e,categoryBudgets:h};Kc(P),W(h.map($=>({...$}))),Q(!1),kn($=>({...$,changeLog:[{at:new Date().toISOString(),message:"Reverted allocation change",type:"undo"},...$.changeLog||[]]})),l==null||l()}finally{C(!1),xe(null)}},pm=async()=>{const h=T.map(_=>({category:_.category,budgetedAmount:Number.isFinite(Number(_.budgetedAmount))?Number(_.budgetedAmount):0}));C(!0);try{const{error:_}=await Ai(e.id,{name:e.name,categoryBudgets:h});if(_){console.error("Error saving allocations:",_),alert("Failed to save category allocations.");return}const P=e.categoryBudgets||[],$={...e,categoryBudgets:h};Kc($),Q(!1);const q=new Date().toISOString();kn(ne=>({...ne,changeLog:[{at:q,message:"Updated category allocations",type:"allocation"},...ne.changeLog||[]]})),l==null||l(),xe({message:"Allocations updated",actionLabel:"Undo",action:()=>fm(P)})}finally{C(!1)}},Qc=()=>xe(null),mm=()=>{const h=new Date().toISOString();kn(_=>{var P;return{..._,cycle:{..._.cycle,type:ae.type,label:ka(ae.type),currentStart:ae.startDate?new Date(ae.startDate).toISOString():(P=_.cycle)==null?void 0:P.currentStart,payFrequencyDays:ae.type==="per-paycheck"?Number(ae.payFrequencyDays)||14:void 0,customDays:ae.type==="custom"?Number(ae.customDays)||30:void 0,lastEditedAt:h},changeLog:[{at:h,message:`Updated cycle to ${ka(ae.type)}`,type:"cycle"},..._.changeLog||[]]}}),V(!1)},gm=h=>{X(_=>{const P=new Set(_);return P.has(h)?P.delete(h):P.add(h),rt(!0),P})},Jc=(h,_)=>{te(P=>({...P,[h]:_})),rt(!0)},Ws=h=>{qe(_=>({..._,...h})),rt(!0)};b.useEffect(()=>{if(!Vn)return;const h=Array.from(U);kn(_=>{var P,$,q;return{..._,insights:{..._.insights||{},trackedCategories:h,reportSchedule:{...(P=_.insights)==null?void 0:P.reportSchedule,...K},quietHours:{...(($=_.insights)==null?void 0:$.quietHours)||{},start:Number(Z.quietStart)??21,end:Number(Z.quietEnd)??7},nudges:{...((q=_.insights)==null?void 0:q.nudges)||{},enabled:!!Z.enabled,threshold:Number(Z.threshold)||.8}}}}),rt(!1)},[Vn,U,K,Z,kn]);const Yc=b.useMemo(()=>{if(U.size)return Array.from(U);const h={};Ce.filter($=>$.type==="expense").forEach($=>{h[$.category]=(h[$.category]||0)+$.amount});const _=Object.entries(h).sort(($,q)=>q[1]-$[1]).map(([$])=>$),P=(e.categoryBudgets||[]).map($=>$.category);return Array.from(new Set([..._,...P])).slice(0,6)},[U,Ce,e.categoryBudgets]),Xc=b.useMemo(()=>{const h=new Set((e.categoryBudgets||[]).map(_=>_.category));return(t.expense||[]).forEach(_=>h.add(_.name)),Array.from(h).sort((_,P)=>_.localeCompare(P))},[e.categoryBudgets,t.expense]),Zc=b.useCallback(h=>{const[_="08",P="00"]=(h||"08:00").split(":"),$=Number.parseInt(_,10),q=Number.parseInt(P,10);return{hours:Number.isFinite($)?$:8,minutes:Number.isFinite(q)?q:0}},[]),eu=b.useCallback(h=>{const _=new Date(h),P=String(K.day||"sunday").toLowerCase(),$=Kd[P]??0,q=(_.getDay()-$+7)%7;_.setDate(_.getDate()-q);const{hours:ne,minutes:ge}=Zc(K.time);return _.setHours(ne,ge,0,0),_},[K.day,K.time,Zc]),Br=b.useMemo(()=>{const _=eu(new Date),P=new Date(_);P.setDate(P.getDate()+7);const $=new Date(_);$.setDate($.getDate()-7);const q=new Date(_),ne=(ce,oe,Ne)=>Ce.filter(fe=>fe.type==="expense"&&fe.category===ce).filter(fe=>{const Re=new Date(fe.date);return Re>=oe&&Re<Ne}).reduce((fe,Re)=>fe+Re.amount,0),ge=Yc.map(ce=>{var Bo;const oe=ne(ce,_,P),Ne=ne(ce,$,q),fe=oe-Ne,Re=Ne>0?fe/Ne*100:oe>0?100:0,ke=ce.toLowerCase().trim(),be=(Bo=$t.categoriesByName)==null?void 0:Bo[ke],bn=[];for(let Yt=5;Yt>=0;Yt-=1){const vt=new Date(P);vt.setDate(vt.getDate()-7*Yt);const Fo=new Date(vt);Fo.setDate(Fo.getDate()-7),bn.push(ne(ce,Fo,vt))}return{category:ce,current:oe,previous:Ne,delta:fe,pctChange:Re,status:(be==null?void 0:be.status)||"green",statusLabel:(be==null?void 0:be.label)||"On Track",trend:bn}}).sort((ce,oe)=>oe.current-ce.current);return{cards:ge,topCards:ge.slice(0,3),trends:ge.reduce((ce,oe)=>({...ce,[oe.category]:oe.trend}),{}),currentStart:_,currentEnd:P}},[Ce,Yc,$t,eu]),Gn=Number(Z.quietStart)??21,Kn=Number(Z.quietEnd)??7,tu=b.useCallback(h=>{const _=h.getHours();return Gn===Kn?!1:Gn<Kn?_>=Gn&&_<Kn:_>=Gn||_<Kn},[Gn,Kn]);b.useEffect(()=>{var ne,ge,ce,oe,Ne;if(!Z.enabled||tu(new Date))return;const h=(ge=(ne=u.insights)==null?void 0:ne.nudges)==null?void 0:ge.snoozedUntil;if(h&&new Date(h)>new Date)return;const _=Number(Z.threshold)||.8,P=(ce=e.cycleMetadata)!=null&&ce.currentStart?new Date(e.cycleMetadata.currentStart).toISOString():e.id,$=((Ne=(oe=u.insights)==null?void 0:oe.nudges)==null?void 0:Ne.acknowledged)||{},q=($t.categories||[]).find(fe=>{if(!fe||!Number.isFinite(fe.budgeted)||fe.budgeted<=0)return!1;const Re=fe.actual/fe.budgeted,ke=`${P}:${fe.name}`.toLowerCase();return Re>=_&&!$[ke]});q&&!B&&A({category:q.name,ratio:q.actual/(q.budgeted||1),actual:q.actual,budgeted:q.budgeted})},[Z,u.insights,e.cycleMetadata,e.id,$t.categories,B,tu]);const ym=h=>{var $;const P=`${($=e.cycleMetadata)!=null&&$.currentStart?new Date(e.cycleMetadata.currentStart).toISOString():e.id}:${h}`.toLowerCase();kn(q=>{var ne,ge,ce;return{...q,insights:{...q.insights||{},nudges:{...((ne=q.insights)==null?void 0:ne.nudges)||{},acknowledged:{...((ce=(ge=q.insights)==null?void 0:ge.nudges)==null?void 0:ce.acknowledged)||{},[P]:new Date().toISOString()}}}}}),A(null)},vm=(h=6)=>{const _=new Date;_.setHours(_.getHours()+h),kn(P=>{var $;return{...P,insights:{...P.insights||{},nudges:{...(($=P.insights)==null?void 0:$.nudges)||{},snoozedUntil:_.toISOString()}}}}),A(null)},Qn=h=>h==="income"||h==="expense"?h:h==="expenses"?"expense":"income",nu=h=>{const _=Qn(h||g);N({name:"",amount:"",budgetedAmount:"",category:"",date:Al(),type:_,receipt:null}),m(null),x(!0)},wm=h=>{N({...h,date:yi(h.date),budgetedAmount:h.budgetedAmount||""}),m(h),x(!0)},_m=async()=>{const h=j.name.trim(),_=j.category.trim(),P=String(j.amount??"").trim(),$=Number.parseFloat(P),q=P!==""&&Number.isFinite($),ne=j.budgetedAmount===null||j.budgetedAmount===void 0?"":String(j.budgetedAmount).trim(),ge=ne===""?null:Number.parseFloat(ne),ce=ge===null||Number.isFinite(ge);if(!h||!q||!_||!ce){alert("Please fill in all required fields with valid numbers where applicable.");return}C(!0);try{const oe={name:h,amount:$,budgetedAmount:ge,category:_,type:Qn(j.type),date:yi(j.date),receipt:j.receipt};let Ne;if(O){const{error:ke}=await Ww(O.id,oe);if(ke){console.error("Error updating transaction:",ke),alert("Failed to update transaction. Please try again.");return}Ne=Ce.map(be=>be.id===O.id?{...oe,id:O.id}:be)}else{const{data:ke,error:be}=await qp(e.id,oe);if(be){console.error("Error creating transaction:",be),alert("Failed to create transaction. Please try again.");return}const bn={...oe,id:ke[0].id};Ne=[...Ce,bn]}const fe={...e,transactions:Ne},Re=s.map(ke=>ke.id===e.id?fe:ke);r(Re),i(Re.find(ke=>ke.id===e.id)),l==null||l(),x(!1),m(null)}catch(oe){console.error("Error saving transaction:",oe),alert("Failed to save transaction. Please try again.")}finally{C(!1)}},xm=async()=>{const h=E.trim();if(!h){M(e.name||"");return}if(h===(e.name||"").trim()){M(e.name||"");return}try{const{error:_}=await Ai(e.id,{name:h,categoryBudgets:e.categoryBudgets});if(_){console.error("Error updating budget name:",_),M(e.name||"");return}let P={...e,name:h};r($=>$.map(q=>q.id!==e.id?q:(P={...q,...e,name:h},P))),i($=>($==null?void 0:$.id)===e.id?P:$),M(h),l==null||l()}catch(_){console.error("Error updating budget name:",_),M(e.name||"")}},Fr=Ce.filter(h=>h.type==="income").reduce((h,_)=>h+_.amount,0),jn=Ce.filter(h=>h.type==="expense").reduce((h,_)=>h+_.amount,0),ru=Ce.filter(h=>h.type==="expense"&&h.budgetedAmount).reduce((h,_)=>h+_.budgetedAmount,0),Hs=Fr-jn,Vs=b.useMemo(()=>Ce.filter(h=>h.type==="expense"),[Ce]),Uo=b.useMemo(()=>{if(Vs.length===0)return{burnPerDay:0,burnPerWeek:0,burnPerMonth:0,daysLeft:null,projectionDate:null,status:"safe",badgeLabel:"Safe Zone"};const h=1e3*60*60*24,_=new Date;_.setDate(_.getDate()-30);const P=Vs.filter(Yt=>{const vt=new Date(Yt.date);return!Number.isNaN(vt.getTime())&&vt>=_}),$=P.length?P:Vs;let q=Number.POSITIVE_INFINITY,ne=0,ge=0;if($.forEach(Yt=>{const vt=new Date(Yt.date).getTime();Number.isFinite(vt)&&(q=Math.min(q,vt),ne=Math.max(ne,vt),ge+=Yt.amount)}),!Number.isFinite(q)||!Number.isFinite(ne))return{burnPerDay:0,burnPerWeek:0,burnPerMonth:0,daysLeft:null,projectionDate:null,status:"safe",badgeLabel:"Safe Zone"};const ce=Math.max(1,Math.round((ne-q)/h)+1),oe=ge/ce,Ne=oe*7,fe=oe*30,Re=Math.max(0,Hs),ke=oe>0?Math.floor(Re/oe):null,be=typeof ke=="number"?new Date(Date.now()+ke*h):null,bn=typeof ke=="number"&&ke<15?"critical":"safe";return{burnPerDay:oe,burnPerWeek:Ne,burnPerMonth:fe,daysLeft:ke,projectionDate:be,status:bn,badgeLabel:bn==="critical"?"Critical Burn":"Safe Zone"}},[Vs,Hs]);b.useEffect(()=>{if(!(c!=null&&c.id))return;let h=!0;return(async()=>{Gc(!0);try{const{data:P,error:$}=await Hw(c.id);if(!h)return;if($){console.error("Failed to fetch cash burn",$),$o($.message||"Unable to sync burn metrics"),Do(null);return}$o(null),Do(P||null)}catch(P){if(!h)return;console.error("Unexpected cash burn error",P),$o(P.message||"Unable to sync burn metrics"),Do(null)}finally{h&&Gc(!1)}})(),()=>{h=!1}},[c==null?void 0:c.id,e.id,Ce.length]);const yt=b.useMemo(()=>{if(!Qt)return Uo;const h=Qt.projectionDate instanceof Date||Qt.projectionDate===null?Qt.projectionDate:Qt.projectionDate?new Date(Qt.projectionDate):null;return{...Uo,...Qt,projectionDate:h}},[Uo,Qt]),$t=Kp(om),su=((lu=e.cycleMetadata)==null?void 0:lu.type)||"monthly",Sm=ka(su),iu=(cu=e.cycleMetadata)!=null&&cu.currentStart?new Date(e.cycleMetadata.currentStart):null,km=iu?iu.toLocaleDateString():e.createdAt,jm=T.reduce((h,_)=>h+(Number(_.budgetedAmount)||0),0),Nm=Ce.filter(h=>h.type==="expense").reduce((h,_)=>(h[_.category]=(h[_.category]||0)+_.amount,h),{}),Nn=Object.entries(Nm).map(([h,_])=>{var P;return{category:h,amount:_,percentage:jn>0?_/jn*100:0,icon:((P=t.expense.find($=>$.name===h))==null?void 0:P.icon)||""}}).sort((h,_)=>_.amount-h.amount).slice(0,5),Gs=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#ec4899"],zr=Ce.filter(h=>h.type===Qn(g)).sort((h,_)=>new Date(_.date)-new Date(h.date)),Jt=Math.ceil(zr.length/Lo),Mo=(p-1)*Lo,ou=Mo+Lo,bm=zr.slice(Mo,ou),au=h=>{v(h),y(1)},qr=h=>{y(h)},Em=()=>{if(Jt<=1)return null;const h=[],_=5;let P=Math.max(1,p-Math.floor(_/2));const $=Math.min(Jt,P+_-1);$-P+1<_&&(P=Math.max(1,$-_+1)),p>1&&h.push(a.jsx("button",{className:"pagination-button",onClick:()=>qr(p-1),children:""},"prev")),P>1&&(h.push(a.jsx("button",{className:"pagination-button",onClick:()=>qr(1),children:"1"},1)),P>2&&h.push(a.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis1")));for(let q=P;q<=$;q++)h.push(a.jsx("button",{className:`pagination-button ${p===q?"active":""}`,onClick:()=>qr(q),children:q},q));return $<Jt&&($<Jt-1&&h.push(a.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis2")),h.push(a.jsx("button",{className:"pagination-button",onClick:()=>qr(Jt),children:Jt},Jt))),p<Jt&&h.push(a.jsx("button",{className:"pagination-button",onClick:()=>qr(p+1),children:""},"next")),a.jsxs("div",{className:"pagination-container",children:[a.jsxs("div",{className:"pagination-info",children:["Showing ",Mo+1,"-",Math.min(ou,zr.length)," of ",zr.length," transactions"]}),a.jsx("div",{className:"pagination-controls",children:h})]})};return a.jsxs("div",{children:[a.jsxs("div",{className:"header-nav",children:[a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>n("budgets"),children:" Back"}),a.jsx("button",{className:"ai-insights-button primary-button",onClick:()=>n("ai"),children:" AI Finance Report"})]}),a.jsx("input",{className:"input budget-title-input no-border",value:E,onChange:h=>M(h.target.value),onBlur:xm,onKeyDown:h=>{h.key==="Enter"&&(h.preventDefault(),h.currentTarget.blur())},placeholder:"Budget Name"}),a.jsxs("div",{className:"budget-cycle-banner",children:[a.jsx("div",{className:`cycle-pill cycle-${su}`,children:Sm}),a.jsxs("div",{className:"cycle-meta",children:[a.jsxs("span",{children:["Started ",km]}),a.jsxs("div",{className:`pacing-indicator pacing-${$t.overall.status}`,title:$t.overall.tooltip,role:"status",children:[a.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),a.jsx("span",{className:"pacing-label",children:$t.overall.label})]})]}),a.jsxs("div",{className:"cycle-actions",children:[a.jsx("button",{className:"secondary-button",onClick:()=>V(!0),children:"Edit cycle"}),a.jsx("button",{className:"link-button",onClick:()=>z(!0),children:"Change log"})]})]}),a.jsxs("div",{className:"category-allocation-card",id:"allocations",children:[a.jsxs("div",{className:"allocation-header",children:[a.jsx("h3",{children:"Category allocations"}),a.jsxs("div",{className:"allocation-header-actions",children:[a.jsxs("span",{className:"allocation-total",children:["Total ",nr(jm)]}),a.jsx("button",{className:"secondary-button",onClick:()=>Oo(!0),children:"Add category"})]})]}),T.length===0?a.jsx("div",{className:"empty-state small",children:"No allocations yet. Add your first category to plan this cycle."}):a.jsx("div",{className:"allocation-table",children:T.map(h=>a.jsxs("div",{className:"allocation-row",children:[a.jsx("div",{className:"allocation-name",children:h.category}),a.jsx("input",{type:"number",className:"input allocation-input",value:h.budgetedAmount,onChange:_=>am(h.category,_.target.value),min:"0",step:"0.01"}),a.jsx("button",{className:"allocation-delete",type:"button",onClick:_=>{_.stopPropagation(),um(h)},children:"Remove"})]},h.category))}),a.jsx("div",{className:"allocation-footer",children:a.jsx("button",{className:"primary-button",onClick:pm,disabled:!J||S,children:S?"Saving...":"Save allocations"})})]}),im&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent small-modal",children:[a.jsx("h3",{className:"header modal-header",children:"Add category"}),a.jsx("label",{className:"input-label",htmlFor:"new-category-name",children:"Name"}),a.jsx("input",{id:"new-category-name",className:"input",value:qc,onChange:h=>Ro(h.target.value),placeholder:"Category name"}),a.jsx("label",{className:"input-label",htmlFor:"new-category-amount",children:"Allocation amount"}),a.jsx("input",{id:"new-category-amount",className:"input",type:"number",step:"0.01",min:"0",value:Wc,onChange:h=>Io(h.target.value)}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:lm,children:"Add"}),a.jsx("button",{className:"cancelButton secondary-button",onClick:cm,children:"Cancel"})]})]})}),a.jsxs("div",{className:"budget-overview-card",children:[a.jsx("h3",{className:"overview-title",children:"Budget Overview"}),a.jsxs("div",{className:"overview-content",children:[a.jsxs("div",{className:"overview-stats",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-label",children:"Total Income"}),a.jsxs("div",{className:"stat-value income",children:["$",Fr.toFixed(2)]})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-label",children:"Total Spent"}),a.jsxs("div",{className:"stat-value expense",children:["$",jn.toFixed(2)]})]}),ru>0&&a.jsxs("div",{className:"stat-item stat-item-full-width",children:[a.jsx("div",{className:"stat-label",children:"Total Budgeted"}),a.jsxs("div",{className:"stat-value",children:["$",ru.toFixed(2)]})]})]}),a.jsxs("div",{className:"balance-display",children:[a.jsx("div",{className:"balance-label",children:"Remaining Balance"}),a.jsxs("div",{className:`balance-amount ${Hs>=0?"income":"expense"}`,children:["$",Hs.toFixed(2)]})]}),Nn.length>0&&a.jsxs("div",{className:"category-chart-section",children:[a.jsx("h4",{className:"chart-section-title",children:"Spending Breakdown"}),a.jsxs("div",{className:"chart-container-centered",children:[a.jsx("div",{className:"pie-chart-wrapper",children:a.jsxs("svg",{className:"pie-chart",viewBox:"0 0 200 200",width:"200",height:"200",onClick:h=>{(h.target.tagName==="svg"||h.target.tagName==="circle"||h.target.tagName==="text")&&H(null)},children:[Nn.map((h,_)=>{let P=0;for(let be=0;be<_;be++)P+=Nn[be].percentage;const $=P/100*360,q=(P+h.percentage)/100*360,ne=h.percentage>50?1:0,ge=$*Math.PI/180,ce=q*Math.PI/180,oe=100+80*Math.cos(ge),Ne=100+80*Math.sin(ge),fe=100+80*Math.cos(ce),Re=100+80*Math.sin(ce),ke=["M 100 100",`L ${oe} ${Ne}`,`A 80 80 0 ${ne} 1 ${fe} ${Re}`,"Z"].join(" ");return a.jsx("path",{d:ke,fill:Gs[_%Gs.length],stroke:"white",strokeWidth:"2",className:`pie-slice ${R===_?"selected":""}`,onClick:be=>{be.stopPropagation(),H(R===_?null:_)}},h.category)}),a.jsx("circle",{cx:"100",cy:"100",r:"35",fill:"white"}),a.jsx("text",{x:"100",y:"95",textAnchor:"middle",className:"chart-center-text",fontSize:"12",fill:"#6b7280",children:"Total"}),a.jsxs("text",{x:"100",y:"110",textAnchor:"middle",className:"chart-center-amount",fontSize:"14",fontWeight:"600",fill:"#374151",children:["$",jn.toFixed(0)]})]})}),R!==null&&a.jsx("div",{className:"slice-details",children:a.jsxs("div",{className:"slice-details-content",children:[a.jsxs("div",{className:"slice-header",children:[a.jsx("div",{className:"slice-color-dot",style:{backgroundColor:Gs[R%Gs.length]}}),a.jsx("span",{className:"slice-icon",children:Nn[R].icon}),a.jsx("span",{className:"slice-category",children:Nn[R].category})]}),a.jsxs("div",{className:"slice-amount",children:["$",Nn[R].amount.toFixed(2)]}),a.jsxs("div",{className:"slice-percentage",children:[Nn[R].percentage.toFixed(1),"% of total spending"]})]})})]})]})]}),a.jsxs("div",{className:"budget-progress",children:[a.jsxs("div",{className:"progress-labels",children:[a.jsxs("span",{className:"income",children:["Income: $",Fr.toFixed(2)]}),a.jsxs("span",{className:"expense",children:["Spent: $",jn.toFixed(2)]})]}),a.jsx("div",{className:"progress-bar-container",children:a.jsx("div",{className:"income-bar",children:Fr>0&&a.jsx("div",{className:"expense-overlay",style:{width:`${Math.min(jn/Fr*100,100)}%`}})})})]})]}),$t.categories.length>0&&a.jsxs("div",{className:"category-budget-list-card",children:[a.jsx("h3",{className:"category-budget-list-title",children:"Category Pacing"}),a.jsx("div",{className:"category-budget-list",children:$t.categories.map(h=>{const _=h.budgeted>0?Math.min(h.actual/h.budgeted*100,100):h.actual>0?100:0;return a.jsxs("div",{className:"category-budget-list-row",children:[a.jsxs("div",{className:"category-budget-header",children:[a.jsx("div",{className:"category-budget-name",children:h.name||"Uncategorized"}),a.jsxs("div",{className:`pacing-indicator pacing-${h.status}`,title:h.tooltip,role:"status","aria-label":`${h.name||"Uncategorized"} pacing is ${h.label}`,children:[a.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),a.jsx("span",{className:"pacing-label",children:h.label})]})]}),a.jsxs("div",{className:"category-budget-amounts",children:["$",h.actual.toFixed(2)," / $",h.budgeted.toFixed(2)]}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:`progress-fill ${h.actual>h.budgeted&&h.budgeted>0?"over":""}`,style:{width:`${_}%`}})})]},h.key||h.name)})})]}),a.jsxs("div",{className:"cashburn-section",children:[a.jsxs("div",{className:"cashburn-header",children:[a.jsx("h3",{children:"Cash burn insights"}),a.jsxs("span",{className:"cashburn-subtitle",children:["Weekly digest  next drop ",Br.currentEnd?new Date(Br.currentEnd).toLocaleString([],{dateStyle:"medium",timeStyle:"short"}):"soon"]})]}),a.jsxs("div",{className:"cashburn-summary-grid",children:[a.jsx("div",{className:`cashburn-status-badge status-${yt.status}`,children:yt.badgeLabel}),a.jsxs("div",{className:"cashburn-metric",children:[a.jsx("span",{className:"cashburn-metric-label",children:"Daily burn"}),a.jsx("span",{className:"cashburn-metric-value",children:nr(yt.burnPerDay)})]}),a.jsxs("div",{className:"cashburn-metric",children:[a.jsx("span",{className:"cashburn-metric-label",children:"Weekly burn"}),a.jsx("span",{className:"cashburn-metric-value",children:nr(yt.burnPerWeek)})]}),a.jsxs("div",{className:"cashburn-metric",children:[a.jsx("span",{className:"cashburn-metric-label",children:"Monthly burn"}),a.jsx("span",{className:"cashburn-metric-value",children:nr(yt.burnPerMonth)})]}),a.jsxs("div",{className:"cashburn-metric projection",children:[a.jsx("span",{className:"cashburn-metric-label",children:"Days left"}),a.jsx("span",{className:"cashburn-metric-value",children:typeof yt.daysLeft=="number"?`${Math.max(0,yt.daysLeft)} ${yt.daysLeft===1?"day":"days"}`:yt.burnPerDay===0?"Not burning":""}),yt.projectionDate&&a.jsxs("span",{className:"cashburn-projection-date",children:["until ",yt.projectionDate.toLocaleDateString([],{dateStyle:"medium"})]})]})]}),Vc&&a.jsx("div",{className:"cashburn-sync-status",role:"status",children:"Syncing latest burn metrics"}),Hc&&!Vc&&a.jsxs("div",{className:"cashburn-sync-status error",role:"status",children:["Using local estimate  ",Hc]}),a.jsxs("div",{className:"cashburn-card-grid",children:[Br.topCards.length===0&&a.jsx("div",{className:"empty-state small",children:"Track spending this week to unlock leak insights."}),Br.topCards.map(h=>a.jsxs("button",{type:"button",className:`cashburn-card pacing-${h.status}`,onClick:()=>Ct(_=>_===h.category?null:h.category),children:[a.jsxs("div",{className:"cashburn-card-header",children:[a.jsx("span",{className:"cashburn-category",children:h.category}),a.jsxs("div",{className:`pacing-indicator pacing-${h.status}`,children:[a.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),a.jsx("span",{className:"pacing-label",children:h.statusLabel})]})]}),a.jsxs("div",{className:"cashburn-amount-row",children:[a.jsx("span",{className:"cashburn-amount",children:nr(h.current)}),a.jsxs("span",{className:`cashburn-delta ${h.delta>=0?"expense":"income"}`,children:[h.delta>=0?"+":"-","$",Math.abs(h.delta).toFixed(2)," vs last week"]})]}),a.jsxs("div",{className:"cashburn-change",children:["Change ",h.pctChange.toFixed(0),"%"]}),nt===h.category&&a.jsxs("div",{className:"cashburn-trend",children:[a.jsx("div",{className:"sparkline",children:p_(Br.trends[h.category])}),a.jsx("div",{className:"sparkline-label",children:"Last 6 weeks"})]})]},h.category))]}),a.jsxs("div",{className:"cashburn-settings",children:[a.jsxs("div",{className:"settings-row",children:[a.jsx("label",{children:"Report schedule"}),a.jsxs("div",{className:"settings-inputs",children:[a.jsx("select",{value:K.day,onChange:h=>Jc("day",h.target.value),children:Object.keys(Kd).map(h=>a.jsx("option",{value:h,children:h.charAt(0).toUpperCase()+h.slice(1)},h))}),a.jsx("input",{type:"time",value:K.time,onChange:h=>Jc("time",h.target.value)})]})]}),a.jsxs("div",{className:"settings-row",children:[a.jsx("label",{children:"Tracked categories"}),a.jsxs("div",{className:"tracked-category-grid",children:[Xc.map(h=>{const _=U.has(h);return a.jsxs("label",{className:`tracked-chip ${_?"selected":""}`,children:[a.jsx("input",{type:"checkbox",checked:_,onChange:()=>gm(h)}),a.jsx("span",{children:h})]},h)}),Xc.length===0&&a.jsx("span",{children:"No categories yet."})]})]}),a.jsxs("div",{className:"settings-row",children:[a.jsx("label",{children:"Real-time nudges"}),a.jsxs("div",{className:"nudge-config",children:[a.jsxs("label",{className:"checkbox-row",children:[a.jsx("input",{type:"checkbox",checked:Z.enabled,onChange:h=>Ws({enabled:h.target.checked})}),a.jsxs("span",{children:["Notify me when a category hits ",Math.round((Number(Z.threshold)||.8)*100),"% of budget"]})]}),a.jsxs("div",{className:"nudge-threshold",children:[a.jsx("input",{type:"range",min:"0.5",max:"1",step:"0.05",value:Number(Z.threshold)||.8,onChange:h=>Ws({threshold:Number(h.target.value)})}),a.jsxs("span",{children:[Math.round((Number(Z.threshold)||.8)*100),"%"]})]}),a.jsxs("div",{className:"quiet-hours-controls",children:[a.jsx("span",{children:"Quiet hours"}),a.jsxs("div",{className:"settings-inputs",children:[a.jsx("input",{type:"number",min:"0",max:"23",value:Gn,onChange:h=>Ws({quietStart:Number(h.target.value)})}),a.jsx("span",{children:"to"}),a.jsx("input",{type:"number",min:"0",max:"23",value:Kn,onChange:h=>Ws({quietEnd:Number(h.target.value)})})]})]})]})]})]})]}),a.jsxs("div",{className:"transactions-section",children:[a.jsxs("div",{className:"tabRow",children:[a.jsxs("button",{className:g==="expenses"?"tabActive":"tabInactive",onClick:()=>au("expenses"),children:["Expenses (",Ce.filter(h=>h.type==="expense").length,")"]}),a.jsxs("button",{className:g==="income"?"tabActive":"tabInactive",onClick:()=>au("income"),children:["Income (",Ce.filter(h=>h.type==="income").length,")"]})]}),zr.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsxs("p",{children:["No ",Qn(g)," transactions yet."]}),a.jsxs("button",{className:"primary-button",onClick:()=>nu(g),children:["Add Your First ",Qn(g)==="expense"?"Expense":"Income"]})]}):a.jsxs(a.Fragment,{children:[bm.map(h=>{var _;return a.jsx("div",{className:"transaction enhanced-transaction",onClick:()=>wm(h),children:a.jsx("div",{className:"transaction-info",children:a.jsxs("div",{className:"transaction-main",children:[a.jsx("span",{className:"transaction-icon",children:((_=t[h.type].find(P=>P.name===h.category))==null?void 0:_.icon)||""}),a.jsxs("div",{className:"transaction-details-main",children:[a.jsx("span",{className:"transaction-name",children:h.name}),a.jsxs("div",{className:"transaction-meta",children:[h.category,"  ",m_(h.date),h.receipt&&a.jsx("span",{className:"receipt-indicator",children:""})]})]}),a.jsxs("div",{className:"transaction-amounts",children:[a.jsxs("span",{className:`transaction-amount ${h.type}`,children:[h.type==="income"?"+":"-","$",h.amount.toFixed(2)]}),h.budgetedAmount&&a.jsxs("span",{className:"budgeted-amount",children:["Budget: $",h.budgetedAmount.toFixed(2)]})]})]})})},h.id)}),Em()]})]}),a.jsx("button",{className:"fab",onClick:()=>nu(g),children:"+"}),w&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent enhanced-modal",children:[a.jsx("h2",{className:"header modal-header",children:O?"Edit Transaction":`Add ${j.type==="expense"?"Expense":"Income"}`}),a.jsx("input",{className:"input",placeholder:"Description",value:j.name,onChange:h=>N({...j,name:h.target.value}),disabled:S}),a.jsx("input",{className:"input",placeholder:"Amount",type:"number",step:"0.01",value:j.amount,onChange:h=>N({...j,amount:h.target.value}),disabled:S}),a.jsx("input",{className:"input",type:"date",value:j.date,onChange:h=>N(_=>({..._,date:yi(h.target.value,_.date)})),disabled:S}),j.type==="expense"&&a.jsx("input",{className:"input",placeholder:"Budgeted amount (optional)",type:"number",step:"0.01",value:j.budgetedAmount,onChange:h=>N({...j,budgetedAmount:h.target.value}),disabled:S}),a.jsxs("select",{className:"input",value:j.category,onChange:h=>N({...j,category:h.target.value}),disabled:S,children:[a.jsx("option",{value:"",children:"Select Category"}),(uu=t[Qn(j.type)])==null?void 0:uu.map(h=>a.jsxs("option",{value:h.name,children:[h.icon," ",h.name]},h.name))]}),a.jsxs("div",{className:"receipt-upload-section",children:[a.jsx("label",{className:"receipt-upload-label",children:" Attach Receipt (Optional)"}),a.jsx("input",{type:"file",accept:"image/*",className:"receipt-input",onChange:h=>{const _=h.target.files[0];if(_){const P=new FileReader;P.onloadend=()=>{N({...j,receipt:P.result})},P.readAsDataURL(_)}},disabled:S}),j.receipt&&a.jsxs("div",{className:"receipt-preview",children:[a.jsx("img",{src:j.receipt||"/placeholder.svg",alt:"Receipt preview",className:"receipt-preview-img"}),a.jsx("button",{type:"button",className:"remove-receipt",onClick:()=>N({...j,receipt:null}),disabled:S,children:"Remove"})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsxs("button",{className:"addButton primary-button",onClick:_m,disabled:S,children:[S?"Saving...":O?"Update":"Add"," Transaction"]}),a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>{x(!1),m(null)},disabled:S,children:"Cancel"})]})]})}),Y&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent small-modal",children:[a.jsxs("h3",{className:"header modal-header",children:["Remove ",Y.category]}),Y.remaining>0?a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:["Reallocate ",nr(Y.remaining)," from ",Y.category," before deleting."]}),a.jsxs("select",{className:"input",value:Y.reallocateTo,onChange:h=>Qe(_=>({..._,reallocateTo:h.target.value})),children:[a.jsx("option",{value:"",children:"Choose category"}),T.filter(h=>h.category!==Y.category).map(h=>a.jsx("option",{value:h.category,children:h.category},h.category))]})]}):a.jsxs("p",{children:["Delete ",Y.category," from this cycle?"]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:dm,disabled:Y.remaining>0&&!Y.reallocateTo,children:"Confirm"}),a.jsx("button",{className:"cancelButton secondary-button",onClick:hm,children:"Cancel"})]})]})}),I&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent large-modal",children:[a.jsx("h3",{className:"header modal-header",children:"Change log"}),f.length===0?a.jsx("div",{className:"empty-state small",children:"No changes recorded yet."}):a.jsx("ul",{className:"change-log-list",children:f.map((h,_)=>{const P=(h==null?void 0:h.at)||(h==null?void 0:h.timestamp),$=P?new Date(P).toLocaleString():"Recent";return a.jsxs("li",{className:"change-log-item",children:[a.jsx("span",{className:"change-log-time",children:$}),a.jsx("span",{className:"change-log-message",children:(h==null?void 0:h.message)||"Updated budget"})]},`${$}-${_}`)})}),a.jsx("div",{className:"modal-actions",children:a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>z(!1),children:"Close"})})]})}),L&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent enhanced-modal",children:[a.jsx("h3",{className:"header modal-header",children:"Edit cycle"}),a.jsx("div",{className:"cycle-option-grid",children:Jp.map(h=>{const _=ae.type===h.type;return a.jsxs("button",{type:"button",className:`cycle-option ${_?"selected":""}`,onClick:()=>Tt(P=>({...P,type:h.type})),children:[a.jsx("div",{className:"cycle-option-title",children:h.label}),a.jsx("div",{className:"cycle-option-description",children:"Choose the cadence that fits this budget."})]},h.type)})}),ae.type==="per-paycheck"&&a.jsxs("div",{className:"cycle-config-row",children:[a.jsx("label",{className:"input-label",htmlFor:"edit-pay-frequency",children:"Paycheck frequency (days)"}),a.jsx("input",{id:"edit-pay-frequency",type:"number",className:"input",min:"7",max:"45",value:ae.payFrequencyDays,onChange:h=>Tt(_=>({..._,payFrequencyDays:h.target.value}))})]}),ae.type==="custom"&&a.jsxs("div",{className:"cycle-config-row",children:[a.jsx("label",{className:"input-label",htmlFor:"edit-cycle-length",children:"Cycle length (days)"}),a.jsx("input",{id:"edit-cycle-length",type:"number",className:"input",min:"5",max:"120",value:ae.customDays,onChange:h=>Tt(_=>({..._,customDays:h.target.value}))})]}),a.jsxs("div",{className:"cycle-config-row",children:[a.jsx("label",{className:"input-label",htmlFor:"edit-cycle-start",children:"Cycle start date"}),a.jsx("input",{id:"edit-cycle-start",type:"date",className:"input",value:ae.startDate,onChange:h=>Tt(_=>({..._,startDate:h.target.value}))})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:mm,children:"Save cycle"}),a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>V(!1),children:"Cancel"})]})]})}),G&&a.jsxs("div",{className:"snackbar",children:[a.jsx("span",{children:G.message}),G.action&&a.jsx("button",{className:"link-button",onClick:()=>{G.action(),Qc()},children:G.actionLabel||"Undo"}),a.jsx("button",{className:"link-button",onClick:Qc,children:"Dismiss"})]}),B&&a.jsxs("div",{className:"nudge-toast",role:"status",children:[a.jsxs("div",{className:"nudge-copy",children:[a.jsx("strong",{children:B.category})," is at ",(B.ratio*100).toFixed(0),"% of its budget."]}),a.jsxs("div",{className:"nudge-actions",children:[a.jsx("button",{className:"link-button",onClick:()=>{var h;ym(B.category),(h=document.getElementById("allocations"))==null||h.scrollIntoView({behavior:"smooth"})},children:"Adjust budget"}),a.jsx("button",{className:"link-button",onClick:()=>vm(),children:"Snooze"})]})]})]})}const Qd=k.shape({id:k.string.isRequired,name:k.string.isRequired,amount:k.number.isRequired,budgetedAmount:k.number,category:k.string.isRequired,type:k.oneOf(["income","expense"]).isRequired,date:k.string.isRequired,receipt:k.string}),Jd=k.shape({name:k.string.isRequired,icon:k.string.isRequired});Lc.propTypes={budget:k.shape({id:k.string.isRequired,name:k.string.isRequired,transactions:k.arrayOf(Qd),categoryBudgets:k.arrayOf(k.shape({category:k.string.isRequired,budgetedAmount:k.number.isRequired})),metadata:k.object,insightsPreferences:k.shape({trackedCategories:k.arrayOf(k.string),reportSchedule:k.shape({day:k.string,time:k.string}),nudges:k.shape({enabled:k.bool,threshold:k.number})}),changeLog:k.arrayOf(k.shape({at:k.string,message:k.string,type:k.string})),cycleMetadata:k.shape({type:k.string,currentStart:k.string,payFrequencyDays:k.number,customDays:k.number,lengthDays:k.number,cycleLength:k.number}),createdAt:k.string}).isRequired,categories:k.shape({income:k.arrayOf(Jd).isRequired,expense:k.arrayOf(Jd).isRequired}).isRequired,setViewMode:k.func.isRequired,setBudgets:k.func.isRequired,budgets:k.arrayOf(k.shape({id:k.string.isRequired,name:k.string.isRequired,transactions:k.arrayOf(Qd)})).isRequired,setSelectedBudget:k.func.isRequired,onMetadataChange:k.func,onDataMutated:k.func};Lc.defaultProps={onMetadataChange:void 0,onDataMutated:void 0};function Yp({categories:e,setCategories:t,budgets:n,setViewMode:r}){const[s,i]=b.useState("expense"),[o,l]=b.useState(!1),[c,u]=b.useState({name:"",icon:""}),[d,f]=b.useState(null),g=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=()=>{if(!c.name.trim())return;if(e[s].some(p=>p.name===c.name.trim())){alert("Category already exists!");return}const m={...e,[s]:[...e[s],{name:c.name.trim(),icon:c.icon}]};t(m),l(!1),u({name:"",icon:""})},w=m=>{f({...m,originalName:m.name})},x=()=>{if(!d.name.trim())return;const m={...e,[s]:e[s].map(p=>p.name===d.originalName?{name:d.name.trim(),icon:d.icon}:p)};t(m),f(null)},O=m=>{if(n.some(S=>S.transactions.some(C=>C.category===m&&C.type===s))){alert("Cannot delete category in use.");return}const y={...e,[s]:e[s].filter(S=>S.name!==m)};t(y)};return a.jsxs("div",{children:[a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>r("budgets"),children:" Back to Budgets"}),a.jsx("h1",{className:"header",children:"Manage Categories"}),a.jsxs("div",{className:"tabRow",children:[a.jsx("button",{className:s==="expense"?"tabActive":"tabInactive",onClick:()=>i("expense"),children:"Expenses"}),a.jsx("button",{className:s==="income"?"tabActive":"tabInactive",onClick:()=>i("income"),children:"Income"})]}),a.jsxs("button",{className:"addButton primary-button",onClick:()=>l(!0),children:["Add ",s.charAt(0).toUpperCase()+s.slice(1)," Category"]}),e[s].length===0?a.jsxs("p",{className:"empty-state",children:["No ",s," categories yet."]}):e[s].map(m=>a.jsx("div",{className:"transaction category-item",children:d&&d.originalName===m.name?a.jsxs("div",{className:"category-edit",children:[a.jsx("input",{className:"input",value:d.name,onChange:p=>f({...d,name:p.target.value})}),a.jsx("div",{className:"icon-selector",children:g.map(p=>a.jsx("button",{className:`icon-button ${d.icon===p?"selected":""}`,onClick:()=>f({...d,icon:p}),children:p},p))}),a.jsxs("div",{className:"category-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:x,children:"Save"}),a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>f(null),children:"Cancel"})]})]}):a.jsxs("div",{className:"category-display",children:[a.jsxs("span",{className:"category-info",children:[m.icon," ",m.name]}),a.jsxs("div",{className:"category-actions",children:[a.jsx("button",{className:"action-button",onClick:()=>w(m),children:"Edit"}),a.jsx("button",{className:"action-button delete",onClick:()=>O(m.name),children:"Delete"})]})]})},m.name)),o&&a.jsx("div",{className:"modalBackdrop",children:a.jsxs("div",{className:"modalContent",children:[a.jsxs("h2",{className:"header modal-header",children:["Add ",s.charAt(0).toUpperCase()+s.slice(1)," Category"]}),a.jsx("input",{className:"input",placeholder:"Category Name",value:c.name,onChange:m=>u({...c,name:m.target.value})}),a.jsx("div",{className:"icon-selector",children:g.map(m=>a.jsx("button",{className:`icon-button ${c.icon===m?"selected":""}`,onClick:()=>u({...c,icon:m}),children:m},m))}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"addButton primary-button",onClick:v,children:"Add"}),a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>l(!1),children:"Cancel"})]})]})})]})}const g_=k.shape({id:k.string.isRequired,name:k.string.isRequired,amount:k.number.isRequired,budgetedAmount:k.number,category:k.string.isRequired,type:k.oneOf(["income","expense"]).isRequired,date:k.string.isRequired,receipt:k.string}),Yd=k.shape({name:k.string.isRequired,icon:k.string.isRequired});Yp.propTypes={categories:k.shape({income:k.arrayOf(Yd).isRequired,expense:k.arrayOf(Yd).isRequired}).isRequired,setCategories:k.func.isRequired,budgets:k.arrayOf(k.shape({id:k.string.isRequired,transactions:k.arrayOf(g_).isRequired})).isRequired,setViewMode:k.func.isRequired};const Ii=[25,50,75,100],y_=1e3*60*60*24,Na=y_*7,rr=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(e||0)),Xp=e=>({...e,amount:Number(e.amount||0),contributed_at:e.contributed_at||e.date||e.created_at||new Date().toISOString()}),vi=e=>{const t=(e.goal_contributions||e.contributions||[]).map(Xp);return t.sort((n,r)=>new Date(r.contributed_at)-new Date(n.contributed_at)),{...e,targetAmount:Number(e.target_amount??e.targetAmount??0),targetDate:e.target_date||e.targetDate||null,status:e.status||"active",milestones:Array.isArray(e.milestones)&&e.milestones.length?e.milestones:Ii,linked_budget_id:e.linked_budget_id||e.linkedBudgetId||null,goal_contributions:t}},v_=e=>{const t=e.created_at||e.createdAt,r=e.start_date||e.startDate||t,s=r?new Date(r):new Date;return Number.isNaN(s.getTime())?new Date:s},w_=e=>{if(!e.targetDate)return null;const t=new Date(e.targetDate);return Number.isNaN(t.getTime())?null:t},__=e=>{const t=new Date(e),n=t.getDay(),r=t.getDate()-n+(n===0?-6:1),s=new Date(t.setDate(r));return s.setHours(0,0,0,0),s},sr=e=>{const t=new Date,n=e.goal_contributions||[],r=n.reduce((C,j)=>C+Number(j.amount||0),0),s=Number(e.targetAmount||0),i=s>0?Math.min(100,r/s*100):0,o=v_(e),l=w_(e);let c=l?l.getTime()-o.getTime():null;c!==null&&c<=0&&(c=Na);const u=Math.max(0,t.getTime()-o.getTime()),d=c&&c>0?Math.min(1,Math.max(0,u/c)):1,f=s*d,g=c?Math.max(1,Math.ceil(c/Na)):1,v=g>0?s/g:s,w=__(t),x=new Date(w.getTime()+Na),O=n.filter(C=>{const j=new Date(C.contributed_at);return j>=w&&j<x}).reduce((C,j)=>C+Number(j.amount||0),0),m=s*.02,p=r-f;let y="on-track";p>m?y="ahead":p<-m&&(y="behind");const S=Math.max(0,v-O);return{totalContributed:r,progress:i,weeklyTarget:v,contributedThisWeek:O,guidanceShortfall:S,pace:y,plannedTotal:f,totalWeeks:g}};function Uc({setViewMode:e,budgets:t=[],setBudgets:n,onDataMutated:r}){const{user:s}=Mr(),[i,o]=b.useState([]),[l,c]=b.useState(!0),[u,d]=b.useState(null),[f,g]=b.useState(!1),[v,w]=b.useState({name:"",targetAmount:"",targetDate:"",linkedBudgetId:""}),[x,O]=b.useState(!1),[m,p]=b.useState(""),[y,S]=b.useState(""),[C,j]=b.useState(""),[N,R]=b.useState(null),[H,E]=b.useState(null),M=b.useRef({}),[T,W]=b.useState(!1),[J,Q]=b.useState(!1),G=b.useCallback(async()=>{if(s){c(!0),d(null);try{const{data:A,error:U}=await Qw(s.id);if(U){console.error("Error loading goals:",U),d(U.message||"Failed to load goals");return}const X=(A||[]).map(te=>vi(te));o(X);const K={};X.forEach(te=>{K[te.id]=sr(te).progress}),M.current=K,X.length&&p(te=>te||X[0].id)}catch(A){console.error("Unexpected error loading goals:",A),d(A.message||"Unexpected error loading goals")}finally{c(!1)}}},[s]);b.useEffect(()=>{s&&G()},[s,G]);const xe=async A=>{if(A.preventDefault(),!s)return;const U=parseFloat(v.targetAmount);if(!v.name.trim()||Number.isNaN(U)||U<=0){alert("Please provide a goal name and a positive target amount.");return}W(!0);try{const{data:X,error:K}=await Jw(s.id,{name:v.name.trim(),targetAmount:U,targetDate:v.targetDate?new Date(v.targetDate).toISOString():null,milestones:Ii,status:"active",linkedBudgetId:v.linkedBudgetId||null});if(K){console.error("Error creating goal:",K),alert(K.message||"Failed to create goal");return}const te=X==null?void 0:X[0];if(te){const Z=vi(te);o(qe=>[Z,...qe]),M.current[Z.id]=sr(Z).progress,p(Z.id)}w({name:"",targetAmount:"",targetDate:"",linkedBudgetId:""}),g(!1)}catch(X){console.error("Unexpected error creating goal:",X),alert("Unexpected error creating goal. Please try again.")}finally{W(!1)}},I=async A=>{if(confirm("Delete this goal? Contributions will remain recorded."))try{const{error:U}=await Xw(A);if(U){console.error("Error deleting goal:",U),alert(U.message||"Failed to delete goal");return}o(K=>{const te=K.filter(Z=>Z.id!==A);return te.length===0?p(""):A===m&&p(te[0].id),te});const X={...M.current};delete X[A],M.current=X}catch(U){console.error("Unexpected error deleting goal:",U),alert("Unexpected error deleting goal")}},z=async(A,U)=>{try{const{data:X,error:K}=await Yw(A.id,{linkedBudgetId:U||null});if(K){console.error("Error linking budget:",K),alert(K.message||"Failed to link budget");return}if(X!=null&&X[0]){const te=vi(X[0]);o(Z=>Z.map(qe=>qe.id===A.id?te:qe))}else o(te=>te.map(Z=>Z.id===A.id?{...Z,linked_budget_id:U||null}:Z))}catch(X){console.error("Unexpected error linking budget:",X),alert("Unexpected error while linking budget")}},L=()=>{O(!1),S(""),j("")},V=A=>{S(U=>A===""?U.slice(0,-1):A==="."&&U.includes(".")?U:`${U}${A}`)},Y=async()=>{const A=parseFloat(y);if(!m||Number.isNaN(A)||A<=0){alert("Enter a valid contribution amount");return}const U=i.find(K=>K.id===m);if(!U){alert("Select a goal");return}Q(!0);const X=new Date().toISOString();try{const K=M.current[U.id]??sr(U).progress,{data:te,error:Z}=await Zw(U.id,{amount:A,date:X,note:C});if(Z){console.error("Error logging contribution:",Z),alert(Z.message||"Failed to log contribution");return}const qe=(te||[]).map(Xp);if(qe.length){const ae=vi({...U,goal_contributions:[...qe,...U.goal_contributions||[]]}),Tt=sr(ae).progress;Qe(ae,K,Tt),M.current[U.id]=Tt,o(Vn=>Vn.map(rt=>rt.id===U.id?ae:rt)),await nt(U,A,X)}L()}catch(K){console.error("Unexpected error adding contribution:",K),alert("Unexpected error adding contribution")}finally{Q(!1)}},Qe=(A,U,X)=>{const te=(A.milestones||Ii).slice().sort((Z,qe)=>Z-qe).find(Z=>U<Z&&X>=Z);te!==void 0&&(R(A.id),E({goalName:A.name,milestone:te}),setTimeout(()=>{R(null),E(null)},4e3))},nt=async(A,U,X)=>{if(!(!A.linked_budget_id||!n||!t.find(te=>te.id===A.linked_budget_id)))try{const te={name:`Goal Contribution - ${A.name}`,amount:U,budgetedAmount:0,category:"Savings Goals",type:"expense",date:X,receipt:null},{data:Z,error:qe}=await qp(A.linked_budget_id,te);if(qe){console.error("Failed to sync contribution to budget:",qe);return}const ae=Z==null?void 0:Z[0],Tt=ae?{id:ae.id,name:ae.name,amount:ae.amount,budgetedAmount:ae.budgeted_amount,category:ae.category,type:ae.type,date:ae.date,receipt:ae.receipt_url}:{id:`goal-sync-${Date.now()}`,...te};n(Vn=>Vn.map(rt=>rt.id===A.linked_budget_id?{...rt,transactions:[...rt.transactions||[],Tt]}:rt)),r==null||r()}catch(te){console.error("Unexpected error syncing contribution to budget:",te)}},Ct=A=>{const U=sr(A);return(A.milestones||Ii).filter(K=>U.progress>=K)},B=b.useMemo(()=>[["1","2","3"],["4","5","6"],["7","8","9"],[".","0",""]],[]);return a.jsxs("div",{className:"goals-screen",children:[a.jsxs("div",{className:"goals-header",children:[a.jsx("button",{className:"ghost-button",onClick:()=>e("budgets"),children:" Budgets"}),a.jsx("h2",{children:"Savings Goals"}),a.jsx("p",{className:"tagline",children:"Track milestones, weekly pace, and stay motivated."})]}),u&&a.jsx("div",{className:"error-banner",children:u}),l?a.jsx("div",{className:"loading-goals",children:"Loading goals"}):i.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx("p",{children:"Start a new savings goal to build momentum."}),a.jsx("button",{className:"primary-button",onClick:()=>g(!0),children:"Create your first goal"})]}):i.map(A=>{const U=sr(A),X=Ct(A);return a.jsxs("div",{className:"goal-card",children:[a.jsxs("div",{className:"goal-card-header",children:[a.jsxs("div",{children:[a.jsx("h3",{children:A.name}),a.jsx("span",{className:`goal-pace-badge ${U.pace}`,children:U.pace.replace("-"," ")}),U.progress>=100&&a.jsx("span",{className:"goal-complete",children:" Complete"})]}),a.jsx("button",{className:"icon-button",onClick:()=>I(A.id),title:"Delete goal",children:""})]}),a.jsx("div",{className:"goal-progress-bar",children:a.jsx("div",{className:"goal-progress",style:{width:`${U.progress}%`}})}),a.jsxs("div",{className:"goal-progress-meta",children:[a.jsxs("span",{children:[rr(U.totalContributed)," saved"]}),a.jsxs("span",{children:["Target ",rr(A.targetAmount)]})]}),a.jsxs("div",{className:"goal-meta-grid",children:[a.jsxs("div",{children:[a.jsx("p",{className:"meta-label",children:"Weekly target"}),a.jsx("p",{className:"meta-value",children:rr(U.weeklyTarget)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"meta-label",children:"This week"}),a.jsx("p",{className:"meta-value",children:rr(U.contributedThisWeek)})]}),A.targetDate&&a.jsxs("div",{children:[a.jsx("p",{className:"meta-label",children:"Target date"}),a.jsx("p",{className:"meta-value",children:new Date(A.targetDate).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"meta-label",children:"Milestones"}),a.jsx("p",{className:"meta-value",children:X.length>0?`${X.join("%  ")}%`:""})]})]}),U.pace==="behind"&&U.guidanceShortfall>0&&a.jsxs("div",{className:"goal-guidance",children:["Add ",rr(U.guidanceShortfall)," this week to catch up."]}),a.jsx("div",{className:"goal-budget-link",children:a.jsxs("label",{children:["Sync with budget",a.jsxs("select",{value:A.linked_budget_id||"",onChange:K=>z(A,K.target.value),children:[a.jsx("option",{value:"",children:"Not linked"}),t.map(K=>a.jsx("option",{value:K.id,children:K.name},K.id))]})]})}),A.goal_contributions&&A.goal_contributions.length>0&&a.jsxs("div",{className:"goal-contributions",children:[a.jsx("h4",{children:"Recent contributions"}),a.jsx("ul",{children:A.goal_contributions.slice(0,4).map(K=>a.jsxs("li",{children:[a.jsx("span",{children:new Date(K.contributed_at).toLocaleDateString()}),a.jsx("span",{children:rr(K.amount)})]},K.id))})]})]},A.id)}),a.jsx("button",{className:"fab",onClick:()=>{if(!i.length){g(!0);return}!m&&i.length&&p(i[0].id),O(!0)},title:"Log contribution",children:""}),a.jsx("button",{className:"secondary-button",onClick:()=>g(!0),style:{width:"100%",marginTop:"1rem"},children:"New goal"}),f&&a.jsx("div",{className:"modal-backdrop",children:a.jsxs("div",{className:"modal",children:[a.jsx("h3",{children:"Create goal"}),a.jsxs("form",{onSubmit:xe,className:"goal-form",children:[a.jsxs("fieldset",{children:[a.jsxs("label",{children:["Goal name",a.jsx("input",{type:"text",value:v.name,onChange:A=>w(U=>({...U,name:A.target.value})),placeholder:"Emergency fund",required:!0})]}),a.jsxs("label",{children:["Target amount",a.jsx("input",{type:"number",min:"0",step:"0.01",value:v.targetAmount,onChange:A=>w(U=>({...U,targetAmount:A.target.value})),placeholder:"5000",required:!0})]}),a.jsxs("label",{children:["Target date",a.jsx("input",{type:"date",value:v.targetDate,onChange:A=>w(U=>({...U,targetDate:A.target.value}))})]}),a.jsxs("label",{children:["Link to budget",a.jsxs("select",{value:v.linkedBudgetId,onChange:A=>w(U=>({...U,linkedBudgetId:A.target.value})),children:[a.jsx("option",{value:"",children:"Not linked"}),t.map(A=>a.jsx("option",{value:A.id,children:A.name},A.id))]})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"ghost-button",onClick:()=>g(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"primary-button",disabled:T,children:T?"Saving":"Create"})]})]})]})}),x&&a.jsx("div",{className:"modal-backdrop",children:a.jsxs("div",{className:"modal keypad-modal",children:[a.jsx("h3",{children:"Log contribution"}),a.jsxs("fieldset",{children:[a.jsxs("label",{children:["Choose goal",a.jsx("select",{value:m,onChange:A=>p(A.target.value),children:i.map(A=>a.jsx("option",{value:A.id,children:A.name},A.id))})]}),a.jsx("div",{className:"keypad-display",children:y||"0"}),a.jsx("div",{className:"numeric-keypad",children:B.map((A,U)=>a.jsx("div",{className:"keypad-row",children:A.map(X=>a.jsx("button",{type:"button",onClick:()=>V(X),children:X},X))},U))}),a.jsxs("label",{children:["Note (optional)",a.jsx("input",{type:"text",value:C,onChange:A=>j(A.target.value),placeholder:"Paycheck transfer"})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"ghost-button",onClick:L,children:"Cancel"}),a.jsx("button",{type:"button",className:"primary-button",onClick:Y,disabled:J,children:J?"Saving":"Log"})]})]})]})}),N&&a.jsx("div",{className:"confetti-overlay",children:Array.from({length:60}).map((A,U)=>a.jsx("span",{className:"confetti-piece",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*1.5}s`},children:""},U))}),H&&a.jsxs("div",{className:"milestone-banner",children:[a.jsx("strong",{children:H.goalName})," reached ",H.milestone,"% of the goal!"]})]})}Uc.propTypes={setViewMode:k.func.isRequired,budgets:k.arrayOf(k.shape({id:k.oneOfType([k.string,k.number]).isRequired,name:k.string.isRequired,transactions:k.arrayOf(k.shape({id:k.oneOfType([k.string,k.number]),name:k.string.isRequired,amount:k.number.isRequired,budgetedAmount:k.number,category:k.string.isRequired,type:k.string.isRequired,date:k.string.isRequired,receipt:k.string}))})),setBudgets:k.func.isRequired,onDataMutated:k.func};Uc.defaultProps={onDataMutated:void 0};function Zp({budget:e,setViewMode:t}){var S,C,j,N,R,H;const{user:n}=Mr(),[r,s]=b.useState([]),[i,o]=b.useState(null),[l,c]=b.useState(!0),[u,d]=b.useState(!1),[f,g]=b.useState(null),v=b.useCallback(()=>{const E=e.transactions||[],M=E.filter(L=>L.type==="income").reduce((L,V)=>L+V.amount,0),T=E.filter(L=>L.type==="expense").reduce((L,V)=>L+V.amount,0),W=M-T,J=M>0?W/M*100:0,Q={};E.filter(L=>L.type==="expense").forEach(L=>{Q[L.category]=(Q[L.category]||0)+L.amount});const G=Object.entries(Q).sort(([,L],[,V])=>V-L)[0],xe=new Date,I=E.filter(L=>{const V=new Date(L.date);return(xe-V)/(1e3*60*60*24)<=7&&L.type==="expense"}).reduce((L,V)=>L+V.amount,0),z=E.filter(L=>{const V=new Date(L.date),Y=(xe-V)/(1e3*60*60*24);return Y>7&&Y<=14&&L.type==="expense"}).reduce((L,V)=>L+V.amount,0);return{totalIncome:M,totalExpenses:T,balance:W,savingsRate:J,expensesByCategory:Q,topExpenseCategory:G,last7Days:I,previous7Days:z,transactionCount:E.length,avgTransactionAmount:E.length>0?(M+T)/E.length:0}},[e]),w=b.useMemo(()=>{if(!r.length)return null;if(i){const E=r.find(M=>M.id===i);if(E)return E}return r[0]},[r,i]),x=(w==null?void 0:w.insights)||null,O=b.useMemo(()=>!!(((x==null?void 0:x.budgetSuggestions)||[]).length||((x==null?void 0:x.strengths)||[]).length||((x==null?void 0:x.improvements)||[]).length),[x]),m=b.useCallback(async()=>{if(n){c(!0);try{const{data:E,error:M}=await e_(n.id,e.id,{limit:10});if(M){console.error("Failed to load AI insights",M),g(M.message||"Unable to load AI insights"),s([]),o(null);return}s(E||[]),o(T=>E!=null&&E.length?T&&E.some(W=>W.id===T)?T:E[0].id:null),g(null)}catch(E){console.error("Unexpected error loading insights",E),g(E.message||"Unexpected error loading insights"),s([]),o(null)}finally{c(!1)}}},[n,e.id]);b.useEffect(()=>{m()},[m]);const p=b.useCallback(async()=>{if(n){d(!0),g(null);try{const E=v(),{data:M,error:T}=await t_({userId:n.id,budgetId:e.id,metrics:E});if(T){console.error("Failed to generate AI insight",T),g(T.message||"Failed to generate insight");return}M&&(s(W=>{const J=W.filter(Q=>Q.id!==M.id);return[M,...J]}),o(M.id))}catch(E){console.error("Unexpected error generating insights",E),g(E.message||"Unexpected error generating insights")}finally{d(!1),c(!1)}}},[n,e.id,v,isPaidTier]);if(l&&!r.length)return a.jsxs("div",{children:[a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:" Back to Details"}),a.jsx("h1",{className:"header",children:"AI Financial Report"}),a.jsxs("div",{className:"ai-loading",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Analyzing your financial data..."}),a.jsx("p",{className:"loading-subtext",children:"Generating personalized insights and recommendations"})]})]});if(!l&&!r.length)return a.jsxs("div",{children:[a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:" Back to Details"}),a.jsx("h1",{className:"header",children:"AI Financial Report"}),a.jsxs("div",{className:"empty-state",children:[a.jsx("p",{children:"Run your first AI analysis to unlock a personalized report for this budget."}),a.jsx("button",{className:"primary-button",onClick:p,disabled:u,children:u?"Generating...":"Generate AI Report"}),f&&a.jsx("p",{className:"error-message",children:f})]})]});if(f&&!u&&!x)return a.jsxs("div",{children:[a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:" Back to Details"}),a.jsx("h1",{className:"header",children:"AI Financial Report"}),a.jsxs("div",{className:"error-state",children:[a.jsx("p",{className:"error-message",children:f}),a.jsx("button",{className:"primary-button",onClick:m,children:"Try Again"})]})]});const y=w!=null&&w.created_at?new Date(w.created_at).toLocaleString([],{dateStyle:"medium",timeStyle:"short"}):"";return a.jsxs("div",{children:[a.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:" Back to Details"}),a.jsx("h1",{className:"header",children:"AI Financial Report"}),a.jsxs("div",{className:"insight-run-meta",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"insight-run-time",children:["Generated ",y||"recently"]}),a.jsx("div",{className:`insight-tier-badge tier-${O?"full":"summary"}`,children:O?"Detailed guidance":"Summary insight"})]}),r.length>1&&a.jsxs("label",{className:"history-selector",children:[a.jsx("span",{children:"Previous reports"}),a.jsx("select",{value:(w==null?void 0:w.id)||"",onChange:E=>o(E.target.value),children:r.map(E=>a.jsx("option",{value:E.id,children:new Date(E.created_at).toLocaleString([],{dateStyle:"medium",timeStyle:"short"})},E.id))})]})]}),f&&!u&&a.jsx("p",{className:"error-message",role:"alert",children:f}),x&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compact-health-score",children:[a.jsxs("div",{className:"health-score-content",children:[a.jsxs("div",{className:"health-score-number",children:[x.healthScore,"/10"]}),a.jsx("div",{className:"health-score-label",children:"Financial Health"})]}),a.jsx("div",{className:"health-score-bar",children:a.jsx("div",{className:"health-score-fill",style:{width:`${Math.min(Number(x.healthScore||0)/10*100,100)}%`}})})]}),a.jsxs("div",{className:"summary-callout",children:[a.jsx("div",{className:"callout-icon",children:""}),a.jsxs("div",{className:"callout-content",children:[a.jsx("h3",{className:"callout-title",children:"Financial Overview"}),a.jsx("p",{className:"callout-text",children:x.summary})]})]}),a.jsxs("div",{className:"report-section",children:[a.jsx("h2",{className:"section-title",children:" Spending Insights"}),a.jsxs("div",{className:"analysis-grid-compact",children:[a.jsx("div",{className:"analysis-item-compact",children:(S=x.spendingAnalysis)==null?void 0:S.trend}),a.jsx("div",{className:"analysis-item-compact",children:(C=x.spendingAnalysis)==null?void 0:C.topCategory}),a.jsx("div",{className:"analysis-item-compact",children:(j=x.spendingAnalysis)==null?void 0:j.avgTransaction}),a.jsx("div",{className:"analysis-item-compact",children:(N=x.spendingAnalysis)==null?void 0:N.frequency})]})]}),!O&&a.jsx("div",{className:"empty-state small",children:"Log more activity to unlock personalized recommendations."}),O&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"report-section",children:[a.jsx("h2",{className:"section-title",children:" Budget Optimization"}),(x.budgetSuggestions||[]).map((E,M)=>a.jsxs("div",{className:"budget-suggestion",children:[E.rule&&a.jsxs("div",{className:"budget-rule",children:[a.jsx("h3",{children:E.rule}),a.jsxs("div",{className:"budget-breakdown",children:[a.jsx("div",{children:E.needs}),a.jsx("div",{children:E.wants}),a.jsx("div",{children:E.savings})]})]}),E.category&&a.jsxs("div",{className:"category-suggestion",children:[a.jsxs("strong",{children:[E.category,":"]})," Currently ",E.current," - ",E.suggestion]})]},M))]}),a.jsxs("div",{className:"report-section",children:[a.jsx("h2",{className:"section-title",children:" Strengths & Areas for Growth"}),a.jsxs("div",{className:"strengths-improvements-grid",children:[a.jsxs("div",{className:"strengths-column",children:[a.jsx("h3",{className:"column-title",children:" Your Strengths"}),(x.strengths||[]).map((E,M)=>a.jsxs("div",{className:"strength-item-compact",children:[a.jsx("span",{className:"strength-icon",children:""}),a.jsx("span",{children:E})]},M))]}),a.jsxs("div",{className:"improvements-column",children:[a.jsx("h3",{className:"column-title",children:" Growth Areas"}),(x.improvements||[]).map((E,M)=>a.jsxs("div",{className:"improvement-item-compact",children:[a.jsx("div",{className:"improvement-title-compact",children:E.area}),a.jsx("div",{className:"improvement-action-compact",children:E.action})]},M))]})]})]}),a.jsxs("div",{className:"report-section",children:[a.jsx("h2",{className:"section-title",children:" Quick Savings Tips"}),a.jsx("div",{className:"tips-grid",children:(x.savingsTips||[]).slice(0,4).map((E,M)=>a.jsx("div",{className:"tip-item-compact",children:E},M))})]}),a.jsxs("div",{className:"report-section",children:[a.jsx("h2",{className:"section-title",children:" Recommended Goals"}),a.jsxs("div",{className:"goals-container-compact",children:[a.jsxs("div",{className:"goals-column",children:[a.jsx("h3",{children:"Next 3 Months"}),(((R=x.goals)==null?void 0:R.shortTerm)||[]).slice(0,3).map((E,M)=>a.jsxs("div",{className:"goal-item-compact short-term",children:[a.jsx("span",{children:""}),E]},M))]}),a.jsxs("div",{className:"goals-column",children:[a.jsx("h3",{children:"6+ Months"}),(((H=x.goals)==null?void 0:H.longTerm)||[]).slice(0,3).map((E,M)=>a.jsxs("div",{className:"goal-item-compact long-term",children:[a.jsx("span",{children:""}),E]},M))]})]})]})]})]}),a.jsx("div",{className:"report-actions",children:a.jsx("button",{className:"primary-button",onClick:p,disabled:u,children:u?"Generating...":" Generate New Report"})})]})}const x_=k.shape({id:k.string.isRequired,name:k.string.isRequired,amount:k.number.isRequired,budgetedAmount:k.number,category:k.string.isRequired,type:k.oneOf(["income","expense"]).isRequired,date:k.string.isRequired,receipt:k.string});Zp.propTypes={budget:k.shape({id:k.string.isRequired,name:k.string.isRequired,transactions:k.arrayOf(x_)}).isRequired,setViewMode:k.func.isRequired};function Mc({user:e,categories:t,onManageCategories:n}){var l,c;const{userProfile:r}=Mr(),s=async()=>{confirm("Are you sure you want to sign out?")&&await zp()},i=((l=t==null?void 0:t.income)==null?void 0:l.length)||0,o=((c=t==null?void 0:t.expense)==null?void 0:c.length)||0;return a.jsxs("div",{className:"settings-screen",children:[a.jsxs("section",{className:"settings-section",children:[a.jsx("h2",{children:"Account"}),a.jsxs("div",{className:"settings-card",children:[a.jsx("p",{className:"settings-name",children:(r==null?void 0:r.full_name)||(e==null?void 0:e.email)}),a.jsx("p",{className:"settings-email",children:e==null?void 0:e.email}),a.jsx("button",{type:"button",className:"secondary-button",onClick:s,children:"Sign out"})]})]}),a.jsxs("section",{className:"settings-section",children:[a.jsx("h2",{children:"Categories"}),a.jsxs("div",{className:"settings-card",children:[a.jsxs("p",{className:"settings-description",children:["You have ",i," income categories and ",o," expense categories configured."]}),a.jsx("button",{type:"button",className:"primary-button",onClick:n,children:"Manage categories"})]})]}),a.jsxs("section",{className:"settings-section",children:[a.jsx("h2",{children:"About Pocket Budget"}),a.jsxs("div",{className:"settings-card",children:[a.jsx("p",{children:"Version 1.0  all features are unlocked for every account."}),a.jsxs("p",{children:["Need help or have feedback? Reach out at ",a.jsx("a",{href:"mailto:support@pocketbudget.app",children:"support@pocketbudget.app"}),"."]})]})]})]})}Mc.propTypes={user:k.shape({email:k.string}),categories:k.shape({income:k.array,expense:k.array}),onManageCategories:k.func};Mc.defaultProps={user:null,categories:{income:[],expense:[]},onManageCategories:void 0};function Di({message:e="Loading"}){return a.jsx("div",{className:"loading-screen",children:a.jsxs("div",{className:"loading-content",children:[a.jsx("h1",{className:"header",children:"Pocket Budget"}),a.jsx("div",{className:"loading-spinner-large"}),a.jsxs("p",{className:"loading-text",children:[e,"..."]})]})})}Di.propTypes={message:k.string};function S_(){const[e,t]=b.useState(!1),[n,r]=b.useState(""),[s,i]=b.useState(""),[o,l]=b.useState(""),[c,u]=b.useState(!1),[d,f]=b.useState(""),g=async w=>{w.preventDefault(),u(!0),f("");try{if(e){if(s!==o){f("Passwords do not match"),u(!1);return}if(s.length<6){f("Password must be at least 6 characters"),u(!1);return}const{error:x}=await $w(n,s);x?f(x.message):(f(""),t(!1),i(""),l(""))}else{const{error:x}=await Lw(n,s);x&&f(x.message)}}catch(x){f("An unexpected error occurred"),console.error("Auth error:",x)}finally{u(!1)}},v=async()=>{u(!0),f("");try{const{error:w}=await Uw();w&&f(w.message)}catch(w){f("Failed to sign in with Google"),console.error("Google auth error:",w)}finally{u(!1)}};return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-content",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("h1",{className:"login-title",children:"Pocket Budget"}),a.jsx("p",{className:"login-subtitle",children:e?"Create your account to get started":"Welcome back! Sign in to continue"})]}),a.jsxs("div",{className:"login-form-container",children:[d&&a.jsx("div",{className:"error-message",children:d}),a.jsxs("form",{onSubmit:g,className:"login-form",children:[a.jsx("input",{type:"email",placeholder:"Email address",value:n,onChange:w=>r(w.target.value),className:"input login-input",required:!0,disabled:c}),a.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:w=>i(w.target.value),className:"input login-input",required:!0,disabled:c,minLength:6}),e&&a.jsx("input",{type:"password",placeholder:"Confirm password",value:o,onChange:w=>l(w.target.value),className:"input login-input",required:!0,disabled:c,minLength:6}),a.jsx("button",{type:"submit",className:"primary-button login-button",disabled:c,children:c?"Please wait...":e?"Create Account":"Sign In"})]}),a.jsx("div",{className:"login-divider",children:a.jsx("span",{children:"or"})}),a.jsxs("button",{onClick:v,className:"google-button",disabled:c,children:[a.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),a.jsx("div",{className:"login-switch",children:a.jsxs("p",{children:[e?"Already have an account?":"Don't have an account?"," ",a.jsx("button",{type:"button",onClick:()=>{t(!e),f(""),r(""),i(""),l("")},className:"login-switch-button",disabled:c,children:e?"Sign In":"Sign Up"})]})})]})]})})}function em({title:e,showLogout:t=!1}){const{user:n,userProfile:r}=Mr(),s=async()=>{confirm("Are you sure you want to sign out?")&&await zp()};return a.jsx("div",{className:"app-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("h1",{className:"header-title",children:e}),t&&n&&a.jsxs("div",{className:"header-user",children:[a.jsx("span",{className:"user-email",children:(r==null?void 0:r.full_name)||n.email}),a.jsx("button",{onClick:s,className:"logout-button",title:"Sign out",children:""})]})]})})}em.propTypes={title:k.string.isRequired,showLogout:k.bool};const tm="installPromptDismissedUntil",k_=7*24*60*60*1e3,Xd=()=>typeof window>"u"?!1:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,Zd=()=>{const e=Date.now()+k_;return localStorage.setItem(tm,e.toString()),e},j_=()=>{const e=localStorage.getItem(tm);if(!e)return!1;const t=Number.parseInt(e,10);return Number.isFinite(t)&&Date.now()<t};function eh(){const[e,t]=b.useState(null),[n,r]=b.useState(!1),[s,i]=b.useState(()=>Xd());b.useEffect(()=>{const c=u=>{if(u.preventDefault(),s||j_()){t(null),r(!1);return}t(u),r(!0)};return window.addEventListener("beforeinstallprompt",c),()=>window.removeEventListener("beforeinstallprompt",c)},[s]),b.useEffect(()=>{const c=()=>{i(!0),r(!1),t(null)},u=window.matchMedia("(display-mode: standalone)"),d=()=>{const f=Xd();i(f),f&&(r(!1),t(null))};return d(),typeof u.addEventListener=="function"?u.addEventListener("change",d):typeof u.addListener=="function"&&u.addListener(d),window.addEventListener("appinstalled",c),()=>{typeof u.removeEventListener=="function"?u.removeEventListener("change",d):typeof u.removeListener=="function"&&u.removeListener(d),window.removeEventListener("appinstalled",c)}},[]);const o=async()=>{if(!e)return;e.prompt();const{outcome:c}=await e.userChoice;t(null),r(!1),c==="accepted"?console.log("User accepted the install prompt"):(console.log("User dismissed the install prompt"),Zd())},l=()=>{r(!1),t(null),Zd()};return!n||s?null:a.jsx("div",{className:"install-prompt",children:a.jsxs("div",{className:"install-prompt-content",children:[a.jsx("div",{className:"install-prompt-icon",children:""}),a.jsxs("div",{className:"install-prompt-text",children:[a.jsx("h3",{children:"Install Pocket Budget"}),a.jsx("p",{children:"Add to your home screen for a better experience!"})]}),a.jsxs("div",{className:"install-prompt-actions",children:[a.jsx("button",{onClick:o,className:"install-button",children:"Install"}),a.jsx("button",{onClick:l,className:"dismiss-button",children:""})]})]})})}const N_=[{key:"home",label:"Home",icon:""},{key:"goals",label:"Goals",icon:""},{key:"reports",label:"Reports",icon:""},{key:"settings",label:"Settings",icon:""}],b_={home:"budgets",goals:"goals",reports:"ai",settings:"settings"},E_=e=>{if(!e)return"home";switch(e){case"budgets":case"details":case"categories":return"home";case"goals":return"goals";case"ai":case"reports":return"reports";case"settings":case"profile":return"settings";default:return e}};function Bc({viewMode:e,setViewMode:t,onSelect:n}){const r=E_(e),s=i=>{if(n==null||n(i),t){const o=b_[i]||i;t(o)}};return a.jsx("nav",{className:"bottom-nav","aria-label":"Primary navigation",children:N_.map(i=>{const o=i.key===r;return a.jsxs("button",{type:"button",className:`bottom-nav__item${o?" is-active":""}`,onClick:()=>s(i.key),"aria-pressed":o,children:[a.jsx("span",{className:"bottom-nav__icon","aria-hidden":"true",children:i.icon}),a.jsx("span",{className:"bottom-nav__label",children:i.label})]},i.key)})})}Bc.propTypes={viewMode:k.string,setViewMode:k.func,onSelect:k.func};Bc.defaultProps={viewMode:"budgets",setViewMode:void 0,onSelect:void 0};const nm="pb:budget-metadata:v1",rm=typeof window<"u"&&typeof window.localStorage<"u",Fc=()=>{if(!rm)return{};try{const e=window.localStorage.getItem(nm);if(!e)return{};const t=JSON.parse(e);return t&&typeof t=="object"?t:{}}catch(e){return console.warn("Failed to parse budget metadata",e),{}}},zc=e=>{if(rm)try{window.localStorage.setItem(nm,JSON.stringify(e))}catch(t){console.warn("Failed to persist budget metadata",t)}},ys=()=>{const e=new Date().toISOString();return{cycle:{type:"monthly",label:"Monthly",currentStart:e,payFrequencyDays:30,createdAt:e,lastEditedAt:null},changeLog:[],insights:{trackedCategories:[],reportSchedule:{day:"sunday",time:"08:00"},quietHours:{start:21,end:7},nudges:{enabled:!1,threshold:.8,snoozedUntil:null,acknowledged:{}}},dismissals:{summary:{},recommendations:{}}}},sm=e=>{if(!e)return ys();const t=Fc();return t[e]||(t[e]=ys(),zc(t)),{...ys(),...t[e]}},C_=(e,t)=>{if(!e)return t;const n=Fc();return n[e]={...ys(),...t},zc(n),n[e]},T_=(e,t)=>{const n=sm(e),r=typeof t=="function"?t(n):{...n,...t};return C_(e,r)},P_=e=>{if(!e)return;const t=Fc();t[e]&&(delete t[e],zc(t))},th={income:[{name:"Salary",icon:""},{name:"Freelance",icon:""},{name:"Investment",icon:""},{name:"Business",icon:""},{name:"Gift",icon:""}],expense:[{name:"Groceries",icon:""},{name:"Rent",icon:""},{name:"Transportation",icon:""},{name:"Entertainment",icon:""},{name:"Bills",icon:""},{name:"Shopping",icon:""}]},ba=()=>({income:th.income.map(e=>({...e})),expense:th.expense.map(e=>({...e}))});function A_(){const{user:e,loading:t,initializing:n,status:r}=Mr(),[s,i]=b.useState([]),[o,l]=b.useState(ba),[c,u]=b.useState(null),[d,f]=b.useState("budgets"),[g,v]=b.useState("idle"),w=b.useRef(null),x=n||t||r==="auth-transition",O=b.useCallback(()=>{e!=null&&e.id&&(w.current=null)},[e==null?void 0:e.id]),m=b.useCallback((N,R)=>{var T;if(!(N!=null&&N.id))return N;const H=R||N.metadata||sm(N.id),E=ys(),M={...E,...H,cycle:{...E.cycle,...(H==null?void 0:H.cycle)||{}},insights:{...E.insights,...(H==null?void 0:H.insights)||{},nudges:{...E.insights.nudges,...((T=H==null?void 0:H.insights)==null?void 0:T.nudges)||{}}},dismissals:{...E.dismissals,...(H==null?void 0:H.dismissals)||{}}};return{...N,metadata:M,cycleMetadata:M.cycle,changeLog:M.changeLog||[],insightsPreferences:M.insights,dismissedInsights:M.dismissals}},[]),p=b.useCallback(N=>{i(R=>{const H=typeof N=="function"?N(R):N;return Array.isArray(H)?H.map(E=>m(E,E==null?void 0:E.metadata)):R})},[m]);b.useEffect(()=>{e||(p([]),l(ba()),u(null),f("budgets"),v("idle"),w.current=null)},[e,p]),b.useEffect(()=>{if(!e||t||n||w.current===e.id)return;const N=e.id;w.current=N;let R=!0;v("loading");const H=zw(N),E=Vw(N);return Promise.allSettled([H,E]).then(M=>{if(!R)return;const[T,W]=M;let J=!1;if(T.status==="fulfilled"){const{data:Q,error:G}=T.value;G&&(console.error("Error loading budgets:",G),J=!0);const xe=(Q||[]).map(I=>({id:I.id,name:I.name,createdAt:new Date(I.created_at).toLocaleDateString(),categoryBudgets:I.category_budgets||[],transactions:(I.transactions||[]).map(z=>({id:z.id,name:z.name,amount:Number(z.amount||0),budgetedAmount:z.budgeted_amount??null,category:z.category,type:z.type,date:z.date,receipt:z.receipt_url??null}))}));p(xe.map(I=>m(I)))}else console.error("Unexpected error resolving budgets:",T.reason),J=!0;if(W.status==="fulfilled"){const{data:Q,error:G}=W.value;G&&G.code!=="PGRST116"&&(console.error("Error loading categories:",G),J=!0),Q!=null&&Q.categories?l(Q.categories):(G==null?void 0:G.code)==="PGRST116"&&l(ba())}else console.error("Unexpected error resolving categories:",W.reason),J=!0;J?w.current=null:w.current=N,v("ready")}),()=>{R=!1}},[e,t,n,p,m]);const y=async N=>{if(l(N),!!e)try{const{error:R}=await Gw(e.id,N);R||O()}catch(R){console.error("Error updating categories:",R)}},S=b.useCallback((N,R)=>{if(!N)return;const H=T_(N,R);p(E=>E.map(M=>M.id===N?m({...M},H):M)),u(E=>!E||E.id!==N?E:m({...E},H))},[m,p]),C=b.useCallback(N=>{N&&(P_(N),u(R=>(R==null?void 0:R.id)===N?null:R))},[]),j=b.useMemo(()=>s.find(N=>N.id===(c==null?void 0:c.id))||c,[s,c]);return b.useEffect(()=>{(d==="details"||d==="ai")&&!j&&(s.length>0?u(s[0]):d!=="budgets"&&f("budgets"))},[d,j,s,u]),b.useEffect(()=>{if(!(c!=null&&c.id))return;s.some(R=>R.id===c.id)||(s.length>0?u(s[0]):(u(null),f("budgets")))},[s,c,u,f]),n?a.jsx(Di,{message:"Checking your account"}):!e&&!t?a.jsxs(a.Fragment,{children:[a.jsx(S_,{}),a.jsx(eh,{})]}):x?a.jsx(Di,{message:"Preparing your experience"}):e&&g!=="ready"?a.jsx(Di,{message:g==="loading"?"Loading your budgets":"Setting things up"}):a.jsxs("div",{className:"container",children:[a.jsx(em,{title:"Pocket Budget",showLogout:d!=="ai"}),a.jsx(eh,{}),d==="budgets"&&a.jsx($c,{budgets:s,setSelectedBudget:u,setViewMode:f,setBudgets:p,userId:e.id,onMetadataChange:S,onMetadataRemove:C,onDataMutated:O}),d==="goals"&&a.jsx(Uc,{setViewMode:f,budgets:s,setBudgets:p,onDataMutated:O}),d==="details"&&j&&a.jsx(Lc,{budget:j,categories:o,setViewMode:f,setBudgets:p,budgets:s,setSelectedBudget:u,onMetadataChange:S,onDataMutated:O}),d==="details"&&!j&&s.length===0&&a.jsxs("div",{className:"empty-state",children:[a.jsx("p",{children:"Create a budget to see its details."}),a.jsx("button",{className:"primary-button",onClick:()=>f("budgets"),children:"Go to Home"})]}),d==="categories"&&a.jsx(Yp,{categories:o,setCategories:y,budgets:s,setViewMode:f}),d==="ai"&&j&&a.jsx(Zp,{budget:j,setViewMode:f}),d==="ai"&&!j&&a.jsxs("div",{className:"empty-state",children:[a.jsx("p",{children:"Select a budget to generate a report."}),a.jsx("button",{className:"primary-button",onClick:()=>f("budgets"),children:"Browse budgets"})]}),d==="settings"&&a.jsx(Mc,{user:e,categories:o,onManageCategories:()=>f("categories")}),a.jsx(Bc,{viewMode:d,setViewMode:f})]})}function O_(){return a.jsx(Vp,{children:a.jsx(A_,{})})}const R_=document.getElementById("root"),I_=mp(R_);I_.render(a.jsx(O_,{}));

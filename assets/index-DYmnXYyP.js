(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function fm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Md={exports:{}},oo={},Bd={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Is=Symbol.for("react.element"),mm=Symbol.for("react.portal"),gm=Symbol.for("react.fragment"),ym=Symbol.for("react.strict_mode"),vm=Symbol.for("react.profiler"),wm=Symbol.for("react.provider"),_m=Symbol.for("react.context"),Sm=Symbol.for("react.forward_ref"),xm=Symbol.for("react.suspense"),km=Symbol.for("react.memo"),jm=Symbol.for("react.lazy"),Yu=Symbol.iterator;function Nm(e){return e===null||typeof e!="object"?null:(e=Yu&&e[Yu]||e["@@iterator"],typeof e=="function"?e:null)}var Fd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zd=Object.assign,qd={};function Pr(e,t,n){this.props=e,this.context=t,this.refs=qd,this.updater=n||Fd}Pr.prototype.isReactComponent={};Pr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wd(){}Wd.prototype=Pr.prototype;function El(e,t,n){this.props=e,this.context=t,this.refs=qd,this.updater=n||Fd}var Cl=El.prototype=new Wd;Cl.constructor=El;zd(Cl,Pr.prototype);Cl.isPureReactComponent=!0;var Xu=Array.isArray,Hd=Object.prototype.hasOwnProperty,bl={current:null},Vd={key:!0,ref:!0,__self:!0,__source:!0};function Gd(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Hd.call(t,r)&&!Vd.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Is,type:e,key:i,ref:o,props:s,_owner:bl.current}}function Em(e,t){return{$$typeof:Is,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Tl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Is}function Cm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Zu=/\/+/g;function $o(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Cm(""+e.key):t.toString(36)}function yi(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Is:case mm:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+$o(o,0):r,Xu(s)?(n="",e!=null&&(n=e.replace(Zu,"$&/")+"/"),yi(s,t,n,"",function(c){return c})):s!=null&&(Tl(s)&&(s=Em(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zu,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Xu(e))for(var a=0;a<e.length;a++){i=e[a];var u=r+$o(i,a);o+=yi(i,t,n,u,s)}else if(u=Nm(e),typeof u=="function")for(e=u.call(e),a=0;!(i=e.next()).done;)i=i.value,u=r+$o(i,a++),o+=yi(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Gs(e,t,n){if(e==null)return e;var r=[],s=0;return yi(e,r,"","",function(i){return t.call(n,i,s++)}),r}function bm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var He={current:null},vi={transition:null},Tm={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:vi,ReactCurrentOwner:bl};function Kd(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Gs,forEach:function(e,t,n){Gs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Gs(e,function(){t++}),t},toArray:function(e){return Gs(e,function(t){return t})||[]},only:function(e){if(!Tl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Z.Component=Pr;Z.Fragment=gm;Z.Profiler=vm;Z.PureComponent=El;Z.StrictMode=ym;Z.Suspense=xm;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tm;Z.act=Kd;Z.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=zd({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=bl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Hd.call(t,u)&&!Vd.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Is,type:e.type,key:s,ref:i,props:r,_owner:o}};Z.createContext=function(e){return e={$$typeof:_m,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wm,_context:e},e.Consumer=e};Z.createElement=Gd;Z.createFactory=function(e){var t=Gd.bind(null,e);return t.type=e,t};Z.createRef=function(){return{current:null}};Z.forwardRef=function(e){return{$$typeof:Sm,render:e}};Z.isValidElement=Tl;Z.lazy=function(e){return{$$typeof:jm,_payload:{_status:-1,_result:e},_init:bm}};Z.memo=function(e,t){return{$$typeof:km,type:e,compare:t===void 0?null:t}};Z.startTransition=function(e){var t=vi.transition;vi.transition={};try{e()}finally{vi.transition=t}};Z.unstable_act=Kd;Z.useCallback=function(e,t){return He.current.useCallback(e,t)};Z.useContext=function(e){return He.current.useContext(e)};Z.useDebugValue=function(){};Z.useDeferredValue=function(e){return He.current.useDeferredValue(e)};Z.useEffect=function(e,t){return He.current.useEffect(e,t)};Z.useId=function(){return He.current.useId()};Z.useImperativeHandle=function(e,t,n){return He.current.useImperativeHandle(e,t,n)};Z.useInsertionEffect=function(e,t){return He.current.useInsertionEffect(e,t)};Z.useLayoutEffect=function(e,t){return He.current.useLayoutEffect(e,t)};Z.useMemo=function(e,t){return He.current.useMemo(e,t)};Z.useReducer=function(e,t,n){return He.current.useReducer(e,t,n)};Z.useRef=function(e){return He.current.useRef(e)};Z.useState=function(e){return He.current.useState(e)};Z.useSyncExternalStore=function(e,t,n){return He.current.useSyncExternalStore(e,t,n)};Z.useTransition=function(){return He.current.useTransition()};Z.version="18.3.1";Bd.exports=Z;var b=Bd.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm=b,Am=Symbol.for("react.element"),Om=Symbol.for("react.fragment"),Rm=Object.prototype.hasOwnProperty,Dm=Pm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Im={key:!0,ref:!0,__self:!0,__source:!0};function Qd(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Rm.call(t,r)&&!Im.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Am,type:e,key:i,ref:o,props:s,_owner:Dm.current}}oo.Fragment=Om;oo.jsx=Qd;oo.jsxs=Qd;Md.exports=oo;var l=Md.exports,Jd={exports:{}},lt={},Yd={exports:{}},Xd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,U){var F=R.length;R.push(U);e:for(;0<F;){var H=F-1>>>1,G=R[H];if(0<s(G,U))R[H]=U,R[F]=G,F=H;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var U=R[0],F=R.pop();if(F!==U){R[0]=F;e:for(var H=0,G=R.length,Ke=G>>>1;H<Ke;){var Ae=2*(H+1)-1,Qe=R[Ae],Oe=Ae+1,Be=R[Oe];if(0>s(Qe,F))Oe<G&&0>s(Be,Qe)?(R[H]=Be,R[Oe]=F,H=Oe):(R[H]=Qe,R[Ae]=F,H=Ae);else if(Oe<G&&0>s(Be,F))R[H]=Be,R[Oe]=F,H=Oe;else break e}}return U}function s(R,U){var F=R.sortIndex-U.sortIndex;return F!==0?F:R.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,h=null,g=3,v=!1,k=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=R)r(c),U.sortIndex=U.expirationTime,t(u,U);else break;U=n(c)}}function w(R){if(x=!1,y(R),!k)if(n(u)!==null)k=!0,W(_);else{var U=n(c);U!==null&&Y(w,U.startTime-R)}}function _(R,U){k=!1,x&&(x=!1,p(D),D=-1),v=!0;var F=g;try{for(y(U),h=n(u);h!==null&&(!(h.expirationTime>U)||R&&!te());){var H=h.callback;if(typeof H=="function"){h.callback=null,g=h.priorityLevel;var G=H(h.expirationTime<=U);U=e.unstable_now(),typeof G=="function"?h.callback=G:h===n(u)&&r(u),y(U)}else r(u);h=n(u)}if(h!==null)var Ke=!0;else{var Ae=n(c);Ae!==null&&Y(w,Ae.startTime-U),Ke=!1}return Ke}finally{h=null,g=F,v=!1}}var N=!1,j=null,D=-1,q=5,V=-1;function te(){return!(e.unstable_now()-V<q)}function oe(){if(j!==null){var R=e.unstable_now();V=R;var U=!0;try{U=j(!0,R)}finally{U?Ge():(N=!1,j=null)}}else N=!1}var Ge;if(typeof m=="function")Ge=function(){m(oe)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,T=ae.port2;ae.port1.onmessage=oe,Ge=function(){T.postMessage(null)}}else Ge=function(){C(oe,0)};function W(R){j=R,N||(N=!0,Ge())}function Y(R,U){D=C(function(){R(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){k||v||(k=!0,W(_))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(R){switch(g){case 1:case 2:case 3:var U=3;break;default:U=g}var F=g;g=U;try{return R()}finally{g=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,U){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var F=g;g=R;try{return U()}finally{g=F}},e.unstable_scheduleCallback=function(R,U,F){var H=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?H+F:H):F=H,R){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=F+G,R={id:d++,callback:U,priorityLevel:R,startTime:F,expirationTime:G,sortIndex:-1},F>H?(R.sortIndex=F,t(c,R),n(u)===null&&R===n(c)&&(x?(p(D),D=-1):x=!0,Y(w,F-H))):(R.sortIndex=G,t(u,R),k||v||(k=!0,W(_))),R},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(R){var U=g;return function(){var F=g;g=U;try{return R.apply(this,arguments)}finally{g=F}}}})(Xd);Yd.exports=Xd;var $m=Yd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm=b,at=$m;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zd=new Set,ys={};function qn(e,t){xr(e,t),xr(e+"Capture",t)}function xr(e,t){for(ys[e]=t,e=0;e<t.length;e++)Zd.add(t[e])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xa=Object.prototype.hasOwnProperty,Um=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ec={},tc={};function Mm(e){return xa.call(tc,e)?!0:xa.call(ec,e)?!1:Um.test(e)?tc[e]=!0:(ec[e]=!0,!1)}function Bm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Fm(e,t,n,r){if(t===null||typeof t>"u"||Bm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ve(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ie[e]=new Ve(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ie[t]=new Ve(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ie[e]=new Ve(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ie[e]=new Ve(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ie[e]=new Ve(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ie[e]=new Ve(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ie[e]=new Ve(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ie[e]=new Ve(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ie[e]=new Ve(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pl=/[\-:]([a-z])/g;function Al(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Pl,Al);Ie[t]=new Ve(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Pl,Al);Ie[t]=new Ve(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Pl,Al);Ie[t]=new Ve(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ie[e]=new Ve(e,1,!1,e.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ie[e]=new Ve(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ol(e,t,n,r){var s=Ie.hasOwnProperty(t)?Ie[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Fm(t,n,s,r)&&(n=null),r||s===null?Mm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Gt=Lm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ks=Symbol.for("react.element"),sr=Symbol.for("react.portal"),ir=Symbol.for("react.fragment"),Rl=Symbol.for("react.strict_mode"),ka=Symbol.for("react.profiler"),eh=Symbol.for("react.provider"),th=Symbol.for("react.context"),Dl=Symbol.for("react.forward_ref"),ja=Symbol.for("react.suspense"),Na=Symbol.for("react.suspense_list"),Il=Symbol.for("react.memo"),Zt=Symbol.for("react.lazy"),nh=Symbol.for("react.offscreen"),nc=Symbol.iterator;function zr(e){return e===null||typeof e!="object"?null:(e=nc&&e[nc]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Object.assign,Lo;function Xr(e){if(Lo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Lo=t&&t[1]||""}return`
`+Lo+e}var Uo=!1;function Mo(e,t){if(!e||Uo)return"";Uo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{Uo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Xr(e):""}function zm(e){switch(e.tag){case 5:return Xr(e.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 2:case 15:return e=Mo(e.type,!1),e;case 11:return e=Mo(e.type.render,!1),e;case 1:return e=Mo(e.type,!0),e;default:return""}}function Ea(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ir:return"Fragment";case sr:return"Portal";case ka:return"Profiler";case Rl:return"StrictMode";case ja:return"Suspense";case Na:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case th:return(e.displayName||"Context")+".Consumer";case eh:return(e._context.displayName||"Context")+".Provider";case Dl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Il:return t=e.displayName||null,t!==null?t:Ea(e.type)||"Memo";case Zt:t=e._payload,e=e._init;try{return Ea(e(t))}catch{}}return null}function qm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ea(t);case 8:return t===Rl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wm(e){var t=rh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qs(e){e._valueTracker||(e._valueTracker=Wm(e))}function sh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=rh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ri(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ca(e,t){var n=t.checked;return ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=mn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ih(e,t){t=t.checked,t!=null&&Ol(e,"checked",t,!1)}function ba(e,t){ih(e,t);var n=mn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ta(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ta(e,t.type,mn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ta(e,t,n){(t!=="number"||Ri(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Zr=Array.isArray;function gr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+mn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Pa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ic(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(Zr(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:mn(n)}}function oh(e,t){var n=mn(t.value),r=mn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function oc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ah(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Aa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ah(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Js,lh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Js=Js||document.createElement("div"),Js.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Js.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hm=["Webkit","ms","Moz","O"];Object.keys(rs).forEach(function(e){Hm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rs[t]=rs[e]})});function uh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||rs.hasOwnProperty(e)&&rs[e]?(""+t).trim():t+"px"}function ch(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=uh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Vm=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oa(e,t){if(t){if(Vm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function Ra(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Da=null;function $l(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ia=null,yr=null,vr=null;function ac(e){if(e=Us(e)){if(typeof Ia!="function")throw Error(A(280));var t=e.stateNode;t&&(t=ho(t),Ia(e.stateNode,e.type,t))}}function dh(e){yr?vr?vr.push(e):vr=[e]:yr=e}function hh(){if(yr){var e=yr,t=vr;if(vr=yr=null,ac(e),t)for(e=0;e<t.length;e++)ac(t[e])}}function fh(e,t){return e(t)}function ph(){}var Bo=!1;function mh(e,t,n){if(Bo)return e(t,n);Bo=!0;try{return fh(e,t,n)}finally{Bo=!1,(yr!==null||vr!==null)&&(ph(),hh())}}function ws(e,t){var n=e.stateNode;if(n===null)return null;var r=ho(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var $a=!1;if(qt)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){$a=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{$a=!1}function Gm(e,t,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var ss=!1,Di=null,Ii=!1,La=null,Km={onError:function(e){ss=!0,Di=e}};function Qm(e,t,n,r,s,i,o,a,u){ss=!1,Di=null,Gm.apply(Km,arguments)}function Jm(e,t,n,r,s,i,o,a,u){if(Qm.apply(this,arguments),ss){if(ss){var c=Di;ss=!1,Di=null}else throw Error(A(198));Ii||(Ii=!0,La=c)}}function Wn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function gh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lc(e){if(Wn(e)!==e)throw Error(A(188))}function Ym(e){var t=e.alternate;if(!t){if(t=Wn(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return lc(s),e;if(i===r)return lc(s),t;i=i.sibling}throw Error(A(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function yh(e){return e=Ym(e),e!==null?vh(e):null}function vh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vh(e);if(t!==null)return t;e=e.sibling}return null}var wh=at.unstable_scheduleCallback,uc=at.unstable_cancelCallback,Xm=at.unstable_shouldYield,Zm=at.unstable_requestPaint,we=at.unstable_now,eg=at.unstable_getCurrentPriorityLevel,Ll=at.unstable_ImmediatePriority,_h=at.unstable_UserBlockingPriority,$i=at.unstable_NormalPriority,tg=at.unstable_LowPriority,Sh=at.unstable_IdlePriority,ao=null,Ot=null;function ng(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(ao,e,void 0,(e.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:ig,rg=Math.log,sg=Math.LN2;function ig(e){return e>>>=0,e===0?32:31-(rg(e)/sg|0)|0}var Ys=64,Xs=4194304;function es(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Li(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=es(a):(i&=o,i!==0&&(r=es(i)))}else o=n&~s,o!==0?r=es(o):i!==0&&(r=es(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Nt(t),s=1<<n,r|=e[n],t&=~s;return r}function og(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ag(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Nt(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=og(a,t)):u<=t&&(e.expiredLanes|=a),i&=~a}}function Ua(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xh(){var e=Ys;return Ys<<=1,!(Ys&4194240)&&(Ys=64),e}function Fo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $s(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nt(t),e[t]=n}function lg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Nt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Ul(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Nt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ie=0;function kh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var jh,Ml,Nh,Eh,Ch,Ma=!1,Zs=[],an=null,ln=null,un=null,_s=new Map,Ss=new Map,tn=[],ug="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cc(e,t){switch(e){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":_s.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(t.pointerId)}}function Wr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Us(t),t!==null&&Ml(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function cg(e,t,n,r,s){switch(t){case"focusin":return an=Wr(an,e,t,n,r,s),!0;case"dragenter":return ln=Wr(ln,e,t,n,r,s),!0;case"mouseover":return un=Wr(un,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return _s.set(i,Wr(_s.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ss.set(i,Wr(Ss.get(i)||null,e,t,n,r,s)),!0}return!1}function bh(e){var t=On(e.target);if(t!==null){var n=Wn(t);if(n!==null){if(t=n.tag,t===13){if(t=gh(n),t!==null){e.blockedOn=t,Ch(e.priority,function(){Nh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ba(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Da=r,n.target.dispatchEvent(r),Da=null}else return t=Us(n),t!==null&&Ml(t),e.blockedOn=n,!1;t.shift()}return!0}function dc(e,t,n){wi(e)&&n.delete(t)}function dg(){Ma=!1,an!==null&&wi(an)&&(an=null),ln!==null&&wi(ln)&&(ln=null),un!==null&&wi(un)&&(un=null),_s.forEach(dc),Ss.forEach(dc)}function Hr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ma||(Ma=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,dg)))}function xs(e){function t(s){return Hr(s,e)}if(0<Zs.length){Hr(Zs[0],e);for(var n=1;n<Zs.length;n++){var r=Zs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(an!==null&&Hr(an,e),ln!==null&&Hr(ln,e),un!==null&&Hr(un,e),_s.forEach(t),Ss.forEach(t),n=0;n<tn.length;n++)r=tn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<tn.length&&(n=tn[0],n.blockedOn===null);)bh(n),n.blockedOn===null&&tn.shift()}var wr=Gt.ReactCurrentBatchConfig,Ui=!0;function hg(e,t,n,r){var s=ie,i=wr.transition;wr.transition=null;try{ie=1,Bl(e,t,n,r)}finally{ie=s,wr.transition=i}}function fg(e,t,n,r){var s=ie,i=wr.transition;wr.transition=null;try{ie=4,Bl(e,t,n,r)}finally{ie=s,wr.transition=i}}function Bl(e,t,n,r){if(Ui){var s=Ba(e,t,n,r);if(s===null)Yo(e,t,r,Mi,n),cc(e,r);else if(cg(s,e,t,n,r))r.stopPropagation();else if(cc(e,r),t&4&&-1<ug.indexOf(e)){for(;s!==null;){var i=Us(s);if(i!==null&&jh(i),i=Ba(e,t,n,r),i===null&&Yo(e,t,r,Mi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yo(e,t,r,null,n)}}var Mi=null;function Ba(e,t,n,r){if(Mi=null,e=$l(r),e=On(e),e!==null)if(t=Wn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=gh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Mi=e,null}function Th(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eg()){case Ll:return 1;case _h:return 4;case $i:case tg:return 16;case Sh:return 536870912;default:return 16}default:return 16}}var sn=null,Fl=null,_i=null;function Ph(){if(_i)return _i;var e,t=Fl,n=t.length,r,s="value"in sn?sn.value:sn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return _i=s.slice(e,1<r?1-r:void 0)}function Si(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ei(){return!0}function hc(){return!1}function ut(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ei:hc,this.isPropagationStopped=hc,this}return ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),t}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zl=ut(Ar),Ls=ge({},Ar,{view:0,detail:0}),pg=ut(Ls),zo,qo,Vr,lo=ge({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ql,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vr&&(Vr&&e.type==="mousemove"?(zo=e.screenX-Vr.screenX,qo=e.screenY-Vr.screenY):qo=zo=0,Vr=e),zo)},movementY:function(e){return"movementY"in e?e.movementY:qo}}),fc=ut(lo),mg=ge({},lo,{dataTransfer:0}),gg=ut(mg),yg=ge({},Ls,{relatedTarget:0}),Wo=ut(yg),vg=ge({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),wg=ut(vg),_g=ge({},Ar,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sg=ut(_g),xg=ge({},Ar,{data:0}),pc=ut(xg),kg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ng={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ng[e])?!!t[e]:!1}function ql(){return Eg}var Cg=ge({},Ls,{key:function(e){if(e.key){var t=kg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ql,charCode:function(e){return e.type==="keypress"?Si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bg=ut(Cg),Tg=ge({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mc=ut(Tg),Pg=ge({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ql}),Ag=ut(Pg),Og=ge({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rg=ut(Og),Dg=ge({},lo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ig=ut(Dg),$g=[9,13,27,32],Wl=qt&&"CompositionEvent"in window,is=null;qt&&"documentMode"in document&&(is=document.documentMode);var Lg=qt&&"TextEvent"in window&&!is,Ah=qt&&(!Wl||is&&8<is&&11>=is),gc=" ",yc=!1;function Oh(e,t){switch(e){case"keyup":return $g.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var or=!1;function Ug(e,t){switch(e){case"compositionend":return Rh(t);case"keypress":return t.which!==32?null:(yc=!0,gc);case"textInput":return e=t.data,e===gc&&yc?null:e;default:return null}}function Mg(e,t){if(or)return e==="compositionend"||!Wl&&Oh(e,t)?(e=Ph(),_i=Fl=sn=null,or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ah&&t.locale!=="ko"?null:t.data;default:return null}}var Bg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bg[e.type]:t==="textarea"}function Dh(e,t,n,r){dh(r),t=Bi(t,"onChange"),0<t.length&&(n=new zl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var os=null,ks=null;function Fg(e){Hh(e,0)}function uo(e){var t=ur(e);if(sh(t))return e}function zg(e,t){if(e==="change")return t}var Ih=!1;if(qt){var Ho;if(qt){var Vo="oninput"in document;if(!Vo){var wc=document.createElement("div");wc.setAttribute("oninput","return;"),Vo=typeof wc.oninput=="function"}Ho=Vo}else Ho=!1;Ih=Ho&&(!document.documentMode||9<document.documentMode)}function _c(){os&&(os.detachEvent("onpropertychange",$h),ks=os=null)}function $h(e){if(e.propertyName==="value"&&uo(ks)){var t=[];Dh(t,ks,e,$l(e)),mh(Fg,t)}}function qg(e,t,n){e==="focusin"?(_c(),os=t,ks=n,os.attachEvent("onpropertychange",$h)):e==="focusout"&&_c()}function Wg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uo(ks)}function Hg(e,t){if(e==="click")return uo(t)}function Vg(e,t){if(e==="input"||e==="change")return uo(t)}function Gg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:Gg;function js(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!xa.call(t,s)||!Ct(e[s],t[s]))return!1}return!0}function Sc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xc(e,t){var n=Sc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sc(n)}}function Lh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Lh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Uh(){for(var e=window,t=Ri();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ri(e.document)}return t}function Hl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kg(e){var t=Uh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Lh(n.ownerDocument.documentElement,n)){if(r!==null&&Hl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=xc(n,i);var o=xc(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qg=qt&&"documentMode"in document&&11>=document.documentMode,ar=null,Fa=null,as=null,za=!1;function kc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;za||ar==null||ar!==Ri(r)||(r=ar,"selectionStart"in r&&Hl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),as&&js(as,r)||(as=r,r=Bi(Fa,"onSelect"),0<r.length&&(t=new zl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function ti(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var lr={animationend:ti("Animation","AnimationEnd"),animationiteration:ti("Animation","AnimationIteration"),animationstart:ti("Animation","AnimationStart"),transitionend:ti("Transition","TransitionEnd")},Go={},Mh={};qt&&(Mh=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);function co(e){if(Go[e])return Go[e];if(!lr[e])return e;var t=lr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Mh)return Go[e]=t[n];return e}var Bh=co("animationend"),Fh=co("animationiteration"),zh=co("animationstart"),qh=co("transitionend"),Wh=new Map,jc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yn(e,t){Wh.set(e,t),qn(t,[e])}for(var Ko=0;Ko<jc.length;Ko++){var Qo=jc[Ko],Jg=Qo.toLowerCase(),Yg=Qo[0].toUpperCase()+Qo.slice(1);yn(Jg,"on"+Yg)}yn(Bh,"onAnimationEnd");yn(Fh,"onAnimationIteration");yn(zh,"onAnimationStart");yn("dblclick","onDoubleClick");yn("focusin","onFocus");yn("focusout","onBlur");yn(qh,"onTransitionEnd");xr("onMouseEnter",["mouseout","mouseover"]);xr("onMouseLeave",["mouseout","mouseover"]);xr("onPointerEnter",["pointerout","pointerover"]);xr("onPointerLeave",["pointerout","pointerover"]);qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qn("onBeforeInput",["compositionend","keypress","textInput","paste"]);qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ts));function Nc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Jm(r,t,void 0,e),e.currentTarget=null}function Hh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;Nc(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;Nc(s,a,c),i=u}}}if(Ii)throw e=La,Ii=!1,La=null,e}function ce(e,t){var n=t[Ga];n===void 0&&(n=t[Ga]=new Set);var r=e+"__bubble";n.has(r)||(Vh(t,e,2,!1),n.add(r))}function Jo(e,t,n){var r=0;t&&(r|=4),Vh(n,e,r,t)}var ni="_reactListening"+Math.random().toString(36).slice(2);function Ns(e){if(!e[ni]){e[ni]=!0,Zd.forEach(function(n){n!=="selectionchange"&&(Xg.has(n)||Jo(n,!1,e),Jo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ni]||(t[ni]=!0,Jo("selectionchange",!1,t))}}function Vh(e,t,n,r){switch(Th(t)){case 1:var s=hg;break;case 4:s=fg;break;default:s=Bl}n=s.bind(null,t,n,e),s=void 0,!$a||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Yo(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=On(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}mh(function(){var c=i,d=$l(n),h=[];e:{var g=Wh.get(e);if(g!==void 0){var v=zl,k=e;switch(e){case"keypress":if(Si(n)===0)break e;case"keydown":case"keyup":v=bg;break;case"focusin":k="focus",v=Wo;break;case"focusout":k="blur",v=Wo;break;case"beforeblur":case"afterblur":v=Wo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=gg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Ag;break;case Bh:case Fh:case zh:v=wg;break;case qh:v=Rg;break;case"scroll":v=pg;break;case"wheel":v=Ig;break;case"copy":case"cut":case"paste":v=Sg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=mc}var x=(t&4)!==0,C=!x&&e==="scroll",p=x?g!==null?g+"Capture":null:g;x=[];for(var m=c,y;m!==null;){y=m;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,p!==null&&(w=ws(m,p),w!=null&&x.push(Es(m,w,y)))),C)break;m=m.return}0<x.length&&(g=new v(g,k,null,n,d),h.push({event:g,listeners:x}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==Da&&(k=n.relatedTarget||n.fromElement)&&(On(k)||k[Wt]))break e;if((v||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,v?(k=n.relatedTarget||n.toElement,v=c,k=k?On(k):null,k!==null&&(C=Wn(k),k!==C||k.tag!==5&&k.tag!==6)&&(k=null)):(v=null,k=c),v!==k)){if(x=fc,w="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(x=mc,w="onPointerLeave",p="onPointerEnter",m="pointer"),C=v==null?g:ur(v),y=k==null?g:ur(k),g=new x(w,m+"leave",v,n,d),g.target=C,g.relatedTarget=y,w=null,On(d)===c&&(x=new x(p,m+"enter",k,n,d),x.target=y,x.relatedTarget=C,w=x),C=w,v&&k)t:{for(x=v,p=k,m=0,y=x;y;y=Kn(y))m++;for(y=0,w=p;w;w=Kn(w))y++;for(;0<m-y;)x=Kn(x),m--;for(;0<y-m;)p=Kn(p),y--;for(;m--;){if(x===p||p!==null&&x===p.alternate)break t;x=Kn(x),p=Kn(p)}x=null}else x=null;v!==null&&Ec(h,g,v,x,!1),k!==null&&C!==null&&Ec(h,C,k,x,!0)}}e:{if(g=c?ur(c):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var _=zg;else if(vc(g))if(Ih)_=Vg;else{_=Wg;var N=qg}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(_=Hg);if(_&&(_=_(e,c))){Dh(h,_,n,d);break e}N&&N(e,g,c),e==="focusout"&&(N=g._wrapperState)&&N.controlled&&g.type==="number"&&Ta(g,"number",g.value)}switch(N=c?ur(c):window,e){case"focusin":(vc(N)||N.contentEditable==="true")&&(ar=N,Fa=c,as=null);break;case"focusout":as=Fa=ar=null;break;case"mousedown":za=!0;break;case"contextmenu":case"mouseup":case"dragend":za=!1,kc(h,n,d);break;case"selectionchange":if(Qg)break;case"keydown":case"keyup":kc(h,n,d)}var j;if(Wl)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else or?Oh(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Ah&&n.locale!=="ko"&&(or||D!=="onCompositionStart"?D==="onCompositionEnd"&&or&&(j=Ph()):(sn=d,Fl="value"in sn?sn.value:sn.textContent,or=!0)),N=Bi(c,D),0<N.length&&(D=new pc(D,e,null,n,d),h.push({event:D,listeners:N}),j?D.data=j:(j=Rh(n),j!==null&&(D.data=j)))),(j=Lg?Ug(e,n):Mg(e,n))&&(c=Bi(c,"onBeforeInput"),0<c.length&&(d=new pc("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=j))}Hh(h,t)})}function Es(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bi(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ws(e,n),i!=null&&r.unshift(Es(e,i,s)),i=ws(e,t),i!=null&&r.push(Es(e,i,s))),e=e.return}return r}function Kn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ec(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=ws(n,i),u!=null&&o.unshift(Es(n,u,a))):s||(u=ws(n,i),u!=null&&o.push(Es(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Zg=/\r\n?/g,ey=/\u0000|\uFFFD/g;function Cc(e){return(typeof e=="string"?e:""+e).replace(Zg,`
`).replace(ey,"")}function ri(e,t,n){if(t=Cc(t),Cc(e)!==t&&n)throw Error(A(425))}function Fi(){}var qa=null,Wa=null;function Ha(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Va=typeof setTimeout=="function"?setTimeout:void 0,ty=typeof clearTimeout=="function"?clearTimeout:void 0,bc=typeof Promise=="function"?Promise:void 0,ny=typeof queueMicrotask=="function"?queueMicrotask:typeof bc<"u"?function(e){return bc.resolve(null).then(e).catch(ry)}:Va;function ry(e){setTimeout(function(){throw e})}function Xo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),xs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xs(t)}function cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Or=Math.random().toString(36).slice(2),At="__reactFiber$"+Or,Cs="__reactProps$"+Or,Wt="__reactContainer$"+Or,Ga="__reactEvents$"+Or,sy="__reactListeners$"+Or,iy="__reactHandles$"+Or;function On(e){var t=e[At];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Wt]||n[At]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Tc(e);e!==null;){if(n=e[At])return n;e=Tc(e)}return t}e=n,n=e.parentNode}return null}function Us(e){return e=e[At]||e[Wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ur(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function ho(e){return e[Cs]||null}var Ka=[],cr=-1;function vn(e){return{current:e}}function de(e){0>cr||(e.current=Ka[cr],Ka[cr]=null,cr--)}function ue(e,t){cr++,Ka[cr]=e.current,e.current=t}var gn={},Me=vn(gn),et=vn(!1),Ln=gn;function kr(e,t){var n=e.type.contextTypes;if(!n)return gn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function tt(e){return e=e.childContextTypes,e!=null}function zi(){de(et),de(Me)}function Pc(e,t,n){if(Me.current!==gn)throw Error(A(168));ue(Me,t),ue(et,n)}function Gh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(A(108,qm(e)||"Unknown",s));return ge({},n,r)}function qi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gn,Ln=Me.current,ue(Me,e),ue(et,et.current),!0}function Ac(e,t,n){var r=e.stateNode;if(!r)throw Error(A(169));n?(e=Gh(e,t,Ln),r.__reactInternalMemoizedMergedChildContext=e,de(et),de(Me),ue(Me,e)):de(et),ue(et,n)}var Mt=null,fo=!1,Zo=!1;function Kh(e){Mt===null?Mt=[e]:Mt.push(e)}function oy(e){fo=!0,Kh(e)}function wn(){if(!Zo&&Mt!==null){Zo=!0;var e=0,t=ie;try{var n=Mt;for(ie=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mt=null,fo=!1}catch(s){throw Mt!==null&&(Mt=Mt.slice(e+1)),wh(Ll,wn),s}finally{ie=t,Zo=!1}}return null}var dr=[],hr=0,Wi=null,Hi=0,dt=[],ht=0,Un=null,Bt=1,Ft="";function bn(e,t){dr[hr++]=Hi,dr[hr++]=Wi,Wi=e,Hi=t}function Qh(e,t,n){dt[ht++]=Bt,dt[ht++]=Ft,dt[ht++]=Un,Un=e;var r=Bt;e=Ft;var s=32-Nt(r)-1;r&=~(1<<s),n+=1;var i=32-Nt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Bt=1<<32-Nt(t)+s|n<<s|r,Ft=i+e}else Bt=1<<i|n<<s|r,Ft=e}function Vl(e){e.return!==null&&(bn(e,1),Qh(e,1,0))}function Gl(e){for(;e===Wi;)Wi=dr[--hr],dr[hr]=null,Hi=dr[--hr],dr[hr]=null;for(;e===Un;)Un=dt[--ht],dt[ht]=null,Ft=dt[--ht],dt[ht]=null,Bt=dt[--ht],dt[ht]=null}var ot=null,it=null,he=!1,jt=null;function Jh(e,t){var n=ft(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Oc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ot=e,it=cn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ot=e,it=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Un!==null?{id:Bt,overflow:Ft}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ft(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ot=e,it=null,!0):!1;default:return!1}}function Qa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ja(e){if(he){var t=it;if(t){var n=t;if(!Oc(e,t)){if(Qa(e))throw Error(A(418));t=cn(n.nextSibling);var r=ot;t&&Oc(e,t)?Jh(r,n):(e.flags=e.flags&-4097|2,he=!1,ot=e)}}else{if(Qa(e))throw Error(A(418));e.flags=e.flags&-4097|2,he=!1,ot=e}}}function Rc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ot=e}function si(e){if(e!==ot)return!1;if(!he)return Rc(e),he=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ha(e.type,e.memoizedProps)),t&&(t=it)){if(Qa(e))throw Yh(),Error(A(418));for(;t;)Jh(e,t),t=cn(t.nextSibling)}if(Rc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){it=cn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}it=null}}else it=ot?cn(e.stateNode.nextSibling):null;return!0}function Yh(){for(var e=it;e;)e=cn(e.nextSibling)}function jr(){it=ot=null,he=!1}function Kl(e){jt===null?jt=[e]:jt.push(e)}var ay=Gt.ReactCurrentBatchConfig;function Gr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function ii(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Dc(e){var t=e._init;return t(e._payload)}function Xh(e){function t(p,m){if(e){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=pn(p,m),p.index=0,p.sibling=null,p}function i(p,m,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,m,y,w){return m===null||m.tag!==6?(m=oa(y,p.mode,w),m.return=p,m):(m=s(m,y),m.return=p,m)}function u(p,m,y,w){var _=y.type;return _===ir?d(p,m,y.props.children,w,y.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Zt&&Dc(_)===m.type)?(w=s(m,y.props),w.ref=Gr(p,m,y),w.return=p,w):(w=bi(y.type,y.key,y.props,null,p.mode,w),w.ref=Gr(p,m,y),w.return=p,w)}function c(p,m,y,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=aa(y,p.mode,w),m.return=p,m):(m=s(m,y.children||[]),m.return=p,m)}function d(p,m,y,w,_){return m===null||m.tag!==7?(m=$n(y,p.mode,w,_),m.return=p,m):(m=s(m,y),m.return=p,m)}function h(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=oa(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ks:return y=bi(m.type,m.key,m.props,null,p.mode,y),y.ref=Gr(p,null,m),y.return=p,y;case sr:return m=aa(m,p.mode,y),m.return=p,m;case Zt:var w=m._init;return h(p,w(m._payload),y)}if(Zr(m)||zr(m))return m=$n(m,p.mode,y,null),m.return=p,m;ii(p,m)}return null}function g(p,m,y,w){var _=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:a(p,m,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ks:return y.key===_?u(p,m,y,w):null;case sr:return y.key===_?c(p,m,y,w):null;case Zt:return _=y._init,g(p,m,_(y._payload),w)}if(Zr(y)||zr(y))return _!==null?null:d(p,m,y,w,null);ii(p,y)}return null}function v(p,m,y,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(y)||null,a(m,p,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ks:return p=p.get(w.key===null?y:w.key)||null,u(m,p,w,_);case sr:return p=p.get(w.key===null?y:w.key)||null,c(m,p,w,_);case Zt:var N=w._init;return v(p,m,y,N(w._payload),_)}if(Zr(w)||zr(w))return p=p.get(y)||null,d(m,p,w,_,null);ii(m,w)}return null}function k(p,m,y,w){for(var _=null,N=null,j=m,D=m=0,q=null;j!==null&&D<y.length;D++){j.index>D?(q=j,j=null):q=j.sibling;var V=g(p,j,y[D],w);if(V===null){j===null&&(j=q);break}e&&j&&V.alternate===null&&t(p,j),m=i(V,m,D),N===null?_=V:N.sibling=V,N=V,j=q}if(D===y.length)return n(p,j),he&&bn(p,D),_;if(j===null){for(;D<y.length;D++)j=h(p,y[D],w),j!==null&&(m=i(j,m,D),N===null?_=j:N.sibling=j,N=j);return he&&bn(p,D),_}for(j=r(p,j);D<y.length;D++)q=v(j,p,D,y[D],w),q!==null&&(e&&q.alternate!==null&&j.delete(q.key===null?D:q.key),m=i(q,m,D),N===null?_=q:N.sibling=q,N=q);return e&&j.forEach(function(te){return t(p,te)}),he&&bn(p,D),_}function x(p,m,y,w){var _=zr(y);if(typeof _!="function")throw Error(A(150));if(y=_.call(y),y==null)throw Error(A(151));for(var N=_=null,j=m,D=m=0,q=null,V=y.next();j!==null&&!V.done;D++,V=y.next()){j.index>D?(q=j,j=null):q=j.sibling;var te=g(p,j,V.value,w);if(te===null){j===null&&(j=q);break}e&&j&&te.alternate===null&&t(p,j),m=i(te,m,D),N===null?_=te:N.sibling=te,N=te,j=q}if(V.done)return n(p,j),he&&bn(p,D),_;if(j===null){for(;!V.done;D++,V=y.next())V=h(p,V.value,w),V!==null&&(m=i(V,m,D),N===null?_=V:N.sibling=V,N=V);return he&&bn(p,D),_}for(j=r(p,j);!V.done;D++,V=y.next())V=v(j,p,D,V.value,w),V!==null&&(e&&V.alternate!==null&&j.delete(V.key===null?D:V.key),m=i(V,m,D),N===null?_=V:N.sibling=V,N=V);return e&&j.forEach(function(oe){return t(p,oe)}),he&&bn(p,D),_}function C(p,m,y,w){if(typeof y=="object"&&y!==null&&y.type===ir&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ks:e:{for(var _=y.key,N=m;N!==null;){if(N.key===_){if(_=y.type,_===ir){if(N.tag===7){n(p,N.sibling),m=s(N,y.props.children),m.return=p,p=m;break e}}else if(N.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Zt&&Dc(_)===N.type){n(p,N.sibling),m=s(N,y.props),m.ref=Gr(p,N,y),m.return=p,p=m;break e}n(p,N);break}else t(p,N);N=N.sibling}y.type===ir?(m=$n(y.props.children,p.mode,w,y.key),m.return=p,p=m):(w=bi(y.type,y.key,y.props,null,p.mode,w),w.ref=Gr(p,m,y),w.return=p,p=w)}return o(p);case sr:e:{for(N=y.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(p,m.sibling),m=s(m,y.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=aa(y,p.mode,w),m.return=p,p=m}return o(p);case Zt:return N=y._init,C(p,m,N(y._payload),w)}if(Zr(y))return k(p,m,y,w);if(zr(y))return x(p,m,y,w);ii(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,y),m.return=p,p=m):(n(p,m),m=oa(y,p.mode,w),m.return=p,p=m),o(p)):n(p,m)}return C}var Nr=Xh(!0),Zh=Xh(!1),Vi=vn(null),Gi=null,fr=null,Ql=null;function Jl(){Ql=fr=Gi=null}function Yl(e){var t=Vi.current;de(Vi),e._currentValue=t}function Ya(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _r(e,t){Gi=e,Ql=fr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ze=!0),e.firstContext=null)}function gt(e){var t=e._currentValue;if(Ql!==e)if(e={context:e,memoizedValue:t,next:null},fr===null){if(Gi===null)throw Error(A(308));fr=e,Gi.dependencies={lanes:0,firstContext:e}}else fr=fr.next=e;return t}var Rn=null;function Xl(e){Rn===null?Rn=[e]:Rn.push(e)}function ef(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Xl(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ht(e,r)}function Ht(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var en=!1;function Zl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ht(e,n)}return s=r.interleaved,s===null?(t.next=t,Xl(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ht(e,n)}function xi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ul(e,n)}}function Ic(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ki(e,t,n,r){var s=e.updateQueue;en=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;o=0,d=c=u=null,a=i;do{var g=a.lane,v=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=e,x=a;switch(g=t,v=n,x.tag){case 1:if(k=x.payload,typeof k=="function"){h=k.call(v,h,g);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=x.payload,g=typeof k=="function"?k.call(v,h,g):k,g==null)break e;h=ge({},h,g);break e;case 2:en=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=v,u=h):d=d.next=v,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Bn|=o,e.lanes=o,e.memoizedState=h}}function $c(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(A(191,s));s.call(r)}}}var Ms={},Rt=vn(Ms),bs=vn(Ms),Ts=vn(Ms);function Dn(e){if(e===Ms)throw Error(A(174));return e}function eu(e,t){switch(ue(Ts,t),ue(bs,e),ue(Rt,Ms),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Aa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Aa(t,e)}de(Rt),ue(Rt,t)}function Er(){de(Rt),de(bs),de(Ts)}function nf(e){Dn(Ts.current);var t=Dn(Rt.current),n=Aa(t,e.type);t!==n&&(ue(bs,e),ue(Rt,n))}function tu(e){bs.current===e&&(de(Rt),de(bs))}var pe=vn(0);function Qi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ea=[];function nu(){for(var e=0;e<ea.length;e++)ea[e]._workInProgressVersionPrimary=null;ea.length=0}var ki=Gt.ReactCurrentDispatcher,ta=Gt.ReactCurrentBatchConfig,Mn=0,me=null,Ne=null,Te=null,Ji=!1,ls=!1,Ps=0,ly=0;function $e(){throw Error(A(321))}function ru(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ct(e[n],t[n]))return!1;return!0}function su(e,t,n,r,s,i){if(Mn=i,me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ki.current=e===null||e.memoizedState===null?hy:fy,e=n(r,s),ls){i=0;do{if(ls=!1,Ps=0,25<=i)throw Error(A(301));i+=1,Te=Ne=null,t.updateQueue=null,ki.current=py,e=n(r,s)}while(ls)}if(ki.current=Yi,t=Ne!==null&&Ne.next!==null,Mn=0,Te=Ne=me=null,Ji=!1,t)throw Error(A(300));return e}function iu(){var e=Ps!==0;return Ps=0,e}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?me.memoizedState=Te=e:Te=Te.next=e,Te}function yt(){if(Ne===null){var e=me.alternate;e=e!==null?e.memoizedState:null}else e=Ne.next;var t=Te===null?me.memoizedState:Te.next;if(t!==null)Te=t,Ne=e;else{if(e===null)throw Error(A(310));Ne=e,e={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},Te===null?me.memoizedState=Te=e:Te=Te.next=e}return Te}function As(e,t){return typeof t=="function"?t(e):t}function na(e){var t=yt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=Ne,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var d=c.lane;if((Mn&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,me.lanes|=d,Bn|=d}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,Ct(r,t.memoizedState)||(Ze=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,me.lanes|=i,Bn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ra(e){var t=yt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ct(i,t.memoizedState)||(Ze=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function rf(){}function sf(e,t){var n=me,r=yt(),s=t(),i=!Ct(r.memoizedState,s);if(i&&(r.memoizedState=s,Ze=!0),r=r.queue,ou(lf.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Te!==null&&Te.memoizedState.tag&1){if(n.flags|=2048,Os(9,af.bind(null,n,r,s,t),void 0,null),Pe===null)throw Error(A(349));Mn&30||of(n,t,s)}return s}function of(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=me.updateQueue,t===null?(t={lastEffect:null,stores:null},me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function af(e,t,n,r){t.value=n,t.getSnapshot=r,uf(t)&&cf(e)}function lf(e,t,n){return n(function(){uf(t)&&cf(e)})}function uf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ct(e,n)}catch{return!0}}function cf(e){var t=Ht(e,1);t!==null&&Et(t,e,1,-1)}function Lc(e){var t=Tt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:e},t.queue=e,e=e.dispatch=dy.bind(null,me,e),[t.memoizedState,e]}function Os(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=me.updateQueue,t===null?(t={lastEffect:null,stores:null},me.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function df(){return yt().memoizedState}function ji(e,t,n,r){var s=Tt();me.flags|=e,s.memoizedState=Os(1|t,n,void 0,r===void 0?null:r)}function po(e,t,n,r){var s=yt();r=r===void 0?null:r;var i=void 0;if(Ne!==null){var o=Ne.memoizedState;if(i=o.destroy,r!==null&&ru(r,o.deps)){s.memoizedState=Os(t,n,i,r);return}}me.flags|=e,s.memoizedState=Os(1|t,n,i,r)}function Uc(e,t){return ji(8390656,8,e,t)}function ou(e,t){return po(2048,8,e,t)}function hf(e,t){return po(4,2,e,t)}function ff(e,t){return po(4,4,e,t)}function pf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mf(e,t,n){return n=n!=null?n.concat([e]):null,po(4,4,pf.bind(null,t,e),n)}function au(){}function gf(e,t){var n=yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ru(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function yf(e,t){var n=yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ru(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function vf(e,t,n){return Mn&21?(Ct(n,t)||(n=xh(),me.lanes|=n,Bn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ze=!0),e.memoizedState=n)}function uy(e,t){var n=ie;ie=n!==0&&4>n?n:4,e(!0);var r=ta.transition;ta.transition={};try{e(!1),t()}finally{ie=n,ta.transition=r}}function wf(){return yt().memoizedState}function cy(e,t,n){var r=fn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_f(e))Sf(t,n);else if(n=ef(e,t,n,r),n!==null){var s=We();Et(n,e,r,s),xf(n,t,r)}}function dy(e,t,n){var r=fn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_f(e))Sf(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ct(a,o)){var u=t.interleaved;u===null?(s.next=s,Xl(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=ef(e,t,s,r),n!==null&&(s=We(),Et(n,e,r,s),xf(n,t,r))}}function _f(e){var t=e.alternate;return e===me||t!==null&&t===me}function Sf(e,t){ls=Ji=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function xf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ul(e,n)}}var Yi={readContext:gt,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},hy={readContext:gt,useCallback:function(e,t){return Tt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:Uc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ji(4194308,4,pf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ji(4194308,4,e,t)},useInsertionEffect:function(e,t){return ji(4,2,e,t)},useMemo:function(e,t){var n=Tt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Tt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=cy.bind(null,me,e),[r.memoizedState,e]},useRef:function(e){var t=Tt();return e={current:e},t.memoizedState=e},useState:Lc,useDebugValue:au,useDeferredValue:function(e){return Tt().memoizedState=e},useTransition:function(){var e=Lc(!1),t=e[0];return e=uy.bind(null,e[1]),Tt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=me,s=Tt();if(he){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),Pe===null)throw Error(A(349));Mn&30||of(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Uc(lf.bind(null,r,i,e),[e]),r.flags|=2048,Os(9,af.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Tt(),t=Pe.identifierPrefix;if(he){var n=Ft,r=Bt;n=(r&~(1<<32-Nt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ps++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ly++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fy={readContext:gt,useCallback:gf,useContext:gt,useEffect:ou,useImperativeHandle:mf,useInsertionEffect:hf,useLayoutEffect:ff,useMemo:yf,useReducer:na,useRef:df,useState:function(){return na(As)},useDebugValue:au,useDeferredValue:function(e){var t=yt();return vf(t,Ne.memoizedState,e)},useTransition:function(){var e=na(As)[0],t=yt().memoizedState;return[e,t]},useMutableSource:rf,useSyncExternalStore:sf,useId:wf,unstable_isNewReconciler:!1},py={readContext:gt,useCallback:gf,useContext:gt,useEffect:ou,useImperativeHandle:mf,useInsertionEffect:hf,useLayoutEffect:ff,useMemo:yf,useReducer:ra,useRef:df,useState:function(){return ra(As)},useDebugValue:au,useDeferredValue:function(e){var t=yt();return Ne===null?t.memoizedState=e:vf(t,Ne.memoizedState,e)},useTransition:function(){var e=ra(As)[0],t=yt().memoizedState;return[e,t]},useMutableSource:rf,useSyncExternalStore:sf,useId:wf,unstable_isNewReconciler:!1};function St(e,t){if(e&&e.defaultProps){t=ge({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Xa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ge({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var mo={isMounted:function(e){return(e=e._reactInternals)?Wn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=We(),s=fn(e),i=zt(r,s);i.payload=t,n!=null&&(i.callback=n),t=dn(e,i,s),t!==null&&(Et(t,e,s,r),xi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=We(),s=fn(e),i=zt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=dn(e,i,s),t!==null&&(Et(t,e,s,r),xi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=We(),r=fn(e),s=zt(n,r);s.tag=2,t!=null&&(s.callback=t),t=dn(e,s,r),t!==null&&(Et(t,e,r,n),xi(t,e,r))}};function Mc(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!js(n,r)||!js(s,i):!0}function kf(e,t,n){var r=!1,s=gn,i=t.contextType;return typeof i=="object"&&i!==null?i=gt(i):(s=tt(t)?Ln:Me.current,r=t.contextTypes,i=(r=r!=null)?kr(e,s):gn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Bc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function Za(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Zl(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=gt(i):(i=tt(t)?Ln:Me.current,s.context=kr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Xa(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&mo.enqueueReplaceState(s,s.state,null),Ki(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Cr(e,t){try{var n="",r=t;do n+=zm(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function sa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function el(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var my=typeof WeakMap=="function"?WeakMap:Map;function jf(e,t,n){n=zt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zi||(Zi=!0,cl=r),el(e,t)},n}function Nf(e,t,n){n=zt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){el(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){el(e,t),typeof r!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Fc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new my;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Ty.bind(null,e,t,n),t.then(e,e))}function zc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=zt(-1,1),t.tag=2,dn(n,t,1))),n.lanes|=1),e)}var gy=Gt.ReactCurrentOwner,Ze=!1;function qe(e,t,n,r){t.child=e===null?Zh(t,null,n,r):Nr(t,e.child,n,r)}function Wc(e,t,n,r,s){n=n.render;var i=t.ref;return _r(t,s),r=su(e,t,n,r,i,s),n=iu(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vt(e,t,s)):(he&&n&&Vl(t),t.flags|=1,qe(e,t,r,s),t.child)}function Hc(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!mu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Ef(e,t,i,r,s)):(e=bi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:js,n(o,r)&&e.ref===t.ref)return Vt(e,t,s)}return t.flags|=1,e=pn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Ef(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(js(i,r)&&e.ref===t.ref)if(Ze=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Ze=!0);else return t.lanes=e.lanes,Vt(e,t,s)}return tl(e,t,n,r,s)}function Cf(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(mr,st),st|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ue(mr,st),st|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ue(mr,st),st|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ue(mr,st),st|=r;return qe(e,t,s,n),t.child}function bf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function tl(e,t,n,r,s){var i=tt(n)?Ln:Me.current;return i=kr(t,i),_r(t,s),n=su(e,t,n,r,i,s),r=iu(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vt(e,t,s)):(he&&r&&Vl(t),t.flags|=1,qe(e,t,n,s),t.child)}function Vc(e,t,n,r,s){if(tt(n)){var i=!0;qi(t)}else i=!1;if(_r(t,s),t.stateNode===null)Ni(e,t),kf(t,n,r),Za(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=gt(c):(c=tt(n)?Ln:Me.current,c=kr(t,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Bc(t,o,r,c),en=!1;var g=t.memoizedState;o.state=g,Ki(t,r,o,s),u=t.memoizedState,a!==r||g!==u||et.current||en?(typeof d=="function"&&(Xa(t,n,d,r),u=t.memoizedState),(a=en||Mc(t,n,a,r,g,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,tf(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:St(t.type,a),o.props=c,h=t.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=gt(u):(u=tt(n)?Ln:Me.current,u=kr(t,u));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||g!==u)&&Bc(t,o,r,u),en=!1,g=t.memoizedState,o.state=g,Ki(t,r,o,s);var k=t.memoizedState;a!==h||g!==k||et.current||en?(typeof v=="function"&&(Xa(t,n,v,r),k=t.memoizedState),(c=en||Mc(t,n,c,r,g,k,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),o.props=r,o.state=k,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return nl(e,t,n,r,i,s)}function nl(e,t,n,r,s,i){bf(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Ac(t,n,!1),Vt(e,t,i);r=t.stateNode,gy.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Nr(t,e.child,null,i),t.child=Nr(t,null,a,i)):qe(e,t,a,i),t.memoizedState=r.state,s&&Ac(t,n,!0),t.child}function Tf(e){var t=e.stateNode;t.pendingContext?Pc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pc(e,t.context,!1),eu(e,t.containerInfo)}function Gc(e,t,n,r,s){return jr(),Kl(s),t.flags|=256,qe(e,t,n,r),t.child}var rl={dehydrated:null,treeContext:null,retryLane:0};function sl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pf(e,t,n){var r=t.pendingProps,s=pe.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ue(pe,s&1),e===null)return Ja(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vo(o,r,0,null),e=$n(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=sl(n),t.memoizedState=rl,e):lu(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return yy(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=pn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=pn(a,i):(i=$n(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?sl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=rl,r}return i=e.child,e=i.sibling,r=pn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function lu(e,t){return t=vo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function oi(e,t,n,r){return r!==null&&Kl(r),Nr(t,e.child,null,n),e=lu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yy(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=sa(Error(A(422))),oi(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=vo({mode:"visible",children:r.children},s,0,null),i=$n(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Nr(t,e.child,null,o),t.child.memoizedState=sl(o),t.memoizedState=rl,i);if(!(t.mode&1))return oi(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(A(419)),r=sa(i,r,void 0),oi(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ze||a){if(r=Pe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ht(e,s),Et(r,e,s,-1))}return pu(),r=sa(Error(A(421))),oi(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Py.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,it=cn(s.nextSibling),ot=t,he=!0,jt=null,e!==null&&(dt[ht++]=Bt,dt[ht++]=Ft,dt[ht++]=Un,Bt=e.id,Ft=e.overflow,Un=t),t=lu(t,r.children),t.flags|=4096,t)}function Kc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ya(e.return,t,n)}function ia(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Af(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(qe(e,t,r.children,n),r=pe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kc(e,n,t);else if(e.tag===19)Kc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ue(pe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Qi(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ia(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Qi(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ia(t,!0,n,null,i);break;case"together":ia(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ni(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Bn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=pn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function vy(e,t,n){switch(t.tag){case 3:Tf(t),jr();break;case 5:nf(t);break;case 1:tt(t.type)&&qi(t);break;case 4:eu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ue(Vi,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ue(pe,pe.current&1),t.flags|=128,null):n&t.child.childLanes?Pf(e,t,n):(ue(pe,pe.current&1),e=Vt(e,t,n),e!==null?e.sibling:null);ue(pe,pe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Af(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ue(pe,pe.current),r)break;return null;case 22:case 23:return t.lanes=0,Cf(e,t,n)}return Vt(e,t,n)}var Of,il,Rf,Df;Of=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};il=function(){};Rf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Dn(Rt.current);var i=null;switch(n){case"input":s=Ca(e,s),r=Ca(e,r),i=[];break;case"select":s=ge({},s,{value:void 0}),r=ge({},r,{value:void 0}),i=[];break;case"textarea":s=Pa(e,s),r=Pa(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Fi)}Oa(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ys.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ys.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ce("scroll",e),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Df=function(e,t,n,r){n!==r&&(t.flags|=4)};function Kr(e,t){if(!he)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Le(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function wy(e,t,n){var r=t.pendingProps;switch(Gl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(t),null;case 1:return tt(t.type)&&zi(),Le(t),null;case 3:return r=t.stateNode,Er(),de(et),de(Me),nu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(si(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,jt!==null&&(fl(jt),jt=null))),il(e,t),Le(t),null;case 5:tu(t);var s=Dn(Ts.current);if(n=t.type,e!==null&&t.stateNode!=null)Rf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(A(166));return Le(t),null}if(e=Dn(Rt.current),si(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[At]=t,r[Cs]=i,e=(t.mode&1)!==0,n){case"dialog":ce("cancel",r),ce("close",r);break;case"iframe":case"object":case"embed":ce("load",r);break;case"video":case"audio":for(s=0;s<ts.length;s++)ce(ts[s],r);break;case"source":ce("error",r);break;case"img":case"image":case"link":ce("error",r),ce("load",r);break;case"details":ce("toggle",r);break;case"input":rc(r,i),ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ce("invalid",r);break;case"textarea":ic(r,i),ce("invalid",r)}Oa(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ri(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ri(r.textContent,a,e),s=["children",""+a]):ys.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ce("scroll",r)}switch(n){case"input":Qs(r),sc(r,i,!0);break;case"textarea":Qs(r),oc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Fi)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ah(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[At]=t,e[Cs]=r,Of(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ra(n,r),n){case"dialog":ce("cancel",e),ce("close",e),s=r;break;case"iframe":case"object":case"embed":ce("load",e),s=r;break;case"video":case"audio":for(s=0;s<ts.length;s++)ce(ts[s],e);s=r;break;case"source":ce("error",e),s=r;break;case"img":case"image":case"link":ce("error",e),ce("load",e),s=r;break;case"details":ce("toggle",e),s=r;break;case"input":rc(e,r),s=Ca(e,r),ce("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ge({},r,{value:void 0}),ce("invalid",e);break;case"textarea":ic(e,r),s=Pa(e,r),ce("invalid",e);break;default:s=r}Oa(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?ch(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&lh(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&vs(e,u):typeof u=="number"&&vs(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ys.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ce("scroll",e):u!=null&&Ol(e,i,u,o))}switch(n){case"input":Qs(e),sc(e,r,!1);break;case"textarea":Qs(e),oc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+mn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?gr(e,!!r.multiple,i,!1):r.defaultValue!=null&&gr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Fi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Le(t),null;case 6:if(e&&t.stateNode!=null)Df(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(A(166));if(n=Dn(Ts.current),Dn(Rt.current),si(t)){if(r=t.stateNode,n=t.memoizedProps,r[At]=t,(i=r.nodeValue!==n)&&(e=ot,e!==null))switch(e.tag){case 3:ri(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ri(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[At]=t,t.stateNode=r}return Le(t),null;case 13:if(de(pe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&it!==null&&t.mode&1&&!(t.flags&128))Yh(),jr(),t.flags|=98560,i=!1;else if(i=si(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(A(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[At]=t}else jr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Le(t),i=!1}else jt!==null&&(fl(jt),jt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||pe.current&1?Ee===0&&(Ee=3):pu())),t.updateQueue!==null&&(t.flags|=4),Le(t),null);case 4:return Er(),il(e,t),e===null&&Ns(t.stateNode.containerInfo),Le(t),null;case 10:return Yl(t.type._context),Le(t),null;case 17:return tt(t.type)&&zi(),Le(t),null;case 19:if(de(pe),i=t.memoizedState,i===null)return Le(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Kr(i,!1);else{if(Ee!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Qi(e),o!==null){for(t.flags|=128,Kr(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ue(pe,pe.current&1|2),t.child}e=e.sibling}i.tail!==null&&we()>br&&(t.flags|=128,r=!0,Kr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Qi(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Kr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!he)return Le(t),null}else 2*we()-i.renderingStartTime>br&&n!==1073741824&&(t.flags|=128,r=!0,Kr(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=we(),t.sibling=null,n=pe.current,ue(pe,r?n&1|2:n&1),t):(Le(t),null);case 22:case 23:return fu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?st&1073741824&&(Le(t),t.subtreeFlags&6&&(t.flags|=8192)):Le(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function _y(e,t){switch(Gl(t),t.tag){case 1:return tt(t.type)&&zi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Er(),de(et),de(Me),nu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tu(t),null;case 13:if(de(pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));jr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(pe),null;case 4:return Er(),null;case 10:return Yl(t.type._context),null;case 22:case 23:return fu(),null;case 24:return null;default:return null}}var ai=!1,Ue=!1,Sy=typeof WeakSet=="function"?WeakSet:Set,L=null;function pr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ye(e,t,r)}else n.current=null}function ol(e,t,n){try{n()}catch(r){ye(e,t,r)}}var Qc=!1;function xy(e,t){if(qa=Ui,e=Uh(),Hl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,h=e,g=null;t:for(;;){for(var v;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)g=h,h=v;for(;;){if(h===e)break t;if(g===n&&++c===s&&(a=o),g===i&&++d===r&&(u=o),(v=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=v}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wa={focusedElem:e,selectionRange:n},Ui=!1,L=t;L!==null;)if(t=L,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,L=e;else for(;L!==null;){t=L;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var x=k.memoizedProps,C=k.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?x:St(t.type,x),C);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(w){ye(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,L=e;break}L=t.return}return k=Qc,Qc=!1,k}function us(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ol(t,n,i)}s=s.next}while(s!==r)}}function go(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function If(e){var t=e.alternate;t!==null&&(e.alternate=null,If(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[At],delete t[Cs],delete t[Ga],delete t[sy],delete t[iy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $f(e){return e.tag===5||e.tag===3||e.tag===4}function Jc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$f(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fi));else if(r!==4&&(e=e.child,e!==null))for(ll(e,t,n),e=e.sibling;e!==null;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ul(e,t,n),e=e.sibling;e!==null;)ul(e,t,n),e=e.sibling}var Re=null,xt=!1;function Jt(e,t,n){for(n=n.child;n!==null;)Lf(e,t,n),n=n.sibling}function Lf(e,t,n){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(ao,n)}catch{}switch(n.tag){case 5:Ue||pr(n,t);case 6:var r=Re,s=xt;Re=null,Jt(e,t,n),Re=r,xt=s,Re!==null&&(xt?(e=Re,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Re.removeChild(n.stateNode));break;case 18:Re!==null&&(xt?(e=Re,n=n.stateNode,e.nodeType===8?Xo(e.parentNode,n):e.nodeType===1&&Xo(e,n),xs(e)):Xo(Re,n.stateNode));break;case 4:r=Re,s=xt,Re=n.stateNode.containerInfo,xt=!0,Jt(e,t,n),Re=r,xt=s;break;case 0:case 11:case 14:case 15:if(!Ue&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ol(n,t,o),s=s.next}while(s!==r)}Jt(e,t,n);break;case 1:if(!Ue&&(pr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ye(n,t,a)}Jt(e,t,n);break;case 21:Jt(e,t,n);break;case 22:n.mode&1?(Ue=(r=Ue)||n.memoizedState!==null,Jt(e,t,n),Ue=r):Jt(e,t,n);break;default:Jt(e,t,n)}}function Yc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Sy),t.forEach(function(r){var s=Ay.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function wt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Re=a.stateNode,xt=!1;break e;case 3:Re=a.stateNode.containerInfo,xt=!0;break e;case 4:Re=a.stateNode.containerInfo,xt=!0;break e}a=a.return}if(Re===null)throw Error(A(160));Lf(i,o,s),Re=null,xt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){ye(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Uf(t,e),t=t.sibling}function Uf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wt(t,e),bt(e),r&4){try{us(3,e,e.return),go(3,e)}catch(x){ye(e,e.return,x)}try{us(5,e,e.return)}catch(x){ye(e,e.return,x)}}break;case 1:wt(t,e),bt(e),r&512&&n!==null&&pr(n,n.return);break;case 5:if(wt(t,e),bt(e),r&512&&n!==null&&pr(n,n.return),e.flags&32){var s=e.stateNode;try{vs(s,"")}catch(x){ye(e,e.return,x)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&ih(s,i),Ra(a,o);var c=Ra(a,i);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?ch(s,h):d==="dangerouslySetInnerHTML"?lh(s,h):d==="children"?vs(s,h):Ol(s,d,h,c)}switch(a){case"input":ba(s,i);break;case"textarea":oh(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?gr(s,!!i.multiple,v,!1):g!==!!i.multiple&&(i.defaultValue!=null?gr(s,!!i.multiple,i.defaultValue,!0):gr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Cs]=i}catch(x){ye(e,e.return,x)}}break;case 6:if(wt(t,e),bt(e),r&4){if(e.stateNode===null)throw Error(A(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){ye(e,e.return,x)}}break;case 3:if(wt(t,e),bt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xs(t.containerInfo)}catch(x){ye(e,e.return,x)}break;case 4:wt(t,e),bt(e);break;case 13:wt(t,e),bt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(du=we())),r&4&&Yc(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Ue=(c=Ue)||d,wt(t,e),Ue=c):wt(t,e),bt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(L=e,d=e.child;d!==null;){for(h=L=d;L!==null;){switch(g=L,v=g.child,g.tag){case 0:case 11:case 14:case 15:us(4,g,g.return);break;case 1:pr(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(x){ye(r,n,x)}}break;case 5:pr(g,g.return);break;case 22:if(g.memoizedState!==null){Zc(h);continue}}v!==null?(v.return=g,L=v):Zc(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=uh("display",o))}catch(x){ye(e,e.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){ye(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wt(t,e),bt(e),r&4&&Yc(e);break;case 21:break;default:wt(t,e),bt(e)}}function bt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($f(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vs(s,""),r.flags&=-33);var i=Jc(e);ul(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Jc(e);ll(e,a,o);break;default:throw Error(A(161))}}catch(u){ye(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ky(e,t,n){L=e,Mf(e)}function Mf(e,t,n){for(var r=(e.mode&1)!==0;L!==null;){var s=L,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ai;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Ue;a=ai;var c=Ue;if(ai=o,(Ue=u)&&!c)for(L=s;L!==null;)o=L,u=o.child,o.tag===22&&o.memoizedState!==null?ed(s):u!==null?(u.return=o,L=u):ed(s);for(;i!==null;)L=i,Mf(i),i=i.sibling;L=s,ai=a,Ue=c}Xc(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,L=i):Xc(e)}}function Xc(e){for(;L!==null;){var t=L;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ue||go(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ue)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:St(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&$c(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$c(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&xs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Ue||t.flags&512&&al(t)}catch(g){ye(t,t.return,g)}}if(t===e){L=null;break}if(n=t.sibling,n!==null){n.return=t.return,L=n;break}L=t.return}}function Zc(e){for(;L!==null;){var t=L;if(t===e){L=null;break}var n=t.sibling;if(n!==null){n.return=t.return,L=n;break}L=t.return}}function ed(e){for(;L!==null;){var t=L;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{go(4,t)}catch(u){ye(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){ye(t,s,u)}}var i=t.return;try{al(t)}catch(u){ye(t,i,u)}break;case 5:var o=t.return;try{al(t)}catch(u){ye(t,o,u)}}}catch(u){ye(t,t.return,u)}if(t===e){L=null;break}var a=t.sibling;if(a!==null){a.return=t.return,L=a;break}L=t.return}}var jy=Math.ceil,Xi=Gt.ReactCurrentDispatcher,uu=Gt.ReactCurrentOwner,pt=Gt.ReactCurrentBatchConfig,ne=0,Pe=null,Se=null,De=0,st=0,mr=vn(0),Ee=0,Rs=null,Bn=0,yo=0,cu=0,cs=null,Ye=null,du=0,br=1/0,Lt=null,Zi=!1,cl=null,hn=null,li=!1,on=null,eo=0,ds=0,dl=null,Ei=-1,Ci=0;function We(){return ne&6?we():Ei!==-1?Ei:Ei=we()}function fn(e){return e.mode&1?ne&2&&De!==0?De&-De:ay.transition!==null?(Ci===0&&(Ci=xh()),Ci):(e=ie,e!==0||(e=window.event,e=e===void 0?16:Th(e.type)),e):1}function Et(e,t,n,r){if(50<ds)throw ds=0,dl=null,Error(A(185));$s(e,n,r),(!(ne&2)||e!==Pe)&&(e===Pe&&(!(ne&2)&&(yo|=n),Ee===4&&nn(e,De)),nt(e,r),n===1&&ne===0&&!(t.mode&1)&&(br=we()+500,fo&&wn()))}function nt(e,t){var n=e.callbackNode;ag(e,t);var r=Li(e,e===Pe?De:0);if(r===0)n!==null&&uc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&uc(n),t===1)e.tag===0?oy(td.bind(null,e)):Kh(td.bind(null,e)),ny(function(){!(ne&6)&&wn()}),n=null;else{switch(kh(r)){case 1:n=Ll;break;case 4:n=_h;break;case 16:n=$i;break;case 536870912:n=Sh;break;default:n=$i}n=Gf(n,Bf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Bf(e,t){if(Ei=-1,Ci=0,ne&6)throw Error(A(327));var n=e.callbackNode;if(Sr()&&e.callbackNode!==n)return null;var r=Li(e,e===Pe?De:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=to(e,r);else{t=r;var s=ne;ne|=2;var i=zf();(Pe!==e||De!==t)&&(Lt=null,br=we()+500,In(e,t));do try{Cy();break}catch(a){Ff(e,a)}while(!0);Jl(),Xi.current=i,ne=s,Se!==null?t=0:(Pe=null,De=0,t=Ee)}if(t!==0){if(t===2&&(s=Ua(e),s!==0&&(r=s,t=hl(e,s))),t===1)throw n=Rs,In(e,0),nn(e,r),nt(e,we()),n;if(t===6)nn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Ny(s)&&(t=to(e,r),t===2&&(i=Ua(e),i!==0&&(r=i,t=hl(e,i))),t===1))throw n=Rs,In(e,0),nn(e,r),nt(e,we()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(A(345));case 2:Tn(e,Ye,Lt);break;case 3:if(nn(e,r),(r&130023424)===r&&(t=du+500-we(),10<t)){if(Li(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){We(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Va(Tn.bind(null,e,Ye,Lt),t);break}Tn(e,Ye,Lt);break;case 4:if(nn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Nt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jy(r/1960))-r,10<r){e.timeoutHandle=Va(Tn.bind(null,e,Ye,Lt),r);break}Tn(e,Ye,Lt);break;case 5:Tn(e,Ye,Lt);break;default:throw Error(A(329))}}}return nt(e,we()),e.callbackNode===n?Bf.bind(null,e):null}function hl(e,t){var n=cs;return e.current.memoizedState.isDehydrated&&(In(e,t).flags|=256),e=to(e,t),e!==2&&(t=Ye,Ye=n,t!==null&&fl(t)),e}function fl(e){Ye===null?Ye=e:Ye.push.apply(Ye,e)}function Ny(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ct(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nn(e,t){for(t&=~cu,t&=~yo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nt(t),r=1<<n;e[n]=-1,t&=~r}}function td(e){if(ne&6)throw Error(A(327));Sr();var t=Li(e,0);if(!(t&1))return nt(e,we()),null;var n=to(e,t);if(e.tag!==0&&n===2){var r=Ua(e);r!==0&&(t=r,n=hl(e,r))}if(n===1)throw n=Rs,In(e,0),nn(e,t),nt(e,we()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tn(e,Ye,Lt),nt(e,we()),null}function hu(e,t){var n=ne;ne|=1;try{return e(t)}finally{ne=n,ne===0&&(br=we()+500,fo&&wn())}}function Fn(e){on!==null&&on.tag===0&&!(ne&6)&&Sr();var t=ne;ne|=1;var n=pt.transition,r=ie;try{if(pt.transition=null,ie=1,e)return e()}finally{ie=r,pt.transition=n,ne=t,!(ne&6)&&wn()}}function fu(){st=mr.current,de(mr)}function In(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ty(n)),Se!==null)for(n=Se.return;n!==null;){var r=n;switch(Gl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zi();break;case 3:Er(),de(et),de(Me),nu();break;case 5:tu(r);break;case 4:Er();break;case 13:de(pe);break;case 19:de(pe);break;case 10:Yl(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Pe=e,Se=e=pn(e.current,null),De=st=t,Ee=0,Rs=null,cu=yo=Bn=0,Ye=cs=null,Rn!==null){for(t=0;t<Rn.length;t++)if(n=Rn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Rn=null}return e}function Ff(e,t){do{var n=Se;try{if(Jl(),ki.current=Yi,Ji){for(var r=me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ji=!1}if(Mn=0,Te=Ne=me=null,ls=!1,Ps=0,uu.current=null,n===null||n.return===null){Ee=1,Rs=t,Se=null;break}e:{var i=e,o=n.return,a=n,u=t;if(t=De,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=zc(o);if(v!==null){v.flags&=-257,qc(v,o,a,i,t),v.mode&1&&Fc(i,c,t),t=v,u=c;var k=t.updateQueue;if(k===null){var x=new Set;x.add(u),t.updateQueue=x}else k.add(u);break e}else{if(!(t&1)){Fc(i,c,t),pu();break e}u=Error(A(426))}}else if(he&&a.mode&1){var C=zc(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),qc(C,o,a,i,t),Kl(Cr(u,a));break e}}i=u=Cr(u,a),Ee!==4&&(Ee=2),cs===null?cs=[i]:cs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=jf(i,u,t);Ic(i,p);break e;case 1:a=u;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(hn===null||!hn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Nf(i,a,t);Ic(i,w);break e}}i=i.return}while(i!==null)}Wf(n)}catch(_){t=_,Se===n&&n!==null&&(Se=n=n.return);continue}break}while(!0)}function zf(){var e=Xi.current;return Xi.current=Yi,e===null?Yi:e}function pu(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),Pe===null||!(Bn&268435455)&&!(yo&268435455)||nn(Pe,De)}function to(e,t){var n=ne;ne|=2;var r=zf();(Pe!==e||De!==t)&&(Lt=null,In(e,t));do try{Ey();break}catch(s){Ff(e,s)}while(!0);if(Jl(),ne=n,Xi.current=r,Se!==null)throw Error(A(261));return Pe=null,De=0,Ee}function Ey(){for(;Se!==null;)qf(Se)}function Cy(){for(;Se!==null&&!Xm();)qf(Se)}function qf(e){var t=Vf(e.alternate,e,st);e.memoizedProps=e.pendingProps,t===null?Wf(e):Se=t,uu.current=null}function Wf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_y(n,t),n!==null){n.flags&=32767,Se=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ee=6,Se=null;return}}else if(n=wy(n,t,st),n!==null){Se=n;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Ee===0&&(Ee=5)}function Tn(e,t,n){var r=ie,s=pt.transition;try{pt.transition=null,ie=1,by(e,t,n,r)}finally{pt.transition=s,ie=r}return null}function by(e,t,n,r){do Sr();while(on!==null);if(ne&6)throw Error(A(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(lg(e,i),e===Pe&&(Se=Pe=null,De=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||li||(li=!0,Gf($i,function(){return Sr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=pt.transition,pt.transition=null;var o=ie;ie=1;var a=ne;ne|=4,uu.current=null,xy(e,n),Uf(n,e),Kg(Wa),Ui=!!qa,Wa=qa=null,e.current=n,ky(n),Zm(),ne=a,ie=o,pt.transition=i}else e.current=n;if(li&&(li=!1,on=e,eo=s),i=e.pendingLanes,i===0&&(hn=null),ng(n.stateNode),nt(e,we()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zi)throw Zi=!1,e=cl,cl=null,e;return eo&1&&e.tag!==0&&Sr(),i=e.pendingLanes,i&1?e===dl?ds++:(ds=0,dl=e):ds=0,wn(),null}function Sr(){if(on!==null){var e=kh(eo),t=pt.transition,n=ie;try{if(pt.transition=null,ie=16>e?16:e,on===null)var r=!1;else{if(e=on,on=null,eo=0,ne&6)throw Error(A(331));var s=ne;for(ne|=4,L=e.current;L!==null;){var i=L,o=i.child;if(L.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(L=c;L!==null;){var d=L;switch(d.tag){case 0:case 11:case 15:us(8,d,i)}var h=d.child;if(h!==null)h.return=d,L=h;else for(;L!==null;){d=L;var g=d.sibling,v=d.return;if(If(d),d===c){L=null;break}if(g!==null){g.return=v,L=g;break}L=v}}}var k=i.alternate;if(k!==null){var x=k.child;if(x!==null){k.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}L=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,L=o;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:us(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,L=p;break e}L=i.return}}var m=e.current;for(L=m;L!==null;){o=L;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,L=y;else e:for(o=m;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:go(9,a)}}catch(_){ye(a,a.return,_)}if(a===o){L=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,L=w;break e}L=a.return}}if(ne=s,wn(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(ao,e)}catch{}r=!0}return r}finally{ie=n,pt.transition=t}}return!1}function nd(e,t,n){t=Cr(n,t),t=jf(e,t,1),e=dn(e,t,1),t=We(),e!==null&&($s(e,1,t),nt(e,t))}function ye(e,t,n){if(e.tag===3)nd(e,e,n);else for(;t!==null;){if(t.tag===3){nd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hn===null||!hn.has(r))){e=Cr(n,e),e=Nf(t,e,1),t=dn(t,e,1),e=We(),t!==null&&($s(t,1,e),nt(t,e));break}}t=t.return}}function Ty(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=We(),e.pingedLanes|=e.suspendedLanes&n,Pe===e&&(De&n)===n&&(Ee===4||Ee===3&&(De&130023424)===De&&500>we()-du?In(e,0):cu|=n),nt(e,t)}function Hf(e,t){t===0&&(e.mode&1?(t=Xs,Xs<<=1,!(Xs&130023424)&&(Xs=4194304)):t=1);var n=We();e=Ht(e,t),e!==null&&($s(e,t,n),nt(e,n))}function Py(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Hf(e,n)}function Ay(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(t),Hf(e,n)}var Vf;Vf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||et.current)Ze=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ze=!1,vy(e,t,n);Ze=!!(e.flags&131072)}else Ze=!1,he&&t.flags&1048576&&Qh(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ni(e,t),e=t.pendingProps;var s=kr(t,Me.current);_r(t,n),s=su(null,t,r,e,s,n);var i=iu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,tt(r)?(i=!0,qi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zl(t),s.updater=mo,t.stateNode=s,s._reactInternals=t,Za(t,r,e,n),t=nl(null,t,r,!0,i,n)):(t.tag=0,he&&i&&Vl(t),qe(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ni(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Ry(r),e=St(r,e),s){case 0:t=tl(null,t,r,e,n);break e;case 1:t=Vc(null,t,r,e,n);break e;case 11:t=Wc(null,t,r,e,n);break e;case 14:t=Hc(null,t,r,St(r.type,e),n);break e}throw Error(A(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),tl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),Vc(e,t,r,s,n);case 3:e:{if(Tf(t),e===null)throw Error(A(387));r=t.pendingProps,i=t.memoizedState,s=i.element,tf(e,t),Ki(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Cr(Error(A(423)),t),t=Gc(e,t,r,n,s);break e}else if(r!==s){s=Cr(Error(A(424)),t),t=Gc(e,t,r,n,s);break e}else for(it=cn(t.stateNode.containerInfo.firstChild),ot=t,he=!0,jt=null,n=Zh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jr(),r===s){t=Vt(e,t,n);break e}qe(e,t,r,n)}t=t.child}return t;case 5:return nf(t),e===null&&Ja(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ha(r,s)?o=null:i!==null&&Ha(r,i)&&(t.flags|=32),bf(e,t),qe(e,t,o,n),t.child;case 6:return e===null&&Ja(t),null;case 13:return Pf(e,t,n);case 4:return eu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Nr(t,null,r,n):qe(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),Wc(e,t,r,s,n);case 7:return qe(e,t,t.pendingProps,n),t.child;case 8:return qe(e,t,t.pendingProps.children,n),t.child;case 12:return qe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ue(Vi,r._currentValue),r._currentValue=o,i!==null)if(Ct(i.value,o)){if(i.children===s.children&&!et.current){t=Vt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=zt(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ya(i.return,n,t),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(A(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ya(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}qe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,_r(t,n),s=gt(s),r=r(s),t.flags|=1,qe(e,t,r,n),t.child;case 14:return r=t.type,s=St(r,t.pendingProps),s=St(r.type,s),Hc(e,t,r,s,n);case 15:return Ef(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),Ni(e,t),t.tag=1,tt(r)?(e=!0,qi(t)):e=!1,_r(t,n),kf(t,r,s),Za(t,r,s,n),nl(null,t,r,!0,e,n);case 19:return Af(e,t,n);case 22:return Cf(e,t,n)}throw Error(A(156,t.tag))};function Gf(e,t){return wh(e,t)}function Oy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(e,t,n,r){return new Oy(e,t,n,r)}function mu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ry(e){if(typeof e=="function")return mu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Dl)return 11;if(e===Il)return 14}return 2}function pn(e,t){var n=e.alternate;return n===null?(n=ft(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bi(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")mu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ir:return $n(n.children,s,i,t);case Rl:o=8,s|=8;break;case ka:return e=ft(12,n,t,s|2),e.elementType=ka,e.lanes=i,e;case ja:return e=ft(13,n,t,s),e.elementType=ja,e.lanes=i,e;case Na:return e=ft(19,n,t,s),e.elementType=Na,e.lanes=i,e;case nh:return vo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case eh:o=10;break e;case th:o=9;break e;case Dl:o=11;break e;case Il:o=14;break e;case Zt:o=16,r=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=ft(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function $n(e,t,n,r){return e=ft(7,e,r,t),e.lanes=n,e}function vo(e,t,n,r){return e=ft(22,e,r,t),e.elementType=nh,e.lanes=n,e.stateNode={isHidden:!1},e}function oa(e,t,n){return e=ft(6,e,null,t),e.lanes=n,e}function aa(e,t,n){return t=ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dy(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fo(0),this.expirationTimes=Fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gu(e,t,n,r,s,i,o,a,u){return e=new Dy(e,t,n,a,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ft(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zl(i),e}function Iy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Kf(e){if(!e)return gn;e=e._reactInternals;e:{if(Wn(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(tt(n))return Gh(e,n,t)}return t}function Qf(e,t,n,r,s,i,o,a,u){return e=gu(n,r,!0,e,s,i,o,a,u),e.context=Kf(null),n=e.current,r=We(),s=fn(n),i=zt(r,s),i.callback=t??null,dn(n,i,s),e.current.lanes=s,$s(e,s,r),nt(e,r),e}function wo(e,t,n,r){var s=t.current,i=We(),o=fn(s);return n=Kf(n),t.context===null?t.context=n:t.pendingContext=n,t=zt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=dn(s,t,o),e!==null&&(Et(e,s,o,i),xi(e,s,o)),o}function no(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yu(e,t){rd(e,t),(e=e.alternate)&&rd(e,t)}function $y(){return null}var Jf=typeof reportError=="function"?reportError:function(e){console.error(e)};function vu(e){this._internalRoot=e}_o.prototype.render=vu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));wo(e,t,null,null)};_o.prototype.unmount=vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fn(function(){wo(null,e,null,null)}),t[Wt]=null}};function _o(e){this._internalRoot=e}_o.prototype.unstable_scheduleHydration=function(e){if(e){var t=Eh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tn.length&&t!==0&&t<tn[n].priority;n++);tn.splice(n,0,e),n===0&&bh(e)}};function wu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function So(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sd(){}function Ly(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=no(o);i.call(c)}}var o=Qf(t,r,e,0,null,!1,!1,"",sd);return e._reactRootContainer=o,e[Wt]=o.current,Ns(e.nodeType===8?e.parentNode:e),Fn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=no(u);a.call(c)}}var u=gu(e,0,!1,null,null,!1,!1,"",sd);return e._reactRootContainer=u,e[Wt]=u.current,Ns(e.nodeType===8?e.parentNode:e),Fn(function(){wo(t,u,n,r)}),u}function xo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=no(o);a.call(u)}}wo(t,o,e,s)}else o=Ly(n,t,e,s,r);return no(o)}jh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=es(t.pendingLanes);n!==0&&(Ul(t,n|1),nt(t,we()),!(ne&6)&&(br=we()+500,wn()))}break;case 13:Fn(function(){var r=Ht(e,1);if(r!==null){var s=We();Et(r,e,1,s)}}),yu(e,1)}};Ml=function(e){if(e.tag===13){var t=Ht(e,134217728);if(t!==null){var n=We();Et(t,e,134217728,n)}yu(e,134217728)}};Nh=function(e){if(e.tag===13){var t=fn(e),n=Ht(e,t);if(n!==null){var r=We();Et(n,e,t,r)}yu(e,t)}};Eh=function(){return ie};Ch=function(e,t){var n=ie;try{return ie=e,t()}finally{ie=n}};Ia=function(e,t,n){switch(t){case"input":if(ba(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ho(r);if(!s)throw Error(A(90));sh(r),ba(r,s)}}}break;case"textarea":oh(e,n);break;case"select":t=n.value,t!=null&&gr(e,!!n.multiple,t,!1)}};fh=hu;ph=Fn;var Uy={usingClientEntryPoint:!1,Events:[Us,ur,ho,dh,hh,hu]},Qr={findFiberByHostInstance:On,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},My={bundleType:Qr.bundleType,version:Qr.version,rendererPackageName:Qr.rendererPackageName,rendererConfig:Qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yh(e),e===null?null:e.stateNode},findFiberByHostInstance:Qr.findFiberByHostInstance||$y,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ui=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ui.isDisabled&&ui.supportsFiber)try{ao=ui.inject(My),Ot=ui}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uy;lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wu(t))throw Error(A(200));return Iy(e,t,null,n)};lt.createRoot=function(e,t){if(!wu(e))throw Error(A(299));var n=!1,r="",s=Jf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=gu(e,1,!1,null,null,n,!1,r,s),e[Wt]=t.current,Ns(e.nodeType===8?e.parentNode:e),new vu(t)};lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=yh(t),e=e===null?null:e.stateNode,e};lt.flushSync=function(e){return Fn(e)};lt.hydrate=function(e,t,n){if(!So(t))throw Error(A(200));return xo(null,e,t,!0,n)};lt.hydrateRoot=function(e,t,n){if(!wu(e))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Jf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Qf(t,null,e,1,n??null,s,!1,i,o),e[Wt]=t.current,Ns(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new _o(t)};lt.render=function(e,t,n){if(!So(t))throw Error(A(200));return xo(null,e,t,!1,n)};lt.unmountComponentAtNode=function(e){if(!So(e))throw Error(A(40));return e._reactRootContainer?(Fn(function(){xo(null,null,e,!1,function(){e._reactRootContainer=null,e[Wt]=null})}),!0):!1};lt.unstable_batchedUpdates=hu;lt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!So(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return xo(e,t,n,!1,r)};lt.version="18.3.1-next-f1338f8080-20240426";function Yf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yf)}catch(e){console.error(e)}}Yf(),Jd.exports=lt;var By=Jd.exports,Xf,id=By;Xf=id.createRoot,id.hydrateRoot;var Zf={exports:{}},Fy="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zy=Fy,qy=zy;function ep(){}function tp(){}tp.resetWarningCache=ep;var Wy=function(){function e(r,s,i,o,a,u){if(u!==qy){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:tp,resetWarningCache:ep};return n.PropTypes=n,n};Zf.exports=Wy();var Hy=Zf.exports;const E=fm(Hy),Vy="modulepreload",Gy=function(e){return"/pocket-budget/"+e},od={},Bs=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(a=>{if(a=Gy(a),a in od)return;od[a]=!0;const u=a.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Vy,u||(d.as="script",d.crossOrigin=""),d.href=a,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((h,g)=>{d.addEventListener("load",h),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Ky=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Bs(async()=>{const{default:r}=await Promise.resolve().then(()=>Rr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class _u extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Qy extends _u{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ad extends _u{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ld extends _u{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var pl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(pl||(pl={}));var Jy=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};class Yy{constructor(t,{headers:n={},customFetch:r,region:s=pl.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=Ky(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return Jy(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:u}=n;u||(u=this.region);const c=new URL(`${this.url}/${t}`);u&&u!=="any"&&(a["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(a["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(a["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:d}).catch(x=>{throw new Qy(x)}),g=h.headers.get("x-relay-error");if(g&&g==="true")throw new ad(h);if(!h.ok)throw new ld(h);let v=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),k;return v==="application/json"?k=yield h.json():v==="application/octet-stream"?k=yield h.blob():v==="text/event-stream"?k=h:v==="multipart/form-data"?k=yield h.formData():k=yield h.text(),{data:k,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof ld||s instanceof ad?s.context:void 0}}})}}var Xe={},Su={},ko={},Fs={},jo={},No={},Xy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")},Tr=Xy();const Zy=Tr.fetch,np=Tr.fetch.bind(Tr),rp=Tr.Headers,ev=Tr.Request,tv=Tr.Response,Rr=Object.freeze(Object.defineProperty({__proto__:null,Headers:rp,Request:ev,Response:tv,default:np,fetch:Zy},Symbol.toStringTag,{value:"Module"})),nv=pm(Rr);var Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});let rv=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Eo.default=rv;var sp=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(No,"__esModule",{value:!0});const sv=sp(nv),iv=sp(Eo);let ov=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=sv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,u;let c=null,d=null,h=null,g=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=p:d=JSON.parse(p))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),C=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");x&&C&&C.length>1&&(h=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,g=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(d=[],c=null,g=200,v="OK")}catch{i.status===404&&x===""?(g=204,v="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,g=200,v="OK"),c&&this.shouldThrowOnError)throw new iv.default(c)}return{error:c,data:d,count:h,status:g,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,u;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(u=i==null?void 0:i.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};No.default=ov;var av=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jo,"__esModule",{value:!0});const lv=av(No);let uv=class extends lv.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const u=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${u};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};jo.default=uv;var cv=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fs,"__esModule",{value:!0});const dv=cv(jo);let hv=class extends dv.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Fs.default=hv;var fv=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ko,"__esModule",{value:!0});const Jr=fv(Fs);let pv=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Jr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((a,u)=>a.concat(Object.keys(u)),[]);if(o.length>0){const a=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",a.join(","))}}return new Jr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const u=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Jr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Jr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Jr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ko.default=pv;var Co={},bo={};Object.defineProperty(bo,"__esModule",{value:!0});bo.version=void 0;bo.version="0.0.0-automated";Object.defineProperty(Co,"__esModule",{value:!0});Co.DEFAULT_HEADERS=void 0;const mv=bo;Co.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${mv.version}`};var ip=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Su,"__esModule",{value:!0});const gv=ip(ko),yv=ip(Fs),vv=Co;let wv=class op{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},vv.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new gv.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new op(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${t}`);let u;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{a.searchParams.append(d,h)})):(o="POST",u=n);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new yv.default({method:o,url:a,headers:c,schema:this.schemaName,body:u,fetch:this.fetch,allowEmpty:!1})}};Su.default=wv;var Dr=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.PostgrestError=Xe.PostgrestBuilder=Xe.PostgrestTransformBuilder=Xe.PostgrestFilterBuilder=Xe.PostgrestQueryBuilder=Xe.PostgrestClient=void 0;const ap=Dr(Su);Xe.PostgrestClient=ap.default;const lp=Dr(ko);Xe.PostgrestQueryBuilder=lp.default;const up=Dr(Fs);Xe.PostgrestFilterBuilder=up.default;const cp=Dr(jo);Xe.PostgrestTransformBuilder=cp.default;const dp=Dr(No);Xe.PostgrestBuilder=dp.default;const hp=Dr(Eo);Xe.PostgrestError=hp.default;var _v=Xe.default={PostgrestClient:ap.default,PostgrestQueryBuilder:lp.default,PostgrestFilterBuilder:up.default,PostgrestTransformBuilder:cp.default,PostgrestBuilder:dp.default,PostgrestError:hp.default};const{PostgrestClient:Sv,PostgrestQueryBuilder:S_,PostgrestFilterBuilder:x_,PostgrestTransformBuilder:k_,PostgrestBuilder:j_,PostgrestError:N_}=_v;class xv{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const kv="2.15.1",jv=`realtime-js/${kv}`,Nv="1.0.0",ml=1e4,Ev=1e3,Cv=100;var hs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(hs||(hs={}));var ke;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ke||(ke={}));var kt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(kt||(kt={}));var gl;(function(e){e.websocket="websocket"})(gl||(gl={}));var An;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(An||(An={}));class bv{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const u=r.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:u,payload:c}}}class fp{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var le;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(le||(le={}));const ud=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=Tv(o,e,t,s),i),{})},Tv=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?pp(i,o):yl(o)},pp=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Rv(t,n)}switch(e){case le.bool:return Pv(t);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return Av(t);case le.json:case le.jsonb:return Ov(t);case le.timestamp:return Dv(t);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return yl(t);default:return yl(t)}},yl=e=>e,Pv=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Av=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ov=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Rv=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>pp(t,a))}return e},Dv=e=>typeof e=="string"?e.replace(" ","T"):e,mp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class la{constructor(t,n,r={},s=ml){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var cd;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(cd||(cd={}));class fs{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fs.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=fs.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=fs.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},u={};return this.map(i,(c,d)=>{o[c]||(u[c]=d)}),this.map(o,(c,d)=>{const h=i[c];if(h){const g=d.map(C=>C.presence_ref),v=h.map(C=>C.presence_ref),k=d.filter(C=>v.indexOf(C.presence_ref)<0),x=h.filter(C=>g.indexOf(C.presence_ref)<0);k.length>0&&(a[c]=k),x.length>0&&(u[c]=x)}else a[c]=d}),this.syncDiff(i,{joins:a,leaves:u},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,u)=>{var c;const d=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(u),d.length>0){const h=t[a].map(v=>v.presence_ref),g=d.filter(v=>h.indexOf(v.presence_ref)<0);t[a].unshift(...g)}r(a,d,u)}),this.map(o,(a,u)=>{let c=t[a];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),t[a]=c,s(a,c,u),c.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dd;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(dd||(dd={}));var ps;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ps||(ps={}));var Ut;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ut||(Ut={}));class xu{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new la(this,kt.join,this.params,this.timeout),this.rejoinTimer=new fp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ke.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new fs(this),this.broadcastEndpointURL=mp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ke.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[ps.PRESENCE]&&this.bindings[ps.PRESENCE].length>0,d={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:u,private:a};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(Ut.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(Ut.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){t==null||t(Ut.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,x=(v=k==null?void 0:k.length)!==null&&v!==void 0?v:0,C=[];for(let p=0;p<x;p++){const m=k[p],{filter:{event:y,schema:w,table:_,filter:N}}=m,j=g&&g[p];if(j&&j.event===y&&j.schema===w&&j.table===_&&j.filter===N)C.push(Object.assign(Object.assign({},m),{id:j.id}));else{this.unsubscribe(),this.state=ke.errored,t==null||t(Ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(Ut.SUBSCRIBED);return}}).receive("error",g=>{this.state=ke.errored,t==null||t(Ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ke.joined&&t===ps.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,u;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ke.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new la(this,kt.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ke.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new la(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Cv){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:u,leave:c,join:d}=kt;if(r&&[a,u,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var k,x,C;return((k=v.filter)===null||k===void 0?void 0:k.event)==="*"||((C=(x=v.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===o}).map(v=>v.callback(g,r)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var k,x,C,p,m,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const w=v.id,_=(k=v.filter)===null||k===void 0?void 0:k.event;return w&&((x=n.ids)===null||x===void 0?void 0:x.includes(w))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const w=(m=(p=v==null?void 0:v.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return w==="*"||w===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof g=="object"&&"ids"in g){const k=g.data,{schema:x,table:C,commit_timestamp:p,type:m,errors:y}=k;g=Object.assign(Object.assign({},{schema:x,table:C,commit_timestamp:p,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(k))}v.callback(g,r)})}_isClosed(){return this.state===ke.closed}_isJoined(){return this.state===ke.joined}_isJoining(){return this.state===ke.joining}_isLeaving(){return this.state===ke.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&xu.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(kt.close,{},t)}_onError(t){this._on(kt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ke.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=ud(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=ud(t.columns,t.old_record)),n}}const hd=()=>{},ci={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Iv=[1e3,2e3,5e3,1e4],$v=1e4,Lv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Uv{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ml,this.transport=null,this.heartbeatIntervalMs=ci.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hd,this.ref=0,this.reconnectTimer=null,this.logger=hd,this.conn=null,this.sendBuffer=[],this.serializer=new bv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Bs(async()=>{const{default:a}=await Promise.resolve().then(()=>Rr);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${gl.websocket}`,this.httpEndpoint=mp(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xv.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Nv}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case hs.connecting:return An.Connecting;case hs.open:return An.Open;case hs.closing:return An.Closing;default:return An.Closed}}isConnected(){return this.connectionState()===An.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new xu(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var u;(u=this.conn)===null||u===void 0||u.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Ev,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ci.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",u=i.status||"";this.log("receive",`${u} ${r} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(kt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Lv],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:jv};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(kt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new fp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ci.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,a,u,c;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:ml,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:ci.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t==null?void 0:t.reconnectAfterMs)!==null&&a!==void 0?a:d=>Iv[d-1]||$v,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(d,h)=>h(JSON.stringify(d)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class ku extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function je(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Mv extends ku{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vl extends ku{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var Bv=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};const gp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Bs(async()=>{const{default:r}=await Promise.resolve().then(()=>Rr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Fv=()=>Bv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Bs(()=>Promise.resolve().then(()=>Rr),void 0)).Response:Response}),wl=e=>{if(Array.isArray(e))return e.map(n=>wl(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=wl(r)}),t},zv=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Hn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};const ua=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),qv=(e,t,n)=>Hn(void 0,void 0,void 0,function*(){const r=yield Fv();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new Mv(ua(s),i,o))}).catch(s=>{t(new vl(ua(s),s))}):t(new vl(ua(e),e))}),Wv=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(zv(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function zs(e,t,n,r,s,i){return Hn(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,Wv(t,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>qv(u,a,r))})})}function ro(e,t,n,r){return Hn(this,void 0,void 0,function*(){return zs(e,"GET",t,n,r)})}function Pt(e,t,n,r,s){return Hn(this,void 0,void 0,function*(){return zs(e,"POST",t,r,s,n)})}function _l(e,t,n,r,s){return Hn(this,void 0,void 0,function*(){return zs(e,"PUT",t,r,s,n)})}function Hv(e,t,n,r){return Hn(this,void 0,void 0,function*(){return zs(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function yp(e,t,n,r,s){return Hn(this,void 0,void 0,function*(){return zs(e,"DELETE",t,r,s,n)})}var ze=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};const Vv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gv{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=gp(s)}uploadOrUpdate(t,n,r,s){return ze(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},fd),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,u&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),h=yield(t=="PUT"?_l:Pt)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(je(i))return{data:null,error:i};throw i}})}upload(t,n,r){return ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return ze(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let u;const c=Object.assign({upsert:fd.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield _l(this.fetch,a.toString(),u,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(u){if(je(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,n){return ze(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Pt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new ku("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}update(t,n,r){return ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return ze(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}})}copy(t,n,r){return ze(this,void 0,void 0,function*(){try{return{data:{path:(yield Pt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return ze(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Pt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return ze(this,void 0,void 0,function*(){try{const s=yield Pt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}})}download(t,n){return ze(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield ro(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(je(a))return{data:null,error:a};throw a}})}info(t){return ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield ro(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:wl(r),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}exists(t){return ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Hv(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(je(r)&&r instanceof vl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&s.push(u);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return ze(this,void 0,void 0,function*(){try{return{data:yield yp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}})}list(t,n,r){return ze(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Vv),n),{prefix:t||""});return{data:yield Pt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}})}listV2(t,n){return ze(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Pt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Kv="2.11.0",Qv={"X-Client-Info":`storage-js/${Kv}`};var Qn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,[])).next())})};class Jv{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Qv),n),this.fetch=gp(r)}listBuckets(){return Qn(this,void 0,void 0,function*(){try{return{data:yield ro(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(je(t))return{data:null,error:t};throw t}})}getBucket(t){return Qn(this,void 0,void 0,function*(){try{return{data:yield ro(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Qn(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Qn(this,void 0,void 0,function*(){try{return{data:yield _l(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Qn(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Qn(this,void 0,void 0,function*(){try{return{data:yield yp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}})}}class Yv extends Jv{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new Gv(this.url,this.headers,t,this.fetch)}}const Xv="2.55.0";let ns="";typeof Deno<"u"?ns="deno":typeof document<"u"?ns="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ns="react-native":ns="node";const Zv={"X-Client-Info":`supabase-js-${ns}/${Xv}`},e0={headers:Zv},t0={schema:"public"},n0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},r0={};var s0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};const i0=e=>{let t;return e?t=e:typeof fetch>"u"?t=np:t=fetch,(...n)=>t(...n)},o0=()=>typeof Headers>"u"?rp:Headers,a0=(e,t,n)=>{const r=i0(n),s=o0();return(i,o)=>s0(void 0,void 0,void 0,function*(){var a;const u=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var l0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,[])).next())})};function u0(e){return e.endsWith("/")?e:e+"/"}function c0(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:u,auth:c,realtime:d,global:h}=t,g={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>l0(this,void 0,void 0,function*(){return""})};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}const vp="2.71.1",nr=30*1e3,Sl=3,ca=Sl*nr,d0="http://localhost:9999",h0="supabase.auth.token",f0={"X-Client-Info":`gotrue-js/${vp}`},xl="X-Supabase-Api-Version",wp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},p0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,m0=10*60*1e3;class ju extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function K(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class g0 extends ju{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function y0(e){return K(e)&&e.name==="AuthApiError"}class _p extends ju{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class _n extends ju{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Xt extends _n{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function v0(e){return K(e)&&e.name==="AuthSessionMissingError"}class di extends _n{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hi extends _n{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class fi extends _n{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function w0(e){return K(e)&&e.name==="AuthImplicitGrantRedirectError"}class pd extends _n{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kl extends _n{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function da(e){return K(e)&&e.name==="AuthRetryableFetchError"}class md extends _n{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class jl extends _n{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const so="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gd=` 	
\r=`.split(""),_0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<gd.length;t+=1)e[gd[t].charCodeAt(0)]=-2;for(let t=0;t<so.length;t+=1)e[so[t].charCodeAt(0)]=t;return e})();function yd(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(so[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(so[r]),t.queuedBits-=6}}function Sp(e,t,n){const r=_0[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function vd(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{k0(o,r,n)};for(let o=0;o<e.length;o+=1)Sp(e.charCodeAt(o),s,i);return t.join("")}function S0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function x0(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}S0(r,t)}}function k0(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function j0(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Sp(e.charCodeAt(s),n,r);return new Uint8Array(t)}function N0(e){const t=[];return x0(e,n=>t.push(n)),new Uint8Array(t)}function E0(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>yd(s,n,r)),yd(null,n,r),t.join("")}function C0(e){return Math.round(Date.now()/1e3)+e}function b0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const _t=()=>typeof window<"u"&&typeof document<"u",En={tested:!1,writable:!1},xp=()=>{if(!_t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(En.tested)return En.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),En.tested=!0,En.writable=!0}catch{En.tested=!0,En.writable=!1}return En.writable};function T0(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const kp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Bs(async()=>{const{default:r}=await Promise.resolve().then(()=>Rr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},P0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",rr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Cn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Yt=async(e,t)=>{await e.removeItem(t)};class To{constructor(){this.promise=new To.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}To.promiseConstructor=Promise;function ha(e){const t=e.split(".");if(t.length!==3)throw new jl("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!p0.test(t[r]))throw new jl("JWT not in base64url format");return{header:JSON.parse(vd(t[0])),payload:JSON.parse(vd(t[1])),signature:j0(t[2]),raw:{header:t[0],payload:t[1]}}}async function A0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function O0(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function R0(e){return("0"+e.toString(16)).substr(-2)}function D0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,R0).join("")}async function I0(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function $0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await I0(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jn(e,t,n=!1){const r=D0();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await rr(e,`${t}-code-verifier`,s);const i=await $0(r);return[i,r===i?"plain":"s256"]}const L0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function U0(e){const t=e.headers.get(xl);if(!t||!t.match(L0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function M0(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function B0(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const F0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yn(e){if(!F0.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fa(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wd(e){return JSON.parse(JSON.stringify(e))}var z0=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Pn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),q0=[502,503,504];async function _d(e){var t;if(!P0(e))throw new kl(Pn(e),0);if(q0.includes(e.status))throw new kl(Pn(e),e.status);let n;try{n=await e.json()}catch(i){throw new _p(Pn(i),i)}let r;const s=U0(e);if(s&&s.getTime()>=wp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new md(Pn(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Xt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new md(Pn(n),e.status,n.weak_password.reasons);throw new g0(Pn(n),e.status||500,r)}const W0=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function X(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[xl]||(i[xl]=wp["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await H0(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function H0(e,t,n,r,s,i){const o=W0(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(u){throw console.error(u),new kl(Pn(u),0)}if(a.ok||await _d(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(u){await _d(u)}}function $t(e){var t;let n=null;Q0(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=C0(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Sd(e){const t=$t(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function rn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function V0(e){return{data:e,error:null}}function G0(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=z0(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:a,user:u},error:null}}function K0(e){return e}function Q0(e){return e.access_token&&e.refresh_token&&e.expires_in}const pa=["global","local","others"];var J0=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class Y0{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=kp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=pa[0]){if(pa.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pa.join(", ")}`);try{return await X(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await X(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:rn})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=J0(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:G0,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(K(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await X(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:rn})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,u;try{const c={nextPage:null,lastPage:0,total:0},d=await X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:K0});if(d.error)throw d.error;const h=await d.json(),g=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(u=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(k=>{const x=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);c[`${C}Page`]=x}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(K(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Yn(t);try{return await X(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:rn})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Yn(t);try{return await X(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:rn})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Yn(t);try{return await X(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:rn})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Yn(t.userId);try{const{data:n,error:r}=await X(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(K(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Yn(t.userId),Yn(t.id);try{return{data:await X(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}}function xd(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function X0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xn={debug:!!(globalThis&&xp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Z0 extends jp{}async function ew(e,t,n){Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Z0(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}X0();const tw={url:d0,storageKey:h0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:f0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function kd(e,t,n){return await n()}const Zn={};class Ds{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ds.nextInstanceID,Ds.nextInstanceID+=1,this.instanceID>0&&_t()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},tw),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Y0({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=kp(s.fetch),this.lock=s.lock||kd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:_t()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ew:this.lock=kd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:xp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xd(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=xd(this.memoryStorage)),_t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Zn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Zn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=T0(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),_t()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),w0(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return K(n)?{error:n}:{error:new _p("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:$t}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(K(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:h,options:g}=t;let v=null,k=null;this.flowType==="pkce"&&([v,k]=await Jn(this.storage,this.storageKey)),i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:h,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:v,code_challenge_method:k},xform:$t})}else if("phone"in t){const{phone:d,password:h,options:g}=t;i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:$t})}else throw new hi("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(K(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Sd})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Sd})}else throw new hi("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new di}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(K(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,a,u,c,d,h,g,v;let k,x;if("message"in t)k=t.message,x=t.signature;else{const{chain:C,wallet:p,statement:m,options:y}=t;let w;if(_t())if(typeof p=="object")w=p;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))w=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const _=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const N=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),m?{statement:m}:null));let j;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")j=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)j=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)k=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),x=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${_.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const N=await w.signMessage(new TextEncoder().encode(k),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:C,error:p}=await X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:E0(x)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:$t});if(p)throw p;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new di}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:p})}catch(C){if(K(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(t){const n=await Cn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:$t});if(await Yt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new di}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(K(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:$t}),{data:u,error:c}=a;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new di}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(n){if(K(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:u}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Jn(this.storage,this.storageKey));const{error:h}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:u}=t,{data:c,error:d}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new hi("You must provide either an email or phone number.")}catch(a){if(K(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:$t});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,c=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Jn(this.storage,this.storageKey)),await X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:V0})}catch(i){if(K(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Xt;const{error:s}=await X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(K(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await X(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await X(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new hi("You must provide either an email or phone number and a type")}catch(n){if(K(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Cn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<ca:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Cn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=fa()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(u,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:rn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xt}:await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:rn})})}catch(n){if(K(n))return v0(n)&&(await this._removeSession(),await Yt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Xt;const o=s.session;let a=null,u=null;this.flowType==="pkce"&&t.email!=null&&([a,u]=await Jn(this.storage,this.storageKey));const{data:c,error:d}=await X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:u}),jwt:o.access_token,xform:rn});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Xt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=ha(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(K(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Xt;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(K(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!_t())throw new fi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new fi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new pd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new pd("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:u,token_type:c}=t;if(!i||!a||!o||!c)throw new fi("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let g=d+h;u&&(g=parseInt(u));const v=g-d;v*1e3<=nr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const k=g-h;d-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,g,d):d-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,g,d);const{data:x,error:C}=await this._getUser(i);if(C)throw C;const p={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:g,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(r){if(K(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Cn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(y0(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Yt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=b0(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Jn(this.storage,this.storageKey,!0));try{return await X(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(K(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,u,c,d;const{data:h,error:g}=i;if(g)throw g;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await X(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return _t()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(K(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await X(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(K(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await O0(async s=>(s>0&&await A0(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:$t})),(s,i)=>{const o=200*Math.pow(2,s);return i&&da(i)&&Date.now()+o-r<nr})}catch(r){if(this._debug(n,"error",r),K(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),_t()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Cn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Cn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await rr(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:fa()}else if(s&&!s.user&&!s.user){const o=await Cn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Yt(this.storage,this.storageKey+"-user"),await rr(this.storage,this.storageKey,s)):s.user=fa()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ca;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${ca}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),da(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Xt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new To;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Xt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),K(i)){const o={session:null,error:i};return da(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await rr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=wd(s);await rr(this.storage,this.storageKey,i)}else{const s=wd(n);await rr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Yt(this.storage,this.storageKey),await Yt(this.storage,this.storageKey+"-code-verifier"),await Yt(this.storage,this.storageKey+"-user"),this.userStorage&&await Yt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&_t()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),nr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/nr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${nr}ms, refresh threshold is ${Sl} ticks`),s<=Sl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof jp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_t()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Jn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await X(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(K(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:u,error:c}=await X(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(K(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(K(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(K(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ha(s.access_token);let a=null;o.aal&&(a=o.aal);let u=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+m0>s)return r;const{data:i,error:o}=await X(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:v,error:k}=await this.getSession();if(k||!v.session)return{data:null,error:k};r=v.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:u}}=ha(r);n!=null&&n.allowExpired||M0(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:s,signature:o},error:null}}const d=B0(s.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,N0(`${a}.${u}`)))throw new jl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}}Ds.nextInstanceID=0;const nw=Ds;class rw extends nw{constructor(t){super(t)}}var sw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,u)}c((r=r.apply(e,[])).next())})};class iw{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=u0(t),u=new URL(a);this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,d={db:t0,realtime:r0,auth:Object.assign(Object.assign({},n0),{storageKey:c}),global:e0},h=c0(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=a0(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Sv(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Yv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Yy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return sw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:u},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rw({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:u,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Uv(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ow=(e,t,n)=>new iw(e,t,n);function aw(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}aw()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var lw={VITE_SUPABASE_URL:"https://micbqxkhejumwddmwyxm.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pY2JxeGtoZWp1bXdkZG13eXhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMzQzOTMsImV4cCI6MjA3MDgxMDM5M30.w1Mc6TrXvkRwjqc6gIGA4baVaMuwVHxR76nH5kt8BJg",BASE_URL:"/pocket-budget/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const uw=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"],jd=uw.filter(e=>!lw[e]);if(jd.length)throw new Error(`Missing Supabase environment variables: ${jd.join(", ")}`);const _e=ow("https://micbqxkhejumwddmwyxm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pY2JxeGtoZWp1bXdkZG13eXhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMzQzOTMsImV4cCI6MjA3MDgxMDM5M30.w1Mc6TrXvkRwjqc6gIGA4baVaMuwVHxR76nH5kt8BJg",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),ms=typeof window<"u"?window.localStorage:null,Dt={id:"demo-admin-user-id",email:"test@me.com",password:"pass123",name:"Demo Admin"},cw=()=>({id:Dt.id,email:Dt.email,full_name:Dt.name,created_at:new Date().toISOString()}),dw={income:[{name:"Salary",icon:"💼"},{name:"Freelance",icon:"💻"},{name:"Investment",icon:"📈"},{name:"Business",icon:"🏢"},{name:"Gift",icon:"🎁"}],expense:[{name:"Groceries",icon:"🛒"},{name:"Rent",icon:"🏠"},{name:"Transportation",icon:"🚗"},{name:"Entertainment",icon:"🎮"},{name:"Bills",icon:"🧾"},{name:"Shopping",icon:"🛍️"}]},io=e=>({income:[...(e==null?void 0:e.income)||[]].map(t=>({...t})),expense:[...(e==null?void 0:e.expense)||[]].map(t=>({...t}))}),re={session:null,profile:cw(),categories:io(dw),budgets:[],goals:[],contributions:[]},Np=e=>{re.session=e,ms&&(e?ms.setItem("demo-admin-session",JSON.stringify(e)):ms.removeItem("demo-admin-session"))},hw=()=>{if(re.session)return re.session;if(!ms)return null;try{const e=ms.getItem("demo-admin-session");if(!e)return null;const t=JSON.parse(e);return t!=null&&t.user?(re.session=t,t):null}catch(e){return console.error("Failed to hydrate demo session",e),null}},fw={id:Dt.id,email:Dt.email,user_metadata:{full_name:Dt.name},created_at:new Date().toISOString()},pw=()=>({user:fw,access_token:"demo-admin-token",refresh_token:"demo-admin-refresh",token_type:"bearer",expires_in:3600}),Sn=e=>e===Dt.id,Nu=e=>({...e,transactions:[...e.transactions||[]],category_budgets:[...e.category_budgets||[]]}),zn=e=>({...e,budgeted_amount:e.budgeted_amount??e.budgetedAmount??null,receipt_url:e.receipt_url??e.receipt??null}),Po=e=>({...e,milestones:e.milestones&&e.milestones.length?e.milestones:[25,50,75,100]}),Eu=e=>({...Po(e),goal_contributions:(re.contributions||[]).filter(t=>t.goal_id===e.id).sort((t,n)=>new Date(n.contributed_at)-new Date(t.contributed_at))}),mw=async(e,t)=>e===Dt.email?Nl(e,t):_e.auth.signUp({email:e,password:t}),Nl=async(e,t)=>{if(e===Dt.email&&t===Dt.password){const n=pw();return Np(n),typeof window<"u"&&window.dispatchEvent(new CustomEvent("demo-auth-change",{detail:{session:n,event:"SIGNED_IN"}})),{data:{user:n.user,session:n},error:null}}return _e.auth.signInWithPassword({email:e,password:t})},gw=async()=>_e.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}}),yw=async()=>(Np(null),typeof window<"u"&&window.dispatchEvent(new CustomEvent("demo-auth-change",{detail:{session:null,event:"SIGNED_OUT"}})),_e.auth.signOut()),vw=async()=>{const e=hw();if(e!=null&&e.user)return{user:e.user,error:null};const{data:{user:t},error:n}=await _e.auth.getUser();return{user:t,error:n}},ww=async(e,t,n)=>Sn(e)?(re.profile={id:e,email:t,full_name:n,created_at:new Date().toISOString()},{data:[re.profile],error:null}):_e.from("user_profiles").insert([{id:e,email:t,full_name:n,created_at:new Date().toISOString()}]).select(),_w=async e=>Sn(e)?{data:re.profile,error:null}:_e.from("user_profiles").select("*").eq("id",e).single(),Cu=()=>re.budgets,Ep=e=>Cu().find(t=>t.id===e),Sw=async e=>{if(Sn(e))return{data:Cu().map(Nu),error:null};const{data:t,error:n}=await _e.from("budgets").select("*, transactions (*)").eq("user_id",e).order("created_at",{ascending:!1});return{data:(t||[]).map(r=>({...r,transactions:(r.transactions||[]).map(zn)})),error:n}},Nd=async(e,t)=>{const n={user_id:e,name:t.name,category_budgets:t.categoryBudgets||[],created_at:new Date().toISOString(),transactions:[]};if(Sn(e)){const i={...n,id:`demo-budget-${Date.now()}`};return re.budgets=[i,...re.budgets],{data:[Nu(i)],error:null}}const{data:r,error:s}=await _e.from("budgets").insert([{user_id:e,name:t.name,category_budgets:t.categoryBudgets||[]}]).select("*, transactions (*)");return{data:(r||[]).map(i=>({...i,transactions:(i.transactions||[]).map(zn)})),error:s}},Ti=async(e,t)=>{if(e.startsWith("demo-budget-")){const o=Ep(e);return o?(Object.assign(o,{name:t.name??o.name,category_budgets:t.categoryBudgets??o.category_budgets}),{data:[Nu(o)],error:null}):{data:null,error:{message:"Budget not found"}}}const n={name:t.name,category_budgets:t.categoryBudgets},r=Object.fromEntries(Object.entries(n).filter(([,o])=>o!==void 0)),{data:s,error:i}=await _e.from("budgets").update(r).eq("id",e).select("*, transactions (*)");return{data:(s||[]).map(o=>({...o,transactions:(o.transactions||[]).map(zn)})),error:i}},xw=async e=>e.startsWith("demo-budget-")?(re.budgets=re.budgets.filter(t=>t.id!==e),re.contributions=re.contributions.filter(t=>t.linked_budget_id!==e),{error:null}):_e.from("budgets").delete().eq("id",e),Cp=async(e,t)=>{const n={budget_id:e,name:t.name,amount:t.amount,budgeted_amount:t.budgetedAmount??null,category:t.category,type:t.type,date:t.date,receipt_url:t.receipt??null,created_at:new Date().toISOString()};if(e.startsWith("demo-budget-")){const i=Ep(e);if(!i)return{data:null,error:{message:"Budget not found"}};const o={...n,id:`demo-tx-${Date.now()}`};return i.transactions=[...i.transactions||[],o],{data:[zn(o)],error:null}}const{data:r,error:s}=await _e.from("transactions").insert([n]).select();return{data:(r||[]).map(zn),error:s}},kw=async(e,t)=>{const n={name:t.name,amount:t.amount,budgeted_amount:t.budgetedAmount??null,category:t.category,type:t.type,date:t.date,receipt_url:t.receipt??null};if(e.startsWith("demo-tx-")){const o=Cu().find(u=>(u.transactions||[]).some(c=>c.id===e));if(!o)return{data:null,error:{message:"Transaction not found"}};o.transactions=(o.transactions||[]).map(u=>u.id===e?{...u,...n}:u);const a=o.transactions.find(u=>u.id===e);return{data:[zn(a)],error:null}}const r=Object.fromEntries(Object.entries(n).filter(([,o])=>o!==void 0)),{data:s,error:i}=await _e.from("transactions").update(r).eq("id",e).select();return{data:(s||[]).map(zn),error:i}},jw=async e=>Sn(e)?{data:{categories:io(re.categories)},error:null}:_e.from("user_categories").select("*").eq("user_id",e).single(),Nw=async(e,t)=>Sn(e)?(re.categories=io(t),{data:[{categories:io(re.categories)}],error:null}):_e.from("user_categories").upsert([{user_id:e,categories:t}]).select(),Ew=async e=>{if(Sn(e))return{data:re.goals.map(r=>Eu(r)),error:null};const{data:t,error:n}=await _e.from("goals").select("*, goal_contributions (*)").eq("user_id",e).order("created_at",{ascending:!1});return{data:(t||[]).map(r=>({...Po(r),goal_contributions:(r.goal_contributions||[]).sort((s,i)=>new Date(i.contributed_at)-new Date(s.contributed_at))})),error:n}},Cw=async(e,t)=>{const n={user_id:e,name:t.name,target_amount:t.targetAmount,target_date:t.targetDate,status:t.status||"active",milestones:t.milestones||[25,50,75,100],linked_budget_id:t.linkedBudgetId||null,created_at:new Date().toISOString()};if(Sn(e)){const i={...n,id:`demo-goal-${Date.now()}`};return re.goals=[i,...re.goals],{data:[Eu(i)],error:null}}const{data:r,error:s}=await _e.from("goals").insert([n]).select("*, goal_contributions (*)");return{data:(r||[]).map(i=>({...Po(i),goal_contributions:(i.goal_contributions||[]).sort((o,a)=>new Date(a.contributed_at)-new Date(o.contributed_at))})),error:s}},bw=async(e,t)=>{const n={name:t.name,target_amount:t.targetAmount,target_date:t.targetDate,status:t.status,milestones:t.milestones,linked_budget_id:t.linkedBudgetId??null};if(e.startsWith("demo-goal-")){const o=re.goals.findIndex(u=>u.id===e);if(o===-1)return{data:null,error:{message:"Goal not found"}};const a=Object.fromEntries(Object.entries(n).filter(([,u])=>u!==void 0));return re.goals[o]={...re.goals[o],...a},{data:[Eu(re.goals[o])],error:null}}const r=Object.fromEntries(Object.entries(n).filter(([,o])=>o!==void 0)),{data:s,error:i}=await _e.from("goals").update(r).eq("id",e).select("*, goal_contributions (*)");return{data:(s||[]).map(o=>({...Po(o),goal_contributions:(o.goal_contributions||[]).sort((a,u)=>new Date(u.contributed_at)-new Date(a.contributed_at))})),error:i}},Tw=async e=>e.startsWith("demo-goal-")?(re.goals=re.goals.filter(t=>t.id!==e),re.contributions=re.contributions.filter(t=>t.goal_id!==e),{error:null}):_e.from("goals").delete().eq("id",e),Pw=async(e,t)=>{const n={goal_id:e,amount:t.amount,contributed_at:t.date||new Date().toISOString(),note:t.note||null,created_at:new Date().toISOString()};if(e.startsWith("demo-goal-")){const i={...n,id:`demo-goal-contribution-${Date.now()}`};return re.contributions=[i,...re.contributions],{data:[i],error:null}}const{data:r,error:s}=await _e.from("goal_contributions").insert([n]).select();return{data:r,error:s}},bp=b.createContext(void 0),Aw=1e4;function qs(){const e=b.useContext(bp);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function Tp({children:e}){const[t,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(!0),[a,u]=b.useState(!0),[c,d]=b.useState("checking-session"),h=b.useRef(!0),g=b.useCallback(p=>{h.current&&p()},[]),v=b.useCallback(p=>{g(()=>s(p))},[g]),k=b.useCallback(async p=>{var m;if(!p){v(null);return}try{d("loading-profile");const{data:y,error:w}=await _w(p.id);if(w&&w.code==="PGRST116"){const _=((m=p.user_metadata)==null?void 0:m.full_name)||p.email,{data:N,error:j}=await ww(p.id,p.email,_);if(j){console.error("Error creating profile",j),v(null);return}v((N==null?void 0:N[0])||null);return}if(w){console.error("Error loading profile",w),v(null);return}v(y)}catch(y){console.error("Unexpected profile error",y),v(null)}finally{g(()=>o(!1)),d("ready")}},[v,g]),x=b.useCallback(async p=>{g(()=>n(p)),p?(g(()=>o(!0)),await k(p)):(v(null),g(()=>o(!1)),d("signed-out"))},[v,k,g]);b.useEffect(()=>{h.current=!0,(async()=>{try{d("checking-session");const w=new Promise((N,j)=>setTimeout(()=>j(new Error("Session lookup timed out")),Aw)),{user:_}=await Promise.race([vw(),w]);if(!h.current)return;await x(_)}catch(w){if(console.warn("Failed to resolve initial session",w),!h.current)return;g(()=>{n(null),s(null),o(!1)}),d("signed-out")}finally{h.current&&u(!1)}})();const{data:m}=_e.auth.onAuthStateChange(async(w,_)=>{h.current&&(d("auth-transition"),await x((_==null?void 0:_.user)??null))}),y=async w=>{if(!h.current)return;const{session:_}=w.detail||{};d("auth-transition"),await x((_==null?void 0:_.user)??null)};return typeof window<"u"&&window.addEventListener("demo-auth-change",y),()=>{h.current=!1,m.subscription.unsubscribe(),typeof window<"u"&&window.removeEventListener("demo-auth-change",y)}},[x,g]);const C=b.useMemo(()=>({user:t,userProfile:r,loading:i,initializing:a,status:c}),[t,r,i,a,c]);return l.jsx(bp.Provider,{value:C,children:e})}Tp.propTypes={children:E.node.isRequired};const Ow=24*60*60*1e3,Rw={weekly:7,biweekly:14,semimonthly:15,"semi-monthly":15,quarterly:91,yearly:365,annual:365},ma={green:{label:"On Track"},yellow:{label:"Watch"},red:{label:"Over"}},Ed=(e="")=>e.toLowerCase().trim(),Dw=(e,t,n)=>Math.min(Math.max(e,t),n),Yr=e=>{if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t},Cd=(e,t)=>{const n=new Date(e);return n.setDate(n.getDate()+t),n},ga=(e,t)=>{const n=new Date(e);return n.setMonth(n.getMonth()+t),n},Iw=e=>(((e==null?void 0:e.cycle)||(e==null?void 0:e.cycleMetadata)||{}).type||(e==null?void 0:e.cycleType)||"monthly").toLowerCase(),$w=(e,t)=>{const n=(e==null?void 0:e.cycle)||(e==null?void 0:e.cycleMetadata)||{};return Yr(n.currentStart)||Yr(n.startDate)||Yr(e==null?void 0:e.cycleStartDate)||Yr(e==null?void 0:e.createdAt)||Yr(e==null?void 0:e.created_at)||new Date(t)},Pp=(e,t)=>{const n=(t==null?void 0:t.cycle)||(t==null?void 0:t.cycleMetadata)||{};return typeof n.lengthDays=="number"?n.lengthDays:typeof n.days=="number"?n.days:e==="custom"&&typeof n.customDays=="number"?n.customDays:e==="per-paycheck"&&typeof n.payFrequencyDays=="number"||e==="per_paycheck"&&typeof n.payFrequencyDays=="number"?n.payFrequencyDays:typeof n.cadenceDays=="number"?n.cadenceDays:typeof n.intervalDays=="number"?n.intervalDays:e==="monthly"?30:e==="biweekly"?14:e==="weekly"?7:e==="per-paycheck"||e==="per_paycheck"?14:e==="custom"?30:Rw[e]||30},bd=(e,t,n)=>{const r=(n==null?void 0:n.cycle)||(n==null?void 0:n.cycleMetadata)||{};switch(t){case"monthly":return ga(e,r.repeatEvery||1);case"quarterly":return ga(e,3);case"yearly":case"annual":return ga(e,12);case"semimonthly":case"semi-monthly":{const s=r.days||r.lengthDays||15;return Cd(e,s)}default:{const s=Pp(t,n);return Cd(e,s)}}},Lw=(e,t)=>{const n=Iw(e);let r=$w(e,t),s=bd(r,n,e),i=0;for(;s&&t>=s&&i<500;)r=s,s=bd(r,n,e),i+=1;const o=s?s.getTime()-r.getTime():Pp(n,e)*Ow,a=t.getTime()-r.getTime(),u=o>0?Dw(a/o,0,1):1;return{cycleType:n,currentStart:r,nextStart:s,totalMs:o,elapsedMs:a,progress:u}},Pi=e=>`$${Number.parseFloat(e||0).toFixed(2)}`,Uw=(e,t,n,r)=>{const s=Math.round(r*100);return`Spent ${Pi(e)} of ${Pi(t)} with ${s}% of the cycle elapsed (expected ${Pi(n)}).`},Td=(e,t,n)=>{const r=Number.isFinite(t)?t:0,s=Number.isFinite(e)?e:0,i=r*n;if(r<=0){if(s<=0){const d="green";return{status:d,...ma[d],tooltip:"No budget set for this period.",actual:s,budgeted:r,expected:i}}const c="red";return{status:c,...ma[c],tooltip:`Spending ${Pi(s)} without a set budget for this cycle.`,actual:s,budgeted:r,expected:i}}const o=s/r,a=.1;let u="green";return o>n+a?u="red":o>n&&(u="yellow"),{status:u,...ma[u],tooltip:Uw(s,r,i,n),actual:s,budgeted:r,expected:i}},Ap=(e,t=new Date)=>{const n=e||{},r=(n.transactions||[]).filter(g=>g.type==="expense"),s=Lw(n,t),i=s.progress??1,a=(n.categoryBudgets||[]).map(g=>{const v=Ed(g.category),k=r.filter(p=>Ed(p.category)===v).reduce((p,m)=>p+(Number.isFinite(m.amount)?m.amount:0),0),x=Number.isFinite(g.budgetedAmount)?g.budgetedAmount:Number.isFinite(g.amount)?g.amount:0,C=Td(k,x,i);return{name:g.category,key:v,actual:k,budgeted:x,...C}}),u=a.reduce((g,v)=>(v.key&&(g[v.key]=v),g),{}),c=a.reduce((g,v)=>g+v.budgeted,0),d=r.reduce((g,v)=>g+(Number.isFinite(v.amount)?v.amount:0),0),h=Td(d,c,i);return{cycle:{type:s.cycleType,start:s.currentStart,end:s.nextStart,progress:i},categories:a,categoriesByName:u,overall:h}},Mw=["trial","paid","pro","premium","plus"],Pd=[{category:"Rent",budgetedAmount:1200},{category:"Groceries",budgetedAmount:450},{category:"Transportation",budgetedAmount:180},{category:"Bills",budgetedAmount:320},{category:"Entertainment",budgetedAmount:150},{category:"Shopping",budgetedAmount:120},{category:"Dining Out",budgetedAmount:160},{category:"Emergency Fund",budgetedAmount:100}],Op=[{type:"monthly",label:"Monthly",description:"Free forever. Resets on the first of each month.",requiresPaid:!1},{type:"per-paycheck",label:"Per-paycheck",description:"Sync budgets to each paycheck during trial or paid tiers.",requiresPaid:!0},{type:"custom",label:"Custom",description:"Choose any cycle length you need (paid).",requiresPaid:!0}],pi=e=>{const t=Op.find(n=>n.type===e);return t?t.label:e?e.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Monthly"},mi=e=>({name:e===0?"My First Budget":"My Budget",cycleType:"monthly",startDate:new Date().toISOString().split("T")[0],payFrequencyDays:14,customDays:30,includeDefaultCategories:!0,adsEnabled:!0}),Ad=e=>`$${Number.parseFloat(e||0).toFixed(2)}`;function bu({budgets:e,setSelectedBudget:t,setViewMode:n,setBudgets:r,userId:s,onMetadataChange:i,onMetadataRemove:o}){const{userProfile:a}=qs(),u=(a==null?void 0:a.plan_tier)||(a==null?void 0:a.planTier)||"free",c=Mw.includes(String(u).toLowerCase()),d=!c,[h,g]=b.useState(null),[v,k]=b.useState(""),[x,C]=b.useState(null),[p,m]=b.useState(!1),[y,w]=b.useState(!1),[_,N]=b.useState(()=>mi(e.length)),j=b.useMemo(()=>e.reduce((T,W)=>{var R;const Y=((R=W==null?void 0:W.cycleMetadata)==null?void 0:R.type)||"monthly";return T[Y]=(T[Y]||0)+1,T},{}),[e]),D=T=>{t(T),n("details")},q=()=>{N(mi(e.length)),w(!1)},V=async()=>{m(!0);try{const T=_.includeDefaultCategories?Pd.map(U=>({...U})):[],W={name:_.name.trim()||"My Budget",categoryBudgets:T},{data:Y,error:R}=await Nd(s,W);if(R)console.error("Error creating budget:",R),alert("Failed to create budget. Please try again.");else if(Y!=null&&Y[0]){const U={id:Y[0].id,name:Y[0].name,createdAt:new Date(Y[0].created_at).toLocaleDateString(),categoryBudgets:Y[0].category_budgets||T,transactions:[]};r(G=>[U,...G]);const F=new Date().toISOString(),H={type:_.cycleType,label:pi(_.cycleType),currentStart:_.startDate?new Date(_.startDate).toISOString():F,payFrequencyDays:_.cycleType==="per-paycheck"?Number(_.payFrequencyDays)||14:void 0,customDays:_.cycleType==="custom"?Number(_.customDays)||30:void 0,lastEditedAt:F};i==null||i(U.id,G=>({...G,cycle:{...G.cycle,...H},ads:{...G.ads,enabled:_.adsEnabled},changeLog:[{at:F,message:`Budget created (${H.label}) with ${T.length||"no"} starter categories`,type:"create"},...G.changeLog||[]]})),t({...U,cycleMetadata:H}),n("details")}}catch(T){console.error("Error creating budget:",T),alert("Failed to create budget. Please try again.")}finally{m(!1),q()}},te=async T=>{if(!v.trim()){g(null);return}m(!0);try{const{error:W}=await Ti(T.id,{name:v.trim(),categoryBudgets:T.categoryBudgets});if(W)console.error("Error updating budget:",W),alert("Failed to update budget name. Please try again.");else{r(R=>R.map(U=>U.id===T.id?{...U,name:v.trim()}:U));const Y=new Date().toISOString();i==null||i(T.id,R=>({...R,changeLog:[{at:Y,message:`Renamed budget to "${v.trim()}"`,type:"rename"},...R.changeLog||[]]}))}}catch(W){console.error("Error updating budget:",W),alert("Failed to update budget name. Please try again.")}finally{g(null),m(!1)}},oe=async T=>{m(!0);try{const W={name:`${T.name} (Copy)`,categoryBudgets:T.categoryBudgets||[]},{data:Y,error:R}=await Nd(s,W);if(R)console.error("Error duplicating budget:",R),alert("Failed to duplicate budget. Please try again.");else if(Y!=null&&Y[0]){const U={id:Y[0].id,name:Y[0].name,createdAt:new Date(Y[0].created_at).toLocaleDateString(),categoryBudgets:Y[0].category_budgets||[],transactions:[]};r(G=>[U,...G]);const F=new Date().toISOString(),H=T.cycleMetadata||{type:"monthly",label:pi("monthly")};i==null||i(U.id,G=>{var Ke,Ae;return{...G,cycle:{...G.cycle,...H,lastEditedAt:F},ads:{...G.ads,enabled:T.adsEnabled!==!1},insights:{...G.insights,...T.insightsPreferences||{},nudges:{...(Ke=G.insights)==null?void 0:Ke.nudges,...((Ae=T.insightsPreferences)==null?void 0:Ae.nudges)||{}}},changeLog:[{at:F,message:`Duplicated from ${T.name}`,type:"duplicate"},...G.changeLog||[]]}})}}catch(W){console.error("Error duplicating budget:",W),alert("Failed to duplicate budget. Please try again.")}finally{C(null),m(!1)}},Ge=async T=>{m(!0);try{const{error:W}=await xw(T);W?(console.error("Error deleting budget:",W),alert("Failed to delete budget. Please try again.")):(r(Y=>Y.filter(R=>R.id!==T)),o==null||o(T))}catch(W){console.error("Error deleting budget:",W),alert("Failed to delete budget. Please try again.")}finally{C(null),m(!1)}},ae=Object.keys(j);return l.jsxs("div",{children:[l.jsxs("div",{className:"header-section",children:[l.jsx("p",{className:"tagline",children:"Manage your budgets and stay on top of your finances."}),l.jsx("div",{className:"header-actions",children:l.jsx("button",{className:"secondary-button",onClick:()=>n("goals"),children:"View savings goals"})})]}),e.length>0&&l.jsxs("div",{className:"cycle-summary-card",children:[l.jsx("div",{className:"cycle-summary-title",children:"Budget cycles"}),l.jsxs("div",{className:"cycle-summary-stats",children:[ae.length===0&&l.jsx("span",{children:"No active budgets yet."}),ae.map(T=>l.jsxs("span",{className:`cycle-chip cycle-${T}`,children:[pi(T)," · ",j[T]]},T))]})]}),e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("p",{children:"Welcome to Pocket Budget! Create your first budget to get started."}),l.jsx("button",{className:"primary-button",onClick:()=>{N(mi(e.length)),w(!0)},disabled:p,children:"Start a Monthly Budget"})]}):e.map(T=>{var xn;const W=Ap(T),Y=W.overall,R=(T.transactions||[]).filter(B=>B.type==="income").reduce((B,P)=>B+P.amount,0),U=(T.transactions||[]).filter(B=>B.type==="expense").reduce((B,P)=>B+P.amount,0),F=R-U,H=(T.categoryBudgets||[]).map(B=>{var z;const P=(T.transactions||[]).filter(J=>J.type==="expense"&&J.category.toLowerCase().trim()===B.category.toLowerCase().trim()).reduce((J,se)=>J+se.amount,0),$=P>B.budgetedAmount,Q=((z=B.category)==null?void 0:z.toLowerCase().trim())||"";return{...B,actual:P,isOver:$,pacing:W.categoriesByName[Q]}}),G=H.some(B=>{var P;return B.isOver||((P=B.pacing)==null?void 0:P.status)==="red"}),Ke=H.reduce((B,P)=>B+(P.budgetedAmount||0),0),Ae=H.reduce((B,P)=>B+(P.actual||0),0),Qe=Ke-Ae,Oe=((xn=T.cycleMetadata)==null?void 0:xn.type)||"monthly",Be=pi(Oe);return l.jsx("div",{className:"budgetCard",children:l.jsxs("div",{className:"budgetCard-content",children:[l.jsxs("div",{className:"budgetCard-info",onClick:()=>D(T),children:[l.jsxs("div",{className:"budgetCycleRow",children:[l.jsxs("span",{className:`cycle-pill cycle-${Oe}`,children:[Be,Oe!=="monthly"&&d&&l.jsx("span",{className:"lock-icon","aria-hidden":"true",children:"🔒"})]}),l.jsxs("div",{className:`pacing-indicator pacing-${Y.status}`,title:Y.tooltip,role:"status",children:[l.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),l.jsx("span",{className:"pacing-label",children:Y.label})]})]}),h===T.id?l.jsx("input",{className:"input budget-name-input",value:v,onChange:B=>k(B.target.value),onBlur:()=>te(T),onKeyPress:B=>{B.key==="Enter"&&te(T)},autoFocus:!0,disabled:p}):l.jsx("div",{className:"budgetNameRow",children:l.jsxs("div",{className:"budgetName",onClick:B=>{B.stopPropagation(),g(T.id),k(T.name)},children:[T.name,G&&l.jsx("span",{className:"expense",style:{marginLeft:"0.5rem"},children:"🚩"})]})}),l.jsxs("div",{className:"budgetBalance",children:["Balance: ",l.jsxs("span",{className:F>=0?"income":"expense",children:["$",F.toFixed(2)]})]}),l.jsxs("div",{className:"budgetSummaryRow",role:"list",children:[l.jsxs("span",{className:"budgetSummaryItem",role:"listitem",children:["Spent ",l.jsx("strong",{children:Ad(Ae)})]}),l.jsxs("span",{className:"budgetSummaryItem",role:"listitem",children:["Remaining ",l.jsx("strong",{children:Ad(Qe)})]}),l.jsxs("span",{className:`budgetSummaryItem guardrail-${Y.status}`,role:"listitem",children:["Guardrail ",l.jsx("strong",{children:Y.label})]})]}),l.jsxs("div",{className:"budgetDate",children:["Created: ",T.createdAt]}),H.length>0&&l.jsxs("div",{className:"category-budgets",children:[H.slice(0,3).map(B=>l.jsxs("div",{className:"category-budget-row",children:[l.jsxs("div",{className:"category-budget-header",children:[l.jsxs("div",{className:"category-budget-name",children:[B.category,B.isOver&&l.jsx("span",{className:"expense",style:{marginLeft:"0.3rem"},children:"⚠"})]}),B.pacing&&l.jsxs("div",{className:`pacing-indicator pacing-${B.pacing.status}`,title:B.pacing.tooltip,role:"status","aria-label":`${B.category} pacing is ${B.pacing.label}`,onClick:P=>P.stopPropagation(),children:[l.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),l.jsx("span",{className:"pacing-label",children:B.pacing.label})]})]}),l.jsxs("div",{className:"category-budget-amounts",children:["$",B.actual.toFixed(2)," / $",B.budgetedAmount.toFixed(2)]}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:`progress-fill ${B.isOver?"over":""}`,style:{width:`${Math.min(B.actual/B.budgetedAmount*100,100)}%`}})})]},B.category)),H.length>3&&l.jsxs("div",{className:"category-budget-more",children:["+",H.length-3," more categories"]})]}),d&&T.adsEnabled&&l.jsxs("div",{className:"budget-ad-unit",role:"note","aria-label":"Sponsored offer",children:[l.jsx("div",{className:"budget-ad-badge",children:"Sponsored"}),l.jsxs("div",{className:"budget-ad-copy",children:[l.jsx("strong",{children:"Boost your savings."})," Earn 3.5% on emergency funds with Pocket Partner Bank."]})]})]}),l.jsxs("div",{className:"menuContainer",children:[l.jsx("button",{className:"menuButton",onClick:B=>{B.stopPropagation(),C(x===T.id?null:T.id)},title:"More options",disabled:p,children:"⋮"}),x===T.id&&l.jsxs("div",{className:"dropdownMenu",children:[l.jsx("button",{className:"dropdownItem",onClick:B=>{B.stopPropagation(),oe(T)},disabled:p,children:"Copy Budget"}),l.jsx("button",{className:"dropdownItem delete",onClick:B=>{B.stopPropagation(),confirm(`Are you sure you want to delete "${T.name}"?`)&&Ge(T.id)},disabled:p,children:"Delete Budget"})]})]})]})},T.id)}),e.length>0&&l.jsxs("div",{className:"budget-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:()=>{N(mi(e.length)),w(!0)},disabled:p,children:"New Budget"}),l.jsx("button",{className:"cancelButton secondary-button cate-btn",onClick:()=>n("categories"),children:"Manage Categories"})]}),y&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent enhanced-modal",children:[l.jsx("h2",{className:"header modal-header",children:"Create a budget"}),l.jsx("label",{className:"input-label",htmlFor:"new-budget-name",children:"Budget name"}),l.jsx("input",{id:"new-budget-name",className:"input",placeholder:"My Budget",value:_.name,onChange:T=>N(W=>({...W,name:T.target.value}))}),l.jsxs("div",{className:"cycle-option-group",children:[l.jsx("span",{className:"input-label",children:"Cycle"}),l.jsx("div",{className:"cycle-option-grid",children:Op.map(T=>{const W=T.requiresPaid&&!c,Y=_.cycleType===T.type;return l.jsxs("button",{type:"button",className:`cycle-option ${Y?"selected":""} ${W?"locked":""}`,onClick:()=>{W||N(R=>({...R,cycleType:T.type}))},disabled:W,children:[l.jsxs("div",{className:"cycle-option-title",children:[T.label,W&&l.jsx("span",{className:"lock-icon","aria-hidden":"true",children:"🔒"})]}),l.jsx("div",{className:"cycle-option-description",children:T.description})]},T.type)})}),!c&&l.jsx("p",{className:"plan-teaser",children:"Upgrade or start a trial to unlock paycheck & custom cycles."})]}),_.cycleType==="per-paycheck"&&l.jsxs("div",{className:"cycle-config-row",children:[l.jsx("label",{className:"input-label",htmlFor:"cycle-pay-frequency",children:"Paycheck frequency (days)"}),l.jsx("input",{id:"cycle-pay-frequency",type:"number",className:"input",min:"7",max:"45",value:_.payFrequencyDays,onChange:T=>N(W=>({...W,payFrequencyDays:T.target.value}))})]}),_.cycleType==="custom"&&l.jsxs("div",{className:"cycle-config-row",children:[l.jsx("label",{className:"input-label",htmlFor:"cycle-custom-length",children:"Cycle length (days)"}),l.jsx("input",{id:"cycle-custom-length",type:"number",className:"input",min:"5",max:"120",value:_.customDays,onChange:T=>N(W=>({...W,customDays:T.target.value}))})]}),l.jsxs("div",{className:"cycle-config-row",children:[l.jsx("label",{className:"input-label",htmlFor:"cycle-start-date",children:"Cycle start date"}),l.jsx("input",{id:"cycle-start-date",type:"date",className:"input",value:_.startDate,onChange:T=>N(W=>({...W,startDate:T.target.value}))})]}),l.jsxs("label",{className:"checkbox-row",children:[l.jsx("input",{type:"checkbox",checked:_.includeDefaultCategories,onChange:T=>N(W=>({...W,includeDefaultCategories:T.target.checked}))}),l.jsxs("span",{children:["Include starter categories (",Pd.length,")"]})]}),d&&l.jsxs("label",{className:"checkbox-row",children:[l.jsx("input",{type:"checkbox",checked:_.adsEnabled,onChange:T=>N(W=>({...W,adsEnabled:T.target.checked}))}),l.jsx("span",{children:"Show relevant offers in my summary (helps keep Free free)"})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:V,disabled:p||!c&&_.cycleType!=="monthly",children:p?"Creating...":"Create budget"}),l.jsx("button",{className:"cancelButton secondary-button",onClick:q,disabled:p,children:"Cancel"})]})]})})]})}const Bw=E.shape({id:E.string.isRequired,name:E.string.isRequired,amount:E.number.isRequired,budgetedAmount:E.number,category:E.string.isRequired,type:E.oneOf(["income","expense"]).isRequired,date:E.string.isRequired,receipt:E.string}),Fw=E.shape({category:E.string.isRequired,budgetedAmount:E.number.isRequired});bu.propTypes={budgets:E.arrayOf(E.shape({id:E.string.isRequired,name:E.string.isRequired,createdAt:E.string.isRequired,transactions:E.arrayOf(Bw),categoryBudgets:E.arrayOf(Fw),cycleMetadata:E.object,adsEnabled:E.bool})).isRequired,setSelectedBudget:E.func.isRequired,setViewMode:E.func.isRequired,setBudgets:E.func.isRequired,userId:E.string.isRequired,onMetadataChange:E.func,onMetadataRemove:E.func};bu.defaultProps={onMetadataChange:void 0,onMetadataRemove:void 0};const zw=["trial","paid","pro","premium","plus"],Rp=[{type:"monthly",label:"Monthly",requiresPaid:!1},{type:"per-paycheck",label:"Per-paycheck",requiresPaid:!0},{type:"custom",label:"Custom",requiresPaid:!0}],ya=e=>{const t=Rp.find(n=>n.type===e);return t?t.label:e?e.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Monthly"},va=["▁","▂","▃","▄","▅","▆","▇","█"],qw=e=>{if(!(e!=null&&e.length))return"▁▁▁▁▁▁";const t=Math.max(...e);return t<=0?"▁".repeat(e.length):e.map(n=>{const r=Math.max(0,n)/t,s=Math.min(va.length-1,Math.round(r*(va.length-1)));return va[s]}).join("")},wa=e=>`$${Number.parseFloat(e||0).toFixed(2)}`;function Tu({budget:e,categories:t,setViewMode:n,setBudgets:r,budgets:s,setSelectedBudget:i,onMetadataChange:o}){var Vu,Gu,Ku;const{userProfile:a}=qs(),u=(a==null?void 0:a.plan_tier)||(a==null?void 0:a.planTier)||"free",c=zw.includes(String(u).toLowerCase()),d=e.metadata||{},h=e.insightsPreferences||d.insights||{},g=e.changeLog||d.changeLog||[],[v,k]=b.useState("expenses"),[x,C]=b.useState(!1),[p,m]=b.useState(null),[y,w]=b.useState(1),[_,N]=b.useState(!1),[j,D]=b.useState({name:"",amount:"",budgetedAmount:"",category:"",date:new Date().toLocaleDateString(),type:"expense",receipt:null}),[q,V]=b.useState(null),[te,oe]=b.useState(()=>(e.categoryBudgets||[]).map(f=>({...f}))),[Ge,ae]=b.useState(!1),[T,W]=b.useState(null),[Y,R]=b.useState(!1),[U,F]=b.useState(!1),[H,G]=b.useState(null),[Ke,Ae]=b.useState(null),[Qe,Oe]=b.useState(null),[Be,xn]=b.useState(()=>new Set(h.trackedCategories||[])),[B,P]=b.useState(()=>{var f,S;return{day:((f=h.reportSchedule)==null?void 0:f.day)||"sunday",time:((S=h.reportSchedule)==null?void 0:S.time)||"08:00"}}),[$,Q]=b.useState(()=>{var f,S,O,I;return{enabled:!!((f=h.nudges)!=null&&f.enabled),threshold:((S=h.nudges)==null?void 0:S.threshold)||.8,quietStart:((O=h.quietHours)==null?void 0:O.start)??21,quietEnd:((I=h.quietHours)==null?void 0:I.end)??7}}),[z,J]=b.useState(()=>{var f,S,O,I,M,ee;return{type:((f=e.cycleMetadata)==null?void 0:f.type)||"monthly",startDate:(S=e.cycleMetadata)!=null&&S.currentStart?new Date(e.cycleMetadata.currentStart).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],payFrequencyDays:((O=e.cycleMetadata)==null?void 0:O.payFrequencyDays)||14,customDays:((I=e.cycleMetadata)==null?void 0:I.customDays)||((M=e.cycleMetadata)==null?void 0:M.lengthDays)||((ee=e.cycleMetadata)==null?void 0:ee.cycleLength)||30}}),[se,Ce]=b.useState(!1),[Fe,Kt]=b.useState(!1),[Vn,vt]=b.useState(""),[Ou,Ao]=b.useState("");b.useEffect(()=>{oe((e.categoryBudgets||[]).map(f=>({...f}))),ae(!1)},[e.id,e.categoryBudgets]),b.useEffect(()=>{var f,S,O,I,M,ee,xe,fe,be,Je,ve,rt;xn(new Set(h.trackedCategories||[])),P({day:((f=h.reportSchedule)==null?void 0:f.day)||"sunday",time:((S=h.reportSchedule)==null?void 0:S.time)||"08:00"}),Q({enabled:!!((O=h.nudges)!=null&&O.enabled),threshold:((I=h.nudges)==null?void 0:I.threshold)||.8,quietStart:((M=h.quietHours)==null?void 0:M.start)??21,quietEnd:((ee=h.quietHours)==null?void 0:ee.end)??7}),J({type:((xe=e.cycleMetadata)==null?void 0:xe.type)||"monthly",startDate:(fe=e.cycleMetadata)!=null&&fe.currentStart?new Date(e.cycleMetadata.currentStart).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],payFrequencyDays:((be=e.cycleMetadata)==null?void 0:be.payFrequencyDays)||14,customDays:((Je=e.cycleMetadata)==null?void 0:Je.customDays)||((ve=e.cycleMetadata)==null?void 0:ve.lengthDays)||((rt=e.cycleMetadata)==null?void 0:rt.cycleLength)||30}),Ce(!1)},[e.id,e.cycleMetadata,h]);const Oo=7,kn=f=>{o&&o(e.id,f)},qp=(f,S)=>{const O=Number.parseFloat(S);oe(I=>I.map(M=>M.category===f?{...M,budgetedAmount:Number.isFinite(O)?O:0}:M)),ae(!0)},Wp=()=>{const f=Vn.trim();f&&(oe(S=>{if(S.some(M=>M.category.toLowerCase()===f.toLowerCase()))return S;const O=Number.parseFloat(Ou),I={category:f,budgetedAmount:Number.isFinite(O)?O:0};return ae(!0),[...S,I]}),vt(""),Ao(""),Kt(!1))},Hp=()=>{Kt(!1),vt(""),Ao("")},Vp=f=>{const S=(e.transactions||[]).filter(I=>I.type==="expense"&&I.category===f.category).reduce((I,M)=>I+M.amount,0),O=Math.max(0,Number(f.budgetedAmount||0)-S);G({...f,remaining:O,actual:S,reallocateTo:""})},Gp=()=>{if(!H)return;const{category:f,remaining:S,reallocateTo:O}=H;if(S>0&&!O){alert("Please choose a category to reallocate the remaining budget.");return}oe(I=>{const M=I.filter(ee=>ee.category!==f);return S>0&&O?M.map(ee=>ee.category===O?{...ee,budgetedAmount:Number(ee.budgetedAmount||0)+S}:ee):M}),ae(!0),G(null)},Kp=()=>{G(null)},Ru=f=>{r(S=>S.map(O=>O.id===e.id?f:O)),i(f)},Qp=async f=>{if(f)try{N(!0);const{error:S}=await Ti(e.id,{name:e.name,categoryBudgets:f});if(S){console.error("Error undoing allocations:",S),alert("Failed to undo allocation change. Please try again.");return}const O={...e,categoryBudgets:f};Ru(O),oe(f.map(I=>({...I}))),ae(!1),kn(I=>({...I,changeLog:[{at:new Date().toISOString(),message:"Reverted allocation change",type:"undo"},...I.changeLog||[]]}))}finally{N(!1),W(null)}},Jp=async()=>{const f=te.map(S=>({category:S.category,budgetedAmount:Number.isFinite(Number(S.budgetedAmount))?Number(S.budgetedAmount):0}));N(!0);try{const{error:S}=await Ti(e.id,{name:e.name,categoryBudgets:f});if(S){console.error("Error saving allocations:",S),alert("Failed to save category allocations.");return}const O=e.categoryBudgets||[],I={...e,categoryBudgets:f};Ru(I),ae(!1);const M=new Date().toISOString();kn(ee=>({...ee,changeLog:[{at:M,message:"Updated category allocations",type:"allocation"},...ee.changeLog||[]]})),W({message:"Allocations updated",actionLabel:"Undo",action:()=>Qp(O)})}finally{N(!1)}},Du=()=>W(null),Yp=()=>{const f=new Date().toISOString();kn(S=>{var O;return{...S,cycle:{...S.cycle,type:z.type,label:ya(z.type),currentStart:z.startDate?new Date(z.startDate).toISOString():(O=S.cycle)==null?void 0:O.currentStart,payFrequencyDays:z.type==="per-paycheck"?Number(z.payFrequencyDays)||14:void 0,customDays:z.type==="custom"?Number(z.customDays)||30:void 0,lastEditedAt:f},changeLog:[{at:f,message:`Updated cycle to ${ya(z.type)}`,type:"cycle"},...S.changeLog||[]]}}),F(!1)},Xp=f=>{xn(S=>{const O=new Set(S);return O.has(f)?O.delete(f):O.add(f),Ce(!0),O})},Iu=(f,S)=>{P(O=>({...O,[f]:S})),Ce(!0)},Ws=f=>{Q(S=>({...S,...f})),Ce(!0)};b.useEffect(()=>{if(!se)return;const f=Array.from(Be);kn(S=>{var O,I,M;return{...S,insights:{...S.insights||{},trackedCategories:f,reportSchedule:{...(O=S.insights)==null?void 0:O.reportSchedule,...B},quietHours:{...((I=S.insights)==null?void 0:I.quietHours)||{},start:Number($.quietStart)??21,end:Number($.quietEnd)??7},nudges:{...((M=S.insights)==null?void 0:M.nudges)||{},enabled:!!$.enabled,threshold:Number($.threshold)||.8}}}}),Ce(!1)},[se,Be,B,$,kn]);const $u=b.useMemo(()=>{if(Be.size)return Array.from(Be);const f={};(e.transactions||[]).filter(I=>I.type==="expense").forEach(I=>{f[I.category]=(f[I.category]||0)+I.amount});const S=Object.entries(f).sort((I,M)=>M[1]-I[1]).map(([I])=>I),O=(e.categoryBudgets||[]).map(I=>I.category);return Array.from(new Set([...S,...O])).slice(0,6)},[Be,e.transactions,e.categoryBudgets]),Lu=b.useMemo(()=>{const f=new Set((e.categoryBudgets||[]).map(S=>S.category));return(t.expense||[]).forEach(S=>f.add(S.name)),Array.from(f).sort((S,O)=>S.localeCompare(O))},[e.categoryBudgets,t.expense]),Uu={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},Zp=f=>{const[S="08",O="00"]=(f||"08:00").split(":"),I=Number.parseInt(S,10),M=Number.parseInt(O,10);return{hours:Number.isFinite(I)?I:8,minutes:Number.isFinite(M)?M:0}},em=f=>{const S=new Date(f),O=String(B.day||"sunday").toLowerCase(),I=Uu[O]??0,M=(S.getDay()-I+7)%7;S.setDate(S.getDate()-M);const{hours:ee,minutes:xe}=Zp(B.time);return S.setHours(ee,xe,0,0),S},Ir=b.useMemo(()=>{const S=em(new Date),O=new Date(S);O.setDate(O.getDate()+7);const I=new Date(S);I.setDate(I.getDate()-7);const M=new Date(S),ee=(fe,be,Je)=>(e.transactions||[]).filter(ve=>ve.type==="expense"&&ve.category===fe).filter(ve=>{const rt=new Date(ve.date);return rt>=be&&rt<Je}).reduce((ve,rt)=>ve+rt.amount,0),xe=$u.map(fe=>{var Ju;const be=ee(fe,S,O),Je=ee(fe,I,M),ve=be-Je,rt=Je>0?ve/Je*100:be>0?100:0,Fr=fe.toLowerCase().trim(),ct=(Ju=It.categoriesByName)==null?void 0:Ju[Fr],Qu=[];for(let Do=5;Do>=0;Do-=1){const Vs=new Date(O);Vs.setDate(Vs.getDate()-7*Do);const Io=new Date(Vs);Io.setDate(Io.getDate()-7),Qu.push(ee(fe,Io,Vs))}return{category:fe,current:be,previous:Je,delta:ve,pctChange:rt,status:(ct==null?void 0:ct.status)||"green",statusLabel:(ct==null?void 0:ct.label)||"On Track",trend:Qu}}).sort((fe,be)=>be.current-fe.current);return{cards:xe,topCards:xe.slice(0,3),trends:xe.reduce((fe,be)=>({...fe,[be.category]:be.trend}),{}),currentStart:S,currentEnd:O}},[e.transactions,$u,B,It]),$r=Number($.quietStart)??21,Lr=Number($.quietEnd)??7,tm=f=>{const S=f.getHours();return $r===Lr?!1:$r<Lr?S>=$r&&S<Lr:S>=$r||S<Lr};b.useEffect(()=>{var ee,xe,fe,be,Je;if(!c||!$.enabled||tm(new Date))return;const f=(xe=(ee=d.insights)==null?void 0:ee.nudges)==null?void 0:xe.snoozedUntil;if(f&&new Date(f)>new Date)return;const S=Number($.threshold)||.8,O=(fe=e.cycleMetadata)!=null&&fe.currentStart?new Date(e.cycleMetadata.currentStart).toISOString():e.id,I=((Je=(be=d.insights)==null?void 0:be.nudges)==null?void 0:Je.acknowledged)||{},M=(It.categories||[]).find(ve=>{if(!ve||!Number.isFinite(ve.budgeted)||ve.budgeted<=0)return!1;const rt=ve.actual/ve.budgeted,Fr=`${O}:${ve.name}`.toLowerCase();return rt>=S&&!I[Fr]});M&&!Qe&&Oe({category:M.name,ratio:M.actual/(M.budgeted||1),actual:M.actual,budgeted:M.budgeted})},[c,$,d.insights,e.cycleMetadata,It.categories,Qe]);const nm=f=>{var I;const O=`${(I=e.cycleMetadata)!=null&&I.currentStart?new Date(e.cycleMetadata.currentStart).toISOString():e.id}:${f}`.toLowerCase();kn(M=>{var ee,xe,fe;return{...M,insights:{...M.insights||{},nudges:{...((ee=M.insights)==null?void 0:ee.nudges)||{},acknowledged:{...((fe=(xe=M.insights)==null?void 0:xe.nudges)==null?void 0:fe.acknowledged)||{},[O]:new Date().toISOString()}}}}}),Oe(null)},rm=(f=6)=>{const S=new Date;S.setHours(S.getHours()+f),kn(O=>{var I;return{...O,insights:{...O.insights||{},nudges:{...((I=O.insights)==null?void 0:I.nudges)||{},snoozedUntil:S.toISOString()}}}}),Oe(null)},Gn=f=>f==="income"||f==="expense"?f:f==="expenses"?"expense":"income",Mu=f=>{const S=Gn(f||v);D({name:"",amount:"",budgetedAmount:"",category:"",date:new Date().toLocaleDateString(),type:S,receipt:null}),m(null),C(!0)},sm=f=>{D({...f,budgetedAmount:f.budgetedAmount||""}),m(f),C(!0)},im=async()=>{if(!j.name.trim()||isNaN(j.amount)||!j.category.trim()){alert("Please fill in all required fields correctly");return}N(!0);try{const f={name:j.name.trim(),amount:Number.parseFloat(j.amount),budgetedAmount:j.budgetedAmount?Number.parseFloat(j.budgetedAmount):null,category:j.category,type:Gn(j.type),date:j.date,receipt:j.receipt};let S;if(p){const{error:M}=await kw(p.id,f);if(M){console.error("Error updating transaction:",M),alert("Failed to update transaction. Please try again.");return}S=(e.transactions||[]).map(ee=>ee.id===p.id?{...f,id:p.id}:ee)}else{const{data:M,error:ee}=await Cp(e.id,f);if(ee){console.error("Error creating transaction:",ee),alert("Failed to create transaction. Please try again.");return}const xe={...f,id:M[0].id};S=[...e.transactions||[],xe]}const O={...e,transactions:S},I=s.map(M=>M.id===e.id?O:M);r(I),i(I.find(M=>M.id===e.id)),C(!1),m(null)}catch(f){console.error("Error saving transaction:",f),alert("Failed to save transaction. Please try again.")}finally{N(!1)}},om=async f=>{try{const{error:S}=await Ti(e.id,{name:f,categoryBudgets:e.categoryBudgets});if(S)console.error("Error updating budget name:",S);else{const O=s.map(I=>I.id===e.id?{...I,name:f}:I);r(O),i(O.find(I=>I.id===e.id))}}catch(S){console.error("Error updating budget name:",S)}},Ur=(e.transactions||[]).filter(f=>f.type==="income").reduce((f,S)=>f+S.amount,0),jn=(e.transactions||[]).filter(f=>f.type==="expense").reduce((f,S)=>f+S.amount,0),Bu=(e.transactions||[]).filter(f=>f.type==="expense"&&f.budgetedAmount).reduce((f,S)=>f+S.budgetedAmount,0),Fu=Ur-jn,It=Ap(e),zu=((Vu=e.cycleMetadata)==null?void 0:Vu.type)||"monthly",am=ya(zu),qu=(Gu=e.cycleMetadata)!=null&&Gu.currentStart?new Date(e.cycleMetadata.currentStart):null,lm=qu?qu.toLocaleDateString():e.createdAt,um=te.reduce((f,S)=>f+(Number(S.budgetedAmount)||0),0),cm=(e.transactions||[]).filter(f=>f.type==="expense").reduce((f,S)=>(f[S.category]=(f[S.category]||0)+S.amount,f),{}),Nn=Object.entries(cm).map(([f,S])=>{var O;return{category:f,amount:S,percentage:jn>0?S/jn*100:0,icon:((O=t.expense.find(I=>I.name===f))==null?void 0:O.icon)||"💰"}}).sort((f,S)=>S.amount-f.amount).slice(0,5),Hs=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#ec4899"],Mr=(e.transactions||[]).filter(f=>f.type===Gn(v)).sort((f,S)=>new Date(S.date)-new Date(f.date)),Qt=Math.ceil(Mr.length/Oo),Ro=(y-1)*Oo,Wu=Ro+Oo,dm=Mr.slice(Ro,Wu),Hu=f=>{k(f),w(1)},Br=f=>{w(f)},hm=()=>{if(Qt<=1)return null;const f=[],S=5;let O=Math.max(1,y-Math.floor(S/2));const I=Math.min(Qt,O+S-1);I-O+1<S&&(O=Math.max(1,I-S+1)),y>1&&f.push(l.jsx("button",{className:"pagination-button",onClick:()=>Br(y-1),children:"←"},"prev")),O>1&&(f.push(l.jsx("button",{className:"pagination-button",onClick:()=>Br(1),children:"1"},1)),O>2&&f.push(l.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis1")));for(let M=O;M<=I;M++)f.push(l.jsx("button",{className:`pagination-button ${y===M?"active":""}`,onClick:()=>Br(M),children:M},M));return I<Qt&&(I<Qt-1&&f.push(l.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis2")),f.push(l.jsx("button",{className:"pagination-button",onClick:()=>Br(Qt),children:Qt},Qt))),y<Qt&&f.push(l.jsx("button",{className:"pagination-button",onClick:()=>Br(y+1),children:"→"},"next")),l.jsxs("div",{className:"pagination-container",children:[l.jsxs("div",{className:"pagination-info",children:["Showing ",Ro+1,"-",Math.min(Wu,Mr.length)," of ",Mr.length," transactions"]}),l.jsx("div",{className:"pagination-controls",children:f})]})};return l.jsxs("div",{children:[l.jsxs("div",{className:"header-nav",children:[l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>n("budgets"),children:"← Back"}),l.jsx("button",{className:"ai-insights-button primary-button",onClick:()=>n("ai"),children:"🧠 AI Finance Report"})]}),l.jsx("input",{className:"input budget-title-input no-border",value:e.name,onChange:f=>om(f.target.value),placeholder:"Budget Name"}),l.jsxs("div",{className:"budget-cycle-banner",children:[l.jsx("div",{className:`cycle-pill cycle-${zu}`,children:am}),l.jsxs("div",{className:"cycle-meta",children:[l.jsxs("span",{children:["Started ",lm]}),l.jsxs("div",{className:`pacing-indicator pacing-${It.overall.status}`,title:It.overall.tooltip,role:"status",children:[l.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),l.jsx("span",{className:"pacing-label",children:It.overall.label})]})]}),l.jsxs("div",{className:"cycle-actions",children:[l.jsx("button",{className:"secondary-button",onClick:()=>F(!0),children:"Edit cycle"}),l.jsx("button",{className:"link-button",onClick:()=>R(!0),children:"Change log"})]})]}),l.jsxs("div",{className:"category-allocation-card",id:"allocations",children:[l.jsxs("div",{className:"allocation-header",children:[l.jsx("h3",{children:"Category allocations"}),l.jsxs("div",{className:"allocation-header-actions",children:[l.jsxs("span",{className:"allocation-total",children:["Total ",wa(um)]}),l.jsx("button",{className:"secondary-button",onClick:()=>Kt(!0),children:"Add category"})]})]}),te.length===0?l.jsx("div",{className:"empty-state small",children:"No allocations yet. Add your first category to plan this cycle."}):l.jsx("div",{className:"allocation-table",children:te.map(f=>l.jsxs("div",{className:"allocation-row",children:[l.jsx("div",{className:"allocation-name",children:f.category}),l.jsx("input",{type:"number",className:"input allocation-input",value:f.budgetedAmount,onChange:S=>qp(f.category,S.target.value),min:"0",step:"0.01"}),l.jsx("button",{className:"allocation-delete",type:"button",onClick:S=>{S.stopPropagation(),Vp(f)},children:"Remove"})]},f.category))}),l.jsx("div",{className:"allocation-footer",children:l.jsx("button",{className:"primary-button",onClick:Jp,disabled:!Ge||_,children:_?"Saving...":"Save allocations"})})]}),Fe&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent small-modal",children:[l.jsx("h3",{className:"header modal-header",children:"Add category"}),l.jsx("label",{className:"input-label",htmlFor:"new-category-name",children:"Name"}),l.jsx("input",{id:"new-category-name",className:"input",value:Vn,onChange:f=>vt(f.target.value),placeholder:"Category name"}),l.jsx("label",{className:"input-label",htmlFor:"new-category-amount",children:"Allocation amount"}),l.jsx("input",{id:"new-category-amount",className:"input",type:"number",step:"0.01",min:"0",value:Ou,onChange:f=>Ao(f.target.value)}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:Wp,children:"Add"}),l.jsx("button",{className:"cancelButton secondary-button",onClick:Hp,children:"Cancel"})]})]})}),l.jsxs("div",{className:"budget-overview-card",children:[l.jsx("h3",{className:"overview-title",children:"Budget Overview"}),l.jsxs("div",{className:"overview-content",children:[l.jsxs("div",{className:"overview-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("div",{className:"stat-label",children:"Total Income"}),l.jsxs("div",{className:"stat-value income",children:["$",Ur.toFixed(2)]})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("div",{className:"stat-label",children:"Total Spent"}),l.jsxs("div",{className:"stat-value expense",children:["$",jn.toFixed(2)]})]}),Bu>0&&l.jsxs("div",{className:"stat-item stat-item-full-width",children:[l.jsx("div",{className:"stat-label",children:"Total Budgeted"}),l.jsxs("div",{className:"stat-value",children:["$",Bu.toFixed(2)]})]})]}),l.jsxs("div",{className:"balance-display",children:[l.jsx("div",{className:"balance-label",children:"Remaining Balance"}),l.jsxs("div",{className:`balance-amount ${Fu>=0?"income":"expense"}`,children:["$",Fu.toFixed(2)]})]}),Nn.length>0&&l.jsxs("div",{className:"category-chart-section",children:[l.jsx("h4",{className:"chart-section-title",children:"Spending Breakdown"}),l.jsxs("div",{className:"chart-container-centered",children:[l.jsx("div",{className:"pie-chart-wrapper",children:l.jsxs("svg",{className:"pie-chart",viewBox:"0 0 200 200",width:"200",height:"200",onClick:f=>{(f.target.tagName==="svg"||f.target.tagName==="circle"||f.target.tagName==="text")&&V(null)},children:[Nn.map((f,S)=>{let O=0;for(let ct=0;ct<S;ct++)O+=Nn[ct].percentage;const I=O/100*360,M=(O+f.percentage)/100*360,ee=f.percentage>50?1:0,xe=I*Math.PI/180,fe=M*Math.PI/180,be=100+80*Math.cos(xe),Je=100+80*Math.sin(xe),ve=100+80*Math.cos(fe),rt=100+80*Math.sin(fe),Fr=["M 100 100",`L ${be} ${Je}`,`A 80 80 0 ${ee} 1 ${ve} ${rt}`,"Z"].join(" ");return l.jsx("path",{d:Fr,fill:Hs[S%Hs.length],stroke:"white",strokeWidth:"2",className:`pie-slice ${q===S?"selected":""}`,onClick:ct=>{ct.stopPropagation(),V(q===S?null:S)}},f.category)}),l.jsx("circle",{cx:"100",cy:"100",r:"35",fill:"white"}),l.jsx("text",{x:"100",y:"95",textAnchor:"middle",className:"chart-center-text",fontSize:"12",fill:"#6b7280",children:"Total"}),l.jsxs("text",{x:"100",y:"110",textAnchor:"middle",className:"chart-center-amount",fontSize:"14",fontWeight:"600",fill:"#374151",children:["$",jn.toFixed(0)]})]})}),q!==null&&l.jsx("div",{className:"slice-details",children:l.jsxs("div",{className:"slice-details-content",children:[l.jsxs("div",{className:"slice-header",children:[l.jsx("div",{className:"slice-color-dot",style:{backgroundColor:Hs[q%Hs.length]}}),l.jsx("span",{className:"slice-icon",children:Nn[q].icon}),l.jsx("span",{className:"slice-category",children:Nn[q].category})]}),l.jsxs("div",{className:"slice-amount",children:["$",Nn[q].amount.toFixed(2)]}),l.jsxs("div",{className:"slice-percentage",children:[Nn[q].percentage.toFixed(1),"% of total spending"]})]})})]})]})]}),l.jsxs("div",{className:"budget-progress",children:[l.jsxs("div",{className:"progress-labels",children:[l.jsxs("span",{className:"income",children:["Income: $",Ur.toFixed(2)]}),l.jsxs("span",{className:"expense",children:["Spent: $",jn.toFixed(2)]})]}),l.jsx("div",{className:"progress-bar-container",children:l.jsx("div",{className:"income-bar",children:Ur>0&&l.jsx("div",{className:"expense-overlay",style:{width:`${Math.min(jn/Ur*100,100)}%`}})})})]})]}),It.categories.length>0&&l.jsxs("div",{className:"category-budget-list-card",children:[l.jsx("h3",{className:"category-budget-list-title",children:"Category Pacing"}),l.jsx("div",{className:"category-budget-list",children:It.categories.map(f=>{const S=f.budgeted>0?Math.min(f.actual/f.budgeted*100,100):f.actual>0?100:0;return l.jsxs("div",{className:"category-budget-list-row",children:[l.jsxs("div",{className:"category-budget-header",children:[l.jsx("div",{className:"category-budget-name",children:f.name||"Uncategorized"}),l.jsxs("div",{className:`pacing-indicator pacing-${f.status}`,title:f.tooltip,role:"status","aria-label":`${f.name||"Uncategorized"} pacing is ${f.label}`,children:[l.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),l.jsx("span",{className:"pacing-label",children:f.label})]})]}),l.jsxs("div",{className:"category-budget-amounts",children:["$",f.actual.toFixed(2)," / $",f.budgeted.toFixed(2)]}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:`progress-fill ${f.actual>f.budgeted&&f.budgeted>0?"over":""}`,style:{width:`${S}%`}})})]},f.key||f.name)})})]}),l.jsxs("div",{className:"cashburn-section",children:[l.jsxs("div",{className:"cashburn-header",children:[l.jsx("h3",{children:"Cash burn insights"}),l.jsxs("span",{className:"cashburn-subtitle",children:["Weekly digest · next drop ",Ir.currentEnd?new Date(Ir.currentEnd).toLocaleString([],{dateStyle:"medium",timeStyle:"short"}):"soon"]})]}),l.jsxs("div",{className:"cashburn-card-grid",children:[Ir.topCards.length===0&&l.jsx("div",{className:"empty-state small",children:"Track spending this week to unlock leak insights."}),Ir.topCards.map(f=>l.jsxs("button",{type:"button",className:`cashburn-card pacing-${f.status}`,onClick:()=>Ae(S=>S===f.category?null:f.category),children:[l.jsxs("div",{className:"cashburn-card-header",children:[l.jsx("span",{className:"cashburn-category",children:f.category}),l.jsxs("div",{className:`pacing-indicator pacing-${f.status}`,children:[l.jsx("span",{className:"pacing-dot","aria-hidden":"true"}),l.jsx("span",{className:"pacing-label",children:f.statusLabel})]})]}),l.jsxs("div",{className:"cashburn-amount-row",children:[l.jsx("span",{className:"cashburn-amount",children:wa(f.current)}),l.jsxs("span",{className:`cashburn-delta ${f.delta>=0?"expense":"income"}`,children:[f.delta>=0?"+":"-","$",Math.abs(f.delta).toFixed(2)," vs last week"]})]}),l.jsxs("div",{className:"cashburn-change",children:["Change ",f.pctChange.toFixed(0),"%"]}),Ke===f.category&&l.jsxs("div",{className:"cashburn-trend",children:[l.jsx("div",{className:"sparkline",children:qw(Ir.trends[f.category])}),l.jsx("div",{className:"sparkline-label",children:"Last 6 weeks"})]})]},f.category)),isFreePlan&&e.adsEnabled&&l.jsxs("div",{className:"budget-ad-unit",role:"note","aria-label":"Sponsored offer",children:[l.jsx("div",{className:"budget-ad-badge",children:"Sponsored"}),l.jsx("div",{className:"budget-ad-copy",children:"Lower recurring bills with Pocket Partner Energy — average savings $18/mo."})]})]}),l.jsxs("div",{className:"cashburn-settings",children:[l.jsxs("div",{className:"settings-row",children:[l.jsx("label",{children:"Report schedule"}),l.jsxs("div",{className:"settings-inputs",children:[l.jsx("select",{value:B.day,onChange:f=>Iu("day",f.target.value),children:Object.keys(Uu).map(f=>l.jsx("option",{value:f,children:f.charAt(0).toUpperCase()+f.slice(1)},f))}),l.jsx("input",{type:"time",value:B.time,onChange:f=>Iu("time",f.target.value)})]})]}),l.jsxs("div",{className:"settings-row",children:[l.jsx("label",{children:"Tracked categories"}),l.jsxs("div",{className:"tracked-category-grid",children:[Lu.map(f=>{const S=Be.has(f);return l.jsxs("label",{className:`tracked-chip ${S?"selected":""}`,children:[l.jsx("input",{type:"checkbox",checked:S,onChange:()=>Xp(f)}),l.jsx("span",{children:f})]},f)}),Lu.length===0&&l.jsx("span",{children:"No categories yet."})]})]}),l.jsxs("div",{className:"settings-row",children:[l.jsx("label",{children:"Real-time nudges"}),c?l.jsxs("div",{className:"nudge-config",children:[l.jsxs("label",{className:"checkbox-row",children:[l.jsx("input",{type:"checkbox",checked:$.enabled,onChange:f=>Ws({enabled:f.target.checked})}),l.jsxs("span",{children:["Notify me when a category hits ",Math.round((Number($.threshold)||.8)*100),"% of budget"]})]}),l.jsxs("div",{className:"nudge-threshold",children:[l.jsx("input",{type:"range",min:"0.5",max:"1",step:"0.05",value:Number($.threshold)||.8,onChange:f=>Ws({threshold:Number(f.target.value)})}),l.jsxs("span",{children:[Math.round((Number($.threshold)||.8)*100),"%"]})]}),l.jsxs("div",{className:"quiet-hours-controls",children:[l.jsx("span",{children:"Quiet hours"}),l.jsxs("div",{className:"settings-inputs",children:[l.jsx("input",{type:"number",min:"0",max:"23",value:$r,onChange:f=>Ws({quietStart:Number(f.target.value)})}),l.jsx("span",{children:"to"}),l.jsx("input",{type:"number",min:"0",max:"23",value:Lr,onChange:f=>Ws({quietEnd:Number(f.target.value)})})]})]})]}):l.jsx("div",{className:"plan-teaser",children:"Upgrade or start a trial to unlock real-time nudges and advanced budgeting cycles."})]})]})]}),l.jsxs("div",{className:"transactions-section",children:[l.jsxs("div",{className:"tabRow",children:[l.jsxs("button",{className:v==="expenses"?"tabActive":"tabInactive",onClick:()=>Hu("expenses"),children:["Expenses (",(e.transactions||[]).filter(f=>f.type==="expense").length,")"]}),l.jsxs("button",{className:v==="income"?"tabActive":"tabInactive",onClick:()=>Hu("income"),children:["Income (",(e.transactions||[]).filter(f=>f.type==="income").length,")"]})]}),Mr.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsxs("p",{children:["No ",Gn(v)," transactions yet."]}),l.jsxs("button",{className:"primary-button",onClick:()=>Mu(v),children:["Add Your First ",Gn(v)==="expense"?"Expense":"Income"]})]}):l.jsxs(l.Fragment,{children:[dm.map(f=>{var S;return l.jsx("div",{className:"transaction enhanced-transaction",onClick:()=>sm(f),children:l.jsx("div",{className:"transaction-info",children:l.jsxs("div",{className:"transaction-main",children:[l.jsx("span",{className:"transaction-icon",children:((S=t[f.type].find(O=>O.name===f.category))==null?void 0:S.icon)||"💰"}),l.jsxs("div",{className:"transaction-details-main",children:[l.jsx("span",{className:"transaction-name",children:f.name}),l.jsxs("div",{className:"transaction-meta",children:[f.category," • ",f.date,f.receipt&&l.jsx("span",{className:"receipt-indicator",children:"📎"})]})]}),l.jsxs("div",{className:"transaction-amounts",children:[l.jsxs("span",{className:`transaction-amount ${f.type}`,children:[f.type==="income"?"+":"-","$",f.amount.toFixed(2)]}),f.budgetedAmount&&l.jsxs("span",{className:"budgeted-amount",children:["Budget: $",f.budgetedAmount.toFixed(2)]})]})]})})},f.id)}),hm()]})]}),l.jsx("button",{className:"fab",onClick:()=>Mu(v),children:"+"}),x&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent enhanced-modal",children:[l.jsx("h2",{className:"header modal-header",children:p?"Edit Transaction":`Add ${j.type==="expense"?"Expense":"Income"}`}),l.jsx("input",{className:"input",placeholder:"Description",value:j.name,onChange:f=>D({...j,name:f.target.value}),disabled:_}),l.jsx("input",{className:"input",placeholder:"Amount",type:"number",step:"0.01",value:j.amount,onChange:f=>D({...j,amount:f.target.value}),disabled:_}),j.type==="expense"&&l.jsx("input",{className:"input",placeholder:"Budgeted amount (optional)",type:"number",step:"0.01",value:j.budgetedAmount,onChange:f=>D({...j,budgetedAmount:f.target.value}),disabled:_}),l.jsxs("select",{className:"input",value:j.category,onChange:f=>D({...j,category:f.target.value}),disabled:_,children:[l.jsx("option",{value:"",children:"Select Category"}),(Ku=t[Gn(j.type)])==null?void 0:Ku.map(f=>l.jsxs("option",{value:f.name,children:[f.icon," ",f.name]},f.name))]}),l.jsxs("div",{className:"receipt-upload-section",children:[l.jsx("label",{className:"receipt-upload-label",children:"📎 Attach Receipt (Optional)"}),l.jsx("input",{type:"file",accept:"image/*",className:"receipt-input",onChange:f=>{const S=f.target.files[0];if(S){const O=new FileReader;O.onloadend=()=>{D({...j,receipt:O.result})},O.readAsDataURL(S)}},disabled:_}),j.receipt&&l.jsxs("div",{className:"receipt-preview",children:[l.jsx("img",{src:j.receipt||"/placeholder.svg",alt:"Receipt preview",className:"receipt-preview-img"}),l.jsx("button",{type:"button",className:"remove-receipt",onClick:()=>D({...j,receipt:null}),disabled:_,children:"Remove"})]})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsxs("button",{className:"addButton primary-button",onClick:im,disabled:_,children:[_?"Saving...":p?"Update":"Add"," Transaction"]}),l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>{C(!1),m(null)},disabled:_,children:"Cancel"})]})]})}),H&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent small-modal",children:[l.jsxs("h3",{className:"header modal-header",children:["Remove ",H.category]}),H.remaining>0?l.jsxs(l.Fragment,{children:[l.jsxs("p",{children:["Reallocate ",wa(H.remaining)," from ",H.category," before deleting."]}),l.jsxs("select",{className:"input",value:H.reallocateTo,onChange:f=>G(S=>({...S,reallocateTo:f.target.value})),children:[l.jsx("option",{value:"",children:"Choose category"}),te.filter(f=>f.category!==H.category).map(f=>l.jsx("option",{value:f.category,children:f.category},f.category))]})]}):l.jsxs("p",{children:["Delete ",H.category," from this cycle?"]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:Gp,disabled:H.remaining>0&&!H.reallocateTo,children:"Confirm"}),l.jsx("button",{className:"cancelButton secondary-button",onClick:Kp,children:"Cancel"})]})]})}),Y&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent large-modal",children:[l.jsx("h3",{className:"header modal-header",children:"Change log"}),g.length===0?l.jsx("div",{className:"empty-state small",children:"No changes recorded yet."}):l.jsx("ul",{className:"change-log-list",children:g.map((f,S)=>{const O=(f==null?void 0:f.at)||(f==null?void 0:f.timestamp),I=O?new Date(O).toLocaleString():"Recent";return l.jsxs("li",{className:"change-log-item",children:[l.jsx("span",{className:"change-log-time",children:I}),l.jsx("span",{className:"change-log-message",children:(f==null?void 0:f.message)||"Updated budget"})]},`${I}-${S}`)})}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>R(!1),children:"Close"})})]})}),U&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent enhanced-modal",children:[l.jsx("h3",{className:"header modal-header",children:"Edit cycle"}),l.jsx("div",{className:"cycle-option-grid",children:Rp.map(f=>{const S=f.requiresPaid&&!c,O=z.type===f.type;return l.jsxs("button",{type:"button",className:`cycle-option ${O?"selected":""} ${S?"locked":""}`,onClick:()=>{S||J(I=>({...I,type:f.type}))},disabled:S,children:[l.jsxs("div",{className:"cycle-option-title",children:[f.label,S&&l.jsx("span",{className:"lock-icon",children:"🔒"})]}),l.jsx("div",{className:"cycle-option-description",children:f.requiresPaid?"Requires trial or paid":"Included in Free"})]},f.type)})}),z.type==="per-paycheck"&&l.jsxs("div",{className:"cycle-config-row",children:[l.jsx("label",{className:"input-label",htmlFor:"edit-pay-frequency",children:"Paycheck frequency (days)"}),l.jsx("input",{id:"edit-pay-frequency",type:"number",className:"input",min:"7",max:"45",value:z.payFrequencyDays,onChange:f=>J(S=>({...S,payFrequencyDays:f.target.value}))})]}),z.type==="custom"&&l.jsxs("div",{className:"cycle-config-row",children:[l.jsx("label",{className:"input-label",htmlFor:"edit-cycle-length",children:"Cycle length (days)"}),l.jsx("input",{id:"edit-cycle-length",type:"number",className:"input",min:"5",max:"120",value:z.customDays,onChange:f=>J(S=>({...S,customDays:f.target.value}))})]}),l.jsxs("div",{className:"cycle-config-row",children:[l.jsx("label",{className:"input-label",htmlFor:"edit-cycle-start",children:"Cycle start date"}),l.jsx("input",{id:"edit-cycle-start",type:"date",className:"input",value:z.startDate,onChange:f=>J(S=>({...S,startDate:f.target.value}))})]}),!c&&l.jsx("p",{className:"plan-teaser",children:"Upgrade or begin a trial to use paycheck and custom budgeting cycles."}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:Yp,disabled:!c&&z.type!=="monthly",children:"Save cycle"}),l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>F(!1),children:"Cancel"})]})]})}),T&&l.jsxs("div",{className:"snackbar",children:[l.jsx("span",{children:T.message}),T.action&&l.jsx("button",{className:"link-button",onClick:()=>{T.action(),Du()},children:T.actionLabel||"Undo"}),l.jsx("button",{className:"link-button",onClick:Du,children:"Dismiss"})]}),Qe&&l.jsxs("div",{className:"nudge-toast",role:"status",children:[l.jsxs("div",{className:"nudge-copy",children:[l.jsx("strong",{children:Qe.category})," is at ",(Qe.ratio*100).toFixed(0),"% of its budget."]}),l.jsxs("div",{className:"nudge-actions",children:[l.jsx("button",{className:"link-button",onClick:()=>{var f;nm(Qe.category),(f=document.getElementById("allocations"))==null||f.scrollIntoView({behavior:"smooth"})},children:"Adjust budget"}),l.jsx("button",{className:"link-button",onClick:()=>rm(),children:"Snooze"})]})]})]})}const Od=E.shape({id:E.string.isRequired,name:E.string.isRequired,amount:E.number.isRequired,budgetedAmount:E.number,category:E.string.isRequired,type:E.oneOf(["income","expense"]).isRequired,date:E.string.isRequired,receipt:E.string}),Rd=E.shape({name:E.string.isRequired,icon:E.string.isRequired});Tu.propTypes={budget:E.shape({id:E.string.isRequired,name:E.string.isRequired,transactions:E.arrayOf(Od),categoryBudgets:E.arrayOf(E.shape({category:E.string.isRequired,budgetedAmount:E.number.isRequired}))}).isRequired,categories:E.shape({income:E.arrayOf(Rd).isRequired,expense:E.arrayOf(Rd).isRequired}).isRequired,setViewMode:E.func.isRequired,setBudgets:E.func.isRequired,budgets:E.arrayOf(E.shape({id:E.string.isRequired,name:E.string.isRequired,transactions:E.arrayOf(Od)})).isRequired,setSelectedBudget:E.func.isRequired,onMetadataChange:E.func};Tu.defaultProps={onMetadataChange:void 0};function Dp({categories:e,setCategories:t,budgets:n,setViewMode:r}){const[s,i]=b.useState("expense"),[o,a]=b.useState(!1),[u,c]=b.useState({name:"",icon:"💲"}),[d,h]=b.useState(null),g=["💲","💰","💳","🏦","🍔","🍽️","☕","🛒","🚗","⛽","✈️","🚌","🏠","💡","📱","💻","🎮","🎬","📚","🏥","💊","🛍️","👕","🎁","💼","📈","🔧","🎯","🧾","⭐","🎉","📄"],v=()=>{if(!u.name.trim())return;if(e[s].some(m=>m.name===u.name.trim())){alert("Category already exists!");return}const p={...e,[s]:[...e[s],{name:u.name.trim(),icon:u.icon}]};t(p),a(!1),c({name:"",icon:"💲"})},k=p=>{h({...p,originalName:p.name})},x=()=>{if(!d.name.trim())return;const p={...e,[s]:e[s].map(m=>m.name===d.originalName?{name:d.name.trim(),icon:d.icon}:m)};t(p),h(null)},C=p=>{if(n.some(w=>w.transactions.some(_=>_.category===p&&_.type===s))){alert("Cannot delete category in use.");return}const y={...e,[s]:e[s].filter(w=>w.name!==p)};t(y)};return l.jsxs("div",{children:[l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>r("budgets"),children:"← Back to Budgets"}),l.jsx("h1",{className:"header",children:"Manage Categories"}),l.jsxs("div",{className:"tabRow",children:[l.jsx("button",{className:s==="expense"?"tabActive":"tabInactive",onClick:()=>i("expense"),children:"Expenses"}),l.jsx("button",{className:s==="income"?"tabActive":"tabInactive",onClick:()=>i("income"),children:"Income"})]}),l.jsxs("button",{className:"addButton primary-button",onClick:()=>a(!0),children:["Add ",s.charAt(0).toUpperCase()+s.slice(1)," Category"]}),e[s].length===0?l.jsxs("p",{className:"empty-state",children:["No ",s," categories yet."]}):e[s].map(p=>l.jsx("div",{className:"transaction category-item",children:d&&d.originalName===p.name?l.jsxs("div",{className:"category-edit",children:[l.jsx("input",{className:"input",value:d.name,onChange:m=>h({...d,name:m.target.value})}),l.jsx("div",{className:"icon-selector",children:g.map(m=>l.jsx("button",{className:`icon-button ${d.icon===m?"selected":""}`,onClick:()=>h({...d,icon:m}),children:m},m))}),l.jsxs("div",{className:"category-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:x,children:"Save"}),l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>h(null),children:"Cancel"})]})]}):l.jsxs("div",{className:"category-display",children:[l.jsxs("span",{className:"category-info",children:[p.icon," ",p.name]}),l.jsxs("div",{className:"category-actions",children:[l.jsx("button",{className:"action-button",onClick:()=>k(p),children:"Edit"}),l.jsx("button",{className:"action-button delete",onClick:()=>C(p.name),children:"Delete"})]})]})},p.name)),o&&l.jsx("div",{className:"modalBackdrop",children:l.jsxs("div",{className:"modalContent",children:[l.jsxs("h2",{className:"header modal-header",children:["Add ",s.charAt(0).toUpperCase()+s.slice(1)," Category"]}),l.jsx("input",{className:"input",placeholder:"Category Name",value:u.name,onChange:p=>c({...u,name:p.target.value})}),l.jsx("div",{className:"icon-selector",children:g.map(p=>l.jsx("button",{className:`icon-button ${u.icon===p?"selected":""}`,onClick:()=>c({...u,icon:p}),children:p},p))}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"addButton primary-button",onClick:v,children:"Add"}),l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>a(!1),children:"Cancel"})]})]})})]})}const Ww=E.shape({id:E.string.isRequired,name:E.string.isRequired,amount:E.number.isRequired,budgetedAmount:E.number,category:E.string.isRequired,type:E.oneOf(["income","expense"]).isRequired,date:E.string.isRequired,receipt:E.string}),Dd=E.shape({name:E.string.isRequired,icon:E.string.isRequired});Dp.propTypes={categories:E.shape({income:E.arrayOf(Dd).isRequired,expense:E.arrayOf(Dd).isRequired}).isRequired,setCategories:E.func.isRequired,budgets:E.arrayOf(E.shape({id:E.string.isRequired,transactions:E.arrayOf(Ww).isRequired})).isRequired,setViewMode:E.func.isRequired};const Ai=[25,50,75,100],Hw=1e3*60*60*24,_a=Hw*7,Vw=["trial","paid","pro","premium","plus"],er=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(e||0)),Ip=e=>({...e,amount:Number(e.amount||0),contributed_at:e.contributed_at||e.date||e.created_at||new Date().toISOString()}),gi=e=>{const t=(e.goal_contributions||e.contributions||[]).map(Ip);return t.sort((n,r)=>new Date(r.contributed_at)-new Date(n.contributed_at)),{...e,targetAmount:Number(e.target_amount??e.targetAmount??0),targetDate:e.target_date||e.targetDate||null,status:e.status||"active",milestones:Array.isArray(e.milestones)&&e.milestones.length?e.milestones:Ai,linked_budget_id:e.linked_budget_id||e.linkedBudgetId||null,goal_contributions:t}},Gw=e=>{const t=e.created_at||e.createdAt,r=e.start_date||e.startDate||t,s=r?new Date(r):new Date;return Number.isNaN(s.getTime())?new Date:s},Kw=e=>{if(!e.targetDate)return null;const t=new Date(e.targetDate);return Number.isNaN(t.getTime())?null:t},Qw=e=>{const t=new Date(e),n=t.getDay(),r=t.getDate()-n+(n===0?-6:1),s=new Date(t.setDate(r));return s.setHours(0,0,0,0),s},tr=e=>{const t=new Date,n=e.goal_contributions||[],r=n.reduce((_,N)=>_+Number(N.amount||0),0),s=Number(e.targetAmount||0),i=s>0?Math.min(100,r/s*100):0,o=Gw(e),a=Kw(e);let u=a?a.getTime()-o.getTime():null;u!==null&&u<=0&&(u=_a);const c=Math.max(0,t.getTime()-o.getTime()),d=u&&u>0?Math.min(1,Math.max(0,c/u)):1,h=s*d,g=u?Math.max(1,Math.ceil(u/_a)):1,v=g>0?s/g:s,k=Qw(t),x=new Date(k.getTime()+_a),C=n.filter(_=>{const N=new Date(_.contributed_at);return N>=k&&N<x}).reduce((_,N)=>_+Number(N.amount||0),0),p=s*.02,m=r-h;let y="on-track";m>p?y="ahead":m<-p&&(y="behind");const w=Math.max(0,v-C);return{totalContributed:r,progress:i,weeklyTarget:v,contributedThisWeek:C,guidanceShortfall:w,pace:y,plannedTotal:h,totalWeeks:g}};function $p({setViewMode:e,budgets:t=[],setBudgets:n}){const{user:r,userProfile:s}=qs(),i=(s==null?void 0:s.plan_tier)||(s==null?void 0:s.planTier)||"free",o=String(i).toLowerCase(),a=Vw.includes(o),[u,c]=b.useState([]),[d,h]=b.useState(!0),[g,v]=b.useState(null),[k,x]=b.useState(!1),[C,p]=b.useState({name:"",targetAmount:"",targetDate:"",linkedBudgetId:""}),[m,y]=b.useState(!1),[w,_]=b.useState(""),[N,j]=b.useState(""),[D,q]=b.useState(""),[V,te]=b.useState(null),[oe,Ge]=b.useState(null),ae=b.useRef({}),[T,W]=b.useState(!1),[Y,R]=b.useState(!1),U=b.useCallback(async()=>{if(r){h(!0),v(null);try{const{data:P,error:$}=await Ew(r.id);if($){console.error("Error loading goals:",$),v($.message||"Failed to load goals");return}const Q=(P||[]).map(J=>gi(J));c(Q);const z={};Q.forEach(J=>{z[J.id]=tr(J).progress}),ae.current=z,Q.length&&_(J=>J||Q[0].id)}catch(P){console.error("Unexpected error loading goals:",P),v(P.message||"Unexpected error loading goals")}finally{h(!1)}}},[r]);b.useEffect(()=>{r&&U()},[r,U]);const F=async P=>{if(P.preventDefault(),!r)return;if(!a){alert("Goal creation is available during trial or paid plans.");return}const $=parseFloat(C.targetAmount);if(!C.name.trim()||Number.isNaN($)||$<=0){alert("Please provide a goal name and a positive target amount.");return}W(!0);try{const{data:Q,error:z}=await Cw(r.id,{name:C.name.trim(),targetAmount:$,targetDate:C.targetDate?new Date(C.targetDate).toISOString():null,milestones:Ai,status:"active",linkedBudgetId:C.linkedBudgetId||null});if(z){console.error("Error creating goal:",z),alert(z.message||"Failed to create goal");return}const J=Q==null?void 0:Q[0];if(J){const se=gi(J);c(Ce=>[se,...Ce]),ae.current[se.id]=tr(se).progress,_(se.id)}p({name:"",targetAmount:"",targetDate:"",linkedBudgetId:""}),x(!1)}catch(Q){console.error("Unexpected error creating goal:",Q),alert("Unexpected error creating goal. Please try again.")}finally{W(!1)}},H=async P=>{if(confirm("Delete this goal? Contributions will remain recorded."))try{const{error:$}=await Tw(P);if($){console.error("Error deleting goal:",$),alert($.message||"Failed to delete goal");return}c(z=>{const J=z.filter(se=>se.id!==P);return J.length===0?_(""):P===w&&_(J[0].id),J});const Q={...ae.current};delete Q[P],ae.current=Q}catch($){console.error("Unexpected error deleting goal:",$),alert("Unexpected error deleting goal")}},G=async(P,$)=>{try{const{data:Q,error:z}=await bw(P.id,{linkedBudgetId:$||null});if(z){console.error("Error linking budget:",z),alert(z.message||"Failed to link budget");return}if(Q!=null&&Q[0]){const J=gi(Q[0]);c(se=>se.map(Ce=>Ce.id===P.id?J:Ce))}else c(J=>J.map(se=>se.id===P.id?{...se,linked_budget_id:$||null}:se))}catch(Q){console.error("Unexpected error linking budget:",Q),alert("Unexpected error while linking budget")}},Ke=()=>{y(!1),j(""),q("")},Ae=P=>{j($=>P==="←"?$.slice(0,-1):P==="."&&$.includes(".")?$:`${$}${P}`)},Qe=async()=>{const P=parseFloat(N);if(!w||Number.isNaN(P)||P<=0){alert("Enter a valid contribution amount");return}if(!a){alert("Logging contributions is available during trial or paid plans.");return}const $=u.find(z=>z.id===w);if(!$){alert("Select a goal");return}R(!0);const Q=new Date().toISOString();try{const z=ae.current[$.id]??tr($).progress,{data:J,error:se}=await Pw($.id,{amount:P,date:Q,note:D});if(se){console.error("Error logging contribution:",se),alert(se.message||"Failed to log contribution");return}const Ce=(J||[]).map(Ip);if(Ce.length){const Fe=gi({...$,goal_contributions:[...Ce,...$.goal_contributions||[]]}),Kt=tr(Fe).progress;Oe(Fe,z,Kt),ae.current[$.id]=Kt,c(Vn=>Vn.map(vt=>vt.id===$.id?Fe:vt)),await Be($,P,Q)}Ke()}catch(z){console.error("Unexpected error adding contribution:",z),alert("Unexpected error adding contribution")}finally{R(!1)}},Oe=(P,$,Q)=>{const J=(P.milestones||Ai).slice().sort((se,Ce)=>se-Ce).find(se=>$<se&&Q>=se);J!==void 0&&(te(P.id),Ge({goalName:P.name,milestone:J}),setTimeout(()=>{te(null),Ge(null)},4e3))},Be=async(P,$,Q)=>{if(!(!P.linked_budget_id||!n||!t.find(J=>J.id===P.linked_budget_id)))try{const J={name:`Goal Contribution - ${P.name}`,amount:$,budgetedAmount:0,category:"Savings Goals",type:"expense",date:Q,receipt:null},{data:se,error:Ce}=await Cp(P.linked_budget_id,J);if(Ce){console.error("Failed to sync contribution to budget:",Ce);return}const Fe=se==null?void 0:se[0],Kt=Fe?{id:Fe.id,name:Fe.name,amount:Fe.amount,budgetedAmount:Fe.budgeted_amount,category:Fe.category,type:Fe.type,date:Fe.date,receipt:Fe.receipt_url}:{id:`goal-sync-${Date.now()}`,...J};n(Vn=>Vn.map(vt=>vt.id===P.linked_budget_id?{...vt,transactions:[...vt.transactions||[],Kt]}:vt))}catch(J){console.error("Unexpected error syncing contribution to budget:",J)}},xn=P=>{const $=tr(P);return(P.milestones||Ai).filter(z=>$.progress>=z)},B=b.useMemo(()=>[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","←"]],[]);return l.jsxs("div",{className:"goals-screen",children:[l.jsxs("div",{className:"goals-header",children:[l.jsx("button",{className:"ghost-button",onClick:()=>e("budgets"),children:"← Budgets"}),l.jsx("h2",{children:"Savings Goals"}),l.jsx("p",{className:"tagline",children:"Track milestones, weekly pace, and stay motivated."})]}),!a&&l.jsx("div",{className:"plan-teaser goals-teaser",children:"Goal creation and contribution tracking unlock during your free trial or with Pocket Budget Plus."}),g&&l.jsx("div",{className:"error-banner",children:g}),d?l.jsx("div",{className:"loading-goals",children:"Loading goals…"}):u.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("p",{children:"Start a new savings goal to build momentum."}),l.jsx("button",{className:"primary-button",onClick:()=>x(!0),children:"Create your first goal"})]}):u.map(P=>{const $=tr(P),Q=xn(P);return l.jsxs("div",{className:"goal-card",children:[l.jsxs("div",{className:"goal-card-header",children:[l.jsxs("div",{children:[l.jsx("h3",{children:P.name}),l.jsx("span",{className:`goal-pace-badge ${$.pace}`,children:$.pace.replace("-"," ")}),$.progress>=100&&l.jsx("span",{className:"goal-complete",children:"🎉 Complete"})]}),l.jsx("button",{className:"icon-button",onClick:()=>H(P.id),title:"Delete goal",children:"🗑️"})]}),l.jsx("div",{className:"goal-progress-bar",children:l.jsx("div",{className:"goal-progress",style:{width:`${$.progress}%`}})}),l.jsxs("div",{className:"goal-progress-meta",children:[l.jsxs("span",{children:[er($.totalContributed)," saved"]}),l.jsxs("span",{children:["Target ",er(P.targetAmount)]})]}),l.jsxs("div",{className:"goal-meta-grid",children:[l.jsxs("div",{children:[l.jsx("p",{className:"meta-label",children:"Weekly target"}),l.jsx("p",{className:"meta-value",children:er($.weeklyTarget)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"meta-label",children:"This week"}),l.jsx("p",{className:"meta-value",children:er($.contributedThisWeek)})]}),P.targetDate&&l.jsxs("div",{children:[l.jsx("p",{className:"meta-label",children:"Target date"}),l.jsx("p",{className:"meta-value",children:new Date(P.targetDate).toLocaleDateString()})]}),l.jsxs("div",{children:[l.jsx("p",{className:"meta-label",children:"Milestones"}),l.jsx("p",{className:"meta-value",children:Q.length>0?`${Q.join("% • ")}%`:"—"})]})]}),$.pace==="behind"&&$.guidanceShortfall>0&&l.jsxs("div",{className:"goal-guidance",children:["Add ",er($.guidanceShortfall)," this week to catch up."]}),l.jsx("div",{className:"goal-budget-link",children:l.jsxs("label",{children:["Sync with budget",l.jsxs("select",{value:P.linked_budget_id||"",onChange:z=>G(P,z.target.value),children:[l.jsx("option",{value:"",children:"Not linked"}),t.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]})]})}),P.goal_contributions&&P.goal_contributions.length>0&&l.jsxs("div",{className:"goal-contributions",children:[l.jsx("h4",{children:"Recent contributions"}),l.jsx("ul",{children:P.goal_contributions.slice(0,4).map(z=>l.jsxs("li",{children:[l.jsx("span",{children:new Date(z.contributed_at).toLocaleDateString()}),l.jsx("span",{children:er(z.amount)})]},z.id))})]})]},P.id)}),l.jsx("button",{className:"fab",onClick:()=>{if(!u.length){x(!0);return}if(!w&&u.length&&_(u[0].id),!a){alert("Upgrade or start a trial to log contributions in real time.");return}y(!0)},title:"Log contribution",children:"➕"}),l.jsx("button",{className:"secondary-button",onClick:()=>x(!0),style:{width:"100%",marginTop:"1rem"},children:"New goal"}),k&&l.jsx("div",{className:"modal-backdrop",children:l.jsxs("div",{className:"modal",children:[l.jsx("h3",{children:"Create goal"}),!a&&l.jsx("div",{className:"plan-teaser",children:"Goal creation is part of Pocket Budget Plus. Start a trial to map savings to your next big milestone."}),l.jsxs("form",{onSubmit:F,className:"goal-form",children:[l.jsxs("fieldset",{disabled:!a,children:[l.jsxs("label",{children:["Goal name",l.jsx("input",{type:"text",value:C.name,onChange:P=>p($=>({...$,name:P.target.value})),placeholder:"Emergency fund",required:!0})]}),l.jsxs("label",{children:["Target amount",l.jsx("input",{type:"number",min:"0",step:"0.01",value:C.targetAmount,onChange:P=>p($=>({...$,targetAmount:P.target.value})),placeholder:"5000",required:!0})]}),l.jsxs("label",{children:["Target date",l.jsx("input",{type:"date",value:C.targetDate,onChange:P=>p($=>({...$,targetDate:P.target.value}))})]}),l.jsxs("label",{children:["Link to budget",l.jsxs("select",{value:C.linkedBudgetId,onChange:P=>p($=>({...$,linkedBudgetId:P.target.value})),children:[l.jsx("option",{value:"",children:"Not linked"}),t.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{type:"button",className:"ghost-button",onClick:()=>x(!1),children:"Cancel"}),l.jsx("button",{type:"submit",className:"primary-button",disabled:T||!a,children:T?"Saving…":"Create"})]})]})]})}),m&&l.jsx("div",{className:"modal-backdrop",children:l.jsxs("div",{className:"modal keypad-modal",children:[l.jsx("h3",{children:"Log contribution"}),!a&&l.jsx("p",{className:"plan-teaser",children:"Upgrade or start a trial to log automatic goal contributions."}),l.jsxs("fieldset",{disabled:!a,children:[l.jsxs("label",{children:["Choose goal",l.jsx("select",{value:w,onChange:P=>_(P.target.value),children:u.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))})]}),l.jsx("div",{className:"keypad-display",children:N||"0"}),l.jsx("div",{className:"numeric-keypad",children:B.map((P,$)=>l.jsx("div",{className:"keypad-row",children:P.map(Q=>l.jsx("button",{type:"button",onClick:()=>Ae(Q),children:Q},Q))},$))}),l.jsxs("label",{children:["Note (optional)",l.jsx("input",{type:"text",value:D,onChange:P=>q(P.target.value),placeholder:"Paycheck transfer"})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{type:"button",className:"ghost-button",onClick:Ke,children:"Cancel"}),l.jsx("button",{type:"button",className:"primary-button",onClick:Qe,disabled:Y||!a,children:Y?"Saving…":"Log"})]})]})]})}),V&&l.jsx("div",{className:"confetti-overlay",children:Array.from({length:60}).map((P,$)=>l.jsx("span",{className:"confetti-piece",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*1.5}s`},children:"🎉"},$))}),oe&&l.jsxs("div",{className:"milestone-banner",children:[l.jsx("strong",{children:oe.goalName})," reached ",oe.milestone,"% of the goal!"]})]})}$p.propTypes={setViewMode:E.func.isRequired,budgets:E.arrayOf(E.shape({id:E.oneOfType([E.string,E.number]).isRequired,name:E.string.isRequired,transactions:E.arrayOf(E.shape({id:E.oneOfType([E.string,E.number]),name:E.string.isRequired,amount:E.number.isRequired,budgetedAmount:E.number,category:E.string.isRequired,type:E.string.isRequired,date:E.string.isRequired,receipt:E.string}))})),setBudgets:E.func.isRequired};function Lp({budget:e,setViewMode:t}){const[n,r]=b.useState(null),[s,i]=b.useState(!0),[o,a]=b.useState(null),u=b.useCallback(()=>{const d=e.transactions||[],h=d.filter(w=>w.type==="income").reduce((w,_)=>w+_.amount,0),g=d.filter(w=>w.type==="expense").reduce((w,_)=>w+_.amount,0),v=h-g,k=h>0?v/h*100:0,x={};d.filter(w=>w.type==="expense").forEach(w=>{x[w.category]=(x[w.category]||0)+w.amount});const C=Object.entries(x).sort(([,w],[,_])=>_-w)[0],p=new Date,m=d.filter(w=>{const _=new Date(w.date);return(p-_)/(1e3*60*60*24)<=7&&w.type==="expense"}).reduce((w,_)=>w+_.amount,0),y=d.filter(w=>{const _=new Date(w.date),N=(p-_)/(1e3*60*60*24);return N>7&&N<=14&&w.type==="expense"}).reduce((w,_)=>w+_.amount,0);return{totalIncome:h,totalExpenses:g,balance:v,savingsRate:k,expensesByCategory:x,topExpenseCategory:C,last7Days:m,previous7Days:y,transactionCount:d.length,avgTransactionAmount:d.length>0?(h+g)/d.length:0}},[e]),c=b.useCallback(async()=>{try{i(!0);const d=u(),h=await Yw(d);r(h),a(null)}catch(d){a("Failed to generate AI insights. Please try again."),console.error("AI Insights Error:",d)}finally{i(!1)}},[u]);return b.useEffect(()=>{c()},[c]),s?l.jsxs("div",{children:[l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:"← Back to Details"}),l.jsx("h1",{className:"header",children:"AI Financial Report"}),l.jsxs("div",{className:"ai-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Analyzing your financial data..."}),l.jsx("p",{className:"loading-subtext",children:"Generating personalized insights and recommendations"})]})]}):o?l.jsxs("div",{children:[l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:"← Back to Details"}),l.jsx("h1",{className:"header",children:"AI Financial Report"}),l.jsxs("div",{className:"error-state",children:[l.jsx("p",{className:"error-message",children:o}),l.jsx("button",{className:"primary-button",onClick:c,children:"Try Again"})]})]}):l.jsxs("div",{children:[l.jsx("button",{className:"cancelButton secondary-button",onClick:()=>t("details"),children:"← Back to Details"}),l.jsx("h1",{className:"header",children:"AI Financial Report"}),l.jsxs("div",{className:"compact-health-score",children:[l.jsxs("div",{className:"health-score-content",children:[l.jsxs("div",{className:"health-score-number",children:[n.healthScore,"/10"]}),l.jsx("div",{className:"health-score-label",children:"Financial Health"})]}),l.jsx("div",{className:"health-score-bar",children:l.jsx("div",{className:"health-score-fill",style:{width:`${n.healthScore/10*100}%`}})})]}),l.jsxs("div",{className:"report-section",children:[l.jsx("h2",{className:"section-title",children:"📋 Budget Optimization"}),n.budgetSuggestions.map((d,h)=>l.jsxs("div",{className:"budget-suggestion",children:[d.rule&&l.jsxs("div",{className:"budget-rule",children:[l.jsx("h3",{children:d.rule}),l.jsxs("div",{className:"budget-breakdown",children:[l.jsx("div",{children:d.needs}),l.jsx("div",{children:d.wants}),l.jsx("div",{children:d.savings})]})]}),d.category&&l.jsxs("div",{className:"category-suggestion",children:[l.jsxs("strong",{children:[d.category,":"]})," Currently ",d.current," - ",d.suggestion]})]},h))]}),l.jsxs("div",{className:"summary-callout",children:[l.jsx("div",{className:"callout-icon",children:"💡"}),l.jsxs("div",{className:"callout-content",children:[l.jsx("h3",{className:"callout-title",children:"Financial Overview"}),l.jsx("p",{className:"callout-text",children:n.summary})]})]}),l.jsxs("div",{className:"report-section",children:[l.jsx("h2",{className:"section-title",children:"⚖️ Strengths & Areas for Growth"}),l.jsxs("div",{className:"strengths-improvements-grid",children:[l.jsxs("div",{className:"strengths-column",children:[l.jsx("h3",{className:"column-title",children:"✅ Your Strengths"}),n.strengths.map((d,h)=>l.jsxs("div",{className:"strength-item-compact",children:[l.jsx("span",{className:"strength-icon",children:"✓"}),l.jsx("span",{children:d})]},h))]}),l.jsxs("div",{className:"improvements-column",children:[l.jsx("h3",{className:"column-title",children:"🎯 Growth Areas"}),n.improvements.map((d,h)=>l.jsxs("div",{className:"improvement-item-compact",children:[l.jsx("div",{className:"improvement-title-compact",children:d.area}),l.jsx("div",{className:"improvement-action-compact",children:d.action})]},h))]})]})]}),l.jsxs("div",{className:"report-section",children:[l.jsx("h2",{className:"section-title",children:"📈 Spending Insights"}),l.jsxs("div",{className:"analysis-grid-compact",children:[l.jsx("div",{className:"analysis-item-compact",children:n.spendingAnalysis.trend}),l.jsx("div",{className:"analysis-item-compact",children:n.spendingAnalysis.topCategory}),l.jsx("div",{className:"analysis-item-compact",children:n.spendingAnalysis.avgTransaction}),l.jsx("div",{className:"analysis-item-compact",children:n.spendingAnalysis.frequency})]})]}),l.jsxs("div",{className:"report-section",children:[l.jsx("h2",{className:"section-title",children:"💡 Quick Savings Tips"}),l.jsx("div",{className:"tips-grid",children:n.savingsTips.slice(0,4).map((d,h)=>l.jsx("div",{className:"tip-item-compact",children:d},h))})]}),l.jsxs("div",{className:"report-section",children:[l.jsx("h2",{className:"section-title",children:"🎯 Recommended Goals"}),l.jsxs("div",{className:"goals-container-compact",children:[l.jsxs("div",{className:"goals-column",children:[l.jsx("h3",{children:"Next 3 Months"}),n.goals.shortTerm.slice(0,3).map((d,h)=>l.jsxs("div",{className:"goal-item-compact short-term",children:[l.jsx("span",{children:"📅"}),d]},h))]}),l.jsxs("div",{className:"goals-column",children:[l.jsx("h3",{children:"6+ Months"}),n.goals.longTerm.slice(0,3).map((d,h)=>l.jsxs("div",{className:"goal-item-compact long-term",children:[l.jsx("span",{children:"📆"}),d]},h))]})]})]}),l.jsx("div",{className:"report-actions",children:l.jsx("button",{className:"primary-button",onClick:c,children:"🔄 Generate New Report"})})]})}const Jw=E.shape({id:E.string.isRequired,name:E.string.isRequired,amount:E.number.isRequired,budgetedAmount:E.number,category:E.string.isRequired,type:E.oneOf(["income","expense"]).isRequired,date:E.string.isRequired,receipt:E.string});Lp.propTypes={budget:E.shape({id:E.string.isRequired,name:E.string.isRequired,transactions:E.arrayOf(Jw)}).isRequired,setViewMode:E.func.isRequired};async function Yw(e){var o,a;await new Promise(u=>setTimeout(u,2e3));const t=Xw(e),n=e.last7Days>e.previous7Days?"increasing":"decreasing",r=((o=e.topExpenseCategory)==null?void 0:o[0])||"Unknown",s=((a=e.topExpenseCategory)==null?void 0:a[1])||0,i=e.totalExpenses>0?s/e.totalExpenses*100:0;return{healthScore:t,summary:Zw(e,t),strengths:e_(e),improvements:t_(e),spendingAnalysis:n_(e,n,r,i),savingsTips:r_(e),budgetSuggestions:s_(e),goals:i_(e)}}function Xw(e){let t=5;return e.savingsRate>20?t+=2:e.savingsRate>10?t+=1:e.savingsRate<0&&(t-=2),e.balance>0?t+=1:t-=1,e.transactionCount>10&&(t+=1),(e.topExpenseCategory?e.topExpenseCategory[1]/e.totalExpenses*100:0)>50&&(t-=1),Math.max(1,Math.min(10,t))}function Zw(e,t){return t>=8?"Excellent financial health! You're demonstrating strong budgeting discipline with healthy savings and balanced spending.":t>=6?"Good financial foundation with room for optimization. A few adjustments could significantly improve your financial position.":t>=4?"Your finances need attention. Focus on increasing income, reducing expenses, or both to improve your financial stability.":"Critical financial situation requiring immediate action. Consider seeking financial counseling and implementing strict budgeting measures."}function e_(e){const t=[];return e.savingsRate>15&&t.push("Strong savings discipline - you're saving above the recommended 15% rate"),e.transactionCount>15&&t.push("Excellent expense tracking - you're consistently recording transactions"),e.balance>0&&t.push("Positive cash flow - you're living within your means"),Object.keys(e.expensesByCategory).length>=4&&t.push("Diversified spending across multiple categories shows balanced lifestyle"),t.length===0&&t.push("You're taking the first step by tracking your finances - that's commendable!"),t}function t_(e){const t=[];e.savingsRate<10&&t.push({area:"Increase Savings Rate",suggestion:`Aim to save at least 15-20% of income. Currently at ${e.savingsRate.toFixed(1)}%`,action:"Set up automatic transfers to savings account"}),e.balance<0&&t.push({area:"Address Negative Balance",suggestion:"You're spending more than you earn - immediate action needed",action:"Review and cut non-essential expenses immediately"});const n=e.topExpenseCategory?e.topExpenseCategory[1]/e.totalExpenses*100:0;return n>40&&t.push({area:"Diversify Spending",suggestion:`${e.topExpenseCategory[0]} represents ${n.toFixed(1)}% of expenses`,action:"Look for ways to reduce this dominant expense category"}),e.transactionCount<10&&t.push({area:"Improve Expense Tracking",suggestion:"More consistent transaction recording will provide better insights",action:"Set daily reminders to log expenses"}),t}function n_(e,t,n,r){return{trend:t==="increasing"?"📈 Spending increased in the last week":"📉 Spending decreased in the last week",topCategory:`🏆 Highest expense category: ${n} (${r.toFixed(1)}% of total)`,avgTransaction:`💳 Average transaction: $${e.avgTransactionAmount.toFixed(2)}`,frequency:`📊 Transaction frequency: ${e.transactionCount} transactions recorded`}}function r_(e){const t=[];return e.expensesByCategory.Groceries>e.totalExpenses*.15&&t.push("🛒 Meal planning could reduce grocery costs by 15-20%"),e.expensesByCategory.Entertainment>e.totalExpenses*.1&&t.push("🎮 Consider free entertainment alternatives to reduce costs"),e.expensesByCategory.Transportation>e.totalExpenses*.15&&t.push("🚗 Explore carpooling or public transit options"),t.push("💡 Try the 24-hour rule: wait a day before non-essential purchases"),t.push("🏦 Automate savings to make it effortless"),t}function s_(e){const t=[],n=e.totalExpenses*.5,r=e.totalExpenses*.3,s=e.totalIncome*.2;return t.push({rule:"50/30/20 Budget Rule",needs:`Needs (50%): $${n.toFixed(2)}`,wants:`Wants (30%): $${r.toFixed(2)}`,savings:`Savings (20%): $${s.toFixed(2)}`}),Object.entries(e.expensesByCategory).forEach(([i,o])=>{const a=o/e.totalExpenses*100;a>30&&t.push({category:i,current:`${a.toFixed(1)}%`,suggestion:"Consider reducing this category to below 25% of total expenses"})}),t}function i_(e){const t=[],n=[];if(e.savingsRate<15&&t.push("Increase savings rate to 15% within 2 months"),e.balance<e.totalIncome*.25&&t.push("Build emergency fund equal to 1 month of expenses"),t.push("Track all expenses for 30 consecutive days"),n.push("Build emergency fund covering 3-6 months of expenses"),n.push("Achieve 20% savings rate consistently"),n.push("Diversify income sources"),e.totalIncome>0){const r=e.totalExpenses*6;n.push(`Save $${r.toFixed(2)} for full emergency fund`)}return{shortTerm:t,longTerm:n}}function Oi({message:e="Loading"}){return l.jsx("div",{className:"loading-screen",children:l.jsxs("div",{className:"loading-content",children:[l.jsx("h1",{className:"header",children:"Pocket Budget"}),l.jsx("div",{className:"loading-spinner-large"}),l.jsxs("p",{className:"loading-text",children:[e,"..."]})]})})}Oi.propTypes={message:E.string};function o_(){const[e,t]=b.useState(!1),[n,r]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(""),[u,c]=b.useState(!1),[d,h]=b.useState(""),g=async()=>{c(!0),h("");try{const{error:x}=await Nl("test@me.com","pass123");x&&h(x.message||"Unable to start demo session")}catch(x){console.error("Demo login error:",x),h("Demo login failed. Please try again.")}finally{c(!1)}},v=async x=>{x.preventDefault(),c(!0),h("");try{if(e){if(s!==o){h("Passwords do not match"),c(!1);return}if(s.length<6){h("Password must be at least 6 characters"),c(!1);return}const{error:C}=await mw(n,s);C?h(C.message):(h(""),t(!1),i(""),a(""))}else{const{error:C}=await Nl(n,s);C&&h(C.message)}}catch(C){h("An unexpected error occurred"),console.error("Auth error:",C)}finally{c(!1)}},k=async()=>{c(!0),h("");try{const{error:x}=await gw();x&&h(x.message)}catch(x){h("Failed to sign in with Google"),console.error("Google auth error:",x)}finally{c(!1)}};return l.jsx("div",{className:"login-container",children:l.jsxs("div",{className:"login-content",children:[l.jsxs("div",{className:"login-header",children:[l.jsx("h1",{className:"login-title",children:"Pocket Budget"}),l.jsx("p",{className:"login-subtitle",children:e?"Create your account to get started":"Welcome back! Sign in to continue"})]}),l.jsxs("div",{className:"login-form-container",children:[d&&l.jsx("div",{className:"error-message",children:d}),l.jsx("button",{onClick:g,className:"google-button",style:{background:"linear-gradient(135deg, #0ea5e9, #8b5cf6)",color:"white",border:"none",marginBottom:"1rem"},disabled:u,children:"🎯 Demo Login (test@me.com)"}),l.jsxs("form",{onSubmit:v,className:"login-form",children:[l.jsx("input",{type:"email",placeholder:"Email address",value:n,onChange:x=>r(x.target.value),className:"input login-input",required:!0,disabled:u}),l.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:x=>i(x.target.value),className:"input login-input",required:!0,disabled:u,minLength:6}),e&&l.jsx("input",{type:"password",placeholder:"Confirm password",value:o,onChange:x=>a(x.target.value),className:"input login-input",required:!0,disabled:u,minLength:6}),l.jsx("button",{type:"submit",className:"primary-button login-button",disabled:u,children:u?"Please wait...":e?"Create Account":"Sign In"})]}),l.jsx("div",{className:"login-divider",children:l.jsx("span",{children:"or"})}),l.jsxs("button",{onClick:k,className:"google-button",disabled:u,children:[l.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),l.jsx("div",{className:"login-switch",children:l.jsxs("p",{children:[e?"Already have an account?":"Don't have an account?"," ",l.jsx("button",{type:"button",onClick:()=>{t(!e),h(""),r(""),i(""),a("")},className:"login-switch-button",disabled:u,children:e?"Sign In":"Sign Up"})]})})]})]})})}function Up({title:e,showLogout:t=!1}){const{user:n,userProfile:r}=qs(),s=async()=>{confirm("Are you sure you want to sign out?")&&await yw()};return l.jsx("div",{className:"app-header",children:l.jsxs("div",{className:"header-content",children:[l.jsx("h1",{className:"header-title",children:e}),t&&n&&l.jsxs("div",{className:"header-user",children:[l.jsx("span",{className:"user-email",children:(r==null?void 0:r.full_name)||n.email}),l.jsx("button",{onClick:s,className:"logout-button",title:"Sign out",children:"🚪"})]})]})})}Up.propTypes={title:E.string.isRequired,showLogout:E.bool};const Mp="installPromptDismissedUntil",a_=7*24*60*60*1e3,Id=()=>typeof window>"u"?!1:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,$d=()=>{const e=Date.now()+a_;return localStorage.setItem(Mp,e.toString()),e},l_=()=>{const e=localStorage.getItem(Mp);if(!e)return!1;const t=Number.parseInt(e,10);return Number.isFinite(t)&&Date.now()<t};function Ld(){const[e,t]=b.useState(null),[n,r]=b.useState(!1),[s,i]=b.useState(()=>Id());b.useEffect(()=>{const u=c=>{if(c.preventDefault(),s||l_()){t(null),r(!1);return}t(c),r(!0)};return window.addEventListener("beforeinstallprompt",u),()=>window.removeEventListener("beforeinstallprompt",u)},[s]),b.useEffect(()=>{const u=()=>{i(!0),r(!1),t(null)},c=window.matchMedia("(display-mode: standalone)"),d=()=>{const h=Id();i(h),h&&(r(!1),t(null))};return d(),typeof c.addEventListener=="function"?c.addEventListener("change",d):typeof c.addListener=="function"&&c.addListener(d),window.addEventListener("appinstalled",u),()=>{typeof c.removeEventListener=="function"?c.removeEventListener("change",d):typeof c.removeListener=="function"&&c.removeListener(d),window.removeEventListener("appinstalled",u)}},[]);const o=async()=>{if(!e)return;e.prompt();const{outcome:u}=await e.userChoice;t(null),r(!1),u==="accepted"?console.log("User accepted the install prompt"):(console.log("User dismissed the install prompt"),$d())},a=()=>{r(!1),t(null),$d()};return!n||s?null:l.jsx("div",{className:"install-prompt",children:l.jsxs("div",{className:"install-prompt-content",children:[l.jsx("div",{className:"install-prompt-icon",children:"📱"}),l.jsxs("div",{className:"install-prompt-text",children:[l.jsx("h3",{children:"Install Pocket Budget"}),l.jsx("p",{children:"Add to your home screen for a better experience!"})]}),l.jsxs("div",{className:"install-prompt-actions",children:[l.jsx("button",{onClick:o,className:"install-button",children:"Install"}),l.jsx("button",{onClick:a,className:"dismiss-button",children:"✕"})]})]})})}const Bp="pb:budget-metadata:v1",Fp=typeof window<"u"&&typeof window.localStorage<"u",Pu=()=>{if(!Fp)return{};try{const e=window.localStorage.getItem(Bp);if(!e)return{};const t=JSON.parse(e);return t&&typeof t=="object"?t:{}}catch(e){return console.warn("Failed to parse budget metadata",e),{}}},Au=e=>{if(Fp)try{window.localStorage.setItem(Bp,JSON.stringify(e))}catch(t){console.warn("Failed to persist budget metadata",t)}},gs=()=>{const e=new Date().toISOString();return{cycle:{type:"monthly",label:"Monthly",currentStart:e,payFrequencyDays:30,createdAt:e,lastEditedAt:null},changeLog:[],ads:{enabled:!0,lastSeen:null},insights:{trackedCategories:[],reportSchedule:{day:"sunday",time:"08:00"},quietHours:{start:21,end:7},nudges:{enabled:!1,threshold:.8,snoozedUntil:null,acknowledged:{}}},dismissals:{summary:{},recommendations:{}}}},zp=e=>{if(!e)return gs();const t=Pu();return t[e]||(t[e]=gs(),Au(t)),{...gs(),...t[e]}},u_=(e,t)=>{if(!e)return t;const n=Pu();return n[e]={...gs(),...t},Au(n),n[e]},c_=(e,t)=>{const n=zp(e),r=typeof t=="function"?t(n):{...n,...t};return u_(e,r)},d_=e=>{if(!e)return;const t=Pu();t[e]&&(delete t[e],Au(t))},Ud={income:[{name:"Salary",icon:"💼"},{name:"Freelance",icon:"💻"},{name:"Investment",icon:"📈"},{name:"Business",icon:"🏢"},{name:"Gift",icon:"🎁"}],expense:[{name:"Groceries",icon:"🛒"},{name:"Rent",icon:"🏠"},{name:"Transportation",icon:"🚗"},{name:"Entertainment",icon:"🎮"},{name:"Bills",icon:"🧾"},{name:"Shopping",icon:"🛍️"}]},Sa=()=>({income:Ud.income.map(e=>({...e})),expense:Ud.expense.map(e=>({...e}))});function h_(){const{user:e,loading:t,initializing:n,status:r}=qs(),[s,i]=b.useState([]),[o,a]=b.useState(Sa),[u,c]=b.useState(null),[d,h]=b.useState("budgets"),[g,v]=b.useState("idle"),k=n||t||r==="auth-transition",x=b.useCallback((_,N)=>{var V,te;if(!(_!=null&&_.id))return _;const j=N||_.metadata||zp(_.id),D=gs(),q={...D,...j,cycle:{...D.cycle,...(j==null?void 0:j.cycle)||{}},ads:{...D.ads,...(j==null?void 0:j.ads)||{}},insights:{...D.insights,...(j==null?void 0:j.insights)||{},nudges:{...D.insights.nudges,...((V=j==null?void 0:j.insights)==null?void 0:V.nudges)||{}}},dismissals:{...D.dismissals,...(j==null?void 0:j.dismissals)||{}}};return{..._,metadata:q,cycleMetadata:q.cycle,changeLog:q.changeLog||[],adsEnabled:((te=q.ads)==null?void 0:te.enabled)!==!1,insightsPreferences:q.insights,dismissedInsights:q.dismissals}},[]),C=b.useCallback(_=>{i(N=>{const j=typeof _=="function"?_(N):_;return Array.isArray(j)?j.map(D=>x(D,D==null?void 0:D.metadata)):N})},[x]);b.useEffect(()=>{e||(C([]),a(Sa()),c(null),h("budgets"),v("idle"))},[e]),b.useEffect(()=>{if(!e||t||n)return;let _=!0;v("loading");const N=Sw(e.id),j=jw(e.id);return Promise.allSettled([N,j]).then(D=>{if(!_)return;const[q,V]=D;if(q.status==="fulfilled"){const{data:te,error:oe}=q.value;oe&&console.error("Error loading budgets:",oe);const Ge=(te||[]).map(ae=>({id:ae.id,name:ae.name,createdAt:new Date(ae.created_at).toLocaleDateString(),categoryBudgets:ae.category_budgets||[],transactions:(ae.transactions||[]).map(T=>({id:T.id,name:T.name,amount:Number(T.amount||0),budgetedAmount:T.budgeted_amount??null,category:T.category,type:T.type,date:T.date,receipt:T.receipt_url??null}))}));C(Ge.map(ae=>x(ae)))}else console.error("Unexpected error resolving budgets:",q.reason);if(V.status==="fulfilled"){const{data:te,error:oe}=V.value;oe&&oe.code!=="PGRST116"&&console.error("Error loading categories:",oe),te!=null&&te.categories?a(te.categories):(oe==null?void 0:oe.code)==="PGRST116"&&a(Sa())}else console.error("Unexpected error resolving categories:",V.reason);v("ready")}),()=>{_=!1}},[e,t,n]);const p=async _=>{if(a(_),!!e)try{await Nw(e.id,_)}catch(N){console.error("Error updating categories:",N)}},m=b.useCallback((_,N)=>{if(!_)return;const j=c_(_,N);C(D=>D.map(q=>q.id===_?x({...q},j):q)),c(D=>!D||D.id!==_?D:x({...D},j))},[x,C]),y=b.useCallback(_=>{_&&(d_(_),c(N=>(N==null?void 0:N.id)===_?null:N))},[]),w=b.useMemo(()=>s.find(_=>_.id===(u==null?void 0:u.id))||u,[s,u]);return n?l.jsx(Oi,{message:"Checking your account"}):!e&&!t?l.jsxs(l.Fragment,{children:[l.jsx(o_,{}),l.jsx(Ld,{})]}):k?l.jsx(Oi,{message:"Preparing your experience"}):e&&g!=="ready"?l.jsx(Oi,{message:g==="loading"?"Loading your budgets":"Setting things up"}):l.jsxs("div",{className:"container",children:[l.jsx(Up,{title:"Pocket Budget",showLogout:d!=="ai"}),l.jsx(Ld,{}),d==="budgets"&&l.jsx(bu,{budgets:s,setSelectedBudget:c,setViewMode:h,setBudgets:C,userId:e.id,onMetadataChange:m,onMetadataRemove:y}),d==="goals"&&l.jsx($p,{setViewMode:h,budgets:s,setBudgets:C}),d==="details"&&w&&l.jsx(Tu,{budget:w,categories:o,setViewMode:h,setBudgets:C,budgets:s,setSelectedBudget:c,onMetadataChange:m}),d==="categories"&&l.jsx(Dp,{categories:o,setCategories:p,budgets:s,setViewMode:h}),d==="ai"&&w&&l.jsx(Lp,{budget:w,setViewMode:h})]})}function f_(){return l.jsx(Tp,{children:l.jsx(h_,{})})}const p_=document.getElementById("root"),m_=Xf(p_);m_.render(l.jsx(f_,{}));
